# Coastal Banking - Render Deployment Guide

## Prerequisites

1. **GitHub Repository** - Push your code to GitHub
2. **Render Account** - Create account at [render.com](https://render.com)

---

## Quick Deploy (Blueprint)

1. Push code to GitHub
2. Go to Render Dashboard → **Blueprints** → **New Blueprint Instance**
3. Connect your GitHub repository
4. Render will detect `render.yaml` and create all services automatically

---

## Environment Variables to Set

### Backend (coastal-backend)

| Variable | Required | Description |
|----------|----------|-------------|
| `SECRET_KEY` | ✅ | Auto-generated by Render |
| `DEBUG` | ✅ | Set to `false` |
| `ALLOWED_HOSTS` | ✅ | `.onrender.com` |
| `CORS_ALLOWED_ORIGINS` | ✅ | Your frontend URL (e.g., `https://coastal-frontend.onrender.com`) |
| `DATABASE_URL` | ✅ | Auto-linked from coastal-db |
| `SENDEXA_API_URL` | ⚠️ | SMS gateway URL |
| `SENDEXA_AUTH_TOKEN` | ⚠️ | Base64 encoded API token |
| `SENTRY_DSN` | ⚠️ | Sentry error tracking DSN |

### Frontend (coastal-frontend)

| Variable | Required | Description |
|----------|----------|-------------|
| `VITE_PROD_API_URL` | ✅ | `https://coastal-backend.onrender.com/api/` |
| `VITE_PROD_WS_URL` | ✅ | `wss://coastal-backend.onrender.com/ws/` |
| `VITE_SENTRY_DSN` | ⚠️ | Sentry DSN for frontend |
| `VITE_SENTRY_ENABLED` | ⚠️ | `true` or `false` |

---

## Manual Deployment Steps

### 1. Backend

```bash
# Create Web Service on Render
# - Runtime: Python
# - Build Command: pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate
# - Start Command: daphne -b 0.0.0.0 -p $PORT config.asgi:application
```

### 2. Frontend

```bash
# Create Static Site on Render
# - Build Command: npm install && npm run build
# - Publish Directory: dist
```

### 3. Database

```bash
# Create PostgreSQL database on Render
# Copy DATABASE_URL to backend service
```

---

## Post-Deployment Checklist

- [ ] Set all environment variables
- [ ] Verify database migrations ran
- [ ] Test login functionality
- [ ] Verify WebSocket connection
- [ ] Check Sentry for errors
- [ ] Test SMS notifications (if configured)

---

## Security Notes

⚠️ **NEVER commit actual `.env` files to GitHub**

The following are protected by `.gitignore`:
- `.env`
- `*.sqlite3`
- `local_settings.py`

Use `.env.example` as a template only.
