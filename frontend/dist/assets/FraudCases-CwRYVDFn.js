import{u as B,r,a,j as e}from"./index-CpGjGsyF.js";const D=()=>{const{user:v}=B(),[j,m]=r.useState([]),[n,S]=r.useState({}),[w,_]=r.useState(!0),[A,C]=r.useState(null),[l,p]=r.useState(""),[c,x]=r.useState(""),[g,h]=r.useState(""),[u,f]=r.useState(""),[i,R]=r.useState("all");r.useEffect(()=>{d(),y()},[i]);const d=async()=>{try{const t=await a.get("/api/fraud/cases/",{params:i!=="all"?{status:i}:{}});m(t.data)}catch(t){console.error("Error fetching cases:",t)}finally{_(!1)}},y=async()=>{try{const t=await a.get("/api/fraud/cases/case_stats/");S(t.data)}catch(t){console.error("Error fetching stats:",t)}},k=async(t,s)=>{try{await a.post(`/api/fraud/cases/${t}/assign_investigator/`,{investigator_id:s}),d()}catch(o){console.error("Error assigning investigator:",o)}},z=async t=>{try{await a.post(`/api/fraud/cases/${t}/close_case/`,{resolution_type:l,resolution_details:c}),C(null),p(""),x(""),d(),y()}catch(s){console.error("Error closing case:",s)}},E=async t=>{try{await a.post(`/api/fraud/cases/${t}/add_evidence/`,{evidence_type:g,evidence_data:u}),h(""),f(""),d()}catch(s){console.error("Error adding evidence:",s)}},T=t=>{switch(t){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-blue-500";default:return"bg-gray-500"}},W=t=>{switch(t){case"open":return"bg-red-100 text-red-800";case"investigating":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-green-100 text-green-800";case"escalated":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},b=j.filter(t=>i==="all"||t.status===i);return w?e.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading..."}):e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"24px"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"8px",color:"#1e293b"},children:"Fraud Case Management"}),e.jsx("p",{style:{color:"#64748b"},children:"Manage and track fraud investigation cases"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsx("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"#fee2e2",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px"},children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e293b"},children:n.open_cases||0}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b"},children:"Open Cases"})]})]})}),e.jsx("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"#fef3c7",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px"},children:"ðŸ•"}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e293b"},children:n.investigating||0}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b"},children:"Investigating"})]})]})}),e.jsx("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"#d1fae5",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px"},children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e293b"},children:n.closed_cases||0}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b"},children:"Closed Cases"})]})]})}),e.jsx("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",background:"#dbeafe",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px"},children:"ðŸ“„"}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"24px",fontWeight:"bold",color:"#1e293b"},children:n.total_cases||0}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b"},children:"Total Cases"})]})]})})]}),e.jsx("div",{style:{display:"flex",gap:"4px",marginBottom:"24px",background:"#f1f5f9",borderRadius:"12px",padding:"4px"},children:[{value:"all",label:`All (${n.total_cases||0})`},{value:"open",label:`Open (${n.open_cases||0})`},{value:"investigating",label:`Investigating (${n.investigating||0})`},{value:"closed",label:`Closed (${n.closed_cases||0})`},{value:"escalated",label:`Escalated (${n.escalated_cases||0})`}].map(t=>e.jsx("button",{onClick:()=>R(t.value),style:{flex:1,padding:"12px 16px",background:i===t.value?"white":"transparent",border:"none",borderRadius:"8px",color:i===t.value?"#1e293b":"#64748b",fontWeight:i===t.value?"600":"500",cursor:"pointer",boxShadow:i===t.value?"0 1px 3px rgba(0,0,0,0.1)":"none"},children:t.label},t.value))}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[b.map(t=>e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0",transition:"box-shadow 0.2s"},onMouseEnter:s=>s.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)",onMouseLeave:s=>s.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",color:"white",background:T(t.priority).replace("bg-","").replace("-500","")},children:t.priority.toUpperCase()}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",...(()=>{const s=W(t.status).split(" ");return{background:s[0].replace("bg-",""),color:s[1].replace("text-","").replace("-800","")}})()},children:t.status}),e.jsxs("span",{style:{fontSize:"14px",color:"#64748b"},children:["Case #",t.case_number]})]}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"4px",color:"#1e293b"},children:t.title}),e.jsx("p",{style:{color:"#64748b",marginBottom:"8px"},children:t.description}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",color:"#64748b"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["ðŸ‘¤ ",t.primary_account_details?.owner_name||"Unknown"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["ðŸ’° $",t.estimated_loss||0]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["ðŸ“… ",new Date(t.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.status==="open"&&e.jsx("button",{onClick:()=>k(t.id,v.id),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"6px",background:"white",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Assign to Me"}),t.status==="investigating"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{const s=prompt("Evidence Type (document/screenshot/log/statement/other):",g);if(s){h(s);const o=prompt("Evidence Data:",u);o!==null&&(f(o),E(t.id))}},style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"6px",background:"white",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Add Evidence"}),e.jsx("button",{onClick:()=>{const s=prompt("Resolution Type (confirmed_fraud/false_positive/insufficient_evidence/resolved):",l);if(s){p(s);const o=prompt("Resolution Details:",c);o!==null&&(x(o),z(t.id))}},style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"6px",background:"#1e40af",color:"white",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close Case"})]})]})]}),e.jsxs("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:"16px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",fontSize:"14px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Primary Transaction:"}),e.jsx("p",{children:t.primary_transaction_details?.id||"N/A"}),e.jsxs("p",{children:["$",t.primary_transaction_details?.amount||0]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Account:"}),e.jsx("p",{children:t.primary_account_details?.account_number||"N/A"}),e.jsx("p",{children:t.primary_account_details?.owner_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Investigator:"}),e.jsx("p",{children:t.assigned_investigator_name||"Unassigned"})]})]}),t.investigation_notes&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("strong",{children:"Investigation Notes:"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},children:t.investigation_notes})]}),t.evidence&&t.evidence.length>0&&e.jsxs("div",{children:[e.jsxs("strong",{children:["Evidence (",t.evidence.length,"):"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginTop:"4px"},children:t.evidence.map((s,o)=>e.jsxs("span",{style:{padding:"2px 8px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"12px",background:"#f9fafb"},children:[s.type,": ",s.description]},o))})]})]})]},t.id)),b.length===0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"48px",textAlign:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"ðŸ“„"}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:"#1e293b"},children:"No cases found"}),e.jsx("p",{style:{color:"#64748b"},children:i==="all"?"There are currently no fraud cases to review.":`No ${i} cases found.`})]})]})]})};export{D as default};
