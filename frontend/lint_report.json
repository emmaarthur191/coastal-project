[{"filePath":"E:\\coastal\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\__tests__\\AuthContext.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\__tests__\\ErrorBoundary.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\__tests__\\ProtectedRoute.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\__tests__\\formatters.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\__tests__\\sanitizer.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\__tests__\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\__tests__\\useWebSocket.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'beforeEach' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1420,1423],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1420,1423],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":83,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2614,2617],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2614,2617],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":101,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3166,3169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3166,3169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":102,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3211,3214],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3211,3214],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3847,3850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3847,3850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":130,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4202,4205],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4202,4205],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":131,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4247,4250],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4247,4250],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4469,4472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4469,4472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { renderHook, act, waitFor } from '@testing-library/react';\r\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\r\nimport { useWebSocket } from '../hooks/useWebSocket';\r\n\r\nconst mockUser = { id: 1, role: 'staff' };\r\n\r\n// Mock AuthContext\r\nvi.mock('../context/AuthContext', () => ({\r\n    useAuth: () => ({\r\n        user: mockUser,\r\n        isAuthenticated: true\r\n    })\r\n}));\r\n\r\ndescribe('useWebSocket Hook', () => {\r\n    afterEach(() => {\r\n        vi.restoreAllMocks();\r\n    });\r\n\r\n    it('should initialize correctly', () => {\r\n        const { result } = renderHook(() => useWebSocket({ url: 'ws://localhost/test' }));\r\n\r\n        expect(result.current.isConnected).toBe(false);\r\n        expect(result.current.lastMessage).toBe(null);\r\n    });\r\n\r\n    it('should connect when rendered with a user', async () => {\r\n        const onOpen = vi.fn();\r\n        let capturedOnOpen: (() => void) | null = null;\r\n\r\n        const mockWs = {\r\n            send: vi.fn(),\r\n            close: vi.fn(),\r\n            readyState: 0,\r\n            set onopen(handler: () => void) {\r\n                capturedOnOpen = handler;\r\n            },\r\n            get onopen() {\r\n                return capturedOnOpen;\r\n            }\r\n        };\r\n\r\n        // @ts-expect-error - mocking global WebSocket\r\n        global.WebSocket = vi.fn().mockImplementation(function () { return mockWs; });\r\n        (global.WebSocket as any).OPEN = 1;\r\n\r\n        const { result } = renderHook(() => useWebSocket({\r\n            url: 'ws://localhost/test',\r\n            onOpen,\r\n            reconnectAttempts: 0\r\n        }));\r\n\r\n        await waitFor(() => expect(capturedOnOpen).toBeTruthy());\r\n\r\n        await act(async () => {\r\n            if (capturedOnOpen) {\r\n                (capturedOnOpen as () => void)();\r\n            }\r\n        });\r\n\r\n        await waitFor(() => expect(result.current.isConnected).toBe(true));\r\n        expect(onOpen).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should send messages correctly', async () => {\r\n        const mockSend = vi.fn();\r\n        let capturedOnOpen: (() => void) | null = null;\r\n\r\n        const mockWs = {\r\n            send: mockSend,\r\n            close: vi.fn(),\r\n            readyState: 1, // Already OPEN\r\n            set onopen(handler: () => void) {\r\n                capturedOnOpen = handler;\r\n            },\r\n            get onopen() {\r\n                return capturedOnOpen;\r\n            }\r\n        };\r\n\r\n        // @ts-expect-error - mocking global WebSocket\r\n        global.WebSocket = vi.fn().mockImplementation(function () { return mockWs; });\r\n        (global.WebSocket as any).OPEN = 1;\r\n\r\n        const { result } = renderHook(() => useWebSocket({\r\n            url: 'ws://localhost/test',\r\n            reconnectAttempts: 0\r\n        }));\r\n\r\n        // Wait for connection\r\n        await waitFor(() => expect(capturedOnOpen).toBeTruthy());\r\n        await act(async () => {\r\n            if (capturedOnOpen) {\r\n                (capturedOnOpen as () => void)();\r\n            }\r\n        });\r\n\r\n        await waitFor(() => expect(result.current.isConnected).toBe(true));\r\n\r\n        await act(async () => {\r\n            (mockWs as any).readyState = 1;\r\n            (mockWs as any).onopen();\r\n        });\r\n\r\n        await waitFor(() => expect(result.current.isConnected).toBe(true));\r\n\r\n        act(() => {\r\n            result.current.sendMessage({ type: 'ping' });\r\n        });\r\n\r\n        expect(mockWs.send).toHaveBeenCalledWith(JSON.stringify({ type: 'ping' }));\r\n    });\r\n\r\n    it('should handle incoming messages', async () => {\r\n        const mockWs = { send: vi.fn(), close: vi.fn(), readyState: 0, onopen: null, onmessage: null };\r\n        // @ts-expect-error - mocking global WebSocket\r\n        global.WebSocket = vi.fn().mockImplementation(function () { return mockWs; });\r\n        (global.WebSocket as any).OPEN = 1;\r\n\r\n        const onMessage = vi.fn();\r\n        const { result } = renderHook(() => useWebSocket({\r\n            url: 'ws://localhost/test',\r\n            onMessage,\r\n            reconnectAttempts: 0\r\n        }));\r\n\r\n        await waitFor(() => expect(mockWs.onopen).not.toBeNull());\r\n\r\n        await act(async () => {\r\n            (mockWs as any).readyState = 1;\r\n            (mockWs as any).onopen();\r\n        });\r\n\r\n        await waitFor(() => expect(mockWs.onmessage).not.toBeNull());\r\n\r\n        const mockData = { type: 'test', payload: 'hello' };\r\n        await act(async () => {\r\n            (mockWs as any).onmessage({ data: JSON.stringify(mockData) });\r\n        });\r\n\r\n        await waitFor(() => expect(result.current.lastMessage).toEqual(mockData));\r\n        expect(onMessage).toHaveBeenCalledWith(mockData);\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\AccountsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":52,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { authService } from '../services/api';\r\n\r\ninterface Account {\r\n  id: string;\r\n  account_number: string;\r\n  type: string;\r\n  balance: number;\r\n  status: string;\r\n  owner: {\r\n    id: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    email: string;\r\n  };\r\n  created_at: string;\r\n}\r\n\r\ninterface AccountSummary {\r\n  total_accounts: number;\r\n  active_accounts: number;\r\n  total_balance: number;\r\n  recent_accounts: number;\r\n}\r\n\r\nconst AccountsTab: React.FC = () => {\r\n\r\n\r\n  const [accounts, setAccounts] = useState<Account[]>([]);\r\n  const [summary, setSummary] = useState<AccountSummary | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n\r\n  useEffect(() => {\r\n    loadAccounts();\r\n    loadSummary();\r\n  }, []);\r\n\r\n  const loadAccounts = async () => {\r\n    try {\r\n      const response = await authService.getStaffAccounts();\r\n      if (response.success) {\r\n        // Handle paginated response structure\r\n        const responseData = response.data || {};\r\n        const accountsList = Array.isArray(responseData) ? responseData : (responseData.results || []);\r\n        setAccounts(accountsList);\r\n      } else {\r\n        setError(response.error || 'Failed to load accounts');\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to load accounts');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadSummary = async () => {\r\n    try {\r\n\r\n      const response = await authService.getStaffAccountsSummary();\r\n\r\n      if (response.success) {\r\n        setSummary(response.data);\r\n\r\n      } else {\r\n        console.warn('AccountsTab: Failed to load summary:', response.error);\r\n      }\r\n    } catch (err) {\r\n      console.error('AccountsTab: Exception loading summary:', err);\r\n      // Summary is optional, don't show error\r\n    }\r\n  };\r\n\r\n  const filteredAccounts = accounts.filter(account => {\r\n    const matchesSearch = searchTerm === '' ||\r\n      account.account_number.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      account.owner.first_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      account.owner.last_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      account.owner.email.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    const matchesStatus = statusFilter === 'all' || account.status.toLowerCase() === statusFilter.toLowerCase();\r\n\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat('en-GH', {\r\n      style: 'currency',\r\n      currency: 'GHS'\r\n    }).format(amount);\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-GH');\r\n  };\r\n\r\n  if (loading) {\r\n\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '200px', background: 'blue', color: 'white', padding: '20px' }}>\r\n        <div>LOADING ACCOUNTS... Please wait</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n\r\n    return (\r\n      <div style={{ background: 'red', color: 'white', padding: '20px', border: '5px solid black' }}>\r\n        <h2>ACCOUNTS TAB ERROR</h2>\r\n        <p>Error: {error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n\r\n      {/* Summary Cards */}\r\n      {summary && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n            <div className=\"p-5\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <svg className=\"h-6 w-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\r\n                  </svg>\r\n                </div>\r\n                <div className=\"ml-5 w-0 flex-1\">\r\n                  <dl>\r\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Total Accounts</dt>\r\n                    <dd className=\"text-lg font-medium text-gray-900\">{summary.total_accounts}</dd>\r\n                  </dl>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n            <div className=\"p-5\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <svg className=\"h-6 w-6 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                  </svg>\r\n                </div>\r\n                <div className=\"ml-5 w-0 flex-1\">\r\n                  <dl>\r\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Active Accounts</dt>\r\n                    <dd className=\"text-lg font-medium text-gray-900\">{summary.active_accounts}</dd>\r\n                  </dl>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n            <div className=\"p-5\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <svg className=\"h-6 w-6 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\" />\r\n                  </svg>\r\n                </div>\r\n                <div className=\"ml-5 w-0 flex-1\">\r\n                  <dl>\r\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Total Balance</dt>\r\n                    <dd className=\"text-lg font-medium text-gray-900\">{formatCurrency(summary.total_balance)}</dd>\r\n                  </dl>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\r\n            <div className=\"p-5\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-shrink-0\">\r\n                  <svg className=\"h-6 w-6 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\r\n                  </svg>\r\n                </div>\r\n                <div className=\"ml-5 w-0 flex-1\">\r\n                  <dl>\r\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">Recent (30 days)</dt>\r\n                    <dd className=\"text-lg font-medium text-gray-900\">{summary.recent_accounts}</dd>\r\n                  </dl>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white shadow rounded-lg\">\r\n        <div className=\"px-4 py-5 sm:p-6\">\r\n          <div className=\"flex flex-col sm:flex-row gap-4\">\r\n            <div className=\"flex-1\">\r\n              <label htmlFor=\"search\" className=\"sr-only\">Search accounts</label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                  </svg>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"search\"\r\n                  id=\"search\"\r\n                  className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                  placeholder=\"Search by account number, name, or email...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"status-filter\" className=\"sr-only\">Filter by status</label>\r\n              <select\r\n                id=\"status-filter\"\r\n                name=\"status-filter\"\r\n                className=\"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\r\n                value={statusFilter}\r\n                onChange={(e) => setStatusFilter(e.target.value)}\r\n              >\r\n                <option value=\"all\">All Statuses</option>\r\n                <option value=\"active\">Active</option>\r\n                <option value=\"inactive\">Inactive</option>\r\n                <option value=\"suspended\">Suspended</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Accounts Table */}\r\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n        <div className=\"px-4 py-5 sm:px-6\">\r\n          <h3 className=\"text-lg leading-6 font-medium text-gray-900\">Accounts ({filteredAccounts.length})</h3>\r\n        </div>\r\n        <ul className=\"divide-y divide-gray-200\">\r\n          {filteredAccounts.length === 0 ? (\r\n            <li className=\"px-4 py-8 text-center text-gray-500\">\r\n              {accounts.length === 0 ? 'No accounts found.' : 'No accounts match your search criteria.'}\r\n            </li>\r\n          ) : (\r\n            filteredAccounts.map((account) => (\r\n              <li key={account.id} className=\"px-4 py-4 sm:px-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <div className=\"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center\">\r\n                        <svg className=\"h-6 w-6 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\r\n                        </svg>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"ml-4\">\r\n                      <div className=\"text-sm font-medium text-gray-900\">\r\n                        {account.account_number}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {account.owner.first_name} {account.owner.last_name} ΓÇó {account.owner.email}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-sm font-medium text-gray-900\">\r\n                        {formatCurrency(account.balance)}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {account.type}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${account.status === 'Active'\r\n                        ? 'bg-green-100 text-green-800'\r\n                        : account.status === 'Inactive'\r\n                          ? 'bg-red-100 text-red-800'\r\n                          : 'bg-yellow-100 text-yellow-800'\r\n                        }`}>\r\n                        {account.status}\r\n                      </span>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">\r\n                        Created {formatDate(account.created_at)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))\r\n          )}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AccountsTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\CashFlowSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ClientRegistrationTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2174,2177],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2174,2177],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useCallback } from 'react';\r\nimport { apiService } from '../services/api';\r\nimport CameraCapture from './shared/CameraCapture.tsx';\r\n\r\n// TypeScript Interfaces\r\ninterface NextOfKin {\r\n  name: string;\r\n  relationship: string;\r\n  address: string;\r\n  stakePercentage: string;\r\n}\r\n\r\ninterface FormData {\r\n  firstName: string;\r\n  lastName: string;\r\n  dateOfBirth: string;\r\n  phoneNumber: string;\r\n  email: string;\r\n  idType: string;\r\n  idNumber: string;\r\n  occupation: string;\r\n  workAddress: string;\r\n  position: string;\r\n  nextOfKin: NextOfKin[];\r\n  passportPicture: File | null;\r\n  photo: string | null;\r\n  otpCode: string;\r\n  registrationId: number | null;\r\n}\r\n\r\ninterface FormErrors {\r\n  [key: string]: string | string[] | undefined;\r\n  submit?: string;\r\n  otp?: string;\r\n}\r\n\r\n/**\r\n * Client Registration Tab Component for Dashboards\r\n * Embedded version of the client registration form with SMS OTP verification\r\n */\r\nfunction ClientRegistrationTab() {\r\n  const [formData, setFormData] = useState<FormData>({\r\n    // Personal Information\r\n    firstName: '',\r\n    lastName: '',\r\n    dateOfBirth: '',\r\n    phoneNumber: '',\r\n    email: '',\r\n\r\n    // Identification\r\n    idType: '',\r\n    idNumber: '',\r\n\r\n    // Employment Information\r\n    occupation: '',\r\n    workAddress: '',\r\n    position: '',\r\n\r\n    // Next of Kin (up to 4)\r\n    nextOfKin: [\r\n      { name: '', relationship: '', address: '', stakePercentage: '' }\r\n    ],\r\n\r\n    // Files\r\n    passportPicture: null,\r\n\r\n    // Photo (Base64)\r\n    photo: null,\r\n\r\n    // OTP\r\n    otpCode: '',\r\n    registrationId: null\r\n  });\r\n\r\n  const [formErrors, setFormErrors] = useState<FormErrors>({});\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [currentStep, setCurrentStep] = useState(1); // 1: Form, 2: OTP, 3: Success\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [_filePreviews, setFilePreviews] = useState<Record<string, string>>({});\r\n\r\n  // Refs for accessibility\r\n  const formRef = useRef<HTMLFormElement>(null);\r\n  const errorSummaryRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Validation rules\r\n  const validateField = useCallback((name: string, value: any, _allData: FormData = formData): string | string[] | null => {\r\n    // Helper to safely convert value to string\r\n    const asString = (v: unknown): string => (typeof v === 'string' ? v : '');\r\n    const asFile = (v: unknown): File | null => (v instanceof File ? v : null);\r\n    const asNextOfKin = (v: unknown): NextOfKin[] => (Array.isArray(v) ? v : []);\r\n\r\n    switch (name) {\r\n      case 'firstName':\r\n      case 'lastName': {\r\n        const strValue = asString(value);\r\n        if (!strValue) return `${name === 'firstName' ? 'First' : 'Last'} name is required`;\r\n        if (!/^[a-zA-Z\\s]+$/.test(strValue)) return 'Name must contain only letters and spaces';\r\n        if (strValue.length < 2) return 'Name must be at least 2 characters';\r\n        if (strValue.length > 100) return 'Name must be less than 100 characters';\r\n        return null;\r\n      }\r\n\r\n      case 'dateOfBirth': {\r\n        const strValue = asString(value);\r\n        if (!strValue) return 'Date of birth is required';\r\n        const birthDate = new Date(strValue);\r\n        const today = new Date();\r\n        const age = today.getFullYear() - birthDate.getFullYear() -\r\n          (today.getMonth() < birthDate.getMonth() ||\r\n            (today.getMonth() === birthDate.getMonth() && today.getDate() < birthDate.getDate()) ? 1 : 0);\r\n        if (age < 18) return 'You must be at least 18 years old';\r\n        if (age > 120) return 'Please enter a valid date of birth';\r\n        return null;\r\n      }\r\n\r\n      case 'phoneNumber': {\r\n        const strValue = asString(value);\r\n        if (!strValue) return 'Phone number is required';\r\n        // International format validation (basic)\r\n        if (!/^\\+?[1-9]\\d{1,14}$/.test(strValue.replace(/\\s/g, ''))) {\r\n          return 'Please enter a valid international phone number';\r\n        }\r\n        return null;\r\n      }\r\n\r\n      case 'email': {\r\n        const strValue = asString(value);\r\n        if (strValue && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(strValue)) {\r\n          return 'Please enter a valid email address';\r\n        }\r\n        return null;\r\n      }\r\n\r\n      case 'idType': {\r\n        const strValue = asString(value);\r\n        if (!strValue) return 'ID type is required';\r\n        return null;\r\n      }\r\n\r\n      case 'idNumber': {\r\n        const strValue = asString(value);\r\n        if (!strValue) return 'ID number is required';\r\n        if (strValue.length < 5) return 'ID number must be at least 5 characters';\r\n        return null;\r\n      }\r\n\r\n      case 'occupation':\r\n      case 'workAddress':\r\n      case 'position': {\r\n        const strValue = asString(value);\r\n        if (!strValue) return `${name.replace(/([A-Z])/g, ' $1').toLowerCase()} is required`;\r\n        if (strValue.length < 2) return 'Must be at least 2 characters';\r\n        return null;\r\n      }\r\n\r\n      case 'nextOfKin': {\r\n        const kinArray = asNextOfKin(value);\r\n        const errors: string[] = [];\r\n        kinArray.forEach((kin, index) => {\r\n          if (!kin.name && !kin.relationship && !kin.address && !kin.stakePercentage) {\r\n            return; // Skip empty entries\r\n          }\r\n\r\n          if (!kin.name) errors.push(`Next of kin ${index + 1}: Name is required`);\r\n          if (!kin.relationship) errors.push(`Next of kin ${index + 1}: Relationship is required`);\r\n          if (!kin.address) errors.push(`Next of kin ${index + 1}: Address is required`);\r\n          if (!kin.stakePercentage) errors.push(`Next of kin ${index + 1}: Stake percentage is required`);\r\n          else {\r\n            const percentage = parseFloat(kin.stakePercentage);\r\n            if (isNaN(percentage) || percentage <= 0 || percentage > 100) {\r\n              errors.push(`Next of kin ${index + 1}: Stake percentage must be between 0 and 100`);\r\n            }\r\n          }\r\n        });\r\n\r\n        // Check total stake percentage\r\n        const totalStake = kinArray.reduce((sum, kin) => {\r\n          const percentage = parseFloat(kin.stakePercentage || '0');\r\n          return sum + (isNaN(percentage) ? 0 : percentage);\r\n        }, 0);\r\n\r\n        if (totalStake > 100) {\r\n          errors.push('Total stake percentage across all next of kin cannot exceed 100%');\r\n        }\r\n\r\n        return errors.length > 0 ? errors : null;\r\n      }\r\n\r\n      case 'passportPicture': {\r\n        const file = asFile(value);\r\n        if (!file) return 'Passport picture is required';\r\n        if (file.size > 5 * 1024 * 1024) return 'File size must be less than 5MB';\r\n        if (!['image/jpeg', 'image/jpg', 'image/png'].includes(file.type)) {\r\n          return 'File must be a JPG or PNG image';\r\n        }\r\n        return null;\r\n      }\r\n\r\n      case 'otpCode': {\r\n        const strValue = asString(value);\r\n        if (!strValue) return 'OTP code is required';\r\n        if (!/^\\d{6}$/.test(strValue)) return 'OTP must be 6 digits';\r\n        return null;\r\n      }\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  }, [formData]);\r\n\r\n\r\n  // Handle input changes\r\n  const handleInputChange = useCallback((e) => {\r\n    const { name, value, type, files } = e.target;\r\n    const newValue = type === 'file' ? files[0] : value;\r\n\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: newValue\r\n    }));\r\n\r\n    // Real-time validation\r\n    if (name !== 'otpCode') { // Don't validate OTP in real-time\r\n      const error = validateField(name, newValue);\r\n      setFormErrors(prev => ({ ...prev, [name]: error }));\r\n    }\r\n\r\n    // Handle file previews\r\n    if (type === 'file' && files[0]) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setFilePreviews(prev => ({\r\n          ...prev,\r\n          [name]: e.target.result\r\n        }));\r\n      };\r\n      reader.readAsDataURL(files[0]);\r\n    }\r\n  }, [validateField]);\r\n\r\n  // Handle next of kin changes\r\n  const handleNextOfKinChange = useCallback((index, field, value) => {\r\n    setFormData(prev => {\r\n      const newNextOfKin = [...prev.nextOfKin];\r\n      newNextOfKin[index] = { ...newNextOfKin[index], [field]: value };\r\n      return { ...prev, nextOfKin: newNextOfKin };\r\n    });\r\n\r\n    // Validate next of kin\r\n    setTimeout(() => {\r\n      const newData = { ...formData };\r\n      newData.nextOfKin[index] = { ...newData.nextOfKin[index], [field]: value };\r\n      const error = validateField('nextOfKin', newData.nextOfKin, newData);\r\n      setFormErrors(prev => ({ ...prev, nextOfKin: error }));\r\n    }, 0);\r\n  }, [formData, validateField]);\r\n\r\n  // Add next of kin entry\r\n  const addNextOfKin = useCallback(() => {\r\n    if (formData.nextOfKin.length < 4) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        nextOfKin: [...prev.nextOfKin, { name: '', relationship: '', address: '', stakePercentage: '' }]\r\n      }));\r\n    }\r\n  }, [formData.nextOfKin.length]);\r\n\r\n  // Remove next of kin entry\r\n  const removeNextOfKin = useCallback((index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      nextOfKin: prev.nextOfKin.filter((_, i) => i !== index)\r\n    }));\r\n  }, []);\r\n\r\n  // Validate form\r\n  const validateForm = useCallback(() => {\r\n    const errors = {};\r\n\r\n    // Validate all fields\r\n    const fieldsToValidate = [\r\n      'firstName', 'lastName', 'dateOfBirth', 'phoneNumber', 'email',\r\n      'idType', 'idNumber', 'occupation', 'workAddress', 'position',\r\n      'nextOfKin', 'passportPicture'\r\n    ];\r\n\r\n    fieldsToValidate.forEach(field => {\r\n      const error = validateField(field, formData[field]);\r\n      if (error) errors[field] = error;\r\n    });\r\n\r\n    setFormErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  }, [formData, validateField]);\r\n\r\n  // Submit registration\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      errorSummaryRef.current?.focus();\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setFormErrors({});\r\n\r\n    try {\r\n      // Prepare form data for submission\r\n      const submitData = new FormData();\r\n\r\n      // Add basic fields\r\n      Object.keys(formData).forEach(key => {\r\n        if (key === 'nextOfKin') {\r\n          // Filter out empty next of kin entries\r\n          const validKin = formData.nextOfKin.filter(kin =>\r\n            kin.name || kin.relationship || kin.address || kin.stakePercentage\r\n          );\r\n          submitData.append('next_of_kin_data', JSON.stringify(validKin));\r\n        } else if (key === 'passportPicture' || key === 'idDocument') {\r\n          if (formData[key]) {\r\n            submitData.append(key, formData[key]);\r\n          }\r\n        } else if (key !== 'otpCode' && key !== 'registrationId' && formData[key]) {\r\n          submitData.append(key, formData[key]);\r\n        }\r\n      });\r\n\r\n      const result = await apiService.submitClientRegistration(submitData);\r\n\r\n      if (result.success) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          registrationId: result.data.id\r\n        }));\r\n\r\n        setCurrentStep(2); // Move to OTP step\r\n        setSuccessMessage('Registration submitted successfully! Please verify with OTP.');\r\n      } else {\r\n        setFormErrors({\r\n          submit: result.error || 'Registration failed. Please try again.'\r\n        });\r\n      }\r\n\r\n    } catch (error) {\r\n      setFormErrors({\r\n        submit: error.message || 'Registration failed. Please try again.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Send OTP\r\n  const handleSendOTP = async () => {\r\n    if (!formData.registrationId) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await apiService.sendClientRegistrationOTP(String(formData.registrationId));\r\n      if (result.success) {\r\n        setSuccessMessage('OTP sent successfully to your phone number.');\r\n      } else {\r\n        setFormErrors({\r\n          otp: result.error || 'Failed to send OTP. Please try again.'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setFormErrors({\r\n        otp: error.message || 'Failed to send OTP. Please try again.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Verify OTP\r\n  const handleVerifyOTP = async () => {\r\n    if (!formData.registrationId || !formData.otpCode) {\r\n      setFormErrors({ otp: 'Please enter the OTP code' });\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await apiService.verifyClientRegistrationOTP(String(formData.registrationId), formData.otpCode);\r\n\r\n      if (result.success) {\r\n        setCurrentStep(3); // Move to success step\r\n        const accountNumber = result.data?.account_number;\r\n        if (accountNumber) {\r\n          setSuccessMessage(`Registration completed successfully! Account Number: ${accountNumber}. Your account will be reviewed by our team.`);\r\n        } else {\r\n          setSuccessMessage('Registration completed successfully! Your account will be reviewed by our team.');\r\n        }\r\n      } else {\r\n        setFormErrors({\r\n          otp: result.error || 'Invalid OTP. Please try again.'\r\n        });\r\n      }\r\n\r\n    } catch (error) {\r\n      setFormErrors({\r\n        otp: error.message || 'Invalid OTP. Please try again.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Reset form\r\n  const resetForm = () => {\r\n    setFormData({\r\n      firstName: '', lastName: '', dateOfBirth: '', phoneNumber: '', email: '',\r\n      idType: '', idNumber: '', occupation: '', workAddress: '', position: '',\r\n      nextOfKin: [{ name: '', relationship: '', address: '', stakePercentage: '' }],\r\n      passportPicture: null, photo: null, otpCode: '', registrationId: null\r\n    });\r\n    setFormErrors({});\r\n    setCurrentStep(1);\r\n    setSuccessMessage('');\r\n    setFilePreviews({});\r\n  };\r\n\r\n  // Clear field error\r\n  const clearFieldError = (fieldName: string) => {\r\n    setFormErrors(prev => ({ ...prev, [fieldName]: undefined }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Progress indicator */}\r\n      <div className=\"flex items-center justify-center mb-6\">\r\n        {[1, 2, 3].map((step) => (\r\n          <div key={step} className=\"flex items-center\">\r\n            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${currentStep >= step ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-600'\r\n              }`}>\r\n              {step}\r\n            </div>\r\n            {step < 3 && (\r\n              <div className={`w-12 h-1 mx-2 ${currentStep > step ? 'bg-blue-500' : 'bg-gray-200'\r\n                }`} />\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"flex justify-center text-sm text-gray-600 mb-6\">\r\n        <span className={currentStep === 1 ? 'font-medium' : ''}>Registration Form</span>\r\n        <span className=\"mx-4\">ΓåÆ</span>\r\n        <span className={currentStep === 2 ? 'font-medium' : ''}>OTP Verification</span>\r\n        <span className=\"mx-4\">ΓåÆ</span>\r\n        <span className={currentStep === 3 ? 'font-medium' : ''}>Complete</span>\r\n      </div>\r\n\r\n      {/* Step 1: Registration Form */}\r\n      {currentStep === 1 && (\r\n        <form onSubmit={handleSubmit} ref={formRef} className=\"space-y-6\">\r\n\r\n          {/* Error summary */}\r\n          {Object.keys(formErrors).length > 0 && (\r\n            <div ref={errorSummaryRef} className=\"bg-red-50 border border-red-200 rounded-xl p-4\" role=\"alert\">\r\n              <h3 className=\"text-sm font-semibold text-red-800 mb-2\">Please fix the following errors:</h3>\r\n              <ul className=\"list-disc list-inside text-sm text-red-700 space-y-1\">\r\n                {Object.entries(formErrors).map(([field, error]) => (\r\n                  <li key={field}>\r\n                    {Array.isArray(error) ? error.join(', ') : error}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          {/* Photo Capture Section */}\r\n          <CameraCapture\r\n            photo={formData.photo}\r\n            onPhotoCapture={(photoData) => setFormData(prev => ({ ...prev, photo: photoData }))}\r\n            label=\"≡ƒô╖ Customer Passport Photo\"\r\n            description=\"Capture or upload a passport-style photo of the customer for identification.\"\r\n          />\r\n\r\n          {/* Personal Information */}\r\n          <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Personal Information</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  First Name <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"firstName\"\r\n                  name=\"firstName\"\r\n                  placeholder=\"Enter first name\"\r\n                  value={formData.firstName}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('firstName')}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Last Name <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"lastName\"\r\n                  name=\"lastName\"\r\n                  placeholder=\"Enter last name\"\r\n                  value={formData.lastName}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('lastName')}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"dateOfBirth\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Date of Birth <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"dateOfBirth\"\r\n                  name=\"dateOfBirth\"\r\n                  title=\"Select your date of birth\"\r\n                  value={formData.dateOfBirth}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('dateOfBirth')}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"phoneNumber\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Phone Number <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  id=\"phoneNumber\"\r\n                  name=\"phoneNumber\"\r\n                  value={formData.phoneNumber}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('phoneNumber')}\r\n                  placeholder=\"+233 XXX XXX XXX\"\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"md:col-span-2\">\r\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Email Address\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  placeholder=\"email@example.com\"\r\n                  value={formData.email}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('email')}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Identification */}\r\n          <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Identification</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  ID Type <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  name=\"idType\"\r\n                  value={formData.idType}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('idType')}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                >\r\n                  <option value=\"\">Select ID Type</option>\r\n                  <option value=\"passport\">Passport</option>\r\n                  <option value=\"national_id\">National ID</option>\r\n                  <option value=\"drivers_license\">Driver's License</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  ID Number <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"idNumber\"\r\n                  value={formData.idNumber}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('idNumber')}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Employment Information */}\r\n          <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Employment Information</h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Occupation <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"occupation\"\r\n                  value={formData.occupation}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('occupation')}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Work Address <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <textarea\r\n                  name=\"workAddress\"\r\n                  value={formData.workAddress}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('workAddress')}\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Position <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"position\"\r\n                  value={formData.position}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('position')}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Next of Kin */}\r\n          <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Next of Kin</h3>\r\n              {formData.nextOfKin.length < 4 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={addNextOfKin}\r\n                  className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm\"\r\n                >\r\n                  Add Next of Kin\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {formData.nextOfKin.map((kin, index) => (\r\n              <div key={index} className=\"border border-gray-200 rounded-lg p-4 mb-4\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <h4 className=\"text-md font-medium\">Next of Kin {index + 1}</h4>\r\n                  {formData.nextOfKin.length > 1 && (\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => removeNextOfKin(index)}\r\n                      className=\"text-red-500 hover:text-red-700 text-sm\"\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Name <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={kin.name}\r\n                      onChange={(e) => handleNextOfKinChange(index, 'name', e.target.value)}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Relationship <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <select\r\n                      value={kin.relationship}\r\n                      onChange={(e) => handleNextOfKinChange(index, 'relationship', e.target.value)}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                    >\r\n                      <option value=\"\">Select Relationship</option>\r\n                      <option value=\"spouse\">Spouse</option>\r\n                      <option value=\"parent\">Parent</option>\r\n                      <option value=\"child\">Child</option>\r\n                      <option value=\"sibling\">Sibling</option>\r\n                      <option value=\"friend\">Friend</option>\r\n                      <option value=\"other\">Other</option>\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"md:col-span-2\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Address <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <textarea\r\n                      value={kin.address}\r\n                      onChange={(e) => handleNextOfKinChange(index, 'address', e.target.value)}\r\n                      rows={2}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Stake Percentage <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"0.01\"\r\n                      value={kin.stakePercentage}\r\n                      onChange={(e) => handleNextOfKinChange(index, 'stakePercentage', e.target.value)}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Note: Photo capture moved to CameraCapture component at top of form */}\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            className=\"w-full py-4 px-6 bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold\"\r\n          >\r\n            {isLoading ? 'Submitting...' : 'Submit Registration'}\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {/* Step 2: OTP Verification */}\r\n      {currentStep === 2 && (\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6 max-w-md mx-auto\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4 text-center\">OTP Verification</h3>\r\n\r\n          {successMessage && (\r\n            <div className=\"mb-4 p-4 bg-green-50 border border-green-200 rounded-xl\">\r\n              <p className=\"text-sm text-green-800\">{successMessage}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Enter 6-digit OTP <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"otpCode\"\r\n                value={formData.otpCode}\r\n                onChange={handleInputChange}\r\n                onFocus={() => clearFieldError('otpCode')}\r\n                placeholder=\"000000\"\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 text-center text-2xl tracking-widest\"\r\n                maxLength={6}\r\n              />\r\n              {formErrors.otp && (\r\n                <p className=\"text-sm text-red-600 mt-1\">{formErrors.otp}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex gap-4\">\r\n              <button\r\n                onClick={handleVerifyOTP}\r\n                disabled={isLoading || !formData.otpCode}\r\n                className=\"flex-1 py-3 px-6 bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold\"\r\n              >\r\n                {isLoading ? 'Verifying...' : 'Verify OTP'}\r\n              </button>\r\n              <button\r\n                onClick={handleSendOTP}\r\n                disabled={isLoading}\r\n                className=\"px-6 py-3 text-blue-600 hover:text-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm border border-blue-300 rounded-xl\"\r\n              >\r\n                Resend OTP\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 3: Success */}\r\n      {currentStep === 3 && (\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6 max-w-md mx-auto text-center\">\r\n          <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n            </svg>\r\n          </div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Registration Complete!</h3>\r\n          <p className=\"text-gray-600 mb-4\">{successMessage}</p>\r\n          <button\r\n            onClick={resetForm}\r\n            className=\"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors font-semibold\"\r\n          >\r\n            Register Another Client\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClientRegistrationTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\CommissionSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\DashboardDropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\DashboardHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\EnhancedUserManagementForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleCreateUser' is defined but never used. Allowed unused args must match /^_/u.","line":77,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":77,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'maxSize' is defined but never used. Allowed unused args must match /^_/u.","line":462,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":462,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { authService } from '../services/api.ts';\r\nimport { Input } from './ui/Input';\r\nimport { Button } from './ui/Button';\r\nimport GlassCard from './ui/modern/GlassCard';\r\n\r\ninterface UserFormData {\r\n  // Existing fields\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  phone: string;\r\n  role: string;\r\n  password?: string;\r\n\r\n  // New required fields\r\n  house_address: string;\r\n  contact_address: string;\r\n  government_id: string;\r\n  ssnit_number: string;\r\n\r\n  // File uploads\r\n  passport_picture: File | null;\r\n  application_letter: File | null;\r\n  appointment_letter: File | null;\r\n\r\n  // Bank account details\r\n  bank_name: string;\r\n  account_number: string;\r\n  branch_code: string;\r\n  routing_number: string;\r\n}\r\n\r\ninterface FormErrors {\r\n  [key: string]: string | null;\r\n}\r\n\r\ninterface StaffMember {\r\n  id: string;\r\n  name: string;\r\n  role: string;\r\n  status: string;\r\n}\r\n\r\ninterface EnhancedUserManagementFormProps {\r\n  formData: UserFormData;\r\n  setFormData: React.Dispatch<React.SetStateAction<UserFormData>>;\r\n  otpCode: string;\r\n  setOtpCode: React.Dispatch<React.SetStateAction<string>>;\r\n  phoneVerified: boolean;\r\n  setPhoneVerified: React.Dispatch<React.SetStateAction<boolean>>;\r\n  otpSent: boolean;\r\n  setOtpSent: React.Dispatch<React.SetStateAction<boolean>>;\r\n  otpExpiresIn: number;\r\n  setOtpExpiresIn: React.Dispatch<React.SetStateAction<number>>;\r\n  otpLoading?: boolean;\r\n  handleSendOTP: () => void;\r\n  handleVerifyOTP: () => void;\r\n  handleCreateUser: (e: React.FormEvent) => void;\r\n  staffMembers: StaffMember[];\r\n  fetchStaffMembers: () => void;\r\n}\r\n\r\nconst EnhancedUserManagementForm: React.FC<EnhancedUserManagementFormProps> = ({\r\n  formData,\r\n  setFormData,\r\n  otpCode,\r\n  setOtpCode,\r\n  phoneVerified,\r\n  setPhoneVerified,\r\n  otpSent,\r\n  setOtpSent,\r\n  otpExpiresIn,\r\n  setOtpExpiresIn,\r\n  handleSendOTP,\r\n  handleVerifyOTP,\r\n  handleCreateUser,\r\n  staffMembers,\r\n  fetchStaffMembers,\r\n  otpLoading = false\r\n}) => {\r\n  const [errors, setErrors] = useState<FormErrors>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Validation functions (kept as is)\r\n  const validateAddress = (address: string): string | null => {\r\n    if (!address || address.trim().length < 10) return \"Address must be at least 10 characters long\";\r\n    return null;\r\n  };\r\n\r\n  const validateGovernmentId = (id: string): string | null => {\r\n    const cleanId = id.replace(/[\\s-]/g, '').toUpperCase();\r\n    if (!cleanId) return \"Government ID is required\";\r\n    if (!/^[A-Z0-9]+$/.test(cleanId)) return \"Government ID must contain only letters and numbers\";\r\n    if (cleanId.length < 6 || cleanId.length > 20) return \"Government ID must be between 6 and 20 characters long\";\r\n    return null;\r\n  };\r\n\r\n  const validateSSNIT = (ssnit: string): string | null => {\r\n    const cleanSSNIT = ssnit.replace(/[\\s-]/g, '').toUpperCase();\r\n    if (!cleanSSNIT) return \"SSNIT number is required\";\r\n    if (!/^[A-Z][0-9]{12}$/.test(cleanSSNIT)) return \"SSNIT number must be in legacy format (e.g., C123456789012)\";\r\n    return null;\r\n  };\r\n\r\n  const validateFile = (file: File | null, type: 'passport' | 'letter'): string | null => {\r\n    if (!file) return \"File is required\";\r\n    const maxSize = type === 'passport' ? 2 * 1024 * 1024 : 5 * 1024 * 1024;\r\n    if (file.size > maxSize) return `File size exceeds ${type === 'passport' ? '2MB' : '5MB'} limit`;\r\n    const validTypes = type === 'passport' ? ['image/jpeg', 'image/jpg', 'image/png'] : ['application/pdf'];\r\n    if (!validTypes.includes(file.type)) return type === 'passport' ? \"Only JPEG/JPG/PNG files are allowed\" : \"Only PDF files are allowed\";\r\n    return null;\r\n  };\r\n\r\n  const validateAccountNumber = (accountNumber: string): string | null => {\r\n    if (!accountNumber) return \"Account number is required\";\r\n    if (!/^[A-Z0-9]+$/.test(accountNumber)) return \"Account number must contain only letters and numbers\";\r\n    if (accountNumber.length < 8 || accountNumber.length > 20) return \"Account number must be between 8 and 20 characters long\";\r\n    return null;\r\n  };\r\n\r\n  const validateBranchCode = (branchCode: string): string | null => {\r\n    if (!branchCode) return \"Branch code is required\";\r\n    if (!/^[A-Z0-9]+$/.test(branchCode)) return \"Branch code must contain only letters and numbers\";\r\n    if (branchCode.length < 3 || branchCode.length > 10) return \"Branch code must be between 3 and 10 characters long\";\r\n    return null;\r\n  };\r\n\r\n  const validateRoutingNumber = (routingNumber: string): string | null => {\r\n    const cleanRouting = routingNumber.replace(/[\\s-]/g, '');\r\n    if (!cleanRouting) return \"Routing number is required\";\r\n    if (!/^\\d{9}$/.test(cleanRouting)) return \"Routing number must be 9 digits\";\r\n    return null;\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: FormErrors = {};\r\n    newErrors.house_address = validateAddress(formData.house_address);\r\n    newErrors.contact_address = validateAddress(formData.contact_address);\r\n    newErrors.government_id = validateGovernmentId(formData.government_id);\r\n    newErrors.ssnit_number = validateSSNIT(formData.ssnit_number);\r\n    newErrors.passport_picture = validateFile(formData.passport_picture, 'passport');\r\n    newErrors.application_letter = validateFile(formData.application_letter, 'letter');\r\n    newErrors.appointment_letter = validateFile(formData.appointment_letter, 'letter');\r\n    newErrors.account_number = validateAccountNumber(formData.account_number);\r\n    newErrors.branch_code = validateBranchCode(formData.branch_code);\r\n    newErrors.routing_number = validateRoutingNumber(formData.routing_number);\r\n    setErrors(newErrors);\r\n    return !Object.values(newErrors).some(error => error !== null);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!validateForm()) return;\r\n    if (!phoneVerified) {\r\n      alert('Please verify your phone number with OTP before creating the user.');\r\n      return;\r\n    }\r\n    try {\r\n      setIsSubmitting(true);\r\n      const response = await authService.createUser(formData);\r\n      if (response.success) {\r\n        alert(`User created! ID: ${response.data.staff_id || 'N/A'}`);\r\n        setFormData({\r\n          first_name: '', last_name: '', email: '', phone: '', role: 'cashier',\r\n          house_address: '', contact_address: '', government_id: '', ssnit_number: '',\r\n          passport_picture: null, application_letter: null, appointment_letter: null,\r\n          bank_name: '', account_number: '', branch_code: '', routing_number: ''\r\n        });\r\n        setOtpCode('');\r\n        setPhoneVerified(false);\r\n        setOtpSent(false);\r\n        fetchStaffMembers();\r\n      } else {\r\n        alert('Failed to create user: ' + response.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating user:', error);\r\n      alert('An error occurred while creating the user.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"flex items-center space-x-2\">\r\n        <h3 className=\"text-2xl font-bold text-gray-800\">≡ƒæÑ Enhanced User Management - Create New User</h3>\r\n      </div>\r\n\r\n      <GlassCard className=\"p-8\">\r\n        <form onSubmit={handleSubmit} className=\"space-y-8\">\r\n          {/* Personal Information Section */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-gray-700 mb-4 border-b pb-2\">≡ƒôï Personal Information</h4>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <Input\r\n                label=\"First Name *\"\r\n                value={formData.first_name || ''}\r\n                onChange={(e) => setFormData({ ...formData, first_name: e.target.value })}\r\n                required\r\n              />\r\n              <Input\r\n                label=\"Last Name *\"\r\n                value={formData.last_name || ''}\r\n                onChange={(e) => setFormData({ ...formData, last_name: e.target.value })}\r\n                required\r\n              />\r\n              <Input\r\n                label=\"Email *\"\r\n                type=\"email\"\r\n                value={formData.email || ''}\r\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                required\r\n              />\r\n\r\n              <Input\r\n                label=\"Phone Number *\"\r\n                type=\"tel\"\r\n                value={formData.phone || ''}\r\n                onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n                required\r\n                placeholder=\"+233 XX XXX XXXX\"\r\n                className=\"mb-2\"\r\n              />\r\n\r\n              <div className=\"flex flex-col gap-2\">\r\n                <label className=\"text-sm font-semibold text-gray-700 ml-1\">Role *</label>\r\n                <select\r\n                  value={formData.role || 'cashier'}\r\n                  onChange={(e) => setFormData({ ...formData, role: e.target.value })}\r\n                  required\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 focus:bg-white focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n                >\r\n                  <option value=\"cashier\">Cashier</option>\r\n                  <option value=\"mobile_banker\">Mobile Banker</option>\r\n                  <option value=\"operations_manager\">Operations Manager</option>\r\n                  <option value=\"manager\">Manager</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Address Information Section */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-gray-700 mb-4 border-b pb-2\">≡ƒÅá Address Information</h4>\r\n            <div className=\"grid grid-cols-1 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">House Address *</label>\r\n                <textarea\r\n                  value={formData.house_address || ''}\r\n                  onChange={(e) => setFormData({ ...formData, house_address: e.target.value })}\r\n                  rows={3}\r\n                  required\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 focus:bg-white focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n                />\r\n                {errors.house_address && <div className=\"text-red-500 text-sm mt-1\">{errors.house_address}</div>}\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Contact Address *</label>\r\n                <textarea\r\n                  value={formData.contact_address || ''}\r\n                  onChange={(e) => setFormData({ ...formData, contact_address: e.target.value })}\r\n                  rows={3}\r\n                  required\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 focus:bg-white focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n                />\r\n                {errors.contact_address && <div className=\"text-red-500 text-sm mt-1\">{errors.contact_address}</div>}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Identification Information Section */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-gray-700 mb-4 border-b pb-2\">≡ƒåö Identification Information</h4>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <Input\r\n                label=\"Government ID *\"\r\n                value={formData.government_id || ''}\r\n                onChange={(e) => setFormData({ ...formData, government_id: e.target.value })}\r\n                required\r\n                placeholder=\"Enter government ID\"\r\n                error={errors.government_id || undefined}\r\n              />\r\n              <Input\r\n                label=\"SSNIT Number *\"\r\n                value={formData.ssnit_number || ''}\r\n                onChange={(e) => setFormData({ ...formData, ssnit_number: e.target.value })}\r\n                required\r\n                placeholder=\"Format: AAA-NN-NNNNN\"\r\n                error={errors.ssnit_number || undefined}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* File Uploads Section */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-gray-700 mb-4 border-b pb-2\">≡ƒôü Document Uploads</h4>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <FileUploadComponent\r\n                label=\"Passport Picture (JPEG/PNG, Γëñ2MB) *\"\r\n                accept=\"image/jpeg,image/jpg,image/png\"\r\n                maxSize={2}\r\n                onFileChange={(file) => setFormData({ ...formData, passport_picture: file })}\r\n                error={errors.passport_picture}\r\n                currentFile={formData.passport_picture}\r\n              />\r\n              <FileUploadComponent\r\n                label=\"Application Letter (PDF, Γëñ5MB) *\"\r\n                accept=\"application/pdf\"\r\n                maxSize={5}\r\n                onFileChange={(file) => setFormData({ ...formData, application_letter: file })}\r\n                error={errors.application_letter}\r\n                currentFile={formData.application_letter}\r\n              />\r\n              <FileUploadComponent\r\n                label=\"Appointment Letter (PDF, Γëñ5MB) *\"\r\n                accept=\"application/pdf\"\r\n                maxSize={5}\r\n                onFileChange={(file) => setFormData({ ...formData, appointment_letter: file })}\r\n                error={errors.appointment_letter}\r\n                currentFile={formData.appointment_letter}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Bank Account Details Section */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-gray-700 mb-4 border-b pb-2\">≡ƒÅª Bank Account Details</h4>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <Input\r\n                label=\"Bank Name *\"\r\n                value={formData.bank_name || ''}\r\n                onChange={(e) => setFormData({ ...formData, bank_name: e.target.value })}\r\n                required\r\n              />\r\n              <Input\r\n                label=\"Account Number *\"\r\n                value={formData.account_number || ''}\r\n                onChange={(e) => setFormData({ ...formData, account_number: e.target.value })}\r\n                required\r\n                placeholder=\"8-20 alphanumeric characters\"\r\n                error={errors.account_number || undefined}\r\n              />\r\n              <Input\r\n                label=\"Branch Code *\"\r\n                value={formData.branch_code || ''}\r\n                onChange={(e) => setFormData({ ...formData, branch_code: e.target.value })}\r\n                required\r\n                placeholder=\"3-10 alphanumeric characters\"\r\n                error={errors.branch_code || undefined}\r\n              />\r\n              <Input\r\n                label=\"Routing Number *\"\r\n                value={formData.routing_number || ''}\r\n                onChange={(e) => setFormData({ ...formData, routing_number: e.target.value })}\r\n                required\r\n                placeholder=\"9 digits\"\r\n                error={errors.routing_number || undefined}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* OTP Verification Section */}\r\n          <div>\r\n            <h4 className=\"text-lg font-bold text-gray-700 mb-4 border-b pb-2\">≡ƒô▒ Phone Verification</h4>\r\n            <div className=\"bg-gray-50 p-6 rounded-xl border border-gray-200\">\r\n              {!otpSent ? (\r\n                <Button\r\n                  type=\"button\"\r\n                  disabled={otpLoading}\r\n                  onClick={() => {\r\n                    if (!formData.phone) {\r\n                      alert('Please enter a phone number first.');\r\n                      return;\r\n                    }\r\n                    handleSendOTP();\r\n                  }}\r\n                >\r\n                  {otpLoading ? 'Sending...' : 'Send OTP Code'}\r\n                </Button>\r\n              ) : !phoneVerified ? (\r\n                <div className=\"space-y-4\">\r\n                  <Input\r\n                    label=\"Enter OTP\"\r\n                    type=\"text\"\r\n                    placeholder=\"Enter 6-digit OTP\"\r\n                    value={otpCode}\r\n                    onChange={(e) => setOtpCode(e.target.value)}\r\n                    maxLength={6}\r\n                  />\r\n                  <div className=\"flex gap-4\">\r\n                    <Button type=\"button\" onClick={handleVerifyOTP} variant=\"success\">\r\n                      Verify OTP\r\n                    </Button>\r\n                    <Button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        setOtpSent(false);\r\n                        setOtpCode('');\r\n                        setOtpExpiresIn(0);\r\n                      }}\r\n                      variant=\"secondary\"\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    Code expires in: {Math.floor(otpExpiresIn / 60)}:{String(otpExpiresIn % 60).padStart(2, '0')}\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-emerald-600 font-bold flex items-center gap-2\">\r\n                  Γ£à Phone Verified!\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <Button\r\n            type=\"submit\"\r\n            disabled={!phoneVerified || isSubmitting}\r\n            variant={phoneVerified && !isSubmitting ? \"primary\" : \"secondary\"}\r\n            className=\"w-full text-lg py-4\"\r\n          >\r\n            {isSubmitting ? 'Creating User...' : phoneVerified ? 'Create User' : 'Verify Phone to Create User'}\r\n          </Button>\r\n        </form>\r\n      </GlassCard>\r\n\r\n      {/* Staff Members List */}\r\n      <div>\r\n        <h4 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n          <span>≡ƒôï</span> Current Staff Members\r\n        </h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {staffMembers.length > 0 ? staffMembers.map((staff) => (\r\n            <div key={staff.id} className=\"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col hover:border-coastal-primary transition-colors\">\r\n              <div className=\"font-bold text-lg text-gray-900 text-center\">{staff.name}</div>\r\n              <div className=\"text-sm text-center text-gray-500 mt-2\">\r\n                <span className=\"block\">{staff.role}</span>\r\n                <span className={`inline-block px-2 py-0.5 rounded-full text-xs font-bold uppercase mt-1 ${staff.status === 'active' ? 'bg-emerald-100 text-emerald-700' : 'bg-gray-100 text-gray-600'\r\n                  }`}>\r\n                  {staff.status}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )) : (\r\n            <div className=\"col-span-full text-center p-8 text-gray-500 bg-gray-50 rounded-xl border border-dashed border-gray-300\">\r\n              No staff members yet. Create your first user above! ≡ƒæå\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Enhanced File Upload Component (Modernized)\r\nconst FileUploadComponent = ({\r\n  label, accept, maxSize, onFileChange, error, currentFile\r\n}: {\r\n  label: string; accept: string; maxSize: number;\r\n  onFileChange: (file: File | null) => void; error: string | null; currentFile?: File | null;\r\n}) => {\r\n  const [isDragOver, setIsDragOver] = useState(false);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    /* Validation Logic Skipped for brevity, can implement same rules */\r\n    const file = e.target.files?.[0] || null;\r\n    if (file) {\r\n      setIsUploading(true);\r\n      setTimeout(() => { onFileChange(file); setIsUploading(false); }, 500);\r\n    } else { onFileChange(null); }\r\n  };\r\n\r\n  // Basic logic wrapper for drag/drop\r\n  const handleDragOver = (e: React.DragEvent) => { e.preventDefault(); setIsDragOver(true); };\r\n  const handleDragLeave = (e: React.DragEvent) => { e.preventDefault(); setIsDragOver(false); };\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault(); setIsDragOver(false);\r\n    const file = e.dataTransfer.files[0];\r\n    if (file) { setIsUploading(true); setTimeout(() => { onFileChange(file); setIsUploading(false); }, 500); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col\">\r\n      <label className=\"text-sm font-semibold text-gray-700 mb-1.5 ml-1\">{label}</label>\r\n      <div\r\n        className={`relative border-2 border-dashed rounded-xl p-6 text-center transition-all cursor-pointer bg-gray-50\r\n            ${isDragOver ? 'border-coastal-primary bg-blue-50' : 'border-gray-300 hover:border-gray-400'}\r\n            ${error ? 'border-red-300 bg-red-50' : ''}\r\n        `}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        onDrop={handleDrop}\r\n        onClick={() => fileInputRef.current?.click()}\r\n      >\r\n        <input ref={fileInputRef} type=\"file\" accept={accept} onChange={handleFileChange} className=\"hidden\" />\r\n\r\n        {isUploading ? (\r\n          <div className=\"text-gray-500\"><span className=\"animate-spin inline-block mr-2\">ΓÅ│</span> Processing...</div>\r\n        ) : currentFile ? (\r\n          <div className=\"flex flex-col items-center\">\r\n            <div className=\"text-2xl mb-2\">{currentFile.type.startsWith('image/') ? '≡ƒû╝∩╕Å' : '≡ƒôä'}</div>\r\n            <div className=\"text-sm font-bold text-gray-700 truncate max-w-[200px]\">{currentFile.name}</div>\r\n            <button type=\"button\" onClick={(e) => { e.stopPropagation(); onFileChange(null); }} className=\"text-red-500 text-xs font-bold mt-2 hover:underline\">Remove</button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-gray-500\">\r\n            <div className=\"text-2xl mb-2\">≡ƒôü</div>\r\n            <div className=\"text-sm\">Click or Drag & Drop</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {error && <div className=\"text-red-500 text-sm mt-1\">{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EnhancedUserManagementForm;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ExpenseBreakdownChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[242,245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[242,245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend } from 'recharts';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\n\r\ninterface ExpenseData {\r\n  name: string;\r\n  value: number;\r\n  color: string;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface TooltipProps {\r\n  active?: boolean;\r\n  payload?: Array<{ name: string; value: number; color: string }>;\r\n}\r\n\r\ninterface LegendProps {\r\n  payload?: Array<{ color: string; value: string }>;\r\n}\r\n\r\nconst ExpenseBreakdownChart = ({ data }: { data: ExpenseData[] }) => {\r\n  // Show empty state if no data provided\r\n  if (!data || data.length === 0) {\r\n    return (\r\n      <div className=\"w-full h-64 flex items-center justify-center bg-neutral-50 rounded-lg border border-neutral-200\">\r\n        <p className=\"text-neutral-500 text-sm\">No expense breakdown data available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const chartData = data;\r\n\r\n  const CustomTooltip = ({ active, payload }: TooltipProps) => {\r\n    if (active && payload && payload.length) {\r\n      const item = payload[0];\r\n      return (\r\n        <div className=\"bg-white p-3 border border-neutral-200 rounded-lg shadow-lg\">\r\n          <p className=\"font-medium text-neutral-900\">{item.name}</p>\r\n          <p className=\"text-sm text-neutral-600\">\r\n            Amount: {formatCurrencyGHS(item.value)}\r\n          </p>\r\n          <p className=\"text-sm text-neutral-600\">\r\n            Percentage: {((item.value / chartData.reduce((sum, d) => sum + d.value, 0)) * 100).toFixed(1)}%\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const CustomLegend = ({ payload }: LegendProps) => {\r\n    if (!payload) return null;\r\n    return (\r\n      <div className=\"flex flex-wrap justify-center gap-4 mt-4\">\r\n        {payload.map((entry, index) => (\r\n          <div key={index} className=\"flex items-center gap-2\">\r\n            <div\r\n              className=\"w-3 h-3 rounded-full\"\r\n              style={{ backgroundColor: entry.color }}\r\n            />\r\n            <span className=\"text-sm text-neutral-700\">{entry.value}</span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-64\">\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <PieChart>\r\n          <Pie\r\n            data={chartData}\r\n            cx=\"50%\"\r\n            cy=\"45%\"\r\n            innerRadius={40}\r\n            outerRadius={80}\r\n            paddingAngle={2}\r\n            dataKey=\"value\"\r\n          >\r\n            {chartData.map((entry, index) => (\r\n              <Cell key={`cell-${index}`} fill={entry.color} />\r\n            ))}\r\n          </Pie>\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Legend content={<CustomLegend />} />\r\n        </PieChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExpenseBreakdownChart;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ExpensesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\InterestSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\LoanApprovalsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\LoansSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\MonthlyComparisonChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[684,687],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[684,687],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\n\r\nconst MonthlyComparisonChart = ({ data }) => {\r\n  // Show empty state if no data provided\r\n  if (!data || data.length === 0) {\r\n    return (\r\n      <div className=\"w-full h-64 flex items-center justify-center bg-neutral-50 rounded-lg border border-neutral-200\">\r\n        <p className=\"text-neutral-500 text-sm\">No monthly comparison data available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const chartData = data;\r\n\r\n  const CustomTooltip = ({ active, payload, label }: { active?: boolean; payload?: any[]; label?: string }) => {\r\n    if (active && payload && payload.length) {\r\n      return (\r\n        <div className=\"bg-white p-3 border border-neutral-200 rounded-lg shadow-lg\">\r\n          <p className=\"font-medium text-neutral-900 mb-2\">{label}</p>\r\n          {payload.map((entry, index) => (\r\n            <div key={index} className=\"flex items-center gap-2 text-sm\">\r\n              <div\r\n                className=\"w-3 h-3 rounded\"\r\n                style={{ backgroundColor: entry.color }}\r\n              />\r\n              <span className=\"text-neutral-700\">{entry.name}:</span>\r\n              <span className=\"font-medium\" style={{ color: entry.color }}>\r\n                {formatCurrencyGHS(entry.value)}\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-64\">\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <BarChart data={chartData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f3f4f6\" />\r\n          <XAxis\r\n            dataKey=\"month\"\r\n            stroke=\"#6b7280\"\r\n            fontSize={12}\r\n            tickLine={false}\r\n          />\r\n          <YAxis\r\n            stroke=\"#6b7280\"\r\n            fontSize={12}\r\n            tickLine={false}\r\n            tickFormatter={(value) => `Γé╡${(value / 1000).toFixed(0)}k`}\r\n          />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Bar\r\n            dataKey=\"income\"\r\n            fill=\"#10b981\"\r\n            radius={[2, 2, 0, 0]}\r\n            name=\"Income\"\r\n          />\r\n          <Bar\r\n            dataKey=\"expenses\"\r\n            fill=\"#ef4444\"\r\n            radius={[2, 2, 0, 0]}\r\n            name=\"Expenses\"\r\n          />\r\n          <Bar\r\n            dataKey=\"savings\"\r\n            fill=\"#0066CC\"\r\n            radius={[2, 2, 0, 0]}\r\n            name=\"Savings\"\r\n          />\r\n        </BarChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MonthlyComparisonChart;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\OpDashboardAppBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":4,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[74,77],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[74,77],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ninterface OpDashboardAppBarProps {\r\n  user: any;\r\n  activeView: string;\r\n  setActiveView: React.Dispatch<React.SetStateAction<string>>;\r\n  handleLogout: () => void;\r\n}\r\n\r\nconst navItems = [\r\n  { id: 'overview', name: 'Overview', icon: '≡ƒôè' },\r\n  { id: 'branches', name: 'Branch Activity', icon: '≡ƒôì' },\r\n  { id: 'reports', name: 'Reports', icon: '≡ƒº╛' },\r\n  { id: 'alerts', name: 'System Alerts', icon: '≡ƒÜ¿' },\r\n  { id: 'charges', name: 'Service Charges', icon: '≡ƒÆ╕' },\r\n  { id: 'messaging', name: 'Messaging', icon: '≡ƒÆ¼' }\r\n];\r\n\r\nconst OpDashboardAppBar: React.FC<OpDashboardAppBarProps> = ({ user, activeView, setActiveView, handleLogout }) => {\r\n  return (\r\n    <header className=\"md-elevated-card md-animate-slide-in-down\" style={{\r\n      marginBottom: '24px',\r\n      padding: '20px 24px'\r\n    }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '16px', marginBottom: '20px' }}>\r\n        <div>\r\n          <h1 className=\"md-typescale-headline-medium\" style={{ color: 'var(--md-sys-color-on-surface)', marginBottom: '4px' }}>\r\n            Operations Management\r\n          </h1>\r\n          <p className=\"md-typescale-body-medium\" style={{ color: 'var(--md-sys-color-on-surface-variant)' }}>\r\n              Welcome, <strong>{user?.name || 'User'}</strong>\r\n          </p>\r\n        </div>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          <div className=\"md-chip\" style={{\r\n            background: 'var(--md-sys-color-tertiary-container)',\r\n            color: 'var(--md-sys-color-on-tertiary-container)',\r\n            border: 'none'\r\n          }}>\r\n            OPERATIONS MANAGER\r\n          </div>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"md-filled-button md-ripple\"\r\n            style={{\r\n              background: 'var(--md-sys-color-error)',\r\n              color: 'var(--md-sys-color-on-error)'\r\n            }}\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation Tabs */}\r\n      <nav style={{\r\n        display: 'flex', gap: '8px', overflowX: 'auto', padding: '4px',\r\n        background: 'var(--md-sys-color-surface-container-highest)',\r\n        borderRadius: 'var(--md-sys-shape-corner-large)', position: 'relative', zIndex: 1\r\n      }}>\r\n        {navItems.map((view) => (\r\n          <button\r\n            key={view.id}\r\n            onClick={() => setActiveView(view.id)}\r\n            className=\"md-ripple\"\r\n            style={{\r\n              padding: '10px 16px',\r\n              background: activeView === view.id ? 'var(--md-sys-color-surface)' : 'transparent',\r\n              border: 'none',\r\n              borderRadius: 'var(--md-sys-shape-corner-medium)',\r\n              color: activeView === view.id ? 'var(--md-sys-color-on-surface)' : 'var(--md-sys-color-on-surface-variant)',\r\n              fontWeight: activeView === view.id ? '600' : '500',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              whiteSpace: 'nowrap',\r\n              transition: 'all var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard)',\r\n              boxShadow: activeView === view.id ? 'var(--md-sys-elevation-1)' : 'none'\r\n            }}\r\n          >\r\n            <span style={{ fontSize: '18px' }}>{view.icon}</span>\r\n            <span className=\"md-typescale-label-large\">{view.name}</span>\r\n          </button>\r\n        ))}\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default OpDashboardAppBar;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\OverviewSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatCurrencyGHS' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\n\r\nfunction OverviewSection({ dashboardData }) {\r\n  const branchMetrics = dashboardData?.branch_metrics || [];\r\n\r\n  // Show empty state if no data\r\n  if (branchMetrics.length === 0) {\r\n    return (\r\n      <div style={{\r\n        background: '#f8fafc',\r\n        padding: '40px',\r\n        borderRadius: '16px',\r\n        textAlign: 'center',\r\n        border: '1px solid #e2e8f0'\r\n      }}>\r\n        <p style={{ color: '#64748b', fontSize: '14px' }}>No branch metrics available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Branch Metrics */}\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\r\n        gap: '20px'\r\n      }}>\r\n        {branchMetrics.map((metric, index) => (\r\n          <div key={index} style={{\r\n            background: 'white',\r\n            padding: '24px',\r\n            borderRadius: '16px',\r\n            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',\r\n            border: '1px solid #e2e8f0',\r\n            transition: 'all 0.3s ease'\r\n          }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.transform = 'translateY(-4px)';\r\n              e.currentTarget.style.boxShadow = '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.transform = 'translateY(0)';\r\n              e.currentTarget.style.boxShadow = '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)';\r\n            }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '16px' }}>\r\n              <div style={{\r\n                width: '48px',\r\n                height: '48px',\r\n                background: 'linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)',\r\n                borderRadius: '12px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                fontSize: '20px'\r\n              }}>\r\n                {metric.icon}\r\n              </div>\r\n              <div style={{\r\n                background: metric.trend === 'up' ? '#dbeafe' : '#fef2f2',\r\n                color: metric.trend === 'up' ? '#1e40af' : '#dc2626',\r\n                padding: '4px 8px',\r\n                borderRadius: '12px',\r\n                fontSize: '12px',\r\n                fontWeight: '600'\r\n              }}>\r\n                {metric.change}\r\n              </div>\r\n            </div>\r\n            <div style={{\r\n              color: '#1e293b',\r\n              fontSize: '24px',\r\n              fontWeight: '700',\r\n              lineHeight: '1.2',\r\n              marginBottom: '8px'\r\n            }}>\r\n              {metric.value}\r\n            </div>\r\n            <div style={{\r\n              color: '#64748b',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              textTransform: 'uppercase',\r\n              letterSpacing: '0.05em'\r\n            }}>\r\n              {metric.label}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default OverviewSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\OverviewTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Metric' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Branch' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[847,850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[847,850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":34,"column":36,"nodeType":"TSTypeLiteral","messageId":"noEmptyObject","endLine":34,"endColumn":38,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[980,982],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[980,982],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3159,3162],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3159,3162],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":140,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5350,5353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5350,5353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":140,"column":141,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":140,"endColumn":144,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5415,5418],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5415,5418],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5540,5543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5540,5543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":141,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":144,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5605,5608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5605,5608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":142,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5728,5731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5728,5731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":142,"column":137,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":140,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5791,5794],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5791,5794],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5911,5914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5911,5914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":135,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":138,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5973,5976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5973,5976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[879,882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[879,882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport GlassCard from './ui/modern/GlassCard';\r\nimport ModernStatCard from './ui/modern/ModernStatCard';\r\n\r\ninterface Metric {\r\n  label: string;\r\n  value: string | number;\r\n  icon: string | React.ReactNode;\r\n  color: string; // mapped to tailwind classes if possible\r\n  change: string;\r\n}\r\n\r\ninterface Branch {\r\n  id: string;\r\n  name: string;\r\n  metrics: {\r\n    total_transactions: number;\r\n    success_rate: string;\r\n    staff_count: number;\r\n  } | null;\r\n}\r\n\r\ninterface WorkflowStatus {\r\n  loan_disbursements: { completed: number; pending: number };\r\n  account_onboarding: { completed: number; pending: number };\r\n  kyc_verification: { completed: number; pending: number };\r\n  service_charges: { completed: number; pending: number };\r\n}\r\n\r\ninterface OverviewTabProps {\r\n  loading: boolean;\r\n  metrics: Record<string, any> | null;\r\n  branchActivity: any[]; // eslint-disable-line @typescript-eslint/no-explicit-any\r\n  workflowStatus: WorkflowStatus | {};\r\n}\r\n\r\nconst OverviewTab: React.FC<OverviewTabProps> = ({ loading, metrics, branchActivity, workflowStatus }) => {\r\n\r\n  const getOperationalMetrics = () => [\r\n    {\r\n      label: 'System Uptime',\r\n      value: (metrics && metrics.system_uptime) || '99.9%',\r\n      icon: 'Γ£à',\r\n      trend: 'up',\r\n      change: '+0.1%',\r\n      colorClass: 'text-emerald-600 bg-emerald-50'\r\n    },\r\n    {\r\n      label: 'Transactions Today',\r\n      value: (metrics && metrics.transactions_today !== undefined) ? metrics.transactions_today.toLocaleString() : '0',\r\n      icon: '≡ƒôê',\r\n      trend: 'up',\r\n      change: `+${(metrics && metrics.transaction_change !== undefined) ? metrics.transaction_change : 0}%`,\r\n      colorClass: 'text-blue-600 bg-blue-50'\r\n    },\r\n    {\r\n      label: 'API Response Time',\r\n      value: `${(metrics && metrics.api_response_time !== undefined) ? metrics.api_response_time : 120}ms`,\r\n      icon: 'ΓÅ▒∩╕Å',\r\n      trend: 'neutral',\r\n      change: '-5ms',\r\n      colorClass: 'text-amber-600 bg-amber-50'\r\n    },\r\n    {\r\n      label: 'Failed Transactions',\r\n      value: (metrics && metrics.failed_transactions !== undefined) ? metrics.failed_transactions.toString() : '0',\r\n      icon: 'Γ¥î',\r\n      trend: 'down',\r\n      change: `+${(metrics && metrics.failed_change !== undefined) ? metrics.failed_change : 0}`,\r\n      colorClass: 'text-red-600 bg-red-50'\r\n    }\r\n  ];\r\n\r\n  const metricList = getOperationalMetrics();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-pulse\">\r\n        {[1, 2, 3, 4].map(i => (\r\n          <div key={i} className=\"h-32 bg-gray-200 rounded-2xl\"></div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Operational Metrics */}\r\n      <section className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        {metricList.map((metric, index) => (\r\n          <ModernStatCard\r\n            key={index}\r\n            label={metric.label}\r\n            value={String(metric.value)}\r\n            icon={<span className=\"text-2xl\">{metric.icon}</span>}\r\n            change={metric.change}\r\n            trend={metric.trend as any} // 'up' | 'down' | 'neutral'\r\n            colorClass={metric.colorClass}\r\n          />\r\n        ))}\r\n      </section>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n        {/* Branch Activity Summary */}\r\n        <GlassCard className=\"p-6\">\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            ≡ƒôì Branch Activity Summary\r\n          </h3>\r\n          <div className=\"space-y-4\">\r\n            {(branchActivity || []).map((branch, index) => (\r\n              <div key={index} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-blue-200 transition-colors\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-sm\">\r\n                    {branch.name ? branch.name.split(' ').map((w: string) => w[0]).join('') : 'BR'}\r\n                  </div>\r\n                  <div>\r\n                    <h4 className=\"font-bold text-gray-800\">{branch.name || 'Unknown Branch'}</h4>\r\n                    <p className=\"text-sm text-gray-500\">{branch.metrics?.total_transactions?.toLocaleString() || 0} txs</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"font-bold text-emerald-600 text-lg\">{branch.metrics?.success_rate || '0%'}</p>\r\n                  <p className=\"text-xs text-gray-400 font-semibold uppercase\">Success Rate</p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            {(!branchActivity || branchActivity.length === 0) && (\r\n              <p className=\"text-center text-gray-400 py-4\">No branch activity data.</p>\r\n            )}\r\n          </div>\r\n        </GlassCard>\r\n\r\n        {/* Workflow Status */}\r\n        <GlassCard className=\"p-6\">\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            ≡ƒöä Workflow Status\r\n          </h3>\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            {[\r\n              { label: 'Loan Disbursements', completed: (workflowStatus as any)?.loan_disbursements?.completed, pending: (workflowStatus as any)?.loan_disbursements?.pending, icon: '≡ƒÆ░' },\r\n              { label: 'Account Onboarding', completed: (workflowStatus as any)?.account_onboarding?.completed, pending: (workflowStatus as any)?.account_onboarding?.pending, icon: '≡ƒæñ' },\r\n              { label: 'KYC Verification', completed: (workflowStatus as any)?.kyc_verification?.completed, pending: (workflowStatus as any)?.kyc_verification?.pending, icon: '≡ƒåö' },\r\n              { label: 'Service Charges', completed: (workflowStatus as any)?.service_charges?.completed, pending: (workflowStatus as any)?.service_charges?.pending, icon: '≡ƒº╛' }\r\n            ].map((workflow, index) => (\r\n              <div key={index} className=\"p-4 bg-gray-50 rounded-xl border border-gray-100 text-center hover:shadow-sm transition-shadow\">\r\n                <div className=\"flex items-center justify-center gap-2 mb-2 text-gray-700 font-bold\">\r\n                  <span className=\"text-xl\">{workflow.icon}</span>\r\n                  <span className=\"text-sm\">{workflow.label}</span>\r\n                </div>\r\n                <div className=\"flex justify-center gap-6 mt-3\">\r\n                  <div>\r\n                    <div className=\"text-lg font-black text-emerald-500\">{workflow.completed || 0}</div>\r\n                    <div className=\"text-[10px] text-gray-400 uppercase font-bold tracking-wide\">Done</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-lg font-black text-amber-500\">{workflow.pending || 0}</div>\r\n                    <div className=\"text-[10px] text-gray-400 uppercase font-bold tracking-wide\">Pending</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </GlassCard>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OverviewTab;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\PageLoading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\PayslipSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ProtectedMemberRoute.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-console').","line":29,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1195,1233],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-console').","line":36,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1435,1473],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-console').","line":44,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1777,1815],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-console').","line":51,"column":5,"severity":1,"nodeType":null,"fix":{"range":[2047,2085],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"import React, { ReactNode } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport PageLoading from './PageLoading';\r\n\r\n/**\r\n * Props for the ProtectedMemberRoute component.\r\n */\r\ninterface ProtectedMemberRouteProps {\r\n  /** The components to be rendered if the user is a verified customer. */\r\n  children: ReactNode;\r\n}\r\n\r\n/**\r\n * A route protection wrapper that ensures only authenticated users with the 'customer' role can access the wrapped components.\r\n *\r\n * If the authentication state is still loading, it displays a loading splash screen.\r\n * If the user is not authenticated, it redirects to the login page.\r\n * If the user is authenticated but does not have the 'customer' role, it redirects them to their role-specific dashboard.\r\n *\r\n * @param props - The properties for the route protection.\r\n * @returns The children components if authorized, or a redirect otherwise.\r\n */\r\nconst ProtectedMemberRoute: React.FC<ProtectedMemberRouteProps> = ({ children }) => {\r\n  const { user, loading, isAuthenticated } = useAuth();\r\n\r\n  // CRITICAL: Wait for auth loading to complete before making decisions\r\n  if (loading) {\r\n    // eslint-disable-next-line no-console\r\n    console.warn('[DEBUG] ProtectedMemberRoute: Still loading auth state...');\r\n    return <PageLoading />;\r\n  }\r\n\r\n  // Not authenticated - redirect to login\r\n  if (!isAuthenticated || !user) {\r\n    // eslint-disable-next-line no-console\r\n    console.warn('[DEBUG] ProtectedMemberRoute: Not authenticated, redirecting to /login');\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // Check if we're in test mode - allow all authenticated users\r\n  const isTestMode = import.meta.env.VITE_TEST_MODE === 'true';\r\n  if (isTestMode) {\r\n    // eslint-disable-next-line no-console\r\n    console.warn('[DEBUG] Test mode enabled - allowing member dashboard access for all authenticated users');\r\n    return children;\r\n  }\r\n\r\n  // Only allow customers to access member routes\r\n  if (user.role !== 'customer') {\r\n    // eslint-disable-next-line no-console\r\n    console.warn('[DEBUG] ProtectedMemberRoute: User role is', user.role, 'redirecting...');\r\n\r\n    // Redirect based on role\r\n    const roleRoutes: Record<string, string> = {\r\n      cashier: '/cashier-dashboard',\r\n      mobile_banker: '/mobile-banker-dashboard',\r\n      manager: '/manager-dashboard',\r\n      operations_manager: '/operations-dashboard',\r\n      administrator: '/dashboard',\r\n      superuser: '/dashboard',\r\n    };\r\n\r\n    const redirectRoute = roleRoutes[user.role] || '/unauthorized';\r\n    return <Navigate to={redirectRoute} replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedMemberRoute;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ProtectedStaffRoute.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-console').","line":57,"column":9,"severity":1,"nodeType":null,"fix":{"range":[2633,2671],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import React, { ReactNode } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../hooks/useAuth';\r\n\r\n/**\r\n * Props for the ProtectedStaffRoute component.\r\n */\r\ninterface ProtectedStaffRouteProps {\r\n    /** The component to render if the user is authorized. */\r\n    children: ReactNode;\r\n    /** Optional array of specific staff roles that are allowed to access this route. If empty, all staff are allowed. */\r\n    allowedRoles?: string[];\r\n    /** The path to redirect the user to if they are not authorized. Defaults to '/unauthorized'. */\r\n    redirectTo?: string;\r\n}\r\n\r\n/**\r\n * A highly secure route protection wrapper for internal staff dashboards.\r\n *\r\n * It enforces the following security and access policies:\r\n * 1. Authenticated users only (via secure HTTP-only cookies).\r\n * 2. Role-based access control (RBAC) with hierarchical overrides for 'superuser' and 'administrator'.\r\n * 3. Automatic redirection for customers trying to access staff areas.\r\n * 4. Displays a secure \"verifying\" state while checking authentication.\r\n *\r\n * @param props - Configuration properties for staff route protection.\r\n * @returns The children components if authorized, or a redirect otherwise.\r\n */\r\nconst ProtectedStaffRoute: React.FC<ProtectedStaffRouteProps> = ({\r\n    children,\r\n    allowedRoles = [],\r\n    redirectTo = '/unauthorized'\r\n}) => {\r\n    const { isAuthenticated, user, loading } = useAuth();\r\n\r\n    // SECURITY: Auth state is managed by useAuth hook via HTTP-only cookies\r\n    // Do NOT use localStorage for token checks - vulnerable to XSS\r\n\r\n    // Show loading state while checking remote authentication\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-gray-50\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl mb-4 animate-pulse\">\r\n                        <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n                        </svg>\r\n                    </div>\r\n                    <p className=\"text-gray-600 font-medium\">Verifying access permissions...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Redirect to login if not authenticated\r\n    if (!isAuthenticated || !user) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn('ProtectedStaffRoute: Auth failed or no user - network issue? Redirecting to login.');\r\n        return <Navigate to=\"/login\" replace />;\r\n    }\r\n\r\n    // Superuser and administrator have access to everything\r\n    const privilegedRoles = ['superuser', 'administrator'];\r\n    const userRole = user.role ?? '';\r\n    if (privilegedRoles.includes(userRole)) {\r\n        return children;\r\n    }\r\n\r\n    // Check if user's role is in the allowed roles\r\n    if (allowedRoles.length > 0 && !allowedRoles.includes(userRole)) {\r\n        // Redirect customers to member dashboard\r\n        if (userRole === 'customer') {\r\n            return <Navigate to=\"/member-dashboard\" replace />;\r\n        }\r\n\r\n        // Redirect other unauthorized staff to appropriate dashboard\r\n        return <Navigate to={redirectTo} replace />;\r\n    }\r\n\r\n    // Role is allowed, render children\r\n    return children;\r\n};\r\n\r\nexport default ProtectedStaffRoute;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ReportsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[274,277],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[274,277],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[295,298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[295,298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[355,358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[355,358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'authService' is defined but never used. Allowed unused args must match /^_/u.","line":13,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":83},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":114,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4999,5002],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4999,5002],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\nimport GlassCard from './ui/modern/GlassCard';\r\nimport { Button } from './ui/Button';\r\n\r\ninterface ReportsTabProps {\r\n  handleGenerateReport: (reportType: string) => void;\r\n  authService: any;\r\n  reportData?: any;\r\n  setReportData?: React.Dispatch<React.SetStateAction<any>>;\r\n}\r\n\r\nconst ReportsTab: React.FC<ReportsTabProps> = ({ handleGenerateReport, authService, reportData, setReportData }) => {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h3 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n        <span>≡ƒº╛</span> Report Generation\r\n      </h3>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {[\r\n          {\r\n            type: 'daily_transaction',\r\n            title: 'Daily Transaction Report',\r\n            description: 'Comprehensive daily transaction summary',\r\n            icon: '≡ƒôè',\r\n            color: 'blue'\r\n          },\r\n          {\r\n            type: 'system_performance',\r\n            title: 'System Performance Report',\r\n            description: 'System uptime and performance metrics',\r\n            icon: 'ΓÜí',\r\n            color: 'amber'\r\n          },\r\n          {\r\n            type: 'staff_activity',\r\n            title: 'Staff Activity Report',\r\n            description: 'Staff productivity and activity logs',\r\n            icon: '≡ƒæÑ',\r\n            color: 'emerald'\r\n          },\r\n          {\r\n            type: 'security_audit',\r\n            title: 'Security Audit Report',\r\n            description: 'Security incidents and compliance status',\r\n            icon: '≡ƒöÆ',\r\n            color: 'red'\r\n          }\r\n        ].map((report, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => handleGenerateReport(report.type)}\r\n            className={`\r\n                group text-left p-6 rounded-2xl border transition-all duration-300 hover:-translate-y-1 hover:shadow-lg\r\n                bg-white border-gray-200 hover:border-${report.color}-300 hover:bg-${report.color}-50/30\r\n            `}\r\n          >\r\n            <div className={`text-3xl mb-4 p-3 rounded-xl inline-block bg-${report.color}-100 text-${report.color}-600`}>\r\n              {report.icon}\r\n            </div>\r\n            <h4 className=\"text-lg font-bold text-gray-800 mb-2 group-hover:text-coastal-primary transition-colors\">\r\n              {report.title}\r\n            </h4>\r\n            <p className=\"text-sm text-gray-500 leading-relaxed\">\r\n              {report.description}\r\n            </p>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {reportData && (\r\n        <GlassCard className=\"p-0 overflow-hidden animate-fade-in-up border-t-[6px] border-t-coastal-primary\">\r\n          <div className=\"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50\">\r\n            <div>\r\n              <h4 className=\"text-xl font-bold text-gray-800\">\r\n                {reportData.report_type}\r\n              </h4>\r\n              <p className=\"text-sm text-gray-500 font-medium mt-1\">\r\n                Period: <span className=\"text-gray-700\">{reportData.period}</span>\r\n              </p>\r\n            </div>\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"danger\"\r\n              onClick={() => setReportData && setReportData(null)}\r\n              className=\"shadow-sm\"\r\n            >\r\n              Close Report Γ£ò\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"p-8\">\r\n            {/* Daily Transaction Report */}\r\n            {reportData.report_type === 'Daily Transaction Report' && (\r\n              <div className=\"space-y-8\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"bg-blue-50 p-6 rounded-2xl text-center border border-blue-100\">\r\n                    <div className=\"text-4xl mb-2\">≡ƒôè</div>\r\n                    <div className=\"text-3xl font-black text-gray-800 mb-1\">{reportData.total_transactions?.toLocaleString() || 0}</div>\r\n                    <div className=\"text-sm text-gray-500 font-bold uppercase tracking-wider\">Total Transactions</div>\r\n                  </div>\r\n                  <div className=\"bg-emerald-50 p-6 rounded-2xl text-center border border-emerald-100\">\r\n                    <div className=\"text-4xl mb-2\">≡ƒÆ░</div>\r\n                    <div className=\"text-3xl font-black text-emerald-600 mb-1\">{formatCurrencyGHS(reportData.total_volume || 0)}</div>\r\n                    <div className=\"text-sm text-gray-500 font-bold uppercase tracking-wider\">Total Volume</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {reportData.by_type && (\r\n                  <div>\r\n                    <h5 className=\"font-bold text-gray-800 mb-4 ml-1\">Breakdown by Type</h5>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\r\n                      {Object.entries(reportData.by_type).map(([type, data]: [string, any]) => (\r\n                        <div key={type} className=\"p-4 rounded-xl border border-gray-200 hover:border-blue-200 bg-white transition-colors\">\r\n                          <div className=\"text-sm font-bold text-gray-500 uppercase tracking-wider mb-2\">{type}</div>\r\n                          <div className=\"flex justify-between items-end\">\r\n                            <div>\r\n                              <div className=\"text-xs text-gray-400\">Count</div>\r\n                              <div className=\"font-bold text-gray-800\">{data.count?.toLocaleString() || 0}</div>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                              <div className=\"text-xs text-gray-400\">Volume</div>\r\n                              <div className=\"font-bold text-coastal-primary\">{formatCurrencyGHS(data.volume || 0)}</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* System Performance Report */}\r\n            {reportData.report_type === 'System Performance Report' && (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <div className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm text-center\">\r\n                  <div className=\"text-3xl mb-3\">ΓÅ▒∩╕Å</div>\r\n                  <div className=\"text-2xl font-black text-blue-600 mb-1\">{reportData.uptime}</div>\r\n                  <div className=\"text-xs text-gray-400 font-bold uppercase\">System Uptime</div>\r\n                </div>\r\n                <div className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm text-center\">\r\n                  <div className=\"text-3xl mb-3\">ΓÜí</div>\r\n                  <div className=\"text-2xl font-black text-gray-800 mb-1\">{reportData.avg_response_time}</div>\r\n                  <div className=\"text-xs text-gray-400 font-bold uppercase\">Avg Response</div>\r\n                </div>\r\n                <div className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm text-center\">\r\n                  <div className=\"text-3xl mb-3\">≡ƒôê</div>\r\n                  <div className=\"text-2xl font-black text-gray-800 mb-1\">{reportData.total_requests?.toLocaleString() || 0}</div>\r\n                  <div className=\"text-xs text-gray-400 font-bold uppercase\">Total Requests</div>\r\n                </div>\r\n                <div className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm text-center\">\r\n                  <div className=\"text-3xl mb-3\">Γ¥î</div>\r\n                  <div className=\"text-2xl font-black text-red-500 mb-1\">{reportData.failed_requests?.toLocaleString() || 0}</div>\r\n                  <div className=\"text-xs text-gray-400 font-bold uppercase\">Failed Requests</div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Staff Activity Report */}\r\n            {reportData.report_type === 'Staff Activity Report' && (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <div className=\"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-6 text-white text-center shadow-lg shadow-indigo-100\">\r\n                  <div className=\"text-4xl mb-4 opacity-80\">≡ƒæÑ</div>\r\n                  <div className=\"text-4xl font-black mb-1\">{reportData.total_staff || 0}</div>\r\n                  <div className=\"text-indigo-100 font-medium\">Total Staff Members</div>\r\n                </div>\r\n                <div className=\"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 text-white text-center shadow-lg shadow-emerald-100\">\r\n                  <div className=\"text-4xl mb-4 opacity-80\">≡ƒƒó</div>\r\n                  <div className=\"text-4xl font-black mb-1\">{reportData.active_staff || 0}</div>\r\n                  <div className=\"text-emerald-100 font-medium\">Currently Active</div>\r\n                </div>\r\n                <div className=\"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white text-center shadow-lg shadow-gray-200\">\r\n                  <div className=\"text-4xl mb-4 opacity-80\">≡ƒôè</div>\r\n                  <div className=\"text-4xl font-black mb-1\">{reportData.transactions_processed?.toLocaleString() || 0}</div>\r\n                  <div className=\"text-gray-300 font-medium\">Transactions Processed</div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Security Audit Report */}\r\n            {reportData.report_type === 'Security Audit Report' && (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <div className=\"p-6 rounded-2xl bg-red-50 border border-red-100 text-center\">\r\n                  <div className=\"text-3xl mb-2\">≡ƒÜ¿</div>\r\n                  <div className=\"text-2xl font-black text-red-600 mb-1\">{reportData.failed_login_attempts || 0}</div>\r\n                  <div className=\"text-xs font-bold text-red-400 uppercase\">Failed Logins</div>\r\n                </div>\r\n                <div className=\"p-6 rounded-2xl bg-amber-50 border border-amber-100 text-center\">\r\n                  <div className=\"text-3xl mb-2\">ΓÜá∩╕Å</div>\r\n                  <div className=\"text-2xl font-black text-amber-600 mb-1\">{reportData.suspicious_activities || 0}</div>\r\n                  <div className=\"text-xs font-bold text-amber-400 uppercase\">Suspicious Activity</div>\r\n                </div>\r\n                <div className=\"p-6 rounded-2xl bg-gray-50 border border-gray-200 text-center\">\r\n                  <div className=\"text-3xl mb-2\">≡ƒ¢í∩╕Å</div>\r\n                  <div className=\"text-2xl font-black text-gray-800 mb-1\">{reportData.security_incidents || 0}</div>\r\n                  <div className=\"text-xs font-bold text-gray-400 uppercase\">Incidents</div>\r\n                </div>\r\n                <div className={`\r\n                    p-6 rounded-2xl border text-center\r\n                    ${reportData.compliance_status === 'Compliant' ? 'bg-emerald-50 border-emerald-100' : 'bg-red-50 border-red-100'}\r\n                 `}>\r\n                  <div className=\"text-3xl mb-2\">\r\n                    {reportData.compliance_status === 'Compliant' ? 'Γ£à' : 'Γ¥î'}\r\n                  </div>\r\n                  <div className={`text-xl font-black mb-1 ${reportData.compliance_status === 'Compliant' ? 'text-emerald-600' : 'text-red-600'}`}>\r\n                    {reportData.compliance_status}\r\n                  </div>\r\n                  <div className=\"text-xs font-bold opacity-60 uppercase\">Compliance</div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </GlassCard>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportsTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\RoleBasedDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ServiceChargesSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[289,292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[289,292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[447,450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[447,450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[491,494],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[491,494],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { apiService } from '../services/api.ts';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\n\r\ninterface ServiceCharge {\r\n  id?: number;\r\n  name: string;\r\n  description: string;\r\n  charge_type: string;\r\n  rate: string | number;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface ServiceChargesSectionProps {\r\n  newCharge: ServiceCharge;\r\n  setNewCharge: (charge: ServiceCharge) => void;\r\n  serviceChargeCalculation: any;\r\n  setServiceChargeCalculation: (calc: any) => void;\r\n  serviceCharges: ServiceCharge[];\r\n  fetchServiceCharges: () => void;\r\n}\r\n\r\nconst ServiceChargesSection: React.FC<ServiceChargesSectionProps> = ({\r\n  newCharge,\r\n  setNewCharge,\r\n  serviceChargeCalculation,\r\n  setServiceChargeCalculation,\r\n  serviceCharges,\r\n  fetchServiceCharges\r\n}) => {\r\n  return (\r\n    <div style={{\r\n      background: 'white',\r\n      borderRadius: '16px',\r\n      padding: '30px',\r\n      boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n      border: '1px solid #e2e8f0'\r\n    }}>\r\n      <h3 style={{\r\n        margin: '0 0 24px 0',\r\n        color: '#1e293b',\r\n        fontSize: '20px',\r\n        fontWeight: '600',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '10px'\r\n      }}>\r\n        Service Charge Management\r\n      </h3>\r\n\r\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '24px' }}>\r\n        {/* Create Service Charge */}\r\n        <div style={{\r\n          background: '#f8fafc',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <h4 style={{ margin: '0 0 16px 0', color: '#1e293b' }}>Create New Service Charge</h4>\r\n\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Charge Name\"\r\n              value={newCharge.name}\r\n              onChange={(e) => setNewCharge({ ...newCharge, name: e.target.value })}\r\n              style={{\r\n                padding: '10px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px'\r\n              }}\r\n            />\r\n\r\n            <textarea\r\n              placeholder=\"Description\"\r\n              value={newCharge.description}\r\n              onChange={(e) => setNewCharge({ ...newCharge, description: e.target.value })}\r\n              style={{\r\n                padding: '10px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                minHeight: '60px'\r\n              }}\r\n            />\r\n\r\n            <select\r\n              value={newCharge.charge_type}\r\n              onChange={(e) => setNewCharge({ ...newCharge, charge_type: e.target.value })}\r\n              style={{\r\n                padding: '10px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px'\r\n              }}\r\n            >\r\n              <option value=\"percentage\">Percentage</option>\r\n              <option value=\"fixed\">Fixed Amount</option>\r\n            </select>\r\n\r\n            <input\r\n              type=\"number\"\r\n              placeholder={newCharge.charge_type === 'percentage' ? 'Rate (%)' : 'Fixed Amount (GHS)'}\r\n              value={newCharge.rate}\r\n              onChange={(e) => setNewCharge({ ...newCharge, rate: e.target.value })}\r\n              style={{\r\n                padding: '10px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px'\r\n              }}\r\n            />\r\n\r\n            <div>\r\n              <label style={{ fontSize: '14px', fontWeight: '600', color: '#374151' }}>\r\n                Applicable to:\r\n              </label>\r\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px', marginTop: '8px' }}>\r\n                {['deposit', 'withdrawal', 'transfer'].map(type => (\r\n                  <label key={type} style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={newCharge.applicable_to.includes(type)}\r\n                      onChange={(e) => {\r\n                        const updated = e.target.checked\r\n                          ? [...newCharge.applicable_to, type]\r\n                          : newCharge.applicable_to.filter(t => t !== type);\r\n                        setNewCharge({ ...newCharge, applicable_to: updated });\r\n                      }}\r\n                    />\r\n                    {type.charAt(0).toUpperCase() + type.slice(1)}\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              onClick={async () => {\r\n                const result = await apiService.createServiceCharge(newCharge);\r\n                if (result.success) {\r\n                  alert('Service charge created successfully!');\r\n                  setNewCharge({\r\n                    name: '',\r\n                    description: '',\r\n                    charge_type: 'percentage',\r\n                    rate: '',\r\n                    applicable_to: []\r\n                  });\r\n                  // Refresh service charges\r\n                  fetchServiceCharges();\r\n                } else {\r\n                  alert('Failed to create service charge: ' + result.error);\r\n                }\r\n              }}\r\n              style={{\r\n                padding: '12px',\r\n                background: 'linear-gradient(135deg, #dc2626 0%, #ef4444 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Create Service Charge\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Service Charge Calculator */}\r\n        <div style={{\r\n          background: '#f8fafc',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <h4 style={{ margin: '0 0 16px 0', color: '#1e293b' }}>Service Charge Calculator</h4>\r\n\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n            <select\r\n              onChange={(e) => setServiceChargeCalculation({ ...serviceChargeCalculation, transaction_type: e.target.value })}\r\n              style={{\r\n                padding: '10px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px'\r\n              }}\r\n            >\r\n              <option value=\"\">Select Transaction Type</option>\r\n              <option value=\"deposit\">Deposit</option>\r\n              <option value=\"withdrawal\">Withdrawal</option>\r\n              <option value=\"transfer\">Transfer</option>\r\n            </select>\r\n\r\n            <input\r\n              type=\"number\"\r\n              placeholder=\"Transaction Amount (GHS)\"\r\n              onChange={(e) => setServiceChargeCalculation({ ...serviceChargeCalculation, amount: parseFloat(e.target.value) })}\r\n              style={{\r\n                padding: '10px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px'\r\n              }}\r\n            />\r\n\r\n            <button\r\n              onClick={async () => {\r\n                if (!serviceChargeCalculation?.transaction_type || !serviceChargeCalculation?.amount) {\r\n                  alert('Please select transaction type and enter amount');\r\n                  return;\r\n                }\r\n\r\n                const result = await apiService.calculateServiceCharge({\r\n                  transaction_type: serviceChargeCalculation.transaction_type,\r\n                  amount: serviceChargeCalculation.amount\r\n                });\r\n\r\n                if (result.success) {\r\n                  setServiceChargeCalculation(result.data);\r\n                } else {\r\n                  alert('Failed to calculate service charge: ' + result.error);\r\n                }\r\n              }}\r\n              style={{\r\n                padding: '12px',\r\n                background: 'linear-gradient(135deg, #dc2626 0%, #ef4444 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Calculate Charge\r\n            </button>\r\n\r\n            {serviceChargeCalculation && serviceChargeCalculation.charge_breakdown && (\r\n              <div style={{\r\n                marginTop: '16px',\r\n                padding: '16px',\r\n                background: 'white',\r\n                borderRadius: '8px',\r\n                border: '1px solid #e2e8f0'\r\n              }}>\r\n                <h5 style={{ margin: '0 0 12px 0', color: '#1e293b' }}>Calculation Result</h5>\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px', fontSize: '14px' }}>\r\n                  <div>Transaction Amount: {formatCurrencyGHS(serviceChargeCalculation.transaction_amount)}</div>\r\n                  <div>Total Service Charge: {formatCurrencyGHS(serviceChargeCalculation.total_service_charge)}</div>\r\n                  <div>Net Amount: {formatCurrencyGHS(serviceChargeCalculation.net_amount)}</div>\r\n\r\n                  {serviceChargeCalculation.charge_breakdown.map((charge, index) => (\r\n                    <div key={index} style={{ padding: '8px', background: '#f3f4f6', borderRadius: '4px' }}>\r\n                      {charge.name}: {formatCurrencyGHS(charge.amount)} ({charge.type}: {charge.rate}{charge.type === 'percentage' ? '%' : ' GHS'})\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Interest Calculator */}\r\n      <div style={{\r\n        background: '#f8fafc',\r\n        padding: '20px',\r\n        borderRadius: '12px',\r\n        border: '1px solid #e2e8f0',\r\n        marginTop: '24px'\r\n      }}>\r\n        <h4 style={{ margin: '0 0 16px 0', color: '#1e293b' }}>Interest Calculator</h4>\r\n\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n          <p style={{ margin: 0, color: '#64748b', fontSize: '14px' }}>\r\n            Calculate interest on all active loans based on client behavior and contribution history.\r\n          </p>\r\n\r\n          <button\r\n            onClick={async () => {\r\n              const result = await apiService.calculateInterest();\r\n              if (result.success) {\r\n                setServiceChargeCalculation({ ...serviceChargeCalculation, interestCalculation: result.data });\r\n              } else {\r\n                alert('Failed to calculate interest: ' + result.error);\r\n              }\r\n            }}\r\n            style={{\r\n              padding: '12px',\r\n              background: 'linear-gradient(135deg, #dc2626 0%, #ef4444 100%)',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontWeight: '600',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            Calculate Interest\r\n          </button>\r\n\r\n          {serviceChargeCalculation?.interestCalculation && (\r\n            <div style={{\r\n              marginTop: '16px',\r\n              padding: '16px',\r\n              background: 'white',\r\n              borderRadius: '8px',\r\n              border: '1px solid #e2e8f0'\r\n            }}>\r\n              <h5 style={{ margin: '0 0 12px 0', color: '#1e293b' }}>Interest Calculation Results</h5>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px', fontSize: '14px' }}>\r\n                <div>Principal Amount: {formatCurrencyGHS(serviceChargeCalculation.interestCalculation.principal)}</div>\r\n                <div>Annual Interest Rate: {serviceChargeCalculation.interestCalculation.annual_rate}%</div>\r\n                <div>Time Period: {serviceChargeCalculation.interestCalculation.time_period_months} months</div>\r\n                <div>Compounding Frequency: {serviceChargeCalculation.interestCalculation.compounding_frequency}</div>\r\n                <div>Interest Amount: {formatCurrencyGHS(serviceChargeCalculation.interestCalculation.interest_amount)}</div>\r\n                <div>Final Amount: {formatCurrencyGHS(serviceChargeCalculation.interestCalculation.final_amount)}</div>\r\n                <div>Account Type: {serviceChargeCalculation.interestCalculation.account_type}</div>\r\n                {serviceChargeCalculation.interestCalculation.monthly_payment && (\r\n                  <div>Monthly Payment: {formatCurrencyGHS(serviceChargeCalculation.interestCalculation.monthly_payment)}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Commission Calculator */}\r\n      <div style={{\r\n        background: '#f8fafc',\r\n        padding: '20px',\r\n        borderRadius: '12px',\r\n        border: '1px solid #e2e8f0',\r\n        marginTop: '24px'\r\n      }}>\r\n        <h4 style={{ margin: '0 0 16px 0', color: '#1e293b' }}>Commission Calculator</h4>\r\n\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n          <p style={{ margin: 0, color: '#64748b', fontSize: '14px' }}>\r\n            Calculate commissions based on transaction activity and service charges.\r\n          </p>\r\n\r\n          <button\r\n            onClick={async () => {\r\n              const result = await apiService.calculateCommission();\r\n              if (result.success) {\r\n                setServiceChargeCalculation({ ...serviceChargeCalculation, commissionCalculation: result.data });\r\n              } else {\r\n                alert('Failed to calculate commission: ' + result.error);\r\n              }\r\n            }}\r\n            style={{\r\n              padding: '12px',\r\n              background: 'linear-gradient(135deg, #dc2626 0%, #ef4444 100%)',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontWeight: '600',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            Calculate Commission\r\n          </button>\r\n\r\n          {serviceChargeCalculation?.commissionCalculation && (\r\n            <div style={{\r\n              marginTop: '16px',\r\n              padding: '16px',\r\n              background: 'white',\r\n              borderRadius: '8px',\r\n              border: '1px solid #e2e8f0'\r\n            }}>\r\n              <h5 style={{ margin: '0 0 12px 0', color: '#1e293b' }}>Commission Summary</h5>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px', fontSize: '14px' }}>\r\n                <div>All Time Total: {formatCurrencyGHS(serviceChargeCalculation.commissionCalculation.all_time_total)}</div>\r\n\r\n                <div style={{ marginTop: '12px' }}>\r\n                  <h6 style={{ margin: '0 0 8px 0', color: '#1e293b' }}>Daily Summary</h6>\r\n                  <div>Total: {formatCurrencyGHS(serviceChargeCalculation.commissionCalculation.daily.total)}</div>\r\n                  <div style={{ marginLeft: '12px' }}>\r\n                    {Object.entries(serviceChargeCalculation.commissionCalculation.daily.by_type).map(([type, amount]) => (\r\n                      <div key={type}>{type}: {formatCurrencyGHS(amount)}</div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ marginTop: '12px' }}>\r\n                  <h6 style={{ margin: '0 0 8px 0', color: '#1e293b' }}>Weekly Summary</h6>\r\n                  <div>Total: {formatCurrencyGHS(serviceChargeCalculation.commissionCalculation.weekly.total)}</div>\r\n                  <div style={{ marginLeft: '12px' }}>\r\n                    {Object.entries(serviceChargeCalculation.commissionCalculation.weekly.by_type).map(([type, amount]) => (\r\n                      <div key={type}>{type}: {formatCurrencyGHS(amount)}</div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ marginTop: '12px' }}>\r\n                  <h6 style={{ margin: '0 0 8px 0', color: '#1e293b' }}>Monthly Summary</h6>\r\n                  <div>Total: {formatCurrencyGHS(serviceChargeCalculation.commissionCalculation.monthly.total)}</div>\r\n                  <div style={{ marginLeft: '12px' }}>\r\n                    {Object.entries(serviceChargeCalculation.commissionCalculation.monthly.by_type).map(([type, amount]) => (\r\n                      <div key={type}>{type}: {formatCurrencyGHS(amount)}</div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Active Service Charges */}\r\n      <div style={{ marginTop: '24px' }}>\r\n        <h4 style={{ margin: '0 0 16px 0', color: '#1e293b' }}>Active Service Charges</h4>\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '16px' }}>\r\n          {serviceCharges?.map((charge, index) => (\r\n            <div key={index} style={{\r\n              padding: '16px',\r\n              background: '#f8fafc',\r\n              borderRadius: '8px',\r\n              border: '1px solid #e2e8f0'\r\n            }}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '8px' }}>\r\n                <h5 style={{ margin: 0, color: '#1e293b' }}>{charge.name}</h5>\r\n                <span style={{\r\n                  background: charge.charge_type === 'percentage' ? '#dbeafe' : '#fef3c7',\r\n                  color: charge.charge_type === 'percentage' ? '#1e40af' : '#92400e',\r\n                  padding: '4px 8px',\r\n                  borderRadius: '12px',\r\n                  fontSize: '12px',\r\n                  fontWeight: '600'\r\n                }}>\r\n                  {charge.charge_type}\r\n                </span>\r\n              </div>\r\n              <p style={{ margin: '0 0 8px 0', color: '#64748b', fontSize: '14px' }}>{charge.description}</p>\r\n              <div style={{ fontSize: '16px', fontWeight: '600', color: '#1e293b' }}>\r\n                {charge.rate}{charge.charge_type === 'percentage' ? '%' : ' GHS'}\r\n              </div>\r\n              <div style={{ marginTop: '8px', fontSize: '12px', color: '#64748b' }}>\r\n                Applies to: {charge.applicable_to.join(', ')}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ServiceChargesSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ServiceChargesTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[280,283],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[280,283],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[301,304],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[301,304],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[359,362],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[359,362],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[395,398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[395,398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[468,471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[468,471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[491,494],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[491,494],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9401,9404],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9401,9404],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":230,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10811,10814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10811,10814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\nimport GlassCard from './ui/modern/GlassCard';\r\nimport { Button } from './ui/Button';\r\nimport { Input } from './ui/Input';\r\n\r\ninterface ServiceChargesTabProps {\r\n  serviceCharges: any[];\r\n  newCharge: any;\r\n  setNewCharge: React.Dispatch<React.SetStateAction<any>>;\r\n  serviceChargeCalculation: any;\r\n  setServiceChargeCalculation: React.Dispatch<React.SetStateAction<any>>;\r\n  authService: any;\r\n  refetchCharges: () => void;\r\n}\r\n\r\nconst ServiceChargesTab: React.FC<ServiceChargesTabProps> = ({\r\n  serviceCharges, newCharge, setNewCharge, serviceChargeCalculation,\r\n  setServiceChargeCalculation, authService, refetchCharges\r\n}) => {\r\n\r\n  const handleCreateCharge = async () => {\r\n    const result = await authService.createServiceCharge(newCharge);\r\n    if (result.success) {\r\n      alert('Service charge created successfully!');\r\n      setNewCharge({\r\n        name: '',\r\n        description: '',\r\n        charge_type: 'percentage',\r\n        rate: '',\r\n        applicable_to: []\r\n      });\r\n      refetchCharges();\r\n    } else {\r\n      alert('Failed to create service charge: ' + result.error);\r\n    }\r\n  };\r\n\r\n  const handleCalculateCharge = async () => {\r\n    if (!serviceChargeCalculation?.transaction_type || !serviceChargeCalculation?.amount) {\r\n      alert('Please select transaction type and enter amount');\r\n      return;\r\n    }\r\n\r\n    const result = await authService.calculateServiceCharge({\r\n      transaction_type: serviceChargeCalculation.transaction_type,\r\n      amount: serviceChargeCalculation.amount\r\n    });\r\n\r\n    if (result.success) {\r\n      setServiceChargeCalculation(result.data);\r\n    } else {\r\n      alert('Failed to calculate service charge: ' + result.error);\r\n    }\r\n  };\r\n\r\n  const applicableTypes = ['deposit', 'withdrawal', 'transfer'];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h3 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n        <span>≡ƒÆ╕</span> Service Charge Management\r\n      </h3>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Create Service Charge */}\r\n        <GlassCard className=\"p-6 border-t-[6px] border-t-purple-500\">\r\n          <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            <span className=\"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 text-sm\">Γ₧ò</span>\r\n            Create New Service Charge\r\n          </h4>\r\n          <div className=\"space-y-4\">\r\n            <Input\r\n              label=\"Charge Name\"\r\n              placeholder=\"e.g. Withdrawal Fee\"\r\n              value={newCharge.name}\r\n              onChange={(e) => setNewCharge({ ...newCharge, name: e.target.value })}\r\n            />\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                Description\r\n              </label>\r\n              <textarea\r\n                placeholder=\"Short description...\"\r\n                value={newCharge.description}\r\n                onChange={(e) => setNewCharge({ ...newCharge, description: e.target.value })}\r\n                rows={2}\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50 resize-y\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                  Type\r\n                </label>\r\n                <select\r\n                  value={newCharge.charge_type}\r\n                  onChange={(e) => setNewCharge({ ...newCharge, charge_type: e.target.value })}\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n                >\r\n                  <option value=\"percentage\">Percentage</option>\r\n                  <option value=\"fixed\">Fixed Amount</option>\r\n                </select>\r\n              </div>\r\n              <Input\r\n                label={newCharge.charge_type === 'percentage' ? 'Rate (%)' : 'Fixed Amount (GHS)'}\r\n                type=\"number\"\r\n                value={newCharge.rate}\r\n                onChange={(e) => setNewCharge({ ...newCharge, rate: e.target.value })}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2 ml-1\">\r\n                Applicable to:\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {applicableTypes.map(type => (\r\n                  <button\r\n                    key={type}\r\n                    onClick={() => {\r\n                      const updated = newCharge.applicable_to.includes(type)\r\n                        ? newCharge.applicable_to.filter((t: string) => t !== type)\r\n                        : [...newCharge.applicable_to, type];\r\n                      setNewCharge({ ...newCharge, applicable_to: updated });\r\n                    }}\r\n                    type=\"button\"\r\n                    className={`\r\n                            px-3 py-2 rounded-lg text-xs font-bold transition-all border\r\n                            ${newCharge.applicable_to.includes(type)\r\n                        ? 'bg-purple-600 text-white border-purple-600 shadow-md'\r\n                        : 'bg-white text-gray-600 border-gray-200 hover:border-purple-300 hover:bg-purple-50'}\r\n                        `}\r\n                  >\r\n                    {newCharge.applicable_to.includes(type) && <span className=\"mr-1\">Γ£ô</span>}\r\n                    {type.charAt(0).toUpperCase() + type.slice(1)}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <Button onClick={handleCreateCharge} variant=\"primary\" className=\"w-full shadow-lg shadow-purple-100\">\r\n              Create Service Charge\r\n            </Button>\r\n          </div>\r\n        </GlassCard>\r\n\r\n        {/* Service Charge Calculator */}\r\n        <GlassCard className=\"p-6 border-t-[6px] border-t-amber-500 flex flex-col h-full\">\r\n          <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            <span className=\"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-sm\">≡ƒº«</span>\r\n            Service Charge Calculator\r\n          </h4>\r\n\r\n          <div className=\"space-y-4 flex-1\">\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                Transaction Type\r\n              </label>\r\n              <select\r\n                onChange={(e) => setServiceChargeCalculation(c => ({ ...c, transaction_type: e.target.value }))}\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n              >\r\n                <option value=\"\">Select Transaction Type</option>\r\n                {applicableTypes.map(type => <option key={type} value={type}>{type.charAt(0).toUpperCase() + type.slice(1)}</option>)}\r\n              </select>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Transaction Amount (GHS)\"\r\n              type=\"number\"\r\n              onChange={(e) => setServiceChargeCalculation(c => ({ ...c, amount: parseFloat(e.target.value) }))}\r\n            />\r\n\r\n            <Button onClick={handleCalculateCharge} variant=\"secondary\" className=\"w-full flex-1\">\r\n              Calculate Charge\r\n            </Button>\r\n\r\n            {serviceChargeCalculation && serviceChargeCalculation.charge_breakdown && (\r\n              <div className=\"mt-4 p-4 bg-white rounded-xl border border-gray-100 shadow-sm animate-fade-in-up\">\r\n                <h5 className=\"font-bold text-gray-800 mb-3 border-b border-gray-100 pb-2\">Calculation Result</h5>\r\n                <div className=\"space-y-2 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500\">Transaction Amount:</span>\r\n                    <span className=\"font-mono font-bold\">{formatCurrencyGHS(serviceChargeCalculation.transaction_amount)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-500\">Total Service Charge:</span>\r\n                    <span className=\"font-mono font-bold text-red-600\">-{formatCurrencyGHS(serviceChargeCalculation.total_service_charge)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between pt-2 border-t border-dashed border-gray-200\">\r\n                    <span className=\"font-bold text-gray-700\">Net Amount:</span>\r\n                    <span className=\"font-mono font-black text-emerald-600\">{formatCurrencyGHS(serviceChargeCalculation.net_amount)}</span>\r\n                  </div>\r\n\r\n                  <div className=\"mt-4\">\r\n                    <h6 className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2\">Breakdown:</h6>\r\n                    <div className=\"space-y-1\">\r\n                      {serviceChargeCalculation.charge_breakdown.map((charge: any, index: number) => (\r\n                        <div key={index} className=\"flex justify-between items-center text-xs p-2 bg-gray-50 rounded\">\r\n                          <span>{charge.name}</span>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"bg-gray-200 text-gray-600 px-1.5 rounded\">{charge.rate}{charge.type === 'percentage' ? '%' : ''}</span>\r\n                            <span className=\"font-bold\">{formatCurrencyGHS(charge.amount)}</span>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </GlassCard>\r\n      </div>\r\n\r\n      {/* Active Service Charges List */}\r\n      <GlassCard className=\"p-6\">\r\n        <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n          <span className=\"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 text-sm\">≡ƒôï</span>\r\n          Active Service Charges\r\n        </h4>\r\n\r\n        {serviceCharges.length === 0 ? (\r\n          <div className=\"text-center py-8 text-gray-400\">No active service charges found.</div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {serviceCharges.map((charge: any, index: number) => (\r\n              <div key={index} className=\"p-5 rounded-xl border border-gray-100 bg-white shadow-sm hover:shadow-md transition-shadow relative overflow-hidden group\">\r\n                {/* Decorative background circle */}\r\n                <div className=\"absolute -right-4 -top-4 w-16 h-16 rounded-full bg-gray-50 group-hover:bg-blue-50 transition-colors z-0\"></div>\r\n\r\n                <div className=\"relative z-10\">\r\n                  <div className=\"flex justify-between items-start mb-2\">\r\n                    <h5 className=\"font-bold text-gray-800 pr-8\">{charge.name}</h5>\r\n                    <span className={`\r\n                                text-[10px] font-bold px-2 py-0.5 rounded-full uppercase\r\n                                ${charge.charge_type === 'percentage' ? 'bg-blue-100 text-blue-700' : 'bg-amber-100 text-amber-700'}\r\n                            `}>\r\n                      {charge.charge_type}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <p className=\"text-sm text-gray-500 mb-4 h-10 line-clamp-2\">{charge.description}</p>\r\n\r\n                  <div className=\"flex justify-between items-end border-t border-gray-50 pt-3\">\r\n                    <div>\r\n                      <h6 className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1\">Applies To</h6>\r\n                      <div className=\"flex flex-wrap gap-1\">\r\n                        {charge.applicable_to.map((t: string, i: number) => (\r\n                          <span key={i} className=\"text-[10px] bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded capitalize\">\r\n                            {t}\r\n                          </span>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-xl font-black text-gray-800\">\r\n                      {charge.rate}{charge.charge_type === 'percentage' ? '%' : <span className=\"text-xs text-gray-400 font-normal ml-0.5\">GHS</span>}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </GlassCard>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ServiceChargesTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\SpendingTrendsChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[673,676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[673,676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\n\r\nconst SpendingTrendsChart = ({ data }) => {\r\n  // Show empty state if no data provided\r\n  if (!data || data.length === 0) {\r\n    return (\r\n      <div className=\"w-full h-64 flex items-center justify-center bg-neutral-50 rounded-lg border border-neutral-200\">\r\n        <p className=\"text-neutral-500 text-sm\">No spending data available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const chartData = data;\r\n\r\n  const CustomTooltip = ({ active, payload, label }: { active?: boolean; payload?: any[]; label?: string }) => {\r\n    if (active && payload && payload.length) {\r\n      return (\r\n        <div className=\"bg-white p-3 border border-neutral-200 rounded-lg shadow-lg\">\r\n          <p className=\"font-medium text-neutral-900\">{label}</p>\r\n          {payload.map((entry, index) => (\r\n            <p key={index} style={{ color: entry.color }} className=\"text-sm\">\r\n              {entry.name}: {formatCurrencyGHS(entry.value)}\r\n            </p>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-64\">\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <LineChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f3f4f6\" />\r\n          <XAxis\r\n            dataKey=\"month\"\r\n            stroke=\"#6b7280\"\r\n            fontSize={12}\r\n            tickLine={false}\r\n          />\r\n          <YAxis\r\n            stroke=\"#6b7280\"\r\n            fontSize={12}\r\n            tickLine={false}\r\n            tickFormatter={(value) => `Γé╡${(value / 1000).toFixed(0)}k`}\r\n          />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Line\r\n            type=\"monotone\"\r\n            dataKey=\"spending\"\r\n            stroke=\"#0066CC\"\r\n            strokeWidth={3}\r\n            dot={{ fill: '#0066CC', strokeWidth: 2, r: 4 }}\r\n            activeDot={{ r: 6, stroke: '#0066CC', strokeWidth: 2, fill: '#ffffff' }}\r\n          />\r\n          <Line\r\n            type=\"monotone\"\r\n            dataKey=\"income\"\r\n            stroke=\"#10b981\"\r\n            strokeWidth={2}\r\n            strokeDasharray=\"5 5\"\r\n            dot={{ fill: '#10b981', strokeWidth: 2, r: 3 }}\r\n          />\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SpendingTrendsChart;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\StaffVerificationPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\StatementsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\TransactionForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\TransactionsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\UserManagementSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\VirtualizedList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState, useEffect, useCallback } from 'react';\r\n\r\ninterface VirtualizedListProps<T> {\r\n  items: T[];\r\n  itemHeight: number;\r\n  containerHeight: number;\r\n  renderItem: (item: T, index: number) => React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nfunction VirtualizedList<T>({\r\n  items,\r\n  itemHeight,\r\n  containerHeight,\r\n  renderItem,\r\n  className = '',\r\n}: VirtualizedListProps<T>) {\r\n  const [scrollTop, setScrollTop] = useState(0);\r\n\r\n  const handleScroll = useCallback((e: React.UIEvent<HTMLDivElement>) => {\r\n    setScrollTop(e.currentTarget.scrollTop);\r\n  }, []);\r\n\r\n  const { startIndex, endIndex, offsetY } = useMemo(() => {\r\n    const startIndex = Math.floor(scrollTop / itemHeight);\r\n    const visibleCount = Math.ceil(containerHeight / itemHeight);\r\n    const endIndex = Math.min(startIndex + visibleCount + 1, items.length);\r\n    const offsetY = startIndex * itemHeight;\r\n\r\n    return { startIndex, endIndex, offsetY };\r\n  }, [scrollTop, itemHeight, containerHeight, items.length]);\r\n\r\n  const visibleItems = useMemo(() => {\r\n    return items.slice(startIndex, endIndex).map((item, index) => ({\r\n      item,\r\n      index: startIndex + index,\r\n    }));\r\n  }, [items, startIndex, endIndex]);\r\n\r\n  const totalHeight = items.length * itemHeight;\r\n\r\n  return (\r\n    <div\r\n      className={`overflow-auto ${className}`}\r\n      style={{ height: containerHeight }}\r\n      onScroll={handleScroll}\r\n      role=\"list\"\r\n      aria-label=\"Virtualized list\"\r\n    >\r\n      <div style={{ height: totalHeight, position: 'relative' }}>\r\n        <div\r\n          style={{\r\n            transform: `translateY(${offsetY}px)`,\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n          }}\r\n        >\r\n          {visibleItems.map(({ item, index }) => (\r\n            <div key={index} style={{ height: itemHeight }}>\r\n              {renderItem(item, index)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VirtualizedList;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\AccountClosureTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[551,554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[551,554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":124,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4422,4425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4422,4425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { api } from '../../services/api';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\nconst AccountClosureTab: React.FC = () => {\r\n  const [accountClosureData, setAccountClosureData] = useState({\r\n    account_id: '',\r\n    closure_reason: '',\r\n    other_reason: '',\r\n    confirmation: '',\r\n    phone_number: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [accountDetails, setAccountDetails] = useState<any>(null);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n\r\n  // OTP Verification State\r\n  const [showOtpModal, setShowOtpModal] = useState(false);\r\n  const [otpCode, setOtpCode] = useState('');\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [otpLoading, setOtpLoading] = useState(false);\r\n  const [debugOtp, setDebugOtp] = useState('');\r\n\r\n  const fetchAccountDetails = async () => {\r\n    if (!accountClosureData.account_id) {\r\n      setMessage({ type: 'error', text: 'Please enter account ID' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get(`accounts/${accountClosureData.account_id}/`);\r\n      setAccountDetails(response.data);\r\n      // Auto-fill phone number from account if available\r\n      if (response.data.phone_number) {\r\n        setAccountClosureData(prev => ({ ...prev, phone_number: response.data.phone_number }));\r\n      }\r\n      setMessage({ type: 'success', text: 'Account details loaded successfully' });\r\n    } catch (error) {\r\n      console.error('Error fetching account details:', error);\r\n      setMessage({ type: 'error', text: 'Account not found or access denied' });\r\n      setAccountDetails(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Send OTP for account closure verification\r\n  const sendOtp = async () => {\r\n    if (!accountClosureData.phone_number.trim()) {\r\n      setMessage({ type: 'error', text: 'Phone number is required for OTP verification' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setOtpLoading(true);\r\n      const response = await api.post('banking/account-openings/send_otp/', {\r\n        phone_number: accountClosureData.phone_number,\r\n        operation_type: 'account_closure'\r\n      });\r\n\r\n      setOtpSent(true);\r\n      setDebugOtp(response.data.debug_otp || '');\r\n      setMessage({ type: 'success', text: `OTP sent to ${accountClosureData.phone_number}` });\r\n    } catch (error) {\r\n      console.error('Error sending OTP:', error);\r\n      setMessage({ type: 'error', text: 'Failed to send OTP. Please try again.' });\r\n    } finally {\r\n      setOtpLoading(false);\r\n    }\r\n  };\r\n\r\n  // Verify OTP and submit account closure\r\n  const verifyAndSubmit = async () => {\r\n    if (!otpCode.trim()) {\r\n      setMessage({ type: 'error', text: 'Please enter the OTP code' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setOtpLoading(true);\r\n\r\n      // First verify OTP\r\n      const verifyResponse = await api.post('users/verify-otp/', {\r\n        phone_number: accountClosureData.phone_number,\r\n        otp_code: otpCode,\r\n        verification_type: 'account_closure'\r\n      });\r\n\r\n      // If verification successful, proceed with closure\r\n      if (verifyResponse.data.success || verifyResponse.data.verified) {\r\n        const closureData = {\r\n          account_id: accountClosureData.account_id,\r\n          closure_reason: accountClosureData.closure_reason,\r\n          other_reason: accountClosureData.other_reason,\r\n          phone_number: accountClosureData.phone_number,\r\n          confirmed: true,\r\n          otp_verified: true\r\n        };\r\n\r\n        await api.post('banking/account-closures/', closureData);\r\n        setMessage({ type: 'success', text: 'Account closure request submitted successfully with OTP verification!' });\r\n\r\n        // Reset form\r\n        setAccountClosureData({\r\n          account_id: '',\r\n          closure_reason: '',\r\n          other_reason: '',\r\n          confirmation: '',\r\n          phone_number: ''\r\n        });\r\n        setAccountDetails(null);\r\n        setShowConfirmation(false);\r\n        setShowOtpModal(false);\r\n        setOtpCode('');\r\n        setOtpSent(false);\r\n        setDebugOtp('');\r\n      } else {\r\n        setMessage({ type: 'error', text: 'OTP verification failed' });\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error verifying OTP:', error);\r\n      setMessage({ type: 'error', text: error.response?.data?.error || 'Failed to verify OTP. Please try again.' });\r\n    } finally {\r\n      setOtpLoading(false);\r\n    }\r\n  };\r\n\r\n  const closeOtpModal = () => {\r\n    setShowOtpModal(false);\r\n    setOtpCode('');\r\n    setOtpSent(false);\r\n    setDebugOtp('');\r\n  };\r\n\r\n  const handleClosureSubmit = async () => {\r\n    if (!accountDetails) {\r\n      setMessage({ type: 'error', text: 'Please load account details first' });\r\n      return;\r\n    }\r\n\r\n    if (!accountClosureData.closure_reason) {\r\n      setMessage({ type: 'error', text: 'Please select a closure reason' });\r\n      return;\r\n    }\r\n\r\n    if (accountClosureData.closure_reason === 'other' && !accountClosureData.other_reason.trim()) {\r\n      setMessage({ type: 'error', text: 'Please provide details for other reason' });\r\n      return;\r\n    }\r\n\r\n    if (accountClosureData.confirmation !== 'CLOSE') {\r\n      setMessage({ type: 'error', text: 'Please type \"CLOSE\" to confirm' });\r\n      return;\r\n    }\r\n\r\n    if (!accountClosureData.phone_number.trim()) {\r\n      setMessage({ type: 'error', text: 'Phone number is required for OTP verification' });\r\n      return;\r\n    }\r\n\r\n    // Show OTP modal instead of direct submission\r\n    setShowConfirmation(false);\r\n    setShowOtpModal(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n          <span>≡ƒöÆ</span> Account Closure\r\n        </h2>\r\n        <p className=\"text-gray-500\">Securely close customer accounts with OTP verification.</p>\r\n      </div>\r\n\r\n      {message.text && (\r\n        <div className={`p-4 rounded-xl border ${message.type === 'error' ? 'bg-red-50 border-red-100 text-red-700' : 'bg-emerald-50 border-emerald-100 text-emerald-700'}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      {/* Account Lookup */}\r\n      <GlassCard className=\"p-6\">\r\n        <h3 className=\"text-lg font-bold text-gray-800 mb-4\">Account Lookup</h3>\r\n        <div className=\"flex flex-col sm:flex-row gap-4 items-end\">\r\n          <div className=\"flex-1 w-full\">\r\n            <Input\r\n              label=\"Account ID\"\r\n              value={accountClosureData.account_id}\r\n              onChange={(e) => setAccountClosureData(prev => ({ ...prev, account_id: e.target.value }))}\r\n              placeholder=\"Enter account ID to lookup\"\r\n            />\r\n          </div>\r\n          <Button onClick={fetchAccountDetails} disabled={loading} variant=\"primary\" className=\"w-full sm:w-auto\">\r\n            {loading ? 'Loading...' : 'Lookup Account ≡ƒöì'}\r\n          </Button>\r\n        </div>\r\n      </GlassCard>\r\n\r\n      {/* Account Details */}\r\n      {accountDetails && (\r\n        <GlassCard className=\"p-6 bg-gradient-to-br from-gray-50 to-white\">\r\n          <h3 className=\"text-lg font-bold text-gray-800 mb-4 border-b border-gray-200 pb-2\">Account Details</h3>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-6\">\r\n            <div>\r\n              <span className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider\">Account ID</span>\r\n              <span className=\"font-mono text-gray-800\">{accountDetails.id}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider\">Type</span>\r\n              <span className=\"text-gray-800\">{accountDetails.account_type}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider\">Balance</span>\r\n              <span className=\"text-xl font-bold text-coastal-primary\">Γé╡{accountDetails.balance}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider\">Status</span>\r\n              <span className={`inline-block px-2 py-0.5 rounded text-xs font-bold uppercase ${accountDetails.status === 'active' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'}`}>\r\n                {accountDetails.status || 'Active'}\r\n              </span>\r\n            </div>\r\n            <div>\r\n              <span className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider\">Owner</span>\r\n              <span className=\"text-gray-800\">{accountDetails.customer_name || 'N/A'}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider\">Opened</span>\r\n              <span className=\"text-gray-800\">{new Date(accountDetails.created_at).toLocaleDateString()}</span>\r\n            </div>\r\n          </div>\r\n        </GlassCard>\r\n      )}\r\n\r\n      {/* Closure Form */}\r\n      {accountDetails && (\r\n        <GlassCard className=\"p-8 border-l-4 border-l-red-500 ring-1 ring-red-100\">\r\n          <h3 className=\"text-xl font-bold text-red-600 mb-2 flex items-center gap-2\">ΓÜá∩╕Å Closure Request</h3>\r\n          <p className=\"text-red-800 font-medium mb-6 bg-red-50 p-3 rounded-lg text-sm border border-red-100\">\r\n            Warning: This action cannot be undone. The account will be permanently closed.\r\n          </p>\r\n\r\n          <div className=\"space-y-6\">\r\n            <Input\r\n              label=\"Customer Phone Number (for OTP verification) *\"\r\n              value={accountClosureData.phone_number}\r\n              onChange={(e) => setAccountClosureData(prev => ({ ...prev, phone_number: e.target.value }))}\r\n              placeholder=\"+233 XX XXX XXXX\"\r\n            />\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                Reason for Closure *\r\n              </label>\r\n              <select\r\n                value={accountClosureData.closure_reason}\r\n                onChange={(e) => setAccountClosureData(prev => ({ ...prev, closure_reason: e.target.value }))}\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-red-500 focus:ring-4 focus:ring-red-500/10 transition-all outline-none bg-white\"\r\n              >\r\n                <option value=\"\">Select reason...</option>\r\n                <option value=\"customer_request\">Customer Request</option>\r\n                <option value=\"account_inactive\">Account Inactive</option>\r\n                <option value=\"fraud_suspected\">Fraud Suspected</option>\r\n                <option value=\"compliance\">Compliance Issue</option>\r\n                <option value=\"other\">Other</option>\r\n              </select>\r\n            </div>\r\n\r\n            {accountClosureData.closure_reason === 'other' && (\r\n              <Input\r\n                label=\"Please specify reason\"\r\n                value={accountClosureData.other_reason}\r\n                onChange={(e) => setAccountClosureData(prev => ({ ...prev, other_reason: e.target.value }))}\r\n                placeholder=\"Provide details...\"\r\n              />\r\n            )}\r\n\r\n            <div className=\"p-4 bg-amber-50 rounded-xl border border-amber-100\">\r\n              <p className=\"text-amber-800 font-bold mb-2 text-sm uppercase tracking-wide\">\r\n                Confirmation Required\r\n              </p>\r\n              <p className=\"text-amber-700 mb-3 text-sm\">\r\n                Type \"CLOSE\" in the box below to confirm account closure:\r\n              </p>\r\n              <Input\r\n                value={accountClosureData.confirmation}\r\n                onChange={(e) => setAccountClosureData(prev => ({ ...prev, confirmation: e.target.value }))}\r\n                placeholder=\"Type CLOSE to confirm\"\r\n                className=\"border-amber-200 focus:border-amber-500 focus:ring-amber-500/20\"\r\n              />\r\n            </div>\r\n\r\n            <Button\r\n              onClick={() => setShowConfirmation(true)}\r\n              disabled={loading || !accountClosureData.closure_reason || accountClosureData.confirmation !== 'CLOSE' || !accountClosureData.phone_number.trim()}\r\n              variant=\"danger\"\r\n              className=\"w-full justify-center py-4 font-bold text-lg shadow-lg shadow-red-100\"\r\n            >\r\n              {loading ? 'Processing...' : 'Submit Closure Request ≡ƒÜ½'}\r\n            </Button>\r\n          </div>\r\n        </GlassCard>\r\n      )}\r\n\r\n      {/* Confirmation Modal */}\r\n      {showConfirmation && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6\">\r\n            <h3 className=\"text-xl font-bold text-red-600 mb-4\">ΓÜá∩╕Å Final Confirmation</h3>\r\n            <p className=\"mb-2\">Are you absolutely sure you want to close account <strong>{accountClosureData.account_id}</strong>?</p>\r\n            <p className=\"mb-4 text-gray-500 text-sm\">This will permanently close the account and cannot be reversed.</p>\r\n            <p className=\"text-gray-600 bg-gray-50 p-3 rounded-lg text-sm border border-gray-100 mb-6\">\r\n              ≡ƒô▒ An OTP will be sent to <strong>{accountClosureData.phone_number}</strong> for verification.\r\n            </p>\r\n\r\n            <div className=\"flex gap-3 justify-end\">\r\n              <Button onClick={() => setShowConfirmation(false)} variant=\"secondary\">\r\n                Cancel\r\n              </Button>\r\n              <Button onClick={handleClosureSubmit} disabled={loading} variant=\"danger\">\r\n                {loading ? 'Processing...' : 'Proceed with OTP Verification'}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* OTP Modal */}\r\n      {showOtpModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8\">\r\n            <h3 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n              ≡ƒô▒ Phone Verification\r\n            </h3>\r\n\r\n            <p className=\"text-gray-600 mb-6\">\r\n              For security, we need to verify via phone: <strong>{accountClosureData.phone_number}</strong>\r\n            </p>\r\n\r\n            <div className=\"bg-amber-50 text-amber-800 p-3 rounded-xl mb-6 text-sm border border-amber-100\">\r\n              ΓÜá∩╕Å Closing account: <strong>{accountClosureData.account_id}</strong>\r\n            </div>\r\n\r\n            {!otpSent ? (\r\n              <div>\r\n                <Button\r\n                  onClick={sendOtp}\r\n                  disabled={otpLoading}\r\n                  variant=\"primary\"\r\n                  className=\"w-full justify-center\"\r\n                >\r\n                  {otpLoading ? 'Sending...' : '≡ƒôñ Send OTP Code'}\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"bg-green-50 text-green-700 p-3 rounded-xl text-center border border-green-100\">\r\n                  <p className=\"font-bold\">Γ£à OTP sent successfully!</p>\r\n                  {debugOtp && (\r\n                    <p className=\"text-xs mt-1 text-green-600/70\">Debug OTP: {debugOtp}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <Input\r\n                  label=\"Enter 6-digit OTP Code\"\r\n                  value={otpCode}\r\n                  onChange={(e) => setOtpCode(e.target.value)}\r\n                  placeholder=\"123456\"\r\n                  maxLength={6}\r\n                  className=\"text-center text-2xl tracking-widest font-mono\"\r\n                />\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <Button\r\n                    onClick={verifyAndSubmit}\r\n                    disabled={otpLoading || otpCode.length !== 6}\r\n                    variant=\"danger\"\r\n                    className=\"flex-1 justify-center\"\r\n                  >\r\n                    {otpLoading ? 'Verifying...' : 'Γ£à Verify & Close'}\r\n                  </Button>\r\n                  <Button\r\n                    onClick={sendOtp}\r\n                    disabled={otpLoading}\r\n                    variant=\"secondary\"\r\n                  >\r\n                    ≡ƒöä Resend\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <Button\r\n              onClick={closeOtpModal}\r\n              variant=\"ghost\"\r\n              className=\"w-full mt-6 text-gray-400 hover:text-gray-600\"\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AccountClosureTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\AccountOpeningTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showSuccess' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":45,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'stopCamera'. Either include it or remove the dependency array.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [stopCamera]","fix":{"range":[3211,3213],"text":"[stopCamera]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":256,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":256,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8512,8515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8512,8515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useCallback } from 'react';\r\nimport { api } from '../../services/api.ts';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\n/**\r\n * Account Opening Tab Component for Cashier Dashboard\r\n * Unified form matching Mobile Banker's ClientRegistrationTab with camera capture\r\n */\r\nconst AccountOpeningTab: React.FC = () => {\r\n  // Form data state - matching ClientRegistrationTab structure\r\n  const [formData, setFormData] = useState({\r\n    // Personal Information\r\n    firstName: '',\r\n    lastName: '',\r\n    dateOfBirth: '',\r\n    phoneNumber: '',\r\n    email: '',\r\n\r\n    // Identification\r\n    idType: 'ghana_card',\r\n    idNumber: '',\r\n\r\n    // Employment Information\r\n    occupation: '',\r\n    workAddress: '',\r\n    position: '',\r\n\r\n    // Next of Kin (up to 4)\r\n    nextOfKin: [\r\n      { name: '', relationship: '', address: '', stakePercentage: '' }\r\n    ],\r\n\r\n    // Account Type\r\n    accountType: 'daily_susu',\r\n    cardType: 'standard',\r\n\r\n    // Photo\r\n    photo: null as string | null\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [showSuccess, setShowSuccess] = useState(false);\r\n  const [newAccountId, setNewAccountId] = useState('');\r\n  const [currentStep, setCurrentStep] = useState(1); // 1: Form, 2: OTP, 3: Success\r\n\r\n  // Camera state\r\n  const [showCamera, setShowCamera] = useState(false);\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // OTP state\r\n  const [otpCode, setOtpCode] = useState('');\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [otpLoading, setOtpLoading] = useState(false);\r\n  const [debugOtp, setDebugOtp] = useState('');\r\n\r\n  // === CAMERA FUNCTIONS ===\r\n  const startCamera = useCallback(async () => {\r\n    try {\r\n      setShowCamera(true);\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: { facingMode: 'user', width: { ideal: 640 }, height: { ideal: 480 } }\r\n      });\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.onloadedmetadata = () => {\r\n          videoRef.current?.play().catch(console.error);\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error accessing camera:', error);\r\n      setShowCamera(false);\r\n      setMessage({ type: 'error', text: 'Unable to access camera. Please check permissions or upload a photo.' });\r\n    }\r\n  }, []);\r\n\r\n  const capturePhoto = useCallback(() => {\r\n    if (videoRef.current && canvasRef.current) {\r\n      const canvas = canvasRef.current;\r\n      const video = videoRef.current;\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      const ctx = canvas.getContext('2d');\r\n      if (ctx) {\r\n        ctx.drawImage(video, 0, 0);\r\n        const dataUrl = canvas.toDataURL('image/jpeg', 0.8);\r\n        setFormData(prev => ({ ...prev, photo: dataUrl }));\r\n        stopCamera();\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const stopCamera = useCallback(() => {\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      const stream = videoRef.current.srcObject as MediaStream;\r\n      stream.getTracks().forEach(track => track.stop());\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    setShowCamera(false);\r\n  }, []);\r\n\r\n  const handleFileUpload = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setFormData(prev => ({ ...prev, photo: reader.result as string }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }, []);\r\n\r\n  const removePhoto = useCallback(() => {\r\n    setFormData(prev => ({ ...prev, photo: null }));\r\n    if (fileInputRef.current) fileInputRef.current.value = '';\r\n  }, []);\r\n\r\n  // === FORM HANDLERS ===\r\n  const handleInputChange = useCallback((field: string, value: string) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  }, []);\r\n\r\n  const handleNextOfKinChange = useCallback((index: number, field: string, value: string) => {\r\n    setFormData(prev => {\r\n      const newNextOfKin = [...prev.nextOfKin];\r\n      newNextOfKin[index] = { ...newNextOfKin[index], [field]: value };\r\n      return { ...prev, nextOfKin: newNextOfKin };\r\n    });\r\n  }, []);\r\n\r\n  const addNextOfKin = useCallback(() => {\r\n    if (formData.nextOfKin.length < 4) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        nextOfKin: [...prev.nextOfKin, { name: '', relationship: '', address: '', stakePercentage: '' }]\r\n      }));\r\n    }\r\n  }, [formData.nextOfKin.length]);\r\n\r\n  const removeNextOfKin = useCallback((index: number) => {\r\n    if (formData.nextOfKin.length > 1) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        nextOfKin: prev.nextOfKin.filter((_, i) => i !== index)\r\n      }));\r\n    }\r\n  }, [formData.nextOfKin.length]);\r\n\r\n  // === VALIDATION ===\r\n  const validateForm = useCallback(() => {\r\n    if (!formData.firstName.trim()) {\r\n      setMessage({ type: 'error', text: 'First name is required' });\r\n      return false;\r\n    }\r\n    if (!formData.lastName.trim()) {\r\n      setMessage({ type: 'error', text: 'Last name is required' });\r\n      return false;\r\n    }\r\n    if (!formData.dateOfBirth) {\r\n      setMessage({ type: 'error', text: 'Date of birth is required' });\r\n      return false;\r\n    }\r\n    if (!formData.phoneNumber.trim()) {\r\n      setMessage({ type: 'error', text: 'Phone number is required' });\r\n      return false;\r\n    }\r\n    if (!formData.idNumber.trim()) {\r\n      setMessage({ type: 'error', text: 'ID number is required' });\r\n      return false;\r\n    }\r\n    // Age validation\r\n    const birthDate = new Date(formData.dateOfBirth);\r\n    const today = new Date();\r\n    const age = today.getFullYear() - birthDate.getFullYear();\r\n    if (age < 18) {\r\n      setMessage({ type: 'error', text: 'Customer must be at least 18 years old' });\r\n      return false;\r\n    }\r\n    return true;\r\n  }, [formData]);\r\n\r\n  // === FORM SUBMISSION ===\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!validateForm()) return;\r\n    setCurrentStep(2);\r\n    setMessage({ type: '', text: '' });\r\n  };\r\n\r\n  const sendOtp = async () => {\r\n    if (!formData.phoneNumber.trim()) {\r\n      setMessage({ type: 'error', text: 'Phone number is required' });\r\n      return;\r\n    }\r\n    try {\r\n      setOtpLoading(true);\r\n      const response = await api.post('banking/account-openings/send_otp/', {\r\n        phone_number: formData.phoneNumber,\r\n        operation_type: 'account_opening'\r\n      });\r\n      setOtpSent(true);\r\n      setDebugOtp(response.data.debug_otp || '');\r\n      setMessage({ type: 'success', text: `OTP sent to ${formData.phoneNumber}` });\r\n    } catch (error) {\r\n      console.error('Error sending OTP:', error);\r\n      setMessage({ type: 'error', text: 'Failed to send OTP. Please try again.' });\r\n    } finally {\r\n      setOtpLoading(false);\r\n    }\r\n  };\r\n\r\n  const verifyAndSubmit = async () => {\r\n    if (!otpCode.trim()) {\r\n      setMessage({ type: 'error', text: 'Please enter the OTP code' });\r\n      return;\r\n    }\r\n    try {\r\n      setOtpLoading(true);\r\n      const submitData = {\r\n        account_type: formData.accountType,\r\n        card_type: formData.cardType,\r\n        id_type: formData.idType,\r\n        id_number: formData.idNumber,\r\n        first_name: formData.firstName,\r\n        last_name: formData.lastName,\r\n        date_of_birth: formData.dateOfBirth,\r\n        phone_number: formData.phoneNumber,\r\n        email: formData.email,\r\n        occupation: formData.occupation,\r\n        work_address: formData.workAddress,\r\n        position: formData.position,\r\n        next_of_kin: formData.nextOfKin,\r\n        photo: formData.photo\r\n      };\r\n\r\n      const response = await api.post('banking/account-openings/verify_and_submit/', {\r\n        otp_code: otpCode,\r\n        phone_number: formData.phoneNumber,\r\n        account_data: submitData\r\n      });\r\n\r\n      if (response.data.success) {\r\n        setCurrentStep(3);\r\n        setNewAccountId(response.data.account_id || 'New Account');\r\n        resetForm();\r\n      } else {\r\n        setMessage({ type: 'error', text: response.data.error || 'Verification failed' });\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error verifying OTP:', error);\r\n      setMessage({ type: 'error', text: error.response?.data?.error || 'Failed to verify OTP.' });\r\n    } finally {\r\n      setOtpLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      firstName: '', lastName: '', dateOfBirth: '', phoneNumber: '', email: '',\r\n      idType: 'ghana_card', idNumber: '',\r\n      occupation: '', workAddress: '', position: '',\r\n      nextOfKin: [{ name: '', relationship: '', address: '', stakePercentage: '' }],\r\n      accountType: 'daily_susu', cardType: 'standard', photo: null\r\n    });\r\n    setOtpCode('');\r\n    setOtpSent(false);\r\n    setDebugOtp('');\r\n  };\r\n\r\n  // === RENDER ===\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Step Indicator */}\r\n      <GlassCard className=\"p-4\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2 mb-6\">\r\n          <span>≡ƒæ╢</span> New Account Registration\r\n        </h2>\r\n\r\n        <div className=\"flex justify-center gap-4 mb-6\">\r\n          {[1, 2, 3].map(step => (\r\n            <div key={step} className=\"flex items-center\">\r\n              <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-colors ${currentStep >= step ? 'bg-coastal-primary text-white' : 'bg-gray-200 text-gray-500'\r\n                }`}>\r\n                {step}\r\n              </div>\r\n              {step < 3 && <div className={`w-10 h-1 mx-2 ${currentStep > step ? 'bg-coastal-primary' : 'bg-gray-200'}`} />}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"flex justify-center gap-10 text-sm text-gray-500\">\r\n          <span className={currentStep === 1 ? 'font-bold text-coastal-primary' : ''}>Registration Form</span>\r\n          <span className={currentStep === 2 ? 'font-bold text-coastal-primary' : ''}>OTP Verification</span>\r\n          <span className={currentStep === 3 ? 'font-bold text-coastal-primary' : ''}>Complete</span>\r\n        </div>\r\n      </GlassCard>\r\n\r\n      {/* Message Display */}\r\n      {message.text && (\r\n        <div className={`p-4 rounded-xl border ${message.type === 'error' ? 'bg-red-50 border-red-100 text-red-700' : 'bg-emerald-50 border-emerald-100 text-emerald-700'}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      {/* Step 1: Registration Form */}\r\n      {currentStep === 1 && (\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n\r\n          {/* Photo Capture Section */}\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\"><span>≡ƒô╖</span> Customer Photo</h3>\r\n            <div className=\"flex flex-col md:flex-row gap-6 items-start\">\r\n              <div className=\"w-40 h-48 bg-gray-100 rounded-xl flex items-center justify-center overflow-hidden border-2 border-gray-200 shadow-inner flex-shrink-0\">\r\n                {formData.photo ? (\r\n                  <img src={formData.photo} alt=\"Customer\" className=\"w-full h-full object-cover\" />\r\n                ) : showCamera ? (\r\n                  <video ref={videoRef} autoPlay playsInline className=\"w-full h-full object-cover\" />\r\n                ) : (\r\n                  <div className=\"text-center text-gray-400\">\r\n                    <div className=\"text-4xl\">≡ƒæñ</div>\r\n                    <div className=\"text-xs mt-1\">No Photo</div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-gray-500 text-sm mb-4\">\r\n                  Capture or upload a passport-style photo for identification. This is required for account security.\r\n                </p>\r\n                <div className=\"flex flex-wrap gap-3\">\r\n                  {!showCamera && !formData.photo && (\r\n                    <>\r\n                      <Button type=\"button\" onClick={startCamera} variant=\"primary\">≡ƒô╕ Open Camera</Button>\r\n                      <Button type=\"button\" onClick={() => fileInputRef.current?.click()} variant=\"secondary\">≡ƒôü Upload Photo</Button>\r\n                    </>\r\n                  )}\r\n                  {showCamera && (\r\n                    <>\r\n                      <Button type=\"button\" onClick={capturePhoto} variant=\"success\">≡ƒô╖ Capture</Button>\r\n                      <Button type=\"button\" onClick={stopCamera} variant=\"danger\">Γ£ò Cancel</Button>\r\n                    </>\r\n                  )}\r\n                  {formData.photo && (\r\n                    <>\r\n                      <Button type=\"button\" onClick={removePhoto} variant=\"danger\">≡ƒùæ∩╕Å Remove</Button>\r\n                      <Button type=\"button\" onClick={startCamera} variant=\"secondary\">≡ƒöä Retake</Button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                <input type=\"file\" ref={fileInputRef} accept=\"image/*\" onChange={handleFileUpload} className=\"hidden\" />\r\n              </div>\r\n            </div>\r\n            <canvas ref={canvasRef} className=\"hidden\" />\r\n          </GlassCard>\r\n\r\n          {/* Personal Information */}\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\"><span>≡ƒæñ</span> Personal Information</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              <Input label=\"First Name *\" value={formData.firstName} onChange={(e) => handleInputChange('firstName', e.target.value)} placeholder=\"Enter first name\" required />\r\n              <Input label=\"Last Name *\" value={formData.lastName} onChange={(e) => handleInputChange('lastName', e.target.value)} placeholder=\"Enter last name\" required />\r\n              <Input label=\"Date of Birth *\" type=\"date\" value={formData.dateOfBirth} onChange={(e) => handleInputChange('dateOfBirth', e.target.value)} required />\r\n              <Input label=\"Phone Number *\" type=\"tel\" value={formData.phoneNumber} onChange={(e) => handleInputChange('phoneNumber', e.target.value)} placeholder=\"+233 XX XXX XXXX\" required />\r\n              <Input label=\"Email Address\" type=\"email\" value={formData.email} onChange={(e) => handleInputChange('email', e.target.value)} placeholder=\"customer@example.com\" />\r\n            </div>\r\n          </GlassCard>\r\n\r\n          {/* Identification */}\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\"><span>≡ƒ¬¬</span> Identification</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">ID Type *</label>\r\n                <select\r\n                  value={formData.idType}\r\n                  onChange={(e) => handleInputChange('idType', e.target.value)}\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50/50\"\r\n                >\r\n                  <option value=\"ghana_card\">Ghana Card</option>\r\n                  <option value=\"voter_id\">Voter ID</option>\r\n                  <option value=\"passport\">Passport</option>\r\n                  <option value=\"drivers_license\">Driver's License</option>\r\n                  <option value=\"nhis_card\">NHIS Card</option>\r\n                </select>\r\n              </div>\r\n              <Input label=\"ID Number *\" value={formData.idNumber} onChange={(e) => handleInputChange('idNumber', e.target.value)} placeholder=\"Enter ID number\" required />\r\n            </div>\r\n          </GlassCard>\r\n\r\n          {/* Employment Information */}\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\"><span>≡ƒÆ╝</span> Employment Information</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <Input label=\"Occupation\" value={formData.occupation} onChange={(e) => handleInputChange('occupation', e.target.value)} placeholder=\"e.g., Teacher, Trader\" />\r\n              <Input label=\"Position/Title\" value={formData.position} onChange={(e) => handleInputChange('position', e.target.value)} placeholder=\"e.g., Senior Staff\" />\r\n              <div className=\"md:col-span-2\">\r\n                <Input label=\"Work Address\" value={formData.workAddress} onChange={(e) => handleInputChange('workAddress', e.target.value)} placeholder=\"Enter work address\" />\r\n              </div>\r\n            </div>\r\n          </GlassCard>\r\n\r\n          {/* Next of Kin */}\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\"><span>≡ƒæ¿ΓÇì≡ƒæ⌐ΓÇì≡ƒæºΓÇì≡ƒæª</span> Next of Kin (Beneficiaries)</h3>\r\n            <div className=\"space-y-4\">\r\n              {formData.nextOfKin.map((kin, index) => (\r\n                <div key={index} className=\"bg-gray-50 p-4 rounded-xl border border-gray-100\">\r\n                  <div className=\"flex justify-between items-center mb-3\">\r\n                    <span className=\"font-bold text-gray-600\">Beneficiary {index + 1}</span>\r\n                    {formData.nextOfKin.length > 1 && (\r\n                      <button type=\"button\" onClick={() => removeNextOfKin(index)} className=\"text-red-500 hover:text-red-700 text-sm font-semibold transition-colors\">Γ£ò Remove</button>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                    <Input label=\"Full Name\" value={kin.name} onChange={(e) => handleNextOfKinChange(index, 'name', e.target.value)} placeholder=\"Beneficiary name\" />\r\n                    <Input label=\"Relationship\" value={kin.relationship} onChange={(e) => handleNextOfKinChange(index, 'relationship', e.target.value)} placeholder=\"e.g., Spouse\" />\r\n                    <Input label=\"Address\" value={kin.address} onChange={(e) => handleNextOfKinChange(index, 'address', e.target.value)} placeholder=\"Beneficiary address\" />\r\n                    <Input label=\"Stake %\" type=\"number\" value={kin.stakePercentage} onChange={(e) => handleNextOfKinChange(index, 'stakePercentage', e.target.value)} placeholder=\"e.g., 50\" />\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            {formData.nextOfKin.length < 4 && (\r\n              <div className=\"mt-4\">\r\n                <Button type=\"button\" onClick={addNextOfKin} variant=\"secondary\" size=\"sm\">Γ₧ò Add Another Beneficiary</Button>\r\n              </div>\r\n            )}\r\n          </GlassCard>\r\n\r\n          {/* Account Type */}\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\"><span>≡ƒÅª</span> Account Details</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Account Type *</label>\r\n                <select\r\n                  value={formData.accountType}\r\n                  onChange={(e) => handleInputChange('accountType', e.target.value)}\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50/50\"\r\n                >\r\n                  <option value=\"daily_susu\">Daily Susu Account</option>\r\n                  <option value=\"shares\">Shares Account</option>\r\n                  <option value=\"monthly_contribution\">Monthly Contribution</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Card Type</label>\r\n                <select\r\n                  value={formData.cardType}\r\n                  onChange={(e) => handleInputChange('cardType', e.target.value)}\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50/50\"\r\n                >\r\n                  <option value=\"standard\">Standard Card</option>\r\n                  <option value=\"gold\">Gold Card</option>\r\n                  <option value=\"platinum\">Platinum Card</option>\r\n                  <option value=\"none\">No Card Required</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </GlassCard>\r\n\r\n          {/* Submit Button */}\r\n          <div className=\"bg-gray-50 rounded-2xl p-6 border border-gray-100 text-center\">\r\n            <h3 className=\"text-gray-900 font-bold mb-2\">Ready to Submit?</h3>\r\n            <p className=\"text-gray-500 mb-4\">\r\n              Please review all information. OTP verification will be sent to customer's phone.\r\n            </p>\r\n            <Button type=\"submit\" disabled={loading} variant=\"primary\" className=\"w-full md:w-auto md:min-w-[300px]\">\r\n              {loading ? 'Processing...' : 'Proceed to OTP Verification ≡ƒô▒'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      )}\r\n\r\n      {/* Step 2: OTP Verification */}\r\n      {currentStep === 2 && (\r\n        <GlassCard className=\"p-8 max-w-lg mx-auto\">\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2 text-center\">Phone Verification</h3>\r\n          <p className=\"text-gray-500 mb-6 text-center\">\r\n            For security, we need to verify the customer's phone number: <span className=\"font-bold text-gray-800\">{formData.phoneNumber}</span>\r\n          </p>\r\n\r\n          {!otpSent ? (\r\n            <Button onClick={sendOtp} disabled={otpLoading} variant=\"primary\" className=\"w-full\">\r\n              {otpLoading ? 'Sending...' : '≡ƒôñ Send OTP Code'}\r\n            </Button>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"bg-emerald-50 text-emerald-700 p-4 rounded-xl text-center border border-emerald-100\">\r\n                <div className=\"font-bold mb-1\">Γ£à OTP sent successfully!</div>\r\n                {debugOtp && <div className=\"text-xs opacity-75\">Debug OTP: {debugOtp}</div>}\r\n              </div>\r\n\r\n              <Input\r\n                label=\"Enter 6-digit OTP Code\"\r\n                value={otpCode}\r\n                onChange={(e) => setOtpCode(e.target.value)}\r\n                placeholder=\"123456\"\r\n                maxLength={6}\r\n                className=\"text-center text-2xl tracking-widest font-mono\"\r\n              />\r\n\r\n              <div className=\"flex gap-4\">\r\n                <Button onClick={verifyAndSubmit} disabled={otpLoading || otpCode.length !== 6} variant=\"success\" className=\"flex-1\">\r\n                  {otpLoading ? 'Verifying...' : 'Γ£à Verify & Submit'}\r\n                </Button>\r\n                <Button onClick={sendOtp} disabled={otpLoading} variant=\"secondary\">≡ƒöä Resend</Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-6 pt-6 border-t border-gray-100\">\r\n            <Button onClick={() => setCurrentStep(1)} variant=\"ghost\" className=\"w-full text-gray-500 hover:text-gray-700\">\r\n              ΓåÉ Back to Registration Form\r\n            </Button>\r\n          </div>\r\n        </GlassCard>\r\n      )}\r\n\r\n      {/* Step 3: Success */}\r\n      {currentStep === 3 && (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"text-6xl mb-4 animate-bounce\">≡ƒÄë</div>\r\n          <h2 className=\"text-3xl font-bold text-emerald-600 mb-2\">Account Registration Successful!</h2>\r\n          <p className=\"text-gray-500 mb-8 text-lg\">\r\n            New account <span className=\"font-bold text-gray-800 bg-gray-100 px-2 py-1 rounded-lg\">{newAccountId}</span> has been created and is pending approval.\r\n          </p>\r\n          <Button onClick={() => { setCurrentStep(1); setShowSuccess(false); }} variant=\"primary\" size=\"lg\">\r\n            Register Another Customer\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AccountOpeningTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\CashAdvancesTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\CashDrawerTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\CashierSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GlassCard' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[346,349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[346,349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Button } from '../ui/Button';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface Tab {\r\n  id: string;\r\n  name: string;\r\n  icon: string;\r\n  color?: string;\r\n}\r\n\r\ninterface CashierSidebarProps {\r\n  activeTab: string;\r\n  handleTabChange: (tabId: string) => void;\r\n  handleLogout: () => void;\r\n  user: any;\r\n  tabs: Tab[];\r\n}\r\n\r\nconst CashierSidebar: React.FC<CashierSidebarProps> = ({\r\n  activeTab,\r\n  handleTabChange,\r\n  handleLogout,\r\n  user,\r\n  tabs\r\n}) => {\r\n  return (\r\n    <div className=\"w-[260px] bg-white border-r border-gray-200 h-screen overflow-y-auto flex flex-col p-4 fixed left-0 top-0 z-20 shadow-xl shadow-gray-200/50\">\r\n      <div className=\"mb-8 text-center pt-4\">\r\n        <div className=\"w-16 h-16 bg-coastal-primary rounded-full mx-auto mb-3 flex items-center justify-center text-3xl shadow-lg shadow-coastal-primary/30\">\r\n          ≡ƒÅª\r\n        </div>\r\n        <h1 className=\"text-xl font-black text-coastal-primary mb-1 tracking-tight\">PiggyBank OS</h1>\r\n        <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest\">Coastal Banking</p>\r\n\r\n        {user && (\r\n          <div className=\"mt-4 px-3 py-2 bg-gray-50 rounded-lg border border-gray-100 flex items-center gap-2 justify-center\">\r\n            <div className=\"w-2 h-2 rounded-full bg-emerald-500 animate-pulse\"></div>\r\n            <span className=\"text-sm font-medium text-gray-600 truncate max-w-[150px]\">{user.name || user.email}</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"flex flex-col gap-2 flex-1\">\r\n        {tabs.map(tab => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => handleTabChange(tab.id)}\r\n            className={`\r\n              flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group text-left\r\n              ${activeTab === tab.id\r\n                ? 'bg-gradient-to-r from-coastal-primary to-blue-600 text-white shadow-lg shadow-blue-200 scale-105 font-bold'\r\n                : 'text-gray-500 hover:bg-gray-50 hover:text-gray-800 font-medium'\r\n              }\r\n            `}\r\n          >\r\n            <span className={`text-xl transition-transform group-hover:scale-110 ${activeTab === tab.id ? 'opacity-100' : 'opacity-70'}`}>\r\n              {tab.icon || 'ΓÅ║∩╕Å'}\r\n            </span>\r\n            <span className=\"text-sm tracking-wide\">{tab.name}</span>\r\n            {activeTab === tab.id && (\r\n              <span className=\"ml-auto w-1.5 h-1.5 rounded-full bg-white animate-pulse\"></span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"mt-auto pt-6 border-t border-gray-100\">\r\n        <Button\r\n          variant=\"danger\"\r\n          onClick={handleLogout}\r\n          className=\"w-full justify-center shadow-lg shadow-red-50 hover:shadow-red-100\"\r\n        >\r\n          Logout ≡ƒæï\r\n        </Button>\r\n        <p className=\"text-[10px] text-center text-gray-300 mt-4 font-mono\">v2.5.0 ΓÇó Secure</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CashierSidebar;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\CheckDepositTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkDepositAccountType' is defined but never used. Allowed unused args must match /^_/u.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCheckDepositAccountType' is defined but never used. Allowed unused args must match /^_/u.","line":34,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'members' is defined but never used. Allowed unused args must match /^_/u.","line":39,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface Member {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n}\r\n\r\ninterface CheckDepositTabProps {\r\n  checkDepositAmount: string;\r\n  setCheckDepositAmount: React.Dispatch<React.SetStateAction<string>>;\r\n  checkDepositMemberId: string;\r\n  setCheckDepositMemberId: React.Dispatch<React.SetStateAction<string>>;\r\n  checkDepositAccountType: string;\r\n  setCheckDepositAccountType: React.Dispatch<React.SetStateAction<string>>;\r\n  frontImage: File | null;\r\n  setFrontImage: React.Dispatch<React.SetStateAction<File | null>>;\r\n  backImage: File | null;\r\n  setBackImage: React.Dispatch<React.SetStateAction<File | null>>;\r\n  members: Member[];\r\n  loading: boolean;\r\n  handleCheckDepositSubmit: (e: React.FormEvent) => void;\r\n}\r\n\r\nconst CheckDepositTab: React.FC<CheckDepositTabProps> = ({\r\n  checkDepositAmount,\r\n  setCheckDepositAmount,\r\n  checkDepositMemberId,\r\n  setCheckDepositMemberId,\r\n  checkDepositAccountType,\r\n  setCheckDepositAccountType,\r\n  frontImage,\r\n  setFrontImage,\r\n  backImage,\r\n  setBackImage,\r\n  members,\r\n  loading,\r\n  handleCheckDepositSubmit\r\n}) => {\r\n  const frontInputRef = useRef<HTMLInputElement>(null);\r\n  const backInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const handleDropFront = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      setFrontImage(e.dataTransfer.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleDropBack = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      setBackImage(e.dataTransfer.files[0]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <GlassCard className=\"max-w-3xl mx-auto p-8 border-t-[6px] border-t-amber-500\">\r\n      <div className=\"mb-8 text-center\">\r\n        <div className=\"inline-block p-4 rounded-full bg-amber-50 mb-4\">\r\n          <span className=\"text-4xl\">≡ƒôä</span>\r\n        </div>\r\n        <h2 className=\"text-2xl font-bold text-gray-800\">Check Deposit</h2>\r\n        <p className=\"text-gray-500 mt-2\">Process secure check deposits for members</p>\r\n      </div>\r\n\r\n      <form onSubmit={handleCheckDepositSubmit} className=\"space-y-6\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <Input\r\n            label=\"Member ID / Search\"\r\n            value={checkDepositMemberId}\r\n            onChange={e => setCheckDepositMemberId(e.target.value)}\r\n            list=\"member-list\"\r\n            placeholder=\"Search member...\"\r\n            required\r\n          />\r\n          <Input\r\n            label=\"Check Amount (GHS)\"\r\n            type=\"number\"\r\n            value={checkDepositAmount}\r\n            onChange={e => setCheckDepositAmount(e.target.value)}\r\n            placeholder=\"0.00\"\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          {/* Front Image Upload */}\r\n          <div\r\n            className={`border-2 border-dashed rounded-xl p-6 text-center transition-colors cursor-pointer ${frontImage ? 'border-emerald-400 bg-emerald-50' : 'border-gray-300 hover:border-amber-400 hover:bg-amber-50'}`}\r\n            onClick={() => frontInputRef.current?.click()}\r\n            onDragOver={handleDragOver}\r\n            onDrop={handleDropFront}\r\n          >\r\n            <input\r\n              type=\"file\"\r\n              ref={frontInputRef}\r\n              onChange={e => setFrontImage(e.target.files?.[0] || null)}\r\n              className=\"hidden\"\r\n              accept=\"image/*\"\r\n            />\r\n            <div className=\"text-4xl mb-3\">{frontImage ? 'Γ£à' : '≡ƒô╖'}</div>\r\n            <div className=\"font-bold text-gray-700\">{frontImage ? 'Front Image Selected' : 'Upload Front of Check'}</div>\r\n            <div className=\"text-xs text-gray-400 mt-1\">{frontImage ? frontImage.name : 'Click or drag image here'}</div>\r\n          </div>\r\n\r\n          {/* Back Image Upload */}\r\n          <div\r\n            className={`border-2 border-dashed rounded-xl p-6 text-center transition-colors cursor-pointer ${backImage ? 'border-emerald-400 bg-emerald-50' : 'border-gray-300 hover:border-amber-400 hover:bg-amber-50'}`}\r\n            onClick={() => backInputRef.current?.click()}\r\n            onDragOver={handleDragOver}\r\n            onDrop={handleDropBack}\r\n          >\r\n            <input\r\n              type=\"file\"\r\n              ref={backInputRef}\r\n              onChange={e => setBackImage(e.target.files?.[0] || null)}\r\n              className=\"hidden\"\r\n              accept=\"image/*\"\r\n            />\r\n            <div className=\"text-4xl mb-3\">{backImage ? 'Γ£à' : '≡ƒöä'}</div>\r\n            <div className=\"font-bold text-gray-700\">{backImage ? 'Back Image Selected' : 'Upload Back of Check'}</div>\r\n            <div className=\"text-xs text-gray-400 mt-1\">{backImage ? backImage.name : 'Click or drag image here'}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"warning\"\r\n          className=\"w-full py-4 text-lg font-bold shadow-lg shadow-amber-100/50\"\r\n          disabled={loading || !checkDepositMemberId || !checkDepositAmount || !frontImage}\r\n        >\r\n          {loading ? 'Processing Check...' : 'Process Deposit ≡ƒôÑ'}\r\n        </Button>\r\n      </form>\r\n    </GlassCard>\r\n  );\r\n};\r\n\r\nexport default CheckDepositTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\ComplaintsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1153,1156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1153,1156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4775,4778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4775,4778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface Complaint {\r\n  id: string;\r\n  account: string;\r\n  account_number: string;\r\n  related_transaction?: string;\r\n  related_transaction_ref?: string;\r\n  complaint_type: string;\r\n  priority: string;\r\n  subject: string;\r\n  description: string;\r\n  status: string;\r\n  escalation_level: number;\r\n  submitted_by: string;\r\n  submitted_by_name: string;\r\n  submitted_at: string;\r\n  assigned_to?: string;\r\n  assigned_to_name?: string;\r\n  assigned_at?: string;\r\n  resolved_by?: string;\r\n  resolved_by_name?: string;\r\n  resolved_at?: string;\r\n  resolution?: string;\r\n  resolution_satisfaction?: string;\r\n  escalated_at?: string;\r\n  escalated_by?: string;\r\n  escalated_by_name?: string;\r\n  escalation_reason?: string;\r\n  customer_contacted: boolean;\r\n  contact_attempts: number;\r\n  last_contact_date?: string;\r\n  follow_up_required: boolean;\r\n  follow_up_date?: string;\r\n  attachments?: string[];\r\n  evidence?: string[];\r\n  audit_trail: any[];\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface ComplaintStats {\r\n  total_complaints: number;\r\n  open_complaints: number;\r\n  investigating_complaints: number;\r\n  resolved_complaints: number;\r\n  closed_complaints: number;\r\n  escalated_complaints: number;\r\n  avg_resolution_time_days: number;\r\n}\r\n\r\nconst ComplaintsTab: React.FC = () => {\r\n  const [complaints, setComplaints] = useState<Complaint[]>([]);\r\n  const [stats, setStats] = useState<ComplaintStats | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('');\r\n  const [dateFilter, setDateFilter] = useState('');\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState({\r\n    account_id: '',\r\n    related_transaction_id: '',\r\n    complaint_type: '',\r\n    priority: 'medium',\r\n    subject: '',\r\n    description: '',\r\n    follow_up_required: false,\r\n    follow_up_date: '',\r\n    attachments: [] as File[]\r\n  });\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchComplaints();\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const fetchComplaints = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('banking/complaints/');\r\n      const data = response.data?.results || response.data || [];\r\n      setComplaints(Array.isArray(data) ? data : []);\r\n    } catch (error) {\r\n      console.error('Error fetching complaints:', error);\r\n      setMessage({ type: 'error', text: 'Failed to load complaints' });\r\n      setComplaints([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await api.get('banking/complaints/reports/summary/');\r\n      setStats(response.data.summary);\r\n    } catch (error) {\r\n      console.error('Error fetching stats:', error);\r\n      setStats({\r\n        total_complaints: 0,\r\n        open_complaints: 0,\r\n        investigating_complaints: 0,\r\n        resolved_complaints: 0,\r\n        closed_complaints: 0,\r\n        escalated_complaints: 0,\r\n        avg_resolution_time_days: 0\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmitComplaint = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!formData.account_id || !formData.complaint_type || !formData.subject || !formData.description) {\r\n      setMessage({ type: 'error', text: 'Please fill in all required fields' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      const submitData = {\r\n        account_id: formData.account_id,\r\n        complaint_type: formData.complaint_type,\r\n        priority: formData.priority,\r\n        subject: formData.subject,\r\n        description: formData.description,\r\n        follow_up_required: formData.follow_up_required,\r\n        follow_up_date: formData.follow_up_date || null,\r\n        ...(formData.related_transaction_id && { related_transaction_id: formData.related_transaction_id })\r\n      };\r\n\r\n      await api.post('banking/complaints/', submitData);\r\n      setMessage({ type: 'success', text: 'Complaint submitted successfully' });\r\n      setShowForm(false);\r\n      setFormData({\r\n        account_id: '',\r\n        related_transaction_id: '',\r\n        complaint_type: '',\r\n        priority: 'medium',\r\n        subject: '',\r\n        description: '',\r\n        follow_up_required: false,\r\n        follow_up_date: '',\r\n        attachments: []\r\n      });\r\n      fetchComplaints();\r\n      fetchStats();\r\n    } catch (error: any) {\r\n      console.error('Error submitting complaint:', error);\r\n      setMessage({ type: 'error', text: error.message || 'Failed to submit complaint' });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'open': return 'bg-blue-100 text-blue-700';\r\n      case 'investigating': return 'bg-amber-100 text-amber-700';\r\n      case 'resolved': return 'bg-emerald-100 text-emerald-700';\r\n      case 'closed': return 'bg-gray-200 text-gray-700';\r\n      case 'escalated': return 'bg-red-100 text-red-700';\r\n      default: return 'bg-gray-100 text-gray-700';\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case 'low': return 'border-emerald-200 bg-emerald-50 text-emerald-700';\r\n      case 'medium': return 'border-amber-200 bg-amber-50 text-amber-700';\r\n      case 'high': return 'border-orange-200 bg-orange-50 text-orange-700';\r\n      case 'critical': return 'border-red-200 bg-red-50 text-red-700 font-bold';\r\n      default: return 'border-gray-200 bg-gray-50 text-gray-600';\r\n    }\r\n  };\r\n\r\n  const filteredComplaints = complaints.filter(complaint => {\r\n    const matchesSearch = !searchTerm ||\r\n      complaint.subject.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      complaint.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      complaint.submitted_by_name.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    const matchesStatus = !statusFilter || complaint.status === statusFilter;\r\n    const matchesDate = !dateFilter || complaint.submitted_at.startsWith(dateFilter);\r\n\r\n    return matchesSearch && matchesStatus && matchesDate;\r\n  });\r\n\r\n  const complaintTypes = [\r\n    { value: 'product_issue', label: 'Product Issue' },\r\n    { value: 'service_delay', label: 'Service Delay' },\r\n    { value: 'billing_error', label: 'Billing Error' },\r\n    { value: 'account_access', label: 'Account Access' },\r\n    { value: 'transaction_error', label: 'Transaction Error' },\r\n    { value: 'staff_behavior', label: 'Staff Behavior' },\r\n    { value: 'other', label: 'Other' }\r\n  ];\r\n\r\n  const priorities = [\r\n    { value: 'low', label: 'Low' },\r\n    { value: 'medium', label: 'Medium' },\r\n    { value: 'high', label: 'High' },\r\n    { value: 'critical', label: 'Critical' }\r\n  ];\r\n\r\n  const statuses = [\r\n    { value: '', label: 'All Statuses' },\r\n    { value: 'open', label: 'Open' },\r\n    { value: 'investigating', label: 'Investigating' },\r\n    { value: 'resolved', label: 'Resolved' },\r\n    { value: 'closed', label: 'Closed' },\r\n    { value: 'escalated', label: 'Escalated' }\r\n  ];\r\n\r\n  if (loading) {\r\n    return <div className=\"p-12 text-center text-gray-400\"><div className=\"animate-spin text-4xl mb-4\">ΓÅ│</div>Loading Complaints...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n            <span>≡ƒôó</span> Complaints Management\r\n          </h2>\r\n          <p className=\"text-gray-500\">Manage customer complaints and track resolutions.</p>\r\n        </div>\r\n        <Button onClick={() => setShowForm(!showForm)} variant={showForm ? 'secondary' : 'primary'}>\r\n          {showForm ? 'Cancel' : 'New Complaint Γ₧ò'}\r\n        </Button>\r\n      </div>\r\n\r\n      {message.text && (\r\n        <div className={`p-4 rounded-xl border ${message.type === 'error' ? 'bg-red-50 border-red-100 text-red-700' : 'bg-emerald-50 border-emerald-100 text-emerald-700'}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      {/* Analytics Summary */}\r\n      {stats && (\r\n        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n          <GlassCard className=\"p-4 text-center\">\r\n            <div className=\"text-2xl font-bold text-coastal-primary\">{stats.total_complaints || 0}</div>\r\n            <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Total</div>\r\n          </GlassCard>\r\n          <GlassCard className=\"p-4 text-center\">\r\n            <div className=\"text-2xl font-bold text-blue-500\">{stats.open_complaints || 0}</div>\r\n            <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Open</div>\r\n          </GlassCard>\r\n          <GlassCard className=\"p-4 text-center\">\r\n            <div className=\"text-2xl font-bold text-emerald-500\">{stats.resolved_complaints || 0}</div>\r\n            <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Resolved</div>\r\n          </GlassCard>\r\n          <GlassCard className=\"p-4 text-center\">\r\n            <div className=\"text-2xl font-bold text-amber-500\">\r\n              {(stats.total_complaints || 0) > 0 ? Math.round(((stats.resolved_complaints || 0) / (stats.total_complaints || 1)) * 100) : 0}%\r\n            </div>\r\n            <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Rate</div>\r\n          </GlassCard>\r\n          <GlassCard className=\"p-4 text-center\">\r\n            <div className=\"text-2xl font-bold text-red-500\">{stats.avg_resolution_time_days ? Math.round(stats.avg_resolution_time_days) : 'N/A'}</div>\r\n            <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Avg Days</div>\r\n          </GlassCard>\r\n        </div>\r\n      )}\r\n\r\n      {/* Complaint Submission Form */}\r\n      {showForm && (\r\n        <GlassCard className=\"p-6 border-2 border-coastal-primary/10\">\r\n          <h3 className=\"text-lg font-bold text-gray-800 mb-6\">Submit New Complaint</h3>\r\n          <form onSubmit={handleSubmitComplaint} className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <Input\r\n                label=\"Account ID *\"\r\n                value={formData.account_id}\r\n                onChange={(e) => setFormData({ ...formData, account_id: e.target.value })}\r\n                placeholder=\"Enter account UUID\"\r\n                required\r\n              />\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                  Complaint Type *\r\n                </label>\r\n                <select\r\n                  value={formData.complaint_type}\r\n                  onChange={(e) => setFormData({ ...formData, complaint_type: e.target.value })}\r\n                  required\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n                >\r\n                  <option value=\"\">Select type...</option>\r\n                  {complaintTypes.map(type => (\r\n                    <option key={type.value} value={type.value}>{type.label}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                  Priority\r\n                </label>\r\n                <select\r\n                  value={formData.priority}\r\n                  onChange={(e) => setFormData({ ...formData, priority: e.target.value })}\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n                >\r\n                  {priorities.map(priority => (\r\n                    <option key={priority.value} value={priority.value}>{priority.label}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Subject *\"\r\n              value={formData.subject}\r\n              onChange={(e) => setFormData({ ...formData, subject: e.target.value })}\r\n              placeholder=\"Brief description\"\r\n              required\r\n            />\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                Description *\r\n              </label>\r\n              <textarea\r\n                value={formData.description}\r\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                placeholder=\"Detailed description...\"\r\n                rows={4}\r\n                required\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex flex-col sm:flex-row gap-4 sm:items-center bg-gray-50 p-4 rounded-xl\">\r\n              <label className=\"flex items-center gap-2 cursor-pointer select-none\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.follow_up_required}\r\n                  onChange={(e) => setFormData({ ...formData, follow_up_required: e.target.checked })}\r\n                  className=\"w-5 h-5 rounded border-gray-300 text-coastal-primary focus:ring-coastal-primary\"\r\n                />\r\n                <span className=\"text-gray-700 font-medium\">Follow-up required</span>\r\n              </label>\r\n\r\n              {formData.follow_up_required && (\r\n                <div className=\"flex-1\">\r\n                  <Input\r\n                    type=\"date\"\r\n                    value={formData.follow_up_date}\r\n                    onChange={(e) => setFormData({ ...formData, follow_up_date: e.target.value })}\r\n                    className=\"bg-white\"\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex gap-3 justify-end pt-4 border-t border-gray-100\">\r\n              <Button onClick={() => setShowForm(false)} variant=\"secondary\" disabled={submitting}>\r\n                Cancel\r\n              </Button>\r\n              <Button onClick={handleSubmitComplaint} disabled={submitting} variant=\"danger\" className=\"shadow-lg shadow-red-100\">\r\n                {submitting ? 'Submitting...' : 'Submit Complaint'}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </GlassCard>\r\n      )}\r\n\r\n      {/* Search and Filters */}\r\n      <GlassCard className=\"p-6\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 items-end\">\r\n          <div className=\"md:col-span-2\">\r\n            <Input\r\n              label=\"Search\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\"Subject, description, submitter...\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Status</label>\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n            >\r\n              {statuses.map(status => (\r\n                <option key={status.value} value={status.value}>{status.label}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <Button\r\n            onClick={() => { setSearchTerm(''); setStatusFilter(''); setDateFilter(''); }}\r\n            variant=\"ghost\"\r\n            className=\"h-[50px] text-gray-500 hover:text-gray-800\"\r\n          >\r\n            Clear Filters\r\n          </Button>\r\n        </div>\r\n      </GlassCard>\r\n\r\n      {/* Complaints List */}\r\n      <GlassCard className=\"p-0 overflow-hidden\">\r\n        <div className=\"p-6 border-b border-gray-100 bg-gray-50/50\">\r\n          <h3 className=\"font-bold text-gray-700\">Complaints ({filteredComplaints.length})</h3>\r\n        </div>\r\n        {filteredComplaints.length === 0 ? (\r\n          <div className=\"p-12 text-center text-gray-400 italic\">\r\n            {complaints.length === 0 ? 'No complaints found.' : 'No complaints match your filters.'}\r\n          </div>\r\n        ) : (\r\n          <div className=\"divide-y divide-gray-100\">\r\n            {filteredComplaints.map((complaint) => (\r\n              <div key={complaint.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\r\n                <div className=\"flex flex-col md:flex-row justify-between md:items-start gap-4 mb-3\">\r\n                  <div>\r\n                    <h4 className=\"text-lg font-bold text-gray-800 mb-1\">{complaint.subject}</h4>\r\n                    <div className=\"flex flex-wrap gap-2 text-xs font-mono text-gray-400 items-center\">\r\n                      <span className=\"uppercase\">#{complaint.id.slice(-8)}</span>\r\n                      <span>ΓÇó</span>\r\n                      <span>Account: ****{complaint.account_number}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex gap-2 shrink-0\">\r\n                    <span className={`px-2 py-1 rounded-full text-xs font-bold uppercase ${getStatusColor(complaint.status)}`}>\r\n                      {complaint.status}\r\n                    </span>\r\n                    <span className={`px-2 py-1 rounded-full text-xs font-bold uppercase border ${getPriorityColor(complaint.priority)}`}>\r\n                      {complaint.priority}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <p className=\"text-gray-600 mb-4 text-sm line-clamp-2\">{complaint.description}</p>\r\n\r\n                <div className=\"flex flex-wrap justify-between items-center text-xs text-gray-500 mt-4 pt-4 border-t border-gray-50\">\r\n                  <div className=\"flex gap-4\">\r\n                    <span>Type: <strong className=\"text-gray-700\">{complaintTypes.find(t => t.value === complaint.complaint_type)?.label || complaint.complaint_type}</strong></span>\r\n                    {complaint.related_transaction_ref && (\r\n                      <span>Txn: <span className=\"font-mono\">{complaint.related_transaction_ref}</span></span>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    Submitted by <span className=\"font-semibold text-gray-700\">{complaint.submitted_by_name}</span> on {new Date(complaint.submitted_at).toLocaleDateString()}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </GlassCard>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComplaintsTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\DepositTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'members' is defined but never used. Allowed unused args must match /^_/u.","line":27,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface Member {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n}\r\n\r\ninterface DepositTabProps {\r\n  depositAmount: string;\r\n  setDepositAmount: React.Dispatch<React.SetStateAction<string>>;\r\n  depositMemberId: string;\r\n  setDepositMemberId: React.Dispatch<React.SetStateAction<string>>;\r\n  members: Member[];\r\n  loading: boolean;\r\n  handleTransactionSubmit: (e: React.FormEvent, type: string) => void;\r\n}\r\n\r\nconst DepositTab: React.FC<DepositTabProps> = ({\r\n  depositAmount,\r\n  setDepositAmount,\r\n  depositMemberId,\r\n  setDepositMemberId,\r\n  members,\r\n  loading,\r\n  handleTransactionSubmit\r\n}) => {\r\n  return (\r\n    <GlassCard className=\"max-w-xl mx-auto p-8 border-t-[6px] border-t-emerald-500\">\r\n      <div className=\"mb-8 text-center\">\r\n        <div className=\"inline-block p-4 rounded-full bg-emerald-50 mb-4\">\r\n          <span className=\"text-4xl\">≡ƒÆ░</span>\r\n        </div>\r\n        <h2 className=\"text-2xl font-bold text-gray-800\">New Deposit</h2>\r\n        <p className=\"text-gray-500 mt-2\">Process cash deposit to member account</p>\r\n      </div>\r\n\r\n      <form onSubmit={(e) => handleTransactionSubmit(e, 'Deposit')} className=\"space-y-6\">\r\n        <Input\r\n          label=\"Member ID / Account\"\r\n          placeholder=\"Select or enter Member ID...\"\r\n          list=\"member-list\"\r\n          value={depositMemberId}\r\n          onChange={(e) => setDepositMemberId(e.target.value)}\r\n          required\r\n          className=\"text-lg\"\r\n        />\r\n\r\n        <div className=\"relative\">\r\n          <Input\r\n            label=\"Deposit Amount (GHS)\"\r\n            type=\"number\"\r\n            placeholder=\"0.00\"\r\n            value={depositAmount}\r\n            onChange={(e) => setDepositAmount(e.target.value)}\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            required\r\n            className=\"text-2xl font-bold text-emerald-600\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"pt-4\">\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"success\"\r\n            className=\"w-full py-4 text-lg font-bold shadow-lg shadow-emerald-100/50\"\r\n            disabled={loading || !depositMemberId || !depositAmount}\r\n          >\r\n            {loading ? 'Processing Transaction...' : 'Confirm Deposit ≡ƒôÑ'}\r\n          </Button>\r\n        </div>\r\n\r\n        <p className=\"text-xs text-center text-gray-400 mt-4\">\r\n          Transaction will be recorded immediately. Ensure cash is counted.\r\n        </p>\r\n      </form>\r\n    </GlassCard>\r\n  );\r\n};\r\n\r\nexport default DepositTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\FraudAlertsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface FraudAlert {\r\n  id: number;\r\n  user?: number;\r\n  user_email?: string;\r\n  account?: number;\r\n  account_number?: string;\r\n  transaction?: number;\r\n  alert_type: string;\r\n  severity: 'low' | 'medium' | 'high' | 'critical';\r\n  description: string;\r\n  is_resolved: boolean;\r\n  resolved_by?: string;\r\n  resolved_at?: string;\r\n  resolution_notes?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface FraudStats {\r\n  total: number;\r\n  unresolved: number;\r\n  by_severity: { severity: string; count: number }[];\r\n  recent_alerts: FraudAlert[];\r\n}\r\n\r\nconst FraudAlertsTab: React.FC = () => {\r\n  const [alerts, setAlerts] = useState<FraudAlert[]>([]);\r\n  const [stats, setStats] = useState<FraudStats | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedAlert, setSelectedAlert] = useState<FraudAlert | null>(null);\r\n  const [showResolveModal, setShowResolveModal] = useState(false);\r\n  const [resolutionNotes, setResolutionNotes] = useState('');\r\n  const [processing, setProcessing] = useState(false);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [filterSeverity, setFilterSeverity] = useState('');\r\n  const [filterResolved, setFilterResolved] = useState<string>('false');\r\n\r\n  useEffect(() => {\r\n    fetchAlerts();\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const fetchAlerts = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get('fraud/alerts/');\r\n      const data = response.data?.results || response.data || [];\r\n      setAlerts(Array.isArray(data) ? data : []);\r\n    } catch (error) {\r\n      console.error('Error fetching fraud alerts:', error);\r\n      setAlerts([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await api.get('fraud/alerts/dashboard_stats/');\r\n      setStats(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching fraud stats:', error);\r\n      setStats(null);\r\n    }\r\n  };\r\n\r\n  const handleResolve = async () => {\r\n    if (!selectedAlert) return;\r\n\r\n    setProcessing(true);\r\n    try {\r\n      await api.patch(`fraud/alerts/${selectedAlert.id}/`, {\r\n        is_resolved: true,\r\n        resolution_notes: resolutionNotes\r\n      });\r\n      setMessage({ type: 'success', text: 'Alert resolved successfully' });\r\n      setShowResolveModal(false);\r\n      setSelectedAlert(null);\r\n      setResolutionNotes('');\r\n      fetchAlerts();\r\n      fetchStats();\r\n    } catch (error) {\r\n      console.error('Error resolving alert:', error);\r\n      setMessage({ type: 'error', text: 'Failed to resolve alert' });\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  const getSeverityBadge = (severity: string) => {\r\n    switch (severity) {\r\n      case 'critical': return 'bg-red-600 text-white';\r\n      case 'high': return 'bg-orange-500 text-white';\r\n      case 'medium': return 'bg-amber-400 text-amber-900';\r\n      case 'low': return 'bg-blue-400 text-white';\r\n      default: return 'bg-gray-400 text-white';\r\n    }\r\n  };\r\n\r\n  const getAlertCardStyle = (severity: string, isResolved: boolean) => {\r\n    if (isResolved) return 'border-gray-100 bg-gray-50 opacity-70';\r\n\r\n    switch (severity) {\r\n      case 'critical': return 'border-red-200 bg-red-50 ring-1 ring-red-100';\r\n      case 'high': return 'border-orange-200 bg-orange-50 ring-1 ring-orange-100';\r\n      case 'medium': return 'border-amber-200 bg-amber-50';\r\n      default: return 'border-blue-100 bg-blue-50';\r\n    }\r\n  };\r\n\r\n  const filteredAlerts = alerts.filter(alert => {\r\n    const matchesSeverity = !filterSeverity || alert.severity === filterSeverity;\r\n    const matchesResolved = filterResolved === '' ||\r\n      (filterResolved === 'true' && alert.is_resolved) ||\r\n      (filterResolved === 'false' && !alert.is_resolved);\r\n    return matchesSeverity && matchesResolved;\r\n  });\r\n\r\n  if (loading) {\r\n    return <div className=\"p-12 text-center text-gray-400\"><div className=\"animate-spin text-4xl mb-4\">ΓÅ│</div>Loading Security Alerts...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n            <span>≡ƒÜ¿</span> Fraud Alerts\r\n          </h2>\r\n          <p className=\"text-gray-500\">Monitor and respond to suspicious activities</p>\r\n        </div>\r\n        <Button variant=\"primary\" onClick={() => { fetchAlerts(); fetchStats(); }}>\r\n          Refresh Γå╗\r\n        </Button>\r\n      </div>\r\n\r\n      {message.text && (\r\n        <div className={`p-4 rounded-xl border ${message.type === 'error' ? 'bg-red-50 border-red-100 text-red-700' : 'bg-emerald-50 border-emerald-100 text-emerald-700'}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      {/* Stats Overview */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n        <GlassCard className=\"text-center p-4\">\r\n          <div className=\"text-3xl font-black text-gray-700\">{stats?.total || 0}</div>\r\n          <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Total Alerts</div>\r\n        </GlassCard>\r\n        <GlassCard className=\"text-center p-4 border-l-4 border-l-red-500\">\r\n          <div className=\"text-3xl font-black text-red-600\">{stats?.unresolved || 0}</div>\r\n          <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Unresolved</div>\r\n        </GlassCard>\r\n        <GlassCard className=\"text-center p-4\">\r\n          <div className=\"text-3xl font-black text-red-600\">\r\n            {stats?.by_severity?.find(s => s.severity === 'critical')?.count || 0}\r\n          </div>\r\n          <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Critical</div>\r\n        </GlassCard>\r\n        <GlassCard className=\"text-center p-4\">\r\n          <div className=\"text-3xl font-black text-orange-500\">\r\n            {stats?.by_severity?.find(s => s.severity === 'high')?.count || 0}\r\n          </div>\r\n          <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">High</div>\r\n        </GlassCard>\r\n        <GlassCard className=\"text-center p-4\">\r\n          <div className=\"text-3xl font-black text-emerald-500\">\r\n            {(stats?.total || 0) - (stats?.unresolved || 0)}\r\n          </div>\r\n          <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Resolved</div>\r\n        </GlassCard>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <GlassCard className=\"p-4 flex flex-col md:flex-row gap-4 items-end\">\r\n        <div className=\"w-full md:w-48\">\r\n          <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Severity</label>\r\n          <select\r\n            value={filterSeverity}\r\n            onChange={(e) => setFilterSeverity(e.target.value)}\r\n            className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50 text-sm\"\r\n          >\r\n            <option value=\"\">All Severities</option>\r\n            <option value=\"critical\">Critical</option>\r\n            <option value=\"high\">High</option>\r\n            <option value=\"medium\">Medium</option>\r\n            <option value=\"low\">Low</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"w-full md:w-48\">\r\n          <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Status</label>\r\n          <select\r\n            value={filterResolved}\r\n            onChange={(e) => setFilterResolved(e.target.value)}\r\n            className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50 text-sm\"\r\n          >\r\n            <option value=\"\">All</option>\r\n            <option value=\"false\">Unresolved</option>\r\n            <option value=\"true\">Resolved</option>\r\n          </select>\r\n        </div>\r\n\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={() => { setFilterSeverity(''); setFilterResolved('false'); }}\r\n          className=\"md:ml-auto text-gray-500\"\r\n        >\r\n          Clear Filters\r\n        </Button>\r\n      </GlassCard>\r\n\r\n      {/* Alerts List */}\r\n      <div className=\"space-y-4\">\r\n        {filteredAlerts.length === 0 ? (\r\n          <GlassCard className=\"text-center py-16 text-gray-400 italic\">\r\n            <div className=\"text-5xl mb-4 text-emerald-100\">Γ£à</div>\r\n            <p>No fraud alerts found matching your criteria</p>\r\n          </GlassCard>\r\n        ) : (\r\n          filteredAlerts.map(alert => (\r\n            <GlassCard\r\n              key={alert.id}\r\n              className={`p-5 pl-6 border-l-4 transition-all ${getAlertCardStyle(alert.severity, alert.is_resolved)} ${alert.severity === 'critical' ? 'border-l-red-500' : alert.severity === 'high' ? 'border-l-orange-500' : alert.severity === 'medium' ? 'border-l-amber-500' : 'border-l-blue-500'}`}\r\n            >\r\n              <div className=\"flex flex-col md:flex-row justify-between items-start gap-4\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex flex-wrap items-center gap-2 mb-2\">\r\n                    <span className={`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide ${getSeverityBadge(alert.severity)}`}>\r\n                      {alert.severity}\r\n                    </span>\r\n                    <span className=\"font-bold text-gray-800 uppercase text-sm tracking-wide\">\r\n                      {alert.alert_type?.replace(/_/g, ' ') || 'ALERT'}\r\n                    </span>\r\n                    {alert.is_resolved && (\r\n                      <span className=\"px-2 py-0.5 rounded text-[10px] font-bold uppercase bg-emerald-100 text-emerald-700 border border-emerald-200\">\r\n                        RESOLVED\r\n                      </span>\r\n                    )}\r\n                    <span className=\"text-xs text-gray-400 font-mono\">#{alert.id}</span>\r\n                  </div>\r\n\r\n                  <p className=\"text-gray-800 font-medium mb-3\">{alert.description}</p>\r\n\r\n                  <div className=\"flex flex-wrap gap-4 text-xs text-gray-500 items-center\">\r\n                    {alert.user_email && <span className=\"flex items-center gap-1\">≡ƒæñ <span className=\"text-gray-700\">{alert.user_email}</span></span>}\r\n                    {alert.account_number && <span className=\"flex items-center gap-1\">≡ƒÆ│ <span className=\"font-mono text-gray-700\">****{alert.account_number}</span></span>}\r\n                    <span className=\"flex items-center gap-1\">≡ƒôà {new Date(alert.created_at).toLocaleString()}</span>\r\n                  </div>\r\n\r\n                  {alert.is_resolved && alert.resolution_notes && (\r\n                    <div className=\"mt-3 p-3 bg-white/60 rounded-lg text-sm text-gray-700 border border-gray-200\">\r\n                      <strong className=\"text-emerald-700 text-xs uppercase block mb-1\">Resolution</strong>\r\n                      {alert.resolution_notes}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  {!alert.is_resolved && (\r\n                    <>\r\n                      <Button\r\n                        variant=\"success\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          setSelectedAlert(alert);\r\n                          setShowResolveModal(true);\r\n                        }}\r\n                        className=\"shadow-md shadow-emerald-50\"\r\n                      >\r\n                        Γ£ô Resolve\r\n                      </Button>\r\n                      <Button variant=\"secondary\" size=\"sm\">\r\n                        Details\r\n                      </Button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </GlassCard>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* Resolve Modal */}\r\n      {showResolveModal && selectedAlert && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6\">\r\n            <div className=\"border-b border-gray-100 pb-4 mb-4\">\r\n              <h3 className=\"text-lg font-bold text-gray-800\">Resolve Fraud Alert</h3>\r\n              <p className=\"text-gray-500 text-sm mt-1\">\r\n                Alert #{selectedAlert.id} - {selectedAlert.alert_type?.replace(/_/g, ' ')}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"mb-6\">\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2 ml-1\">\r\n                Resolution Notes\r\n              </label>\r\n              <textarea\r\n                value={resolutionNotes}\r\n                onChange={(e) => setResolutionNotes(e.target.value)}\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n                rows={4}\r\n                placeholder=\"Describe the investigation outcome and actions taken...\"\r\n                autoFocus\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex gap-3 justify-end\">\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => {\r\n                  setShowResolveModal(false);\r\n                  setSelectedAlert(null);\r\n                  setResolutionNotes('');\r\n                }}\r\n                disabled={processing}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                variant=\"success\"\r\n                onClick={handleResolve}\r\n                disabled={processing}\r\n              >\r\n                {processing ? 'Resolving...' : 'Mark as Resolved'}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FraudAlertsTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\MessagingTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\OverviewTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\PerformanceMonitoringTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":84,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2466,2469],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2466,2469],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface PerformanceData {\r\n  performance_summary: {\r\n    total_metrics: number;\r\n    metric_types: Record<string, number>;\r\n    time_range: string;\r\n    average_response_time: number;\r\n    error_rate: number;\r\n    throughput: number;\r\n  };\r\n  system_health: {\r\n    total_components: number;\r\n    healthy_components: number;\r\n    warning_components: number;\r\n    critical_components: number;\r\n    overall_status: string;\r\n    last_updated: string;\r\n  };\r\n  transaction_volume: Array<{\r\n    date: string;\r\n    deposits: number;\r\n    withdrawals: number;\r\n    transfers: number;\r\n    total_amount: number;\r\n    average_transaction_value: number;\r\n  }>;\r\n  active_alerts: Array<{\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    alert_level: string;\r\n    status: string;\r\n    triggered_at: string;\r\n  }>;\r\n  recent_recommendations: Array<{\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    priority: string;\r\n    status: string;\r\n    created_at: string;\r\n  }>;\r\n}\r\n\r\nconst PerformanceMonitoringTab: React.FC = () => {\r\n  const [performanceData, setPerformanceData] = useState<PerformanceData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n\r\n  useEffect(() => {\r\n    fetchPerformanceData();\r\n  }, []);\r\n\r\n  const fetchPerformanceData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('performance/dashboard-data/');\r\n      // Ensure we have valid data structure with defaults\r\n      const data = response.data || {};\r\n      setPerformanceData({\r\n        performance_summary: data.performance_summary || {\r\n          total_metrics: 0,\r\n          metric_types: {},\r\n          time_range: '',\r\n          average_response_time: 0,\r\n          error_rate: 0,\r\n          throughput: 0\r\n        },\r\n        system_health: data.system_health || {\r\n          total_components: 0,\r\n          healthy_components: 0,\r\n          warning_components: 0,\r\n          critical_components: 0,\r\n          overall_status: 'unknown',\r\n          last_updated: ''\r\n        },\r\n        transaction_volume: data.transaction_volume || [],\r\n        active_alerts: data.active_alerts || [],\r\n        recent_recommendations: data.recent_recommendations || []\r\n      });\r\n    } catch (error: any) {\r\n      console.error('Error fetching performance data:', error);\r\n      if (error.response?.status === 401) {\r\n        setMessage({ type: 'error', text: 'Authentication required to view performance data' });\r\n      } else if (error.response?.status === 403) {\r\n        setMessage({ type: 'error', text: 'Insufficient permissions to view performance data' });\r\n      } else {\r\n        setMessage({ type: 'error', text: 'Failed to load performance data' });\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'healthy': return 'text-emerald-500 bg-emerald-50';\r\n      case 'warning': return 'text-amber-500 bg-amber-50';\r\n      case 'critical': return 'text-red-500 bg-red-50';\r\n      default: return 'text-gray-500 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getAlertLevelBadge = (level: string) => {\r\n    switch (level) {\r\n      case 'critical': return 'bg-red-100 text-red-700';\r\n      case 'high': return 'bg-orange-100 text-orange-700';\r\n      case 'medium': return 'bg-amber-100 text-amber-700';\r\n      default: return 'bg-blue-100 text-blue-700';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"p-12 text-center text-gray-400\"><div className=\"animate-spin text-4xl mb-4\">ΓÅ│</div>Loading Metrics...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n          <span>≡ƒôê</span> Performance Monitoring\r\n        </h2>\r\n        <p className=\"text-gray-500\">Real-time system health and performance metrics.</p>\r\n      </div>\r\n\r\n      {message.text && (\r\n        <div className={`p-4 rounded-xl border ${message.type === 'error' ? 'bg-red-50 border-red-100 text-red-700' : 'bg-emerald-50 border-emerald-100 text-emerald-700'}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      {performanceData && (\r\n        <div className=\"space-y-6\">\r\n          {/* Performance Summary Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <GlassCard className=\"p-6 text-center\">\r\n              <div className=\"text-3xl font-black text-gray-800 mb-1\">{performanceData.performance_summary.total_metrics}</div>\r\n              <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Total Metrics</div>\r\n            </GlassCard>\r\n            <GlassCard className=\"p-6 text-center\">\r\n              <div className=\"text-3xl font-black text-blue-600 mb-1\">{performanceData.performance_summary.average_response_time.toFixed(2)}ms</div>\r\n              <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Avg Response Time</div>\r\n            </GlassCard>\r\n            <GlassCard className=\"p-6 text-center\">\r\n              <div className=\"text-3xl font-black text-violet-600 mb-1\">{performanceData.performance_summary.throughput.toFixed(2)}</div>\r\n              <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Throughput (req/sec)</div>\r\n            </GlassCard>\r\n          </div>\r\n\r\n          {/* System Health */}\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-800 mb-6 border-b border-gray-100 pb-2\">System Health</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n              <div className={`p-4 rounded-xl text-center ${getStatusColor(performanceData.system_health.overall_status)}`}>\r\n                <div className=\"text-2xl font-bold mb-1 uppercase tracking-wider\">{performanceData.system_health.overall_status}</div>\r\n                <div className=\"text-[10px] opacity-70 uppercase font-bold\">Overall Status</div>\r\n              </div>\r\n              <div className=\"bg-emerald-50 text-emerald-700 p-4 rounded-xl text-center\">\r\n                <div className=\"text-2xl font-bold mb-1\">{performanceData.system_health.healthy_components}</div>\r\n                <div className=\"text-[10px] opacity-70 uppercase font-bold\">Healthy Nodes</div>\r\n              </div>\r\n              <div className=\"bg-amber-50 text-amber-700 p-4 rounded-xl text-center\">\r\n                <div className=\"text-2xl font-bold mb-1\">{performanceData.system_health.warning_components}</div>\r\n                <div className=\"text-[10px] opacity-70 uppercase font-bold\">Warnings</div>\r\n              </div>\r\n              <div className=\"bg-red-50 text-red-700 p-4 rounded-xl text-center\">\r\n                <div className=\"text-2xl font-bold mb-1\">{performanceData.system_health.critical_components}</div>\r\n                <div className=\"text-[10px] opacity-70 uppercase font-bold\">Critical Errors</div>\r\n              </div>\r\n            </div>\r\n          </GlassCard>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Active Alerts */}\r\n            <GlassCard className=\"p-6 h-full\">\r\n              <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center justify-between\">\r\n                <span>Active Alerts</span>\r\n                <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\">{performanceData.active_alerts.length}</span>\r\n              </h3>\r\n              {performanceData.active_alerts.length === 0 ? (\r\n                <div className=\"text-center py-10 text-gray-400 italic\">No active alerts. System running smoothly.</div>\r\n              ) : (\r\n                <div className=\"space-y-3 max-h-[300px] overflow-y-auto pr-2\">\r\n                  {performanceData.active_alerts.map((alert) => (\r\n                    <div key={alert.id} className=\"p-3 border border-gray-100 rounded-lg bg-gray-50 flex justify-between items-start\">\r\n                      <div>\r\n                        <div className=\"font-bold text-gray-800 text-sm\">{alert.title}</div>\r\n                        <div className=\"text-xs text-gray-500 mt-1\">{alert.description}</div>\r\n                      </div>\r\n                      <span className={`text-[10px] font-bold px-2 py-1 rounded uppercase ${getAlertLevelBadge(alert.alert_level)}`}>\r\n                        {alert.alert_level}\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </GlassCard>\r\n\r\n            {/* Recent Recommendations */}\r\n            <GlassCard className=\"p-6 h-full\">\r\n              <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center justify-between\">\r\n                <span>Recommendations</span>\r\n                <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\">{performanceData.recent_recommendations.length}</span>\r\n              </h3>\r\n              {performanceData.recent_recommendations.length === 0 ? (\r\n                <div className=\"text-center py-10 text-gray-400 italic\">No recommendations at this time.</div>\r\n              ) : (\r\n                <div className=\"space-y-3 max-h-[300px] overflow-y-auto pr-2\">\r\n                  {performanceData.recent_recommendations.map((rec) => (\r\n                    <div key={rec.id} className=\"p-3 border border-gray-100 rounded-lg bg-white shadow-sm flex justify-between items-start\">\r\n                      <div>\r\n                        <div className=\"font-bold text-gray-800 text-sm\">{rec.title}</div>\r\n                        <div className=\"text-xs text-gray-500 mt-1\">{rec.description}</div>\r\n                      </div>\r\n                      <span className={`text-[10px] font-bold px-2 py-1 rounded uppercase ${rec.priority === 'high' ? 'bg-red-100 text-red-700' : rec.priority === 'medium' ? 'bg-amber-100 text-amber-700' : 'bg-emerald-100 text-emerald-700'}`}>\r\n                        {rec.priority}\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </GlassCard>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PerformanceMonitoringTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\ProductsPromotionsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2175,2178],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2175,2178],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3048,3051],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3048,3051],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\nimport { formatCurrencyGHS } from '../../utils/formatters';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface Product {\r\n  id: string;\r\n  name: string;\r\n  product_type: string;\r\n  product_type_display: string;\r\n  description: string;\r\n  interest_rate?: string | number;\r\n  minimum_balance: string | number;\r\n  maximum_balance?: string | number;\r\n  features?: string[];\r\n  is_active: boolean;\r\n}\r\n\r\ninterface Promotion {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  discount_percentage?: number;\r\n  bonus_amount?: number;\r\n  start_date: string;\r\n  end_date: string;\r\n  is_active: boolean;\r\n}\r\n\r\nconst ProductsPromotionsTab: React.FC = () => {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [promotions, setPromotions] = useState<Promotion[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedCustomer, setSelectedCustomer] = useState('');\r\n  const [selectedProduct, setSelectedProduct] = useState('');\r\n  const [selectedPromotion, setSelectedPromotion] = useState('');\r\n  const [enrollmentLoading, setEnrollmentLoading] = useState(false);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n    fetchPromotions();\r\n  }, []);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('products/products/');\r\n      const data = response.data?.results || response.data || [];\r\n      setProducts(Array.isArray(data) ? data : []);\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n      setProducts([]);\r\n      setMessage({ type: 'error', text: 'Failed to load products' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchPromotions = async () => {\r\n    try {\r\n      const response = await api.get('products/promotions/');\r\n      const data = response.data?.results || response.data || [];\r\n      const activePromos = (Array.isArray(data) ? data : []).filter((p: any) => p.is_active);\r\n      setPromotions(activePromos);\r\n    } catch (error) {\r\n      console.error('Error fetching promotions:', error);\r\n      setPromotions([]);\r\n    }\r\n  };\r\n\r\n  const handleProductEnrollment = async () => {\r\n    if (!selectedCustomer || !selectedProduct) {\r\n      setMessage({ type: 'error', text: 'Please select a customer and product' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setEnrollmentLoading(true);\r\n      await api.post('banking/account-openings/', {\r\n        user_id: selectedCustomer,\r\n        product_id: selectedProduct,\r\n        promotion_id: selectedPromotion || null,\r\n        initial_deposit: 0\r\n      });\r\n\r\n      setMessage({ type: 'success', text: 'Product enrollment/application submitted successfully!' });\r\n      setSelectedCustomer('');\r\n      setSelectedProduct('');\r\n      setSelectedPromotion('');\r\n    } catch (error: any) {\r\n      console.error('Error enrolling product:', error);\r\n      setMessage({ type: 'error', text: error.response?.data?.message || 'Failed to enroll product/service' });\r\n    } finally {\r\n      setEnrollmentLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"p-12 text-center text-gray-400\"><div className=\"animate-spin text-4xl mb-4\">ΓÅ│</div>Loading Products...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n          <span>≡ƒÅª</span> Banking Products & Services\r\n        </h2>\r\n        <p className=\"text-gray-500\">Browse financial products and enroll customers.</p>\r\n      </div>\r\n\r\n      {message.text && (\r\n        <div className={`p-4 rounded-xl border ${message.type === 'error' ? 'bg-red-50 border-red-100 text-red-700' : 'bg-emerald-50 border-emerald-100 text-emerald-700'}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      {/* Product Enrollment Section */}\r\n      <GlassCard className=\"p-6\">\r\n        <h3 className=\"text-lg font-bold text-gray-800 mb-6 border-b border-gray-100 pb-2\">New Enrollment</h3>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 items-end\">\r\n          <div>\r\n            <Input\r\n              label=\"Customer ID / Account Number\"\r\n              value={selectedCustomer}\r\n              onChange={(e) => setSelectedCustomer(e.target.value)}\r\n              placeholder=\"Enter customer ID\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n              Select Product\r\n            </label>\r\n            <select\r\n              value={selectedProduct}\r\n              onChange={(e) => setSelectedProduct(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n            >\r\n              <option value=\"\">Choose a product...</option>\r\n              {products.filter(p => p.is_active).map((product) => (\r\n                <option key={product.id} value={product.id}>\r\n                  {product.name} ({product.product_type_display})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n              Promotion (Optional)\r\n            </label>\r\n            <select\r\n              value={selectedPromotion}\r\n              onChange={(e) => setSelectedPromotion(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n            >\r\n              <option value=\"\">No promotion</option>\r\n              {promotions.map((promo) => (\r\n                <option key={promo.id} value={promo.id}>\r\n                  {promo.name} - {promo.discount_percentage ? `${promo.discount_percentage}% Off` : `GHS ${promo.bonus_amount} Bonus`}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-6 flex justify-end\">\r\n          <Button\r\n            onClick={handleProductEnrollment}\r\n            disabled={enrollmentLoading || !selectedCustomer || !selectedProduct}\r\n            variant=\"success\"\r\n            className=\"w-full md:w-auto px-8\"\r\n          >\r\n            {enrollmentLoading ? 'Processing...' : 'Start Enrollment ≡ƒô¥'}\r\n          </Button>\r\n        </div>\r\n      </GlassCard>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Products List */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          <h3 className=\"text-lg font-bold text-gray-700 flex items-center gap-2\">\r\n            Available Financial Products\r\n            <span className=\"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full\">{products.filter(p => p.is_active).length}</span>\r\n          </h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {products.filter(p => p.is_active).map((product) => (\r\n              <GlassCard key={product.id} className=\"p-5 hover:shadow-lg transition-shadow\">\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                  <h4 className=\"font-bold text-gray-800 text-lg\">{product.name}</h4>\r\n                  <span className=\"text-[10px] uppercase font-bold bg-blue-50 text-blue-600 px-2 py-1 rounded-full border border-blue-100\">\r\n                    {product.product_type_display}\r\n                  </span>\r\n                </div>\r\n\r\n                <p className=\"text-gray-500 text-sm mb-4 line-clamp-2 min-h-[40px]\">{product.description}</p>\r\n\r\n                <div className=\"pt-4 border-t border-gray-50 flex justify-between items-center bg-gray-50 -mx-5 -mb-5 p-4 rounded-b-2xl mt-auto\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xs text-gray-400 font-bold uppercase\">Interest</div>\r\n                    <div className=\"font-bold text-emerald-600 text-lg\">{product.interest_rate || '0'}%</div>\r\n                  </div>\r\n                  <div className=\"w-px h-8 bg-gray-200\"></div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xs text-gray-400 font-bold uppercase\">Min Balance</div>\r\n                    <div className=\"font-bold text-gray-700\">{formatCurrencyGHS(Number(product.minimum_balance))}</div>\r\n                  </div>\r\n                </div>\r\n              </GlassCard>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Active Promotions */}\r\n        <div className=\"space-y-6\">\r\n          <h3 className=\"text-lg font-bold text-gray-700 flex items-center gap-2\">\r\n            Active Promotions\r\n            <span className=\"bg-orange-100 text-orange-600 text-xs px-2 py-1 rounded-full\">{promotions.length}</span>\r\n          </h3>\r\n          {promotions.length === 0 ? (\r\n            <div className=\"text-center py-10 text-gray-400 italic bg-gray-50 rounded-xl border border-dashed border-gray-200\">No active promotions</div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {promotions.map((promo) => (\r\n                <div key={promo.id} className=\"bg-orange-50 border border-orange-100 rounded-xl p-5 relative overflow-hidden\">\r\n                  <div className=\"absolute -right-4 -top-4 bg-orange-100 w-16 h-16 rounded-full opacity-50\"></div>\r\n                  <h4 className=\"font-bold text-orange-800 mb-1 relative z-10\">{promo.name}</h4>\r\n                  <p className=\"text-orange-900/70 text-sm mb-3 relative z-10\">{promo.description}</p>\r\n                  <div className=\"flex justify-between items-center relative z-10\">\r\n                    <span className=\"font-bold text-white bg-orange-400 px-2 py-1 rounded text-xs shadow-sm\">\r\n                      {promo.discount_percentage ? `${promo.discount_percentage}% OFF` : `GHS ${promo.bonus_amount} BONUS`}\r\n                    </span>\r\n                    <span className=\"text-xs font-medium text-orange-700/60\">\r\n                      Ends {new Date(promo.end_date).toLocaleDateString()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductsPromotionsTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\RefundsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\ReportsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[403,406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[403,406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5710,5713],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5710,5713],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":222,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9317,9320],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9317,9320],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":224,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":224,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9475,9478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9475,9478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api, API_BASE_URL } from '../../services/api';\r\nimport { formatCurrencyGHS } from '../../utils/formatters';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface Report {\r\n  id: string;\r\n  title: string;\r\n  type: string;\r\n  generated_at: string;\r\n  data: any;\r\n  status: string;\r\n  format?: string;\r\n  report_url?: string | null;\r\n}\r\n\r\nconst ReportsTab: React.FC = () => {\r\n  const [reports, setReports] = useState<Report[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [generating, setGenerating] = useState(false);\r\n  const [selectedTemplate, setSelectedTemplate] = useState('');\r\n  const [selectedFormat, setSelectedFormat] = useState('pdf');\r\n  const [reportTemplates, setReportTemplates] = useState([]);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n    fetchReportTemplates();\r\n  }, []);\r\n\r\n  const fetchReports = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('reports/reports/');\r\n      const data = response.data?.results || response.data || [];\r\n      setReports(Array.isArray(data) ? data : []);\r\n    } catch (error) {\r\n      console.error('Error fetching reports:', error);\r\n      setReports([]);\r\n      setMessage({ type: 'error', text: 'Failed to load reports' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchReportTemplates = async () => {\r\n    try {\r\n      const response = await api.get('reports/templates/');\r\n      const data = response.data?.results || response.data || [];\r\n      setReportTemplates(Array.isArray(data) ? data : []);\r\n    } catch (error) {\r\n      console.error('Error fetching report templates:', error);\r\n      setReportTemplates([]);\r\n    }\r\n  };\r\n\r\n  const handleDownload = (report: Report) => {\r\n    if (!report.report_url) {\r\n      setMessage({ type: 'error', text: 'Download URL not available for this report' });\r\n      return;\r\n    }\r\n\r\n    // Construct full API URL\r\n    const apiBaseUrl = API_BASE_URL;\r\n    let cleanUrl = report.report_url;\r\n    if (cleanUrl.startsWith('/api/')) cleanUrl = cleanUrl.substring(4);\r\n    const downloadUrl = cleanUrl.startsWith('http')\r\n      ? cleanUrl\r\n      : `${apiBaseUrl.replace(/\\/$/, '')}${cleanUrl}`;\r\n\r\n    // SECURITY: Auth handled by HTTP-only cookies (credentials: 'include')\r\n    // Do NOT use localStorage for token storage - vulnerable to XSS attacks\r\n\r\n    fetch(downloadUrl, {\r\n      credentials: 'include' // Cookies are sent automatically\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) throw new Error('Download failed');\r\n        return response.blob();\r\n      })\r\n      .then(blob => {\r\n        const url = window.URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `${report.title}.${report.format || 'csv'}`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        window.URL.revokeObjectURL(url);\r\n        setMessage({ type: 'success', text: `Downloaded ${report.title}` });\r\n      })\r\n      .catch(error => {\r\n        console.error('Download error:', error);\r\n        setMessage({ type: 'error', text: 'Failed to download report' });\r\n      });\r\n  };\r\n\r\n  const generateReport = async () => {\r\n    if (!selectedTemplate) {\r\n      setMessage({ type: 'error', text: 'Please select a report template' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setGenerating(true);\r\n      await api.post('reports/generate/', {\r\n        template_id: selectedTemplate,\r\n        format: selectedFormat\r\n      });\r\n      setMessage({ type: 'success', text: `Report generation started (${selectedFormat.toUpperCase()})` });\r\n      setSelectedTemplate('');\r\n      fetchReports();\r\n    } catch (error) {\r\n      console.error('Error generating report:', error);\r\n      setMessage({ type: 'error', text: 'Failed to generate report' });\r\n    } finally {\r\n      setGenerating(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"p-12 text-center text-gray-400\"><div className=\"animate-spin text-4xl mb-4\">ΓÅ│</div>Loading Reports...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n          <span>≡ƒôæ</span> Reports & Analytics\r\n        </h2>\r\n        <p className=\"text-gray-500\">Generate and view financial and operational reports.</p>\r\n      </div>\r\n\r\n      {message.text && (\r\n        <div className={`p-4 rounded-xl border ${message.type === 'error' ? 'bg-red-50 border-red-100 text-red-700' : 'bg-emerald-50 border-emerald-100 text-emerald-700'}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      {/* Generate New Report */}\r\n      <GlassCard className=\"p-6\">\r\n        <h3 className=\"text-lg font-bold text-gray-800 mb-6 border-b border-gray-100 pb-2\">Generate New Report</h3>\r\n        <div className=\"flex flex-col md:flex-row gap-4 items-end\">\r\n          <div className=\"flex-1 w-full\">\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Report Template</label>\r\n            <select\r\n              value={selectedTemplate}\r\n              onChange={(e) => setSelectedTemplate(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n            >\r\n              <option value=\"\">Select a template...</option>\r\n              {reportTemplates.map((template: any) => (\r\n                <option key={template.id} value={template.id}>{template.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"w-full md:w-48\">\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Format</label>\r\n            <select\r\n              value={selectedFormat}\r\n              onChange={(e) => setSelectedFormat(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n            >\r\n              <option value=\"pdf\">PDF Document</option>\r\n              <option value=\"csv\">CSV Spreadsheet</option>\r\n              <option value=\"docs\">Word Document</option>\r\n            </select>\r\n          </div>\r\n          <Button\r\n            onClick={generateReport}\r\n            disabled={generating || !selectedTemplate}\r\n            variant=\"success\"\r\n            className=\"w-full md:w-auto h-[50px] shadow-lg shadow-green-100\"\r\n          >\r\n            {generating ? 'Generating...' : 'Generate Report ≡ƒôè'}\r\n          </Button>\r\n        </div>\r\n      </GlassCard>\r\n\r\n      {/* Reports List */}\r\n      <GlassCard className=\"p-0 overflow-hidden\">\r\n        <div className=\"p-6 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center\">\r\n          <h3 className=\"font-bold text-gray-700\">Available Reports</h3>\r\n          <div className=\"bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-xs font-bold\">{reports.length}</div>\r\n        </div>\r\n\r\n        {reports.length === 0 ? (\r\n          <div className=\"text-center py-10 text-gray-400 italic\">No reports available</div>\r\n        ) : (\r\n          <div className=\"divide-y divide-gray-100\">\r\n            {reports.map((report) => (\r\n              <div key={report.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\r\n                <div className=\"flex justify-between items-start mb-4\">\r\n                  <div>\r\n                    <h4 className=\"font-bold text-gray-800 text-lg mb-1\">{report.title}</h4>\r\n                    <p className=\"text-gray-500 text-xs font-mono\">\r\n                      {report.type.toUpperCase()} ΓÇó {new Date(report.generated_at).toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                  <span className={`px-2 py-1 rounded-full text-xs font-bold uppercase ${report.status === 'completed' ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}`}>\r\n                    {report.status}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Simple Table for Report Data Preview */}\r\n                {report.data && report.data.length > 0 && (\r\n                  <div className=\"mt-4 mb-4 border border-gray-200 rounded-lg overflow-hidden\">\r\n                    <div className=\"overflow-x-auto\">\r\n                      <table className=\"w-full text-sm text-left\">\r\n                        <thead className=\"bg-gray-50 text-gray-500 text-xs uppercase font-bold\">\r\n                          <tr>\r\n                            {Object.keys(report.data[0]).map(key => (\r\n                              <th key={key} className=\"px-4 py-2 border-b border-gray-200 whitespace-nowrap\">\r\n                                {key.replace(/_/g, ' ')}\r\n                              </th>\r\n                            ))}\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100\">\r\n                          {report.data.slice(0, 5).map((row: any, i: number) => (\r\n                            <tr key={i} className=\"hover:bg-gray-50/50\">\r\n                              {Object.values(row).map((value: any, j: number) => (\r\n                                <td key={j} className=\"px-4 py-2 whitespace-nowrap text-gray-600\">\r\n                                  {typeof value === 'number' && value.toString().includes('.') ? formatCurrencyGHS(value) : value}\r\n                                </td>\r\n                              ))}\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                    {report.data.length > 5 && (\r\n                      <div className=\"bg-gray-50 px-4 py-2 text-xs text-center text-gray-500 border-t border-gray-200 font-medium\">\r\n                        Previewing first 5 rows of {report.data.length}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex justify-end\">\r\n                  <Button\r\n                    onClick={() => handleDownload(report)}\r\n                    variant=\"primary\"\r\n                    disabled={!report.report_url || report.status !== 'completed'}\r\n                    size=\"sm\"\r\n                  >\r\n                    Download {report.format ? report.format.toUpperCase() : 'PDF'} ≡ƒôÑ\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </GlassCard>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportsTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\SecurityMonitoringTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\ServiceRequestsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\TransactionSearchTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\cashier\\WithdrawalTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'members' is defined but never used. Allowed unused args must match /^_/u.","line":27,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\n\r\ninterface Member {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n}\r\n\r\ninterface WithdrawalTabProps {\r\n  withdrawalAmount: string;\r\n  setWithdrawalAmount: React.Dispatch<React.SetStateAction<string>>;\r\n  withdrawalMemberId: string;\r\n  setWithdrawalMemberId: React.Dispatch<React.SetStateAction<string>>;\r\n  members: Member[];\r\n  loading: boolean;\r\n  handleTransactionSubmit: (e: React.FormEvent, type: string) => void;\r\n}\r\n\r\nconst WithdrawalTab: React.FC<WithdrawalTabProps> = ({\r\n  withdrawalAmount,\r\n  setWithdrawalAmount,\r\n  withdrawalMemberId,\r\n  setWithdrawalMemberId,\r\n  members,\r\n  loading,\r\n  handleTransactionSubmit\r\n}) => {\r\n  return (\r\n    <GlassCard className=\"max-w-xl mx-auto p-8 border-t-[6px] border-t-red-500\">\r\n      <div className=\"mb-8 text-center\">\r\n        <div className=\"inline-block p-4 rounded-full bg-red-50 mb-4\">\r\n          <span className=\"text-4xl\">≡ƒÆ╕</span>\r\n        </div>\r\n        <h2 className=\"text-2xl font-bold text-gray-800\">New Withdrawal</h2>\r\n        <p className=\"text-gray-500 mt-2\">Process cash withdrawal from member account</p>\r\n      </div>\r\n\r\n      <form onSubmit={(e) => handleTransactionSubmit(e, 'Withdrawal')} className=\"space-y-6\">\r\n        <Input\r\n          label=\"Member ID / Account\"\r\n          placeholder=\"Select or enter Member ID...\"\r\n          list=\"member-list\"\r\n          value={withdrawalMemberId}\r\n          onChange={(e) => setWithdrawalMemberId(e.target.value)}\r\n          required\r\n          className=\"text-lg\"\r\n        />\r\n\r\n        <div className=\"relative\">\r\n          <Input\r\n            label=\"Withdrawal Amount (GHS)\"\r\n            type=\"number\"\r\n            placeholder=\"0.00\"\r\n            value={withdrawalAmount}\r\n            onChange={(e) => setWithdrawalAmount(e.target.value)}\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n            required\r\n            className=\"text-2xl font-bold text-red-600\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"p-4 bg-red-50 rounded-xl border border-red-100 text-sm text-red-800 flex gap-2 items-start\">\r\n          <span className=\"text-lg\">ΓÜá∩╕Å</span>\r\n          <p>Ensure customer identification is verified before dispensing cash. Signature required for amounts over GHS 5,000.</p>\r\n        </div>\r\n\r\n        <div className=\"pt-2\">\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"danger\"\r\n            className=\"w-full py-4 text-lg font-bold shadow-lg shadow-red-100/50\"\r\n            disabled={loading || !withdrawalMemberId || !withdrawalAmount}\r\n          >\r\n            {loading ? 'Processing Transaction...' : 'Confirm Withdrawal ≡ƒôñ'}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </GlassCard>\r\n  );\r\n};\r\n\r\nexport default WithdrawalTab;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\layout\\DashboardLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useNavigate' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[555,558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[555,558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[576,579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[576,579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'theme' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":30,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, ReactNode } from 'react';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport logo from '../../assets/logo.png';\r\nimport { ThemeToggle } from '../ui/ThemeToggle';\r\nimport { useTheme } from '../../context/ThemeContext';\r\n\r\n/* Icons (using generic Material Icons or text fallback if Lucide not installed,\r\n   assuming project uses emojis based on previous code. Replacing emojis with cleaner text/icons later) */\r\n\r\ninterface DashboardLayoutProps {\r\n    title?: string;\r\n    user: any;\r\n    menuItems: any[];\r\n    activeView: string;\r\n    onNavigate: (view: string) => void;\r\n    onLogout: () => void;\r\n    children?: ReactNode;\r\n}\r\n\r\nexport default function DashboardLayout({\r\n    title = \"Dashboard\",\r\n    user,\r\n    menuItems = [],\r\n    activeView,\r\n    onNavigate,\r\n    onLogout,\r\n    children\r\n}: DashboardLayoutProps) {\r\n    const { theme } = useTheme();\r\n    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n\r\n    // Update browser tab title with user's name\r\n    React.useEffect(() => {\r\n        const appName = \"Coastal Credit Union\";\r\n        if (user?.name) {\r\n            document.title = `${user.name} | ${appName}`;\r\n        } else if (user?.first_name) {\r\n            document.title = `${user.first_name} ${user.last_name || ''} | ${appName}`;\r\n        } else {\r\n            document.title = `${title} | ${appName}`;\r\n        }\r\n    }, [user, title]);\r\n\r\n    const displayName = user?.name || (user?.first_name ? `${user.first_name} ${user.last_name || ''}` : 'User');\r\n    const roleDisplay = user?.role ? user.role.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase()) : 'Member';\r\n\r\n    return (\r\n        // Global Background is handled by body styles in index.css (gradient)\r\n        <div className=\"min-h-screen flex bg-transparent\">\r\n\r\n            {/* Sidebar - Desktop - Glass Effect */}\r\n            <aside className=\"hidden lg:flex flex-col w-64 glass-card-global fixed h-[96%] left-2 top-[2%] z-10 transition-all duration-300 border-r border-white/10 rounded-2xl shadow-xl\">\r\n                <div className=\"p-6 border-b border-white/10 flex items-center justify-center\">\r\n                    <div className=\"h-10 w-10 flex items-center justify-center bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg shadow-indigo-500/20\">\r\n                        <img src={logo} alt=\"Logo\" className=\"h-6 w-6 object-contain\" />\r\n                    </div>\r\n                    <span className=\"ml-3 text-xl font-bold tracking-tight text-current drop-shadow-sm font-display\">Coastal</span>\r\n                </div>\r\n\r\n                <div className=\"flex items-center p-4 bg-white/5 dark:bg-black/20 mx-4 mt-6 rounded-xl border border-white/10 backdrop-blur-sm\">\r\n                    <div className=\"h-10 w-10 rounded-full bg-gradient-to-tr from-blue-500 to-cyan-400 flex items-center justify-center text-white font-bold border-2 border-white/20 shadow-sm relative\">\r\n                        {displayName.charAt(0).toUpperCase()}\r\n                        <div className=\"absolute bottom-0 right-0 w-2.5 h-2.5 bg-emerald-400 border-2 border-slate-800 rounded-full\"></div>\r\n                    </div>\r\n                    <div className=\"ml-3 overflow-hidden\">\r\n                        <p className=\"text-sm font-semibold truncate text-current\">{displayName}</p>\r\n                        <p className=\"text-xs opacity-70 truncate font-medium\">{roleDisplay}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <nav className=\"flex-1 overflow-y-auto px-4 py-6 space-y-1 scrollbar-hide\">\r\n                    {menuItems.map((item) => {\r\n                        const isActive = activeView === item.id;\r\n                        return (\r\n                            <button\r\n                                key={item.id}\r\n                                onClick={() => item.available !== false && onNavigate(item.id)}\r\n                                disabled={item.available === false}\r\n                                className={`w-full flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 group relative ${isActive\r\n                                    ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30'\r\n                                    : 'text-slate-500 dark:text-slate-400 hover:bg-white/10 dark:hover:bg-white/5 hover:text-blue-500 dark:hover:text-blue-400'\r\n                                    } ${item.available === false ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                            >\r\n                                <span className={`text-lg mr-3 transition-colors ${isActive ? 'text-white' : 'text-slate-400 group-hover:text-blue-500'}`}>{item.icon}</span>\r\n                                {item.name}\r\n                                {isActive && <div className=\"absolute right-3 w-1.5 h-1.5 bg-white rounded-full shadow-sm animate-pulse-gentle\" />}\r\n                            </button>\r\n                        );\r\n                    })}\r\n                </nav>\r\n\r\n                <div className=\"p-4 border-t border-white/10 flex items-center justify-between gap-2\">\r\n                    <ThemeToggle />\r\n                    <button\r\n                        onClick={onLogout}\r\n                        className=\"flex-1 flex items-center justify-center px-4 py-2 bg-red-500/10 border border-red-500/20 text-red-500 rounded-lg hover:bg-red-500/20 transition-all text-sm font-medium\"\r\n                        title=\"Log Out\"\r\n                    >\r\n                        ≡ƒ¢æ\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Mobile Header & Content Wrapper */}\r\n            <div className=\"flex-1 flex flex-col lg:ml-[17rem] transition-all duration-300 min-h-screen\">\r\n\r\n                {/* Mobile Header - Glass Effect */}\r\n                <header className=\"lg:hidden glass-card-global m-2 rounded-xl p-4 flex items-center justify-between sticky top-2 z-20\">\r\n                    <div className=\"flex items-center\">\r\n                        <div className=\"h-8 w-8 mr-3 flex items-center justify-center\">\r\n                            <img src={logo} alt=\"Logo\" className=\"h-full w-full object-contain\" />\r\n                        </div>\r\n                        <span className=\"font-bold text-lg\">Coastal</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <ThemeToggle />\r\n                        <button onClick={() => setMobileMenuOpen(true)} className=\"p-2 rounded-md bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 backdrop-blur-sm\">\r\n                            Γÿ░\r\n                        </button>\r\n                    </div>\r\n                </header>\r\n\r\n                {/* Main Content */}\r\n                <main className=\"flex-1 p-4 lg:p-8 max-w-7xl w-full mx-auto\">\r\n                    {/* Dashboard Header */}\r\n                    <div className=\"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4\">\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-black drop-shadow-sm flex items-center gap-2\">\r\n                                <span className=\"text-4xl\">{menuItems.find(i => i.id === activeView)?.icon || '≡ƒôè'}</span>\r\n                                {menuItems.find(i => i.id === activeView)?.name || 'Dashboard'}\r\n                            </h1>\r\n                            <p className=\"opacity-70 text-sm mt-1 font-medium ml-1\">\r\n                                Hello, {displayName} ≡ƒæï\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-3\">\r\n                            <span className=\"px-4 py-2 glass-card-global rounded-full text-sm font-bold shadow-sm\">\r\n                                ≡ƒôà {new Date().toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' })}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"animate-fade-in relative z-0\">\r\n                        {children}\r\n                    </div>\r\n                </main>\r\n            </div>\r\n\r\n            {/* Mobile Sidebar Dialog - Glass Effect */}\r\n            <Dialog open={mobileMenuOpen} onClose={() => setMobileMenuOpen(false)} className=\"relative z-50 lg:hidden\">\r\n                <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm\" aria-hidden=\"true\" />\r\n                <div className=\"fixed inset-0 flex\">\r\n                    <Dialog.Panel className=\"relative mr-16 flex w-full max-w-xs flex-1 flex-col glass-card-global pt-5 pb-4 border-r border-white/20\">\r\n                        <div className=\"flex items-center justify-between px-4\">\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"ml-2 font-black text-2xl\">Coastal</span>\r\n                            </div>\r\n                            <button onClick={() => setMobileMenuOpen(false)} className=\"p-2 rounded-md hover:bg-white/10\">\r\n                                Γ¥î\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"mt-8 flex-1 h-0 overflow-y-auto px-2\">\r\n                            <nav className=\"space-y-2\">\r\n                                {menuItems.map((item) => (\r\n                                    <button\r\n                                        key={item.id}\r\n                                        onClick={() => {\r\n                                            if (item.available !== false) {\r\n                                                onNavigate(item.id);\r\n                                                setMobileMenuOpen(false);\r\n                                            }\r\n                                        }}\r\n                                        disabled={item.available === false} // Prevent clicking unavailable items\r\n                                        className={`w-full flex items-center px-4 py-3 text-lg font-bold rounded-xl ${activeView === item.id\r\n                                            ? 'bg-blue-600 text-white shadow-lg'\r\n                                            : 'hover:bg-white/10'\r\n                                            } ${item.available === false ? 'opacity-50' : ''}`}\r\n                                    >\r\n                                        <span className=\"mr-3\">{item.icon}</span>\r\n                                        {item.name}\r\n                                    </button>\r\n                                ))}\r\n                            </nav>\r\n                        </div>\r\n                        <div className=\"p-4 border-t border-white/10\">\r\n                            <button\r\n                                onClick={onLogout}\r\n                                className=\"w-full flex items-center justify-center px-4 py-3 bg-red-500/20 text-red-500 rounded-xl font-bold hover:bg-red-500/30 transition-all\"\r\n                            >\r\n                                Log Out\r\n                            </button>\r\n                        </div>\r\n                    </Dialog.Panel>\r\n                </div>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\AccountOpeningsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\CashFlowSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\CommissionSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[276,279],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[276,279],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'initialData' is defined but never used. Allowed unused args must match /^_/u.","line":18,"column":80,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":91},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[676,679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[676,679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":40,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { authService } from '../../services/api';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\n\r\ninterface CommissionSectionProps {\r\n  commissionData: any;\r\n}\r\n\r\nconst formatCurrency = (amount: number) => {\r\n  return new Intl.NumberFormat('en-GH', {\r\n    style: 'currency',\r\n    currency: 'GHS'\r\n  }).format(amount);\r\n};\r\n\r\nconst CommissionSection: React.FC<CommissionSectionProps> = ({ commissionData: initialData }) => {\r\n  const [formData, setFormData] = useState({\r\n    agent_id: '',\r\n    amount: ''\r\n  });\r\n  const [result, setResult] = useState<any>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleCalculate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setResult(null);\r\n\r\n    try {\r\n      const response = await authService.calculateCommission(formData);\r\n      if (response.success) {\r\n        setResult(response.data);\r\n      } else {\r\n        setError(response.error || 'Calculation failed');\r\n      }\r\n    } catch (err) {\r\n      setError('An unexpected error occurred');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h3 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n        <span>≡ƒñ¥</span> Commission Management\r\n      </h3>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Calculator Form */}\r\n        <GlassCard className=\"p-6 border-t-[6px] border-t-amber-500\">\r\n          <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            <span className=\"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-sm\">≡ƒº«</span>\r\n            Commission Calculator\r\n          </h4>\r\n\r\n          <form onSubmit={handleCalculate} className=\"space-y-5\">\r\n            <Input\r\n              label=\"Agent ID (Optional)\"\r\n              type=\"text\"\r\n              name=\"agent_id\"\r\n              value={formData.agent_id}\r\n              onChange={handleChange}\r\n              placeholder=\"e.g. AGT-001\"\r\n            />\r\n\r\n            <Input\r\n              label=\"Transaction Amount (GHS)\"\r\n              type=\"number\"\r\n              name=\"amount\"\r\n              value={formData.amount}\r\n              onChange={handleChange}\r\n              required\r\n              placeholder=\"0.00\"\r\n              className=\"text-lg font-bold\"\r\n            />\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              variant=\"primary\"\r\n              className=\"w-full py-3 shadow-lg shadow-amber-100 bg-amber-500 hover:bg-amber-600 border-amber-600 text-white\"\r\n            >\r\n              {loading ? 'Calculating...' : 'Run Calculation'}\r\n            </Button>\r\n          </form>\r\n\r\n          {error && (\r\n            <div className=\"mt-4 p-4 bg-red-50 text-red-700 border border-red-200 rounded-xl font-medium flex items-center gap-2\">\r\n              <span>ΓÜá∩╕Å</span> {error}\r\n            </div>\r\n          )}\r\n        </GlassCard>\r\n\r\n        {/* Results Panel */}\r\n        <GlassCard className={`p-8 flex flex-col justify-center transition-all duration-500 ${result ? 'opacity-100' : 'opacity-80'}`}>\r\n          {!result ? (\r\n            <div className=\"text-center text-gray-400 py-12\">\r\n              <div className=\"text-6xl mb-4 grayscale opacity-30\">≡ƒñû</div>\r\n              <p className=\"max-w-xs mx-auto\">Enter a transaction amount to calculate the agent commission.</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"animate-fade-in-up\">\r\n              <h4 className=\"text-lg font-bold text-gray-800 mb-6 text-center\">\r\n                Calculation Result\r\n              </h4>\r\n\r\n              <div className=\"bg-white p-6 rounded-2xl border border-gray-100 mb-6 shadow-sm space-y-4\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-gray-500 font-medium\">Transaction</span>\r\n                  <span className=\"text-lg font-bold text-gray-800\">{formatCurrency(parseFloat(result.transaction_amount))}</span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-gray-500 font-medium\">Applied Rate</span>\r\n                  <span className=\"text-lg font-bold text-blue-600\">{result.commission_rate}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-gradient-to-br from-amber-500 to-orange-600 p-8 rounded-2xl text-center shadow-xl shadow-amber-200 text-white relative overflow-hidden\">\r\n                <div className=\"absolute top-0 right-0 p-8 opacity-10\">\r\n                  <span className=\"text-9xl\">≡ƒÄü</span>\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                  <div className=\"text-sm font-bold text-amber-100 mb-2 uppercase tracking-widest\">Commission Amount</div>\r\n                  <div className=\"text-4xl font-black tracking-tight\">\r\n                    {formatCurrency(parseFloat(result.commission_amount))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mt-4 text-center text-xs text-gray-400 font-medium\">\r\n                Calculated at: {new Date(result.calculated_at).toLocaleTimeString()}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </GlassCard>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommissionSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\DashboardDropdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\DashboardHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\ExpensesSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchExpenses' is defined but never used. Allowed unused args must match /^_/u.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\n\r\ninterface Expense {\r\n  id?: string | number;\r\n  category: string;\r\n  amount: string | number;\r\n  description: string;\r\n  date_incurred?: string;\r\n  date?: string; // Backend returns date\r\n  status?: string;\r\n}\r\n\r\ninterface ExpensesSectionProps {\r\n  newExpense: Expense;\r\n  setNewExpense: React.Dispatch<React.SetStateAction<Expense>>;\r\n  expenses: Expense[];\r\n  fetchExpenses: () => void;\r\n}\r\n\r\nconst formatCurrency = (amount: string | number) => {\r\n  const val = typeof amount === 'string' ? parseFloat(amount) : amount;\r\n  return new Intl.NumberFormat('en-GH', {\r\n    style: 'currency',\r\n    currency: 'GHS'\r\n  }).format(val || 0);\r\n};\r\n\r\nconst ExpensesSection: React.FC<ExpensesSectionProps> = ({\r\n  newExpense,\r\n  setNewExpense,\r\n  expenses = [], // Default to empty array\r\n  fetchExpenses\r\n}) => {\r\n  const [localExpenses, setLocalExpenses] = React.useState<Expense[]>([]);\r\n\r\n  // Merge props expenses with any locally added ones for demo\r\n  const allExpenses = [...expenses, ...localExpenses];\r\n\r\n  const totalExpenses = allExpenses.reduce((sum, exp) => {\r\n    const val = typeof exp.amount === 'string' ? parseFloat(exp.amount) : exp.amount;\r\n    return sum + (val || 0);\r\n  }, 0);\r\n\r\n  const handleAddExpense = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    // Simulate adding expense\r\n    const added: Expense = {\r\n      ...newExpense,\r\n      id: Date.now(),\r\n      date: new Date().toISOString().split('T')[0],\r\n      status: 'pending'\r\n    };\r\n    setLocalExpenses([added, ...localExpenses]);\r\n    setNewExpense({ category: 'Operational', amount: '', description: '', date_incurred: '' });\r\n    alert('Expense recorded! (Local simulation)');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h3 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n        <span>≡ƒôë</span> Expense Management\r\n      </h3>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n\r\n        {/* Add Expense Form */}\r\n        <div className=\"lg:col-span-1\">\r\n          <GlassCard className=\"p-6 border-t-[6px] border-t-red-500 sticky top-4\">\r\n            <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n              <span className=\"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-sm\">Γ₧ò</span>\r\n              Record Expense\r\n            </h4>\r\n\r\n            <form onSubmit={handleAddExpense} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Category</label>\r\n                <select\r\n                  value={newExpense.category}\r\n                  onChange={(e) => setNewExpense({ ...newExpense, category: e.target.value })}\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n                >\r\n                  <option value=\"Operational\">Operational</option>\r\n                  <option value=\"Utilities\">Utilities</option>\r\n                  <option value=\"Maintenance\">Maintenance</option>\r\n                  <option value=\"Payroll\">Payroll</option>\r\n                  <option value=\"Marketing\">Marketing</option>\r\n                  <option value=\"Other\">Other</option>\r\n                </select>\r\n              </div>\r\n\r\n              <Input\r\n                label=\"Amount (GHS)\"\r\n                type=\"number\"\r\n                required\r\n                value={newExpense.amount}\r\n                onChange={(e) => setNewExpense({ ...newExpense, amount: e.target.value })}\r\n                placeholder=\"0.00\"\r\n              />\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Description</label>\r\n                <textarea\r\n                  required\r\n                  value={newExpense.description}\r\n                  onChange={(e) => setNewExpense({ ...newExpense, description: e.target.value })}\r\n                  rows={3}\r\n                  placeholder=\"Details of the expense...\"\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50 resize-y\"\r\n                />\r\n              </div>\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"danger\"\r\n                className=\"w-full py-3 shadow-lg shadow-red-100\"\r\n              >\r\n                Record Expense\r\n              </Button>\r\n            </form>\r\n          </GlassCard>\r\n        </div>\r\n\r\n        {/* Expenses List */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          {/* Summary Card */}\r\n          <GlassCard className=\"p-6 flex justify-between items-center bg-gradient-to-r from-red-50 to-white border-l-4 border-l-red-500\">\r\n            <div>\r\n              <h4 className=\"text-xl font-bold text-gray-800\">Total Expenses</h4>\r\n              <p className=\"text-sm text-gray-500 font-medium uppercase tracking-wider\">This Month</p>\r\n            </div>\r\n            <div className=\"text-4xl font-black text-red-600\">\r\n              {formatCurrency(totalExpenses)}\r\n            </div>\r\n          </GlassCard>\r\n\r\n          <GlassCard className=\"overflow-hidden p-0\">\r\n            <h4 className=\"p-5 border-b border-gray-100 bg-gray-50 text-lg font-bold text-gray-800 flex items-center gap-2\">\r\n              <span>≡ƒôï</span> Recent Expenses\r\n            </h4>\r\n\r\n            {allExpenses.length === 0 ? (\r\n              <div className=\"p-12 text-center text-gray-400\">\r\n                <div className=\"text-4xl mb-3 opacity-30\">≡ƒô¡</div>\r\n                <p>No expenses recorded yet.</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-left border-collapse\">\r\n                  <thead className=\"bg-gray-50/50 text-gray-500 text-xs uppercase font-bold tracking-wider\">\r\n                    <tr>\r\n                      <th className=\"p-4 border-b border-gray-100\">Date</th>\r\n                      <th className=\"p-4 border-b border-gray-100\">Category</th>\r\n                      <th className=\"p-4 border-b border-gray-100\">Description</th>\r\n                      <th className=\"p-4 border-b border-gray-100 text-right\">Amount</th>\r\n                      <th className=\"p-4 border-b border-gray-100 text-center\">Status</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"divide-y divide-gray-50\">\r\n                    {allExpenses.map((expense) => (\r\n                      <tr key={expense.id} className=\"hover:bg-gray-50/50 transition-colors\">\r\n                        <td className=\"p-4 text-sm font-medium text-gray-600 whitespace-nowrap\">\r\n                          {expense.date || expense.date_incurred}\r\n                        </td>\r\n                        <td className=\"p-4\">\r\n                          <span className=\"px-2 py-1 rounded text-xs font-bold bg-gray-100 text-gray-600 uppercase\">\r\n                            {expense.category}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"p-4 text-sm text-gray-600 max-w-xs truncate\">\r\n                          {expense.description}\r\n                        </td>\r\n                        <td className=\"p-4 text-right font-bold text-red-600 whitespace-nowrap\">\r\n                          {formatCurrency(expense.amount)}\r\n                        </td>\r\n                        <td className=\"p-4 text-center\">\r\n                          <span className={`\r\n                                px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide\r\n                                ${expense.status === 'paid'\r\n                              ? 'bg-emerald-100 text-emerald-700'\r\n                              : 'bg-amber-100 text-amber-700'}\r\n                            `}>\r\n                            {expense.status || 'pending'}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </GlassCard>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExpensesSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\InterestSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[272,275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[272,275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'initialData' is defined but never used. Allowed unused args must match /^_/u.","line":18,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":85},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[682,685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[682,685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":41,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { authService } from '../../services/api';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\n\r\ninterface InterestSectionProps {\r\n  interestData: any;\r\n}\r\n\r\nconst formatCurrency = (amount: number) => {\r\n  return new Intl.NumberFormat('en-GH', {\r\n    style: 'currency',\r\n    currency: 'GHS'\r\n  }).format(amount);\r\n};\r\n\r\nconst InterestSection: React.FC<InterestSectionProps> = ({ interestData: initialData }) => {\r\n  const [formData, setFormData] = useState({\r\n    principal: '',\r\n    rate: '',\r\n    months: ''\r\n  });\r\n  const [result, setResult] = useState<any>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleCalculate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setResult(null);\r\n\r\n    try {\r\n      const response = await authService.calculateInterest(formData);\r\n      if (response.success) {\r\n        setResult(response.data);\r\n      } else {\r\n        setError(response.error || 'Calculation failed');\r\n      }\r\n    } catch (err) {\r\n      setError('An unexpected error occurred');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h3 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n        <span>≡ƒôê</span> Interest Calculations\r\n      </h3>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Calculator Form */}\r\n        <GlassCard className=\"p-6 border-t-[6px] border-t-purple-500\">\r\n          <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            <span className=\"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 text-sm\">≡ƒöó</span>\r\n            Loan & Savings Interest\r\n          </h4>\r\n\r\n          <form onSubmit={handleCalculate} className=\"space-y-5\">\r\n            <Input\r\n              label=\"Principal Amount (GHS)\"\r\n              type=\"number\"\r\n              name=\"principal\"\r\n              value={formData.principal}\r\n              onChange={handleChange}\r\n              required\r\n              placeholder=\"0.00\"\r\n            />\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <Input\r\n                label=\"Annual Rate (%)\"\r\n                type=\"number\"\r\n                name=\"rate\"\r\n                value={formData.rate}\r\n                onChange={handleChange}\r\n                required\r\n                placeholder=\"e.g. 5.5\"\r\n                step=\"0.01\"\r\n              />\r\n\r\n              <Input\r\n                label=\"Duration (Months)\"\r\n                type=\"number\"\r\n                name=\"months\"\r\n                value={formData.months}\r\n                onChange={handleChange}\r\n                required\r\n                placeholder=\"e.g. 12\"\r\n              />\r\n            </div>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              variant=\"primary\"\r\n              className=\"w-full py-3 shadow-lg shadow-purple-100 bg-purple-600 hover:bg-purple-700 border-purple-700 text-white\"\r\n            >\r\n              {loading ? 'Calculating...' : 'Calculate Interest'}\r\n            </Button>\r\n          </form>\r\n\r\n          {error && (\r\n            <div className=\"mt-4 p-4 bg-red-50 text-red-700 border border-red-200 rounded-xl font-medium flex items-center gap-2\">\r\n              <span>ΓÜá∩╕Å</span> {error}\r\n            </div>\r\n          )}\r\n        </GlassCard>\r\n\r\n        {/* Results Panel */}\r\n        <GlassCard className={`p-8 flex flex-col justify-center transition-all duration-500 ${result ? 'opacity-100' : 'opacity-80'}`}>\r\n          {!result ? (\r\n            <div className=\"text-center text-gray-400 py-12\">\r\n              <div className=\"text-6xl mb-4 grayscale opacity-30\">≡ƒôë</div>\r\n              <p className=\"max-w-xs mx-auto\">Enter loan or savings details to project interest earnings or costs.</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"animate-fade-in-up\">\r\n              <h4 className=\"text-lg font-bold text-gray-800 mb-6 text-center\">\r\n                Projection Result\r\n              </h4>\r\n\r\n              <div className=\"bg-white p-6 rounded-2xl border border-gray-100 mb-6 shadow-sm\">\r\n                <div className=\"flex justify-between items-center mb-4 pb-4 border-b border-gray-50\">\r\n                  <span className=\"text-gray-500 font-medium\">Interest Earned/Due</span>\r\n                  <span className=\"text-xl font-bold text-emerald-600\">{formatCurrency(parseFloat(result.interest_amount))}</span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-gray-500 font-medium\">Est. Monthly Payment</span>\r\n                  <span className=\"text-xl font-bold text-gray-800\">{formatCurrency(parseFloat(result.monthly_repayment))}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-gradient-to-br from-purple-600 to-indigo-700 p-8 rounded-2xl text-center shadow-xl shadow-purple-200 text-white relative overflow-hidden\">\r\n                <div className=\"absolute top-0 right-0 p-8 opacity-10\">\r\n                  <span className=\"text-9xl\">≡ƒÆ░</span>\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                  <div className=\"text-sm font-bold text-purple-200 mb-2 uppercase tracking-widest\">Total Repayment Amount</div>\r\n                  <div className=\"text-4xl font-black tracking-tight\">\r\n                    {formatCurrency(parseFloat(result.total_amount))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </GlassCard>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InterestSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\LoansSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\ManagerSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[321,324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[321,324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Button } from '../ui/Button';\r\n\r\ninterface MenuItem {\r\n  id: string;\r\n  name: string;\r\n  icon: string;\r\n  color: string;\r\n}\r\n\r\ninterface ManagerSidebarProps {\r\n  activeView: string;\r\n  setActiveView: React.Dispatch<React.SetStateAction<string>>;\r\n  handleLogout: () => void;\r\n  user: any;\r\n  menuItems: MenuItem[];\r\n}\r\n\r\nconst ManagerSidebar: React.FC<ManagerSidebarProps> = ({\r\n  activeView,\r\n  setActiveView,\r\n  handleLogout,\r\n  user,\r\n  menuItems = []\r\n}) => {\r\n  return (\r\n    <nav className=\"w-72 bg-white/95 backdrop-blur-xl border-r border-gray-200 p-6 flex flex-col h-full shadow-[4px_0_24px_rgba(0,0,0,0.02)] transition-all duration-300\">\r\n      <div className=\"text-center mb-10\">\r\n        <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center text-4xl shadow-xl shadow-amber-100 border-4 border-white\">\r\n          ≡ƒªü\r\n        </div>\r\n        <h1 className=\"font-black text-gray-800 text-xl tracking-tight\">Manager Portal</h1>\r\n        <p className=\"text-sm font-medium text-gray-400 mt-1\">Hello, {user?.name || 'Manager'}</p>\r\n      </div>\r\n\r\n      <div className=\"flex-1 space-y-2 overflow-y-auto pr-2 custom-scrollbar\">\r\n        {menuItems.map(item => (\r\n          <button\r\n            key={item.id}\r\n            onClick={() => setActiveView(item.id)}\r\n            className={`\r\n              w-full flex items-center gap-4 px-4 py-3.5 rounded-2xl transition-all duration-300 group\r\n              ${activeView === item.id\r\n                ? 'bg-gray-900 text-white shadow-lg shadow-gray-200 scale-100'\r\n                : 'text-gray-500 hover:bg-gray-50 hover:text-gray-900 hover:scale-[1.02]'}\r\n            `}\r\n          >\r\n            <span className={`\r\n                text-xl transition-transform duration-300 group-hover:scale-110\r\n                ${activeView === item.id ? 'scale-110' : ''}\r\n            `}>\r\n              {item.icon}\r\n            </span>\r\n            <span className=\"font-bold text-sm tracking-wide\">{item.name}</span>\r\n            {activeView === item.id && (\r\n              <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-white animate-pulse\" />\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"mt-auto pt-6 border-t border-gray-100\">\r\n        <Button variant=\"danger\" onClick={handleLogout} className=\"w-full shadow-lg shadow-red-100 dark:shadow-none\">\r\n          Log Out ≡ƒæï\r\n        </Button>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default ManagerSidebar;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\MessagingSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\MobileBankerManagementSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":7,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":7,"endColumn":45,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[243,292],"text":"type MobileBankerManagementSectionProps = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[243,292],"text":"type MobileBankerManagementSectionProps = unknown"},"desc":"Replace empty interface with `unknown`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[444,447],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[444,447],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[571,574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[571,574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[635,638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[635,638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loadingMetrics' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[926,929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[926,929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1149,1152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1149,1152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchMobileBankers'. Either include it or remove the dependency array.","line":31,"column":8,"nodeType":"ArrayExpression","endLine":31,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchMobileBankers]","fix":{"range":[1369,1371],"text":"[fetchMobileBankers]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Card } from '../ui/Card';\r\nimport { Button } from '../ui/Button';\r\nimport { authService } from '../../services/api';\r\nimport { formatCurrencyGHS } from '../../utils/formatters';\r\n\r\ninterface MobileBankerManagementSectionProps {\r\n}\r\n\r\nconst MobileBankerManagementSection: React.FC<MobileBankerManagementSectionProps> = () => {\r\n    const [mobileBankers, setMobileBankers] = useState<any[]>([]);\r\n    const [selectedBanker, setSelectedBanker] = useState<string>('');\r\n    const [metrics, setMetrics] = useState<any>(null);\r\n    const [assignments, setAssignments] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [loadingMetrics, setLoadingMetrics] = useState(false);\r\n\r\n    // Modals state\r\n    const [showReassignModal, setShowReassignModal] = useState(false);\r\n    const [selectedAssignment, setSelectedAssignment] = useState<any>(null);\r\n    const [targetBankerId, setTargetBankerId] = useState('');\r\n\r\n    // Assign Client Modal State\r\n    const [showAssignModal, setShowAssignModal] = useState(false);\r\n    const [members, setMembers] = useState<any[]>([]);\r\n    const [assignForm, setAssignForm] = useState({ client_id: '', priority: 'medium', location: '' });\r\n\r\n    // Initial fetch of mobile bankers\r\n    useEffect(() => {\r\n        fetchMobileBankers();\r\n    }, []);\r\n\r\n    // Fetch data when selected banker changes\r\n    useEffect(() => {\r\n        if (selectedBanker) {\r\n            fetchBankerData(selectedBanker);\r\n        } else {\r\n            setMetrics(null);\r\n            setAssignments([]);\r\n        }\r\n    }, [selectedBanker]);\r\n\r\n    const fetchMobileBankers = async () => {\r\n        setLoading(true);\r\n        // Fetch staff with role 'mobile_banker'\r\n        const response = await authService.getStaffIds({ role: 'mobile_banker' });\r\n        if (response.success) {\r\n            const bankers = response.data.results || response.data || [];\r\n            setMobileBankers(bankers);\r\n            if (bankers.length > 0 && !selectedBanker) {\r\n                // Automatically select first if none selected, or leave empty to force choice?\r\n                // Let's leave empty to force explicit choice for clarity\r\n            }\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const fetchBankerData = async (bankerId: string) => {\r\n        setLoadingMetrics(true);\r\n        try {\r\n            const [metricsRes, assignmentsRes] = await Promise.all([\r\n                authService.getMobileBankerMetrics(bankerId),\r\n                authService.getClientAssignments({ mobile_banker: bankerId })\r\n            ]);\r\n\r\n            if (metricsRes.success) setMetrics(metricsRes.data);\r\n            if (assignmentsRes.success) setAssignments(assignmentsRes.data);\r\n        } catch (error) {\r\n            console.error('Error fetching banker data:', error);\r\n        } finally {\r\n            setLoadingMetrics(false);\r\n        }\r\n\r\n    };\r\n\r\n    const handleOpenAssignModal = async () => {\r\n        setAssignForm({ client_id: '', priority: 'medium', location: '' });\r\n        setShowAssignModal(true);\r\n        // Fetch candidates (members)\r\n        if (members.length === 0) {\r\n            const res = await authService.getMembers();\r\n            if (res.success) setMembers(res.data);\r\n        }\r\n    };\r\n\r\n    const handleAssignClient = async () => {\r\n        if (!selectedBanker || !assignForm.client_id) {\r\n            alert('Banker and Client are required');\r\n            return;\r\n        }\r\n\r\n        const response = await authService.assignClient({\r\n            mobile_banker: selectedBanker,\r\n            client: assignForm.client_id,\r\n            priority: assignForm.priority,\r\n            location: assignForm.location || 'Unknown' // Ideally link to profile address\r\n        });\r\n\r\n        if (response.success) {\r\n            alert('Client assigned successfully!');\r\n            setShowAssignModal(false);\r\n            fetchBankerData(selectedBanker); // Refresh list\r\n        } else {\r\n            alert('Failed to assign: ' + (response.error || 'Unknown error'));\r\n        }\r\n    };\r\n\r\n    const handleReassign = async (assignmentId: number) => {\r\n        if (!targetBankerId) {\r\n            alert('Please select a target mobile banker');\r\n            return;\r\n        }\r\n\r\n        const response = await authService.updateAssignment(assignmentId, {\r\n            mobile_banker_id: targetBankerId\r\n        });\r\n\r\n        if (response.success) {\r\n            alert('Client reassigned successfully');\r\n            setShowReassignModal(false);\r\n            fetchBankerData(selectedBanker); // Refresh list\r\n        } else {\r\n            alert('Failed to reassign: ' + response.error);\r\n        }\r\n    };\r\n\r\n    // Calculate total due for display\r\n    const totalDue = assignments.reduce((sum, a) => {\r\n        // Clean currency string \"GHS 100.00\" -> 100.00\r\n        const amount = a.amountDue ? parseFloat(a.amountDue.replace(/[^0-9.-]+/g, \"\")) : 0;\r\n        return sum + amount;\r\n    }, 0);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header & Controls */}\r\n            <div className=\"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-secondary-200\">\r\n                <div>\r\n                    <h2 className=\"text-xl font-bold text-secondary-900\">Mobile Banker Management</h2>\r\n                    <p className=\"text-sm text-secondary-500\">Monitor performance and manage client assignments</p>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2 w-full md:w-auto\">\r\n                    <label className=\"text-sm font-medium text-secondary-700 whitespace-nowrap\">Select Banker:</label>\r\n                    <select\r\n                        className=\"w-full md:w-64 p-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\r\n                        value={selectedBanker}\r\n                        onChange={(e) => setSelectedBanker(e.target.value)}\r\n                    >\r\n                        <option value=\"\">-- Choose Mobile Banker --</option>\r\n                        {mobileBankers.map(mb => (\r\n                            <option key={mb.id} value={mb.id}>\r\n                                {mb.name} ({mb.staff_id || 'No ID'})\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {loading && !metrics ? (\r\n                <div className=\"text-center py-12\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600 mx-auto\"></div>\r\n                    <p className=\"mt-2 text-secondary-500\">Loading data...</p>\r\n                </div>\r\n            ) : !selectedBanker ? (\r\n                <div className=\"text-center py-12 bg-secondary-50 rounded-xl border-2 border-dashed border-secondary-200\">\r\n                    <div className=\"text-4xl mb-4\">≡ƒæê</div>\r\n                    <p className=\"text-secondary-500 font-medium\">Please select a Mobile Banker from the dropdown to view details.</p>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    {/* Performance Cards */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                        <Card className=\"bg-gradient-to-br from-primary-50 to-white border-l-4 border-l-primary-500\">\r\n                            <div className=\"text-primary-600 mb-1 font-medium\">Total Collections Today</div>\r\n                            <div className=\"text-2xl font-bold text-secondary-900\">\r\n                                {formatCurrencyGHS(metrics?.cash_collected || 0)}\r\n                            </div>\r\n                        </Card>\r\n                        <Card className=\"bg-gradient-to-br from-success-50 to-white border-l-4 border-l-success-500\">\r\n                            <div className=\"text-success-600 mb-1 font-medium\">Visits Completed</div>\r\n                            <div className=\"text-2xl font-bold text-secondary-900\">\r\n                                {metrics?.visits_completed || 0}\r\n                            </div>\r\n                        </Card>\r\n                        <Card className=\"bg-gradient-to-br from-info-50 to-white border-l-4 border-l-info-500\">\r\n                            <div className=\"text-info-600 mb-1 font-medium\">Accounts Opened</div>\r\n                            <div className=\"text-2xl font-bold text-secondary-900\">\r\n                                {metrics?.accounts_opened || 0}\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n\r\n                    {/* Assignments Table */}\r\n                    <Card>\r\n                        <div className=\"flex justify-between items-center mb-6\">\r\n                            <h3 className=\"text-lg font-bold text-secondary-900\">\r\n                                Assigned Clients\r\n                                <span className=\"ml-2 text-sm font-normal text-secondary-500 bg-secondary-100 px-2 py-0.5 rounded-full\">\r\n                                    {assignments.length}\r\n                                </span>\r\n                            </h3>\r\n                            <div className=\"text-right\">\r\n                                <p className=\"text-xs text-secondary-500 uppercase tracking-wider\">Total Due</p>\r\n                                <p className=\"font-bold text-primary-600\">{formatCurrencyGHS(totalDue)}</p>\r\n                            </div>\r\n                            <Button size=\"sm\" onClick={handleOpenAssignModal} className=\"ml-4\">\r\n                                Γ₧ò Assign Client\r\n                            </Button>\r\n                        </div>\r\n\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full text-left border-collapse\">\r\n                                <thead>\r\n                                    <tr className=\"text-xs text-secondary-500 border-b border-secondary-200\">\r\n                                        <th className=\"p-3 font-medium uppercase tracking-wider\">Client Name</th>\r\n                                        <th className=\"p-3 font-medium uppercase tracking-wider\">Location</th>\r\n                                        <th className=\"p-3 font-medium uppercase tracking-wider\">Status</th>\r\n                                        <th className=\"p-3 font-medium uppercase tracking-wider\">Priority</th>\r\n                                        <th className=\"p-3 font-medium uppercase tracking-wider text-right\">Action</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-secondary-100\">\r\n                                    {assignments.length > 0 ? (\r\n                                        assignments.map((assignment) => (\r\n                                            <tr key={assignment.id} className=\"hover:bg-secondary-50 transition-colors\">\r\n                                                <td className=\"p-3 font-medium text-secondary-900\">{assignment.name}</td>\r\n                                                <td className=\"p-3 text-secondary-600\">{assignment.location}</td>\r\n                                                <td className=\"p-3\">\r\n                                                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${assignment.status === 'Completed' ? 'bg-success-100 text-success-700' :\r\n                                                        assignment.status === 'Pending Visit' ? 'bg-warning-100 text-warning-700' :\r\n                                                            'bg-secondary-100 text-secondary-700'\r\n                                                        }`}>\r\n                                                        {assignment.status}\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td className=\"p-3\">\r\n                                                    <span className={`text-xs font-bold ${assignment.priority === 'high' ? 'text-error-600' :\r\n                                                        assignment.priority === 'medium' ? 'text-warning-600' : 'text-secondary-500'\r\n                                                        }`}>\r\n                                                        {assignment.priority?.toUpperCase()}\r\n                                                    </span>\r\n                                                </td>\r\n                                                <td className=\"p-3 text-right\">\r\n                                                    <Button\r\n                                                        variant=\"secondary\"\r\n                                                        size=\"sm\"\r\n                                                        onClick={() => {\r\n                                                            setSelectedAssignment(assignment);\r\n                                                            setTargetBankerId(''); // Reset selection\r\n                                                            setShowReassignModal(true);\r\n                                                        }}\r\n                                                    >\r\n                                                        Reassign\r\n                                                    </Button>\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))\r\n                                    ) : (\r\n                                        <tr>\r\n                                            <td colSpan={5} className=\"p-8 text-center text-secondary-500\">\r\n                                                No clients assigned to this mobile banker.\r\n                                            </td>\r\n                                        </tr>\r\n                                    )}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </Card>\r\n                </>\r\n            )}\r\n\r\n            {/* Reassign Modal */}\r\n            {showReassignModal && (\r\n                <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n                    <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200\">\r\n                        <h3 className=\"text-xl font-bold mb-4\">Reassign Client</h3>\r\n                        <p className=\"text-secondary-600 mb-4\">\r\n                            Reassign <strong>{selectedAssignment?.name}</strong> to:\r\n                        </p>\r\n\r\n                        <div className=\"mb-6\">\r\n                            <label className=\"block text-sm font-medium text-secondary-700 mb-2\">New Mobile Banker</label>\r\n                            <select\r\n                                className=\"w-full p-2 border border-secondary-300 rounded-lg\"\r\n                                value={targetBankerId}\r\n                                onChange={(e) => setTargetBankerId(e.target.value)}\r\n                            >\r\n                                <option value=\"\">-- Select --</option>\r\n                                {mobileBankers\r\n                                    .filter(mb => mb.id !== parseInt(selectedBanker)) // Exclude current\r\n                                    .map(mb => (\r\n                                        <option key={mb.id} value={mb.id}>\r\n                                            {mb.name}\r\n                                        </option>\r\n                                    ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end gap-3\">\r\n                            <Button variant=\"ghost\" onClick={() => setShowReassignModal(false)}>Cancel</Button>\r\n                            <Button variant=\"primary\" onClick={() => handleReassign(selectedAssignment.id)}>\r\n                                Confirm Reassign\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Assign Client Modal */}\r\n            {showAssignModal && (\r\n                <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n                    <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200\">\r\n                        <h3 className=\"text-xl font-bold mb-4\">Assign New Client</h3>\r\n\r\n                        <div className=\"space-y-4 mb-6\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-secondary-700 mb-1\">Select Client (Customer)</label>\r\n                                <select\r\n                                    className=\"w-full p-2 border border-secondary-300 rounded-lg\"\r\n                                    value={assignForm.client_id}\r\n                                    onChange={(e) => setAssignForm({ ...assignForm, client_id: e.target.value })}\r\n                                >\r\n                                    <option value=\"\">-- Choose Client --</option>\r\n                                    {members.map(m => (\r\n                                        <option key={m.id} value={m.id}>\r\n                                            {m.name} ({m.email})\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-secondary-700 mb-1\">Location Override</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"w-full p-2 border border-secondary-300 rounded-lg\"\r\n                                    placeholder=\"Area/Town (Optional)\"\r\n                                    value={assignForm.location}\r\n                                    onChange={(e) => setAssignForm({ ...assignForm, location: e.target.value })}\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-secondary-700 mb-1\">Priority</label>\r\n                                <select\r\n                                    className=\"w-full p-2 border border-secondary-300 rounded-lg\"\r\n                                    value={assignForm.priority}\r\n                                    onChange={(e) => setAssignForm({ ...assignForm, priority: e.target.value })}\r\n                                >\r\n                                    <option value=\"low\">Low</option>\r\n                                    <option value=\"medium\">Medium</option>\r\n                                    <option value=\"high\">High</option>\r\n                                    <option value=\"urgent\">Urgent</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end gap-3\">\r\n                            <Button variant=\"ghost\" onClick={() => setShowAssignModal(false)}>Cancel</Button>\r\n                            <Button variant=\"primary\" onClick={handleAssignClient}>\r\n                                Assign Client\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MobileBankerManagementSection;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\OverviewSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[351,354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[351,354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[381,384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[381,384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\nimport ModernStatCard from '../ui/modern/ModernStatCard';\r\n\r\ninterface Metric {\r\n  label: string;\r\n  value: string;\r\n  change: string;\r\n  trend: 'up' | 'down' | 'neutral';\r\n  icon: string;\r\n}\r\n\r\ninterface DashboardData {\r\n  branch_metrics?: Metric[];\r\n  staff_performance?: any[];\r\n  pending_approvals?: any[];\r\n}\r\n\r\ninterface OverviewSectionProps {\r\n  dashboardData: DashboardData | null;\r\n  onReviewAccountOpening?: () => void;\r\n}\r\n\r\nconst OverviewSection: React.FC<OverviewSectionProps> = ({ dashboardData, onReviewAccountOpening }) => {\r\n  return (\r\n    <div className=\"flex flex-col gap-6\">\r\n      {/* Metrics Row */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        {dashboardData?.branch_metrics?.map((metric, idx) => (\r\n          <ModernStatCard\r\n            key={idx}\r\n            label={metric.label}\r\n            value={metric.value}\r\n            change={metric.change}\r\n            trend={metric.trend}\r\n            icon={<span className=\"text-2xl\">{metric.icon}</span>}\r\n            colorClass={idx % 2 === 0 ? 'text-cyan-600 dark:text-cyan-400' : 'text-purple-600 dark:text-purple-400'}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Detailed Sections Grid */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n\r\n        {/* Staff Performance Table */}\r\n        <GlassCard className=\"p-6\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h3 className=\"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2\">\r\n              ≡ƒÅå <span>Top Staff Performance</span>\r\n            </h3>\r\n            <button className=\"text-xs text-blue-600 dark:text-blue-400 font-semibold hover:underline\">View All</button>\r\n          </div>\r\n\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-slate-100 dark:divide-slate-700\">\r\n              <thead>\r\n                <tr className=\"text-left text-xs font-semibold text-slate-400 uppercase tracking-wider\">\r\n                  <th className=\"pb-3 pl-2\">Name</th>\r\n                  <th className=\"pb-3 text-center\">TXs</th>\r\n                  <th className=\"pb-3 text-right pr-2\">Efficiency</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-slate-50 dark:divide-slate-700/50\">\r\n                {dashboardData?.staff_performance?.map((staff, idx) => (\r\n                  <tr key={idx} className=\"hover:bg-slate-50/50 dark:hover:bg-slate-700/30 transition-colors\">\r\n                    <td className=\"py-3 pl-2\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900 dark:to-purple-900 flex items-center justify-center text-xs font-bold text-indigo-600 dark:text-indigo-300 border border-white dark:border-slate-600 shadow-sm\">\r\n                          {staff.name.charAt(0)}\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-sm font-semibold text-slate-700 dark:text-slate-200\">{staff.name}</p>\r\n                          <p className=\"text-xs text-slate-400\">{staff.role}</p>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"py-3 text-center\">\r\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300\">\r\n                        {staff.transactions}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"py-3 text-right pr-2\">\r\n                      <span className=\"text-sm font-bold text-emerald-600 dark:text-emerald-400\">{staff.efficiency}</span>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                {(!dashboardData?.staff_performance || dashboardData.staff_performance.length === 0) && (\r\n                  <tr><td colSpan={3} className=\"py-8 text-center text-slate-400 text-sm\">No activity recorded today.</td></tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </GlassCard>\r\n\r\n        {/* Pending Approvals List */}\r\n        <GlassCard className=\"p-6\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h3 className=\"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2\">\r\n              ≡ƒô¥ <span>Pending Approvals</span>\r\n            </h3>\r\n            {dashboardData?.pending_approvals && dashboardData.pending_approvals.length > 0 && (\r\n              <span className=\"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300 text-xs px-2 py-1 rounded-full font-bold shadow-sm\">\r\n                {dashboardData.pending_approvals.length} Pending\r\n              </span>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            {dashboardData?.pending_approvals?.map((item, idx) => (\r\n              <div key={idx} className=\"group flex items-start p-3 bg-white/50 dark:bg-slate-800/40 hover:bg-white dark:hover:bg-slate-700 border border-transparent hover:border-amber-100 dark:hover:border-amber-900/30 rounded-xl transition-all shadow-sm hover:shadow-md cursor-pointer\">\r\n\r\n                <div className={`p-2.5 rounded-lg mr-4 ${item.type === 'Loan Application' ? 'bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400' : 'bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400'}`}>\r\n                  <span className=\"text-lg\">{item.type === 'Loan Application' ? '≡ƒÆ░' : '≡ƒæñ'}</span>\r\n                </div>\r\n\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <p className=\"text-sm font-bold text-slate-800 dark:text-slate-200 truncate\">{item.type}</p>\r\n                    <span className=\"text-xs text-slate-400 whitespace-nowrap ml-2\">\r\n                      {new Date(item.date).toLocaleDateString(undefined, { month: 'short', day: 'numeric' })}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-0.5 line-clamp-1\">{item.description}</p>\r\n                </div>\r\n\r\n                <div className=\"ml-2 flex items-center self-center opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                  <button\r\n                    onClick={() => onReviewAccountOpening?.()}\r\n                    className=\"text-xs bg-white dark:bg-slate-600 border border-slate-200 dark:border-slate-500 hover:bg-slate-50 text-slate-600 dark:text-white px-2 py-1 rounded shadow-sm\"\r\n                  >\r\n                    Review\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            {(!dashboardData?.pending_approvals || dashboardData.pending_approvals.length === 0) && (\r\n              <div className=\"flex flex-col items-center justify-center py-10 text-center\">\r\n                <span className=\"text-4xl mb-2\">≡ƒÄë</span>\r\n                <p className=\"text-slate-500 dark:text-slate-400 font-medium\">All clear!</p>\r\n                <p className=\"text-slate-400 dark:text-slate-500 text-xs\">No pending items to review.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </GlassCard>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OverviewSection;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\PayslipSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\ProductsServicesManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Tag' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1595,1598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1595,1598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1674,1677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1674,1677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":56,"column":8,"nodeType":"ArrayExpression","endLine":56,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, fetchData]","fix":{"range":[1850,1861],"text":"[activeTab, fetchData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3030,3033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3030,3033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":137,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5008,5011],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5008,5011],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\nimport { formatCurrencyGHS } from '../../utils/formatters';\r\nimport { Plus, Edit2, Trash2, Tag, Loader, X, Save, AlertCircle } from 'lucide-react';\r\n\r\n// Interfaces matching backend models\r\ninterface Product {\r\n    id: string;\r\n    name: string;\r\n    product_type: string;\r\n    product_type_display: string;\r\n    description: string;\r\n    interest_rate: string | number;\r\n    minimum_balance: string | number;\r\n    maximum_balance?: string | number;\r\n    is_active: boolean;\r\n}\r\n\r\ninterface Promotion {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    discount_percentage?: number;\r\n    bonus_amount?: number;\r\n    start_date: string;\r\n    end_date: string;\r\n    is_active: boolean;\r\n}\r\n\r\nconst PRODUCT_TYPES = [\r\n    { value: 'savings', label: 'Savings Account' },\r\n    { value: 'loan', label: 'Loan' },\r\n    { value: 'insurance', label: 'Insurance' },\r\n    { value: 'investment', 'label': 'Investment' },\r\n    { value: 'susu', label: 'Susu Account' }\r\n];\r\n\r\nconst ProductsServicesManagement = () => {\r\n    const [activeTab, setActiveTab] = useState<'products' | 'promotions'>('products');\r\n    const [loading, setLoading] = useState(false);\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [promotions, setPromotions] = useState<Promotion[]>([]);\r\n\r\n    // Modal State\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalMode, setModalMode] = useState<'create' | 'edit'>('create');\r\n    const [editingItem, setEditingItem] = useState<any>(null);\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState<any>({});\r\n    const [formError, setFormError] = useState('');\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [activeTab]);\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if (activeTab === 'products') {\r\n                const res = await api.get('products/products/');\r\n                setProducts(res.data?.results || res.data || []);\r\n            } else {\r\n                const res = await api.get('products/promotions/');\r\n                setPromotions(res.data?.results || res.data || []);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch data', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreateClick = () => {\r\n        setModalMode('create');\r\n        setEditingItem(null);\r\n        setFormData(activeTab === 'products' ? {\r\n            is_active: true,\r\n            product_type: 'savings',\r\n            minimum_balance: 0\r\n        } : {\r\n            is_active: true,\r\n            start_date: new Date().toISOString().split('T')[0],\r\n            end_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]\r\n        });\r\n        setFormError('');\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleEditClick = (item: any) => {\r\n        setModalMode('edit');\r\n        setEditingItem(item);\r\n        setFormData({ ...item });\r\n        setFormError('');\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleDeleteClick = async (id: string) => {\r\n        if (!window.confirm('Are you sure you want to delete this item?')) return;\r\n        try {\r\n            const endpoint = activeTab === 'products' ? `products/products/${id}/` : `products/promotions/${id}/`;\r\n            await api.delete(endpoint);\r\n            fetchData(); // Refresh\r\n        } catch (err) {\r\n            console.error('Delete failed', err);\r\n            alert('Failed to delete item. It may be in use.');\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setSubmitting(true);\r\n        setFormError('');\r\n\r\n        try {\r\n            const endpoint = activeTab === 'products' ? 'products/products/' : 'products/promotions/';\r\n            const url = modalMode === 'edit' ? `${endpoint}${editingItem.id}/` : endpoint;\r\n            const method = modalMode === 'edit' ? 'patch' : 'post';\r\n\r\n            // Clean payload\r\n            const payload = { ...formData };\r\n\r\n            // Numeric conversions\r\n            if (activeTab === 'products') {\r\n                if (payload.interest_rate) payload.interest_rate = parseFloat(payload.interest_rate);\r\n                if (payload.minimum_balance) payload.minimum_balance = parseFloat(payload.minimum_balance);\r\n                if (payload.maximum_balance) payload.maximum_balance = parseFloat(payload.maximum_balance);\r\n            } else {\r\n                if (payload.discount_percentage) payload.discount_percentage = parseFloat(payload.discount_percentage);\r\n                if (payload.bonus_amount) payload.bonus_amount = parseFloat(payload.bonus_amount);\r\n            }\r\n\r\n            await api[method](url, payload);\r\n            setShowModal(false);\r\n            fetchData();\r\n        } catch (err: any) {\r\n            console.error('Submit failed', err);\r\n            setFormError(err.response?.data?.detail || JSON.stringify(err.response?.data) || 'Failed to save.');\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const renderProductForm = () => (\r\n        <>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Name</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"mt-1 block w-full rounded-md border border-gray-300 p-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        value={formData.name || ''}\r\n                        onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Product Type</label>\r\n                    <select\r\n                        className=\"mt-1 block w-full rounded-md border border-gray-300 p-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        value={formData.product_type || 'savings'}\r\n                        onChange={e => setFormData({ ...formData, product_type: e.target.value })}\r\n                    >\r\n                        {PRODUCT_TYPES.map(t => <option key={t.value} value={t.value}>{t.label}</option>)}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700\">Description</label>\r\n                <textarea\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 p-2\"\r\n                    rows={3}\r\n                    value={formData.description || ''}\r\n                    onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Interest Rate (%)</label>\r\n                    <input type=\"number\" step=\"0.01\" className=\"mt-1 block w-full p-2 border rounded\"\r\n                        value={formData.interest_rate || ''}\r\n                        onChange={e => setFormData({ ...formData, interest_rate: e.target.value })}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Min Balance</label>\r\n                    <input type=\"number\" step=\"0.01\" className=\"mt-1 block w-full p-2 border rounded\"\r\n                        value={formData.minimum_balance || 0}\r\n                        onChange={e => setFormData({ ...formData, minimum_balance: e.target.value })}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Max Balance (Opt)</label>\r\n                    <input type=\"number\" step=\"0.01\" className=\"mt-1 block w-full p-2 border rounded\"\r\n                        value={formData.maximum_balance || ''}\r\n                        onChange={e => setFormData({ ...formData, maximum_balance: e.target.value })}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"mt-4 flex items-center\">\r\n                <input type=\"checkbox\" id=\"isActive\" className=\"mr-2\"\r\n                    checked={formData.is_active || false}\r\n                    onChange={e => setFormData({ ...formData, is_active: e.target.checked })}\r\n                />\r\n                <label htmlFor=\"isActive\" className=\"text-sm text-gray-700\">Is Active</label>\r\n            </div>\r\n        </>\r\n    );\r\n\r\n    const renderPromotionForm = () => (\r\n        <>\r\n            <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700\">Promotion Name</label>\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 p-2\"\r\n                    value={formData.name || ''}\r\n                    onChange={e => setFormData({ ...formData, name: e.target.value })}\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700\">Description</label>\r\n                <textarea\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 p-2\"\r\n                    rows={3}\r\n                    value={formData.description || ''}\r\n                    onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4 mb-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Discount Percentage (%)</label>\r\n                    <input type=\"number\" step=\"0.01\" className=\"mt-1 block w-full p-2 border rounded\"\r\n                        value={formData.discount_percentage || ''}\r\n                        onChange={e => setFormData({ ...formData, discount_percentage: e.target.value })}\r\n                        placeholder=\"e.g. 5.0\"\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Bonus Amount (GHS)</label>\r\n                    <input type=\"number\" step=\"0.01\" className=\"mt-1 block w-full p-2 border rounded\"\r\n                        value={formData.bonus_amount || ''}\r\n                        onChange={e => setFormData({ ...formData, bonus_amount: e.target.value })}\r\n                        placeholder=\"e.g. 50.00\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Start Date</label>\r\n                    <input type=\"date\" className=\"mt-1 block w-full p-2 border rounded\"\r\n                        value={formData.start_date || ''}\r\n                        onChange={e => setFormData({ ...formData, start_date: e.target.value })}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">End Date</label>\r\n                    <input type=\"date\" className=\"mt-1 block w-full p-2 border rounded\"\r\n                        value={formData.end_date || ''}\r\n                        onChange={e => setFormData({ ...formData, end_date: e.target.value })}\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"mt-4 flex items-center\">\r\n                <input type=\"checkbox\" id=\"promoActive\" className=\"mr-2\"\r\n                    checked={formData.is_active || false}\r\n                    onChange={e => setFormData({ ...formData, is_active: e.target.checked })}\r\n                />\r\n                <label htmlFor=\"promoActive\" className=\"text-sm text-gray-700\">Is Active</label>\r\n            </div>\r\n        </>\r\n    );\r\n\r\n    return (\r\n        <div className=\"p-6 bg-gray-50 min-h-screen\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-800\">Products & Services Management</h1>\r\n                    <p className=\"text-gray-500\">Create and manage financial products and promotional offers.</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"flex space-x-4 border-b border-gray-200 mb-6\">\r\n                <button\r\n                    onClick={() => setActiveTab('products')}\r\n                    className={`pb-2 px-4 transition-colors ${activeTab === 'products' ? 'border-b-2 border-blue-600 text-blue-600 font-bold' : 'text-gray-500 hover:text-gray-700'}`}\r\n                >\r\n                    ≡ƒÅª Financial Products\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('promotions')}\r\n                    className={`pb-2 px-4 transition-colors ${activeTab === 'promotions' ? 'border-b-2 border-purple-600 text-purple-600 font-bold' : 'text-gray-500 hover:text-gray-700'}`}\r\n                >\r\n                    ≡ƒÄƒ∩╕Å Promotions\r\n                </button>\r\n            </div>\r\n\r\n            {/* Action Bar */}\r\n            <div className=\"flex justify-between mb-4\">\r\n                <div className=\"text-gray-600\">\r\n                    {activeTab === 'products' ? `${products.length} Products Found` : `${promotions.length} Promotions Found`}\r\n                </div>\r\n                <button onClick={handleCreateClick} className=\"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition\">\r\n                    <Plus size={18} />\r\n                    <span>Add {activeTab === 'products' ? 'Product' : 'Promotion'}</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            {loading ? (\r\n                <div className=\"flex justify-center p-12\"><Loader className=\"animate-spin text-blue-500\" size={40} /></div>\r\n            ) : (\r\n                <div className=\"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200\">\r\n                    {activeTab === 'products' ? (\r\n                        <table className=\"w-full text-left\">\r\n                            <thead className=\"bg-gray-50 border-b border-gray-100\">\r\n                                <tr>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Name</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Type</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Interest</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Min Balance</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Status</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600 text-right\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {products.map(product => (\r\n                                    <tr key={product.id} className=\"border-b border-gray-50 hover:bg-gray-50 transition-colors\">\r\n                                        <td className=\"p-4 font-medium text-gray-800\">{product.name}</td>\r\n                                        <td className=\"p-4\"><span className=\"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold\">{product.product_type_display}</span></td>\r\n                                        <td className=\"p-4 text-green-600 font-bold\">{product.interest_rate ? `${product.interest_rate}%` : '-'}</td>\r\n                                        <td className=\"p-4 text-gray-600\">{formatCurrencyGHS(Number(product.minimum_balance))}</td>\r\n                                        <td className=\"p-4\">\r\n                                            <span className={`px-2 py-1 rounded-full text-xs ${product.is_active ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\r\n                                                {product.is_active ? 'Active' : 'Inactive'}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"p-4 text-right\">\r\n                                            <button onClick={() => handleEditClick(product)} className=\"text-gray-500 hover:text-blue-600 mr-3\"><Edit2 size={18} /></button>\r\n                                            <button onClick={() => handleDeleteClick(product.id)} className=\"text-gray-500 hover:text-red-600\"><Trash2 size={18} /></button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                                {products.length === 0 && <tr><td colSpan={6} className=\"p-8 text-center text-gray-400\">No products found. Create one!</td></tr>}\r\n                            </tbody>\r\n                        </table>\r\n                    ) : (\r\n                        <table className=\"w-full text-left\">\r\n                            <thead className=\"bg-gray-50 border-b border-gray-100\">\r\n                                <tr>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Name</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Description</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Offer</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Validity</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600\">Status</th>\r\n                                    <th className=\"p-4 font-semibold text-gray-600 text-right\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {promotions.map(promo => (\r\n                                    <tr key={promo.id} className=\"border-b border-gray-50 hover:bg-gray-50 transition-colors\">\r\n                                        <td className=\"p-4 font-medium text-gray-800\">{promo.name}</td>\r\n                                        <td className=\"p-4 text-sm text-gray-500 max-w-xs truncate\">{promo.description}</td>\r\n                                        <td className=\"p-4 text-purple-600 font-bold\">\r\n                                            {promo.discount_percentage ? `-${promo.discount_percentage}% Rate` : `+GHS ${promo.bonus_amount}`}\r\n                                        </td>\r\n                                        <td className=\"p-4 text-xs text-gray-500\">\r\n                                            {new Date(promo.start_date).toLocaleDateString()} - {new Date(promo.end_date).toLocaleDateString()}\r\n                                        </td>\r\n                                        <td className=\"p-4\">\r\n                                            <span className={`px-2 py-1 rounded-full text-xs ${promo.is_active ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\r\n                                                {promo.is_active ? 'Active' : 'Inactive'}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"p-4 text-right\">\r\n                                            <button onClick={() => handleEditClick(promo)} className=\"text-gray-500 hover:text-blue-600 mr-3\"><Edit2 size={18} /></button>\r\n                                            <button onClick={() => handleDeleteClick(promo.id)} className=\"text-gray-500 hover:text-red-600\"><Trash2 size={18} /></button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                                {promotions.length === 0 && <tr><td colSpan={6} className=\"p-8 text-center text-gray-400\">No promotions found.</td></tr>}\r\n                            </tbody>\r\n                        </table>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal */}\r\n            {showModal && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]\">\r\n                        <div className=\"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50\">\r\n                            <h2 className=\"text-xl font-bold text-gray-800\">\r\n                                {modalMode === 'create' ? 'Create' : 'Edit'} {activeTab === 'products' ? 'Product' : 'Promotion'}\r\n                            </h2>\r\n                            <button onClick={() => setShowModal(false)} className=\"text-gray-400 hover:text-gray-600\"><X size={24} /></button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSubmit} className=\"p-6 overflow-y-auto\">\r\n                            {activeTab === 'products' ? renderProductForm() : renderPromotionForm()}\r\n\r\n                            {formError && (\r\n                                <div className=\"mt-4 p-3 bg-red-50 text-red-600 rounded flex items-start text-sm\">\r\n                                    <AlertCircle size={16} className=\"mr-2 mt-0.5\" />\r\n                                    {formError}\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"mt-6 flex justify-end space-x-3\">\r\n                                <button type=\"button\" onClick={() => setShowModal(false)} className=\"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg\">Cancel</button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    disabled={submitting}\r\n                                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center disabled:opacity-50\"\r\n                                >\r\n                                    {submitting && <Loader size={16} className=\"animate-spin mr-2\" />}\r\n                                    {modalMode === 'create' ? 'Create' : 'Save Changes'}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductsServicesManagement;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\SecuritySection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1100,1103],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1100,1103],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":93,"column":8,"nodeType":"ArrayExpression","endLine":93,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadData]","fix":{"range":[2763,2765],"text":"[loadData]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":100,"column":8,"nodeType":"ArrayExpression","endLine":100,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [autoRefresh, loadData]","fix":{"range":[2992,3005],"text":"[autoRefresh, loadData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5916,5919],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5916,5919],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\n\r\ninterface AuditLog {\r\n    id: number;\r\n    user: string;\r\n    action: string;\r\n    resource: string;\r\n    timestamp: string;\r\n    ip_address: string;\r\n    details: string;\r\n}\r\n\r\ninterface LoginAttempt {\r\n    id: number;\r\n    email: string;\r\n    success: boolean;\r\n    ip_address: string;\r\n    timestamp: string;\r\n    user_agent: string;\r\n    location?: string;\r\n    device?: string;\r\n}\r\n\r\ninterface FraudAlert {\r\n    id: number;\r\n    alert_type: string;\r\n    severity: string;\r\n    description: string;\r\n    status: string;\r\n    created_at: string;\r\n    resolved_at: string | null;\r\n}\r\n\r\nconst SecuritySection: React.FC = () => {\r\n    const [activeTab, setActiveTab] = useState<'audit' | 'logins' | 'fraud' | 'sessions'>('audit');\r\n    const [auditLogs, setAuditLogs] = useState<AuditLog[]>([]);\r\n    const [loginAttempts, setLoginAttempts] = useState<LoginAttempt[]>([]);\r\n    const [fraudAlerts, setFraudAlerts] = useState<FraudAlert[]>([]);\r\n    const [activeSessions, setActiveSessions] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [autoRefresh, setAutoRefresh] = useState(true);\r\n\r\n    const fetchAuditLogs = async () => {\r\n        try {\r\n            const response = await api.get('audit/dashboard/');\r\n            setAuditLogs(response.data?.audit_logs || []);\r\n        } catch (error) {\r\n            console.error('Error fetching audit logs:', error);\r\n        }\r\n    };\r\n\r\n    const fetchLoginAttempts = async () => {\r\n        try {\r\n            const response = await api.get('users/auth/login-attempts/');\r\n            setLoginAttempts(response.data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching login attempts:', error);\r\n        }\r\n    };\r\n\r\n    const fetchFraudAlerts = async () => {\r\n        try {\r\n            const response = await api.get('fraud/alerts/');\r\n            setFraudAlerts(response.data?.results || response.data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching fraud alerts:', error);\r\n        }\r\n    };\r\n\r\n    const fetchActiveSessions = async () => {\r\n        try {\r\n            const response = await api.get('users/sessions/');\r\n            setActiveSessions(response.data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching active sessions:', error);\r\n        }\r\n    };\r\n\r\n    const loadData = async () => {\r\n        setLoading(true);\r\n        await Promise.all([\r\n            fetchAuditLogs(),\r\n            fetchLoginAttempts(),\r\n            fetchFraudAlerts(),\r\n            fetchActiveSessions()\r\n        ]);\r\n        setLoading(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadData();\r\n    }, []);\r\n\r\n    // Auto-refresh every 5 seconds (near real-time)\r\n    useEffect(() => {\r\n        if (!autoRefresh) return;\r\n        const interval = setInterval(loadData, 5000);\r\n        return () => clearInterval(interval);\r\n    }, [autoRefresh]);\r\n\r\n    const getSeverityColor = (severity: string) => {\r\n        switch (severity.toLowerCase()) {\r\n            case 'critical': return '#dc2626';\r\n            case 'high': return '#ea580c';\r\n            case 'medium': return '#ca8a04';\r\n            case 'low': return '#16a34a';\r\n            default: return '#6b7280';\r\n        }\r\n    };\r\n\r\n    const terminateSession = async (sessionId: string) => {\r\n        try {\r\n            await api.post(`users/sessions/${sessionId}/terminate/`);\r\n            fetchActiveSessions();\r\n        } catch (error) {\r\n            console.error('Error terminating session:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '24px' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px' }}>\r\n                <h2 style={{ fontSize: '24px', fontWeight: '700', color: '#1e293b' }}>≡ƒ¢í∩╕Å Security Monitoring</h2>\r\n                <div style={{ display: 'flex', gap: '12px', alignItems: 'center' }}>\r\n                    <label style={{ display: 'flex', alignItems: 'center', gap: '8px', fontSize: '14px', color: '#64748b' }}>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={autoRefresh}\r\n                            onChange={(e) => setAutoRefresh(e.target.checked)}\r\n                        />\r\n                        Auto-refresh (30s)\r\n                    </label>\r\n                    <button\r\n                        onClick={loadData}\r\n                        disabled={loading}\r\n                        style={{\r\n                            padding: '8px 16px',\r\n                            background: loading ? '#94a3b8' : '#3b82f6',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            cursor: loading ? 'not-allowed' : 'pointer',\r\n                            fontWeight: '600'\r\n                        }}\r\n                    >\r\n                        {loading ? 'Γƒ│ Loading...' : 'Γå╗ Refresh'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div style={{ display: 'flex', gap: '8px', marginBottom: '24px', borderBottom: '2px solid #e2e8f0', paddingBottom: '8px' }}>\r\n                {[\r\n                    { id: 'audit', label: '≡ƒôï Audit Logs', count: auditLogs.length },\r\n                    { id: 'logins', label: '≡ƒöÉ Login Attempts', count: loginAttempts.length },\r\n                    { id: 'fraud', label: '≡ƒÜ¿ Fraud Alerts', count: fraudAlerts.length },\r\n                    { id: 'sessions', label: '≡ƒæÑ Active Sessions', count: activeSessions.length }\r\n                ].map((tab) => (\r\n                    <button\r\n                        key={tab.id}\r\n                        onClick={() => setActiveTab(tab.id as any)}\r\n                        style={{\r\n                            padding: '10px 20px',\r\n                            background: activeTab === tab.id ? '#1e40af' : 'transparent',\r\n                            color: activeTab === tab.id ? 'white' : '#64748b',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            cursor: 'pointer',\r\n                            fontWeight: '600',\r\n                            fontSize: '14px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '8px'\r\n                        }}\r\n                    >\r\n                        {tab.label}\r\n                        <span style={{\r\n                            background: activeTab === tab.id ? 'rgba(255,255,255,0.2)' : '#e2e8f0',\r\n                            padding: '2px 8px',\r\n                            borderRadius: '12px',\r\n                            fontSize: '12px'\r\n                        }}>\r\n                            {tab.count}\r\n                        </span>\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Audit Logs Tab */}\r\n            {activeTab === 'audit' && (\r\n                <div style={{ background: 'white', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)', overflow: 'hidden' }}>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ background: '#f8fafc' }}>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>User</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Action</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Resource</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>IP Address</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Timestamp</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {auditLogs.length === 0 ? (\r\n                                <tr><td colSpan={5} style={{ padding: '40px', textAlign: 'center', color: '#64748b' }}>No audit logs available</td></tr>\r\n                            ) : (\r\n                                auditLogs.slice(0, 50).map((log) => (\r\n                                    <tr key={log.id} style={{ borderBottom: '1px solid #f1f5f9' }}>\r\n                                        <td style={{ padding: '12px 16px' }}>{log.user}</td>\r\n                                        <td style={{ padding: '12px 16px' }}>\r\n                                            <span style={{\r\n                                                padding: '4px 8px',\r\n                                                borderRadius: '4px',\r\n                                                background: log.action.includes('DELETE') ? '#fee2e2' : log.action.includes('CREATE') ? '#dcfce7' : '#e0f2fe',\r\n                                                color: log.action.includes('DELETE') ? '#dc2626' : log.action.includes('CREATE') ? '#16a34a' : '#0284c7',\r\n                                                fontSize: '12px',\r\n                                                fontWeight: '600'\r\n                                            }}>\r\n                                                {log.action}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b' }}>{log.resource}</td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b', fontFamily: 'monospace', fontSize: '12px' }}>{log.ip_address}</td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b', fontSize: '13px' }}>{new Date(log.timestamp).toLocaleString()}</td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n\r\n            {/* Login Attempts Tab */}\r\n            {activeTab === 'logins' && (\r\n                <div style={{ background: 'white', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)', overflow: 'hidden' }}>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ background: '#f8fafc' }}>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Email</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Status</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Location/IP</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Device</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Timestamp</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {loginAttempts.length === 0 ? (\r\n                                <tr><td colSpan={5} style={{ padding: '40px', textAlign: 'center', color: '#64748b' }}>No login attempts recorded</td></tr>\r\n                            ) : (\r\n                                loginAttempts.slice(0, 50).map((attempt) => (\r\n                                    <tr key={attempt.id} style={{ borderBottom: '1px solid #f1f5f9' }}>\r\n                                        <td style={{ padding: '12px 16px' }}>{attempt.email}</td>\r\n                                        <td style={{ padding: '12px 16px' }}>\r\n                                            <span style={{\r\n                                                padding: '4px 12px',\r\n                                                borderRadius: '12px',\r\n                                                background: attempt.success ? '#dcfce7' : '#fee2e2',\r\n                                                color: attempt.success ? '#16a34a' : '#dc2626',\r\n                                                fontSize: '12px',\r\n                                                fontWeight: '600'\r\n                                            }}>\r\n                                                {attempt.success ? 'Γ£ô Success' : 'Γ£ù Failed'}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px' }}>\r\n                                            <div style={{ fontWeight: '500', fontSize: '13px' }}>{attempt.location || 'Unknown'}</div>\r\n                                            <div style={{ color: '#94a3b8', fontFamily: 'monospace', fontSize: '11px' }}>{attempt.ip_address}</div>\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b', fontSize: '13px' }}>\r\n                                            <div title={attempt.user_agent}>\r\n                                                {attempt.device || attempt.user_agent.substring(0, 30)}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b', fontSize: '13px' }}>{new Date(attempt.timestamp).toLocaleString()}</td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n\r\n            {/* Fraud Alerts Tab */}\r\n            {activeTab === 'fraud' && (\r\n                <div style={{ background: 'white', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)', overflow: 'hidden' }}>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ background: '#f8fafc' }}>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Type</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Severity</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Description</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Status</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {fraudAlerts.length === 0 ? (\r\n                                <tr><td colSpan={5} style={{ padding: '40px', textAlign: 'center', color: '#64748b' }}>No fraud alerts</td></tr>\r\n                            ) : (\r\n                                fraudAlerts.map((alert) => (\r\n                                    <tr key={alert.id} style={{ borderBottom: '1px solid #f1f5f9' }}>\r\n                                        <td style={{ padding: '12px 16px', fontWeight: '600' }}>{alert.alert_type}</td>\r\n                                        <td style={{ padding: '12px 16px' }}>\r\n                                            <span style={{\r\n                                                padding: '4px 12px',\r\n                                                borderRadius: '12px',\r\n                                                background: getSeverityColor(alert.severity) + '20',\r\n                                                color: getSeverityColor(alert.severity),\r\n                                                fontSize: '12px',\r\n                                                fontWeight: '600'\r\n                                            }}>\r\n                                                {alert.severity}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b', maxWidth: '300px' }}>{alert.description}</td>\r\n                                        <td style={{ padding: '12px 16px' }}>\r\n                                            <span style={{\r\n                                                padding: '4px 12px',\r\n                                                borderRadius: '12px',\r\n                                                background: alert.status === 'resolved' ? '#dcfce7' : '#fef9c3',\r\n                                                color: alert.status === 'resolved' ? '#16a34a' : '#ca8a04',\r\n                                                fontSize: '12px',\r\n                                                fontWeight: '600'\r\n                                            }}>\r\n                                                {alert.status}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b', fontSize: '13px' }}>{new Date(alert.created_at).toLocaleString()}</td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n\r\n            {/* Active Sessions Tab */}\r\n            {activeTab === 'sessions' && (\r\n                <div style={{ background: 'white', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)', overflow: 'hidden' }}>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ background: '#f8fafc' }}>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>User</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Location/IP</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Device</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Last Active</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0', color: '#64748b' }}>Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {activeSessions.length === 0 ? (\r\n                                <tr><td colSpan={5} style={{ padding: '40px', textAlign: 'center', color: '#64748b' }}>No active sessions</td></tr>\r\n                            ) : (\r\n                                activeSessions.map((session) => (\r\n                                    <tr key={session.id} style={{ borderBottom: '1px solid #f1f5f9' }}>\r\n                                        <td style={{ padding: '12px 16px', fontWeight: '600' }}>{session.user_name || session.user}</td>\r\n                                        <td style={{ padding: '12px 16px' }}>\r\n                                            <div style={{ fontWeight: '500', fontSize: '13px' }}>{session.location || 'Unknown'}</div>\r\n                                            <div style={{ color: '#94a3b8', fontFamily: 'monospace', fontSize: '11px' }}>{session.ip_address}</div>\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b', fontSize: '13px' }}>{session.device || session.user_agent}</td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b', fontSize: '13px' }}>{new Date(session.created_at || session.last_active || session.started_at).toLocaleString()}</td>\r\n                                        <td style={{ padding: '12px 16px' }}>\r\n                                            <button\r\n                                                onClick={() => terminateSession(session.id)}\r\n                                                style={{\r\n                                                    padding: '6px 12px',\r\n                                                    background: '#fee2e2',\r\n                                                    color: '#dc2626',\r\n                                                    border: 'none',\r\n                                                    borderRadius: '6px',\r\n                                                    cursor: 'pointer',\r\n                                                    fontWeight: '600',\r\n                                                    fontSize: '12px'\r\n                                                }}\r\n                                            >\r\n                                                Terminate\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SecuritySection;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\ServiceChargesSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[482,485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[482,485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[540,543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[540,543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[576,579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[576,579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[649,652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[649,652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[675,678],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[675,678],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serviceChargeCalculation' is defined but never used. Allowed unused args must match /^_/u.","line":29,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setServiceChargeCalculation' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'propServiceCharges' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'propFetchServiceCharges' is defined but never used. Allowed unused args must match /^_/u.","line":32,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { authService } from '../../services/api';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\nimport { Input } from '../ui/Input';\r\nimport { Button } from '../ui/Button';\r\n\r\ninterface ServiceCharge {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  charge_type: 'fixed' | 'percentage';\r\n  rate: string;\r\n  applicable_to: string[];\r\n  is_active: boolean;\r\n}\r\n\r\ninterface ServiceChargesSectionProps {\r\n  newCharge: any;\r\n  setNewCharge: React.Dispatch<React.SetStateAction<any>>;\r\n  serviceChargeCalculation: any;\r\n  setServiceChargeCalculation: React.Dispatch<React.SetStateAction<any>>;\r\n  serviceCharges: any[];\r\n  fetchServiceCharges: () => void;\r\n}\r\n\r\nconst ServiceChargesSection: React.FC<ServiceChargesSectionProps> = ({\r\n  newCharge,\r\n  setNewCharge,\r\n  serviceChargeCalculation,\r\n  setServiceChargeCalculation,\r\n  serviceCharges: propServiceCharges,\r\n  fetchServiceCharges: propFetchServiceCharges\r\n}) => {\r\n  const [charges, setCharges] = useState<ServiceCharge[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Banking operations that can have service charges\r\n  const operations = [\r\n    'withdrawal',\r\n    'deposit',\r\n    'daily_susu',\r\n    'monthly_susu',\r\n    'transfer',\r\n    'account_maintenance',\r\n    'loan_processing',\r\n    'check_deposit',\r\n    'balance_inquiry'\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchCharges();\r\n  }, []);\r\n\r\n  const fetchCharges = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await authService.getServiceCharges();\r\n      if (response.success) {\r\n        const chargesData = Array.isArray(response.data) ? response.data : [];\r\n        setCharges(chargesData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch service charges:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateCharge = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    // TODO: API call to create charge\r\n    alert('Service charge created! (API integration pending)');\r\n    // Reset form\r\n    setNewCharge({\r\n      name: '',\r\n      description: '',\r\n      charge_type: 'fixed',\r\n      rate: '',\r\n      applicable_to: []\r\n    });\r\n    fetchCharges();\r\n  };\r\n\r\n  const handleToggleOperation = (operation: string) => {\r\n    const current = newCharge.applicable_to || [];\r\n    if (current.includes(operation)) {\r\n      setNewCharge({\r\n        ...newCharge,\r\n        applicable_to: current.filter((op: string) => op !== operation)\r\n      });\r\n    } else {\r\n      setNewCharge({\r\n        ...newCharge,\r\n        applicable_to: [...current, operation]\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDeleteCharge = (id: number) => {\r\n    if (confirm('Are you sure you want to delete this service charge?')) {\r\n      // TODO: API call to delete\r\n      setCharges(charges.filter(c => c.id !== id));\r\n      alert('Service charge deleted! (API integration pending)');\r\n    }\r\n  };\r\n\r\n  const handleToggleActive = (id: number) => {\r\n    // TODO: API call to toggle\r\n    setCharges(charges.map(c =>\r\n      c.id === id ? { ...c, is_active: !c.is_active } : c\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center gap-3 mb-6\">\r\n        <h3 className=\"text-2xl font-bold text-gray-800\">≡ƒÅ╖∩╕Å Service Charge Management</h3>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Create New Charge Form */}\r\n        <GlassCard className=\"p-6 border-t-[6px] border-t-blue-500\">\r\n          <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            <span className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-sm\">Γ₧ò</span>\r\n            Create New Charge\r\n          </h4>\r\n\r\n          <form onSubmit={handleCreateCharge} className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <Input\r\n                label=\"Charge Name *\"\r\n                required\r\n                placeholder=\"e.g., Withdrawal Fee\"\r\n                value={newCharge.name || ''}\r\n                onChange={(e) => setNewCharge({ ...newCharge, name: e.target.value })}\r\n              />\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                  Charge Type *\r\n                </label>\r\n                <select\r\n                  required\r\n                  value={newCharge.charge_type || 'fixed'}\r\n                  onChange={(e) => setNewCharge({ ...newCharge, charge_type: e.target.value })}\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n                >\r\n                  <option value=\"fixed\">Fixed Amount (GHS)</option>\r\n                  <option value=\"percentage\">Percentage (%)</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                Description\r\n              </label>\r\n              <textarea\r\n                placeholder=\"Describe when this charge applies...\"\r\n                value={newCharge.description || ''}\r\n                onChange={(e) => setNewCharge({ ...newCharge, description: e.target.value })}\r\n                rows={2}\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50 resize-y\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Rate/Amount *\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                required\r\n                placeholder={newCharge.charge_type === 'percentage' ? 'e.g., 2.5' : 'e.g., 5.00'}\r\n                value={newCharge.rate || ''}\r\n                onChange={(e) => setNewCharge({ ...newCharge, rate: e.target.value })}\r\n              />\r\n              <p className=\"text-xs text-gray-500 mt-1 ml-1\">\r\n                {newCharge.charge_type === 'percentage'\r\n                  ? 'Enter percentage value (e.g., 2.5 for 2.5%)'\r\n                  : 'Enter amount in Ghana Cedis (GHS)'}\r\n              </p>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2 ml-1\">\r\n                Apply to Operations * (Select at least one)\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {operations.map((operation) => {\r\n                  const isSelected = (newCharge.applicable_to || []).includes(operation);\r\n                  return (\r\n                    <button\r\n                      key={operation}\r\n                      type=\"button\"\r\n                      onClick={() => handleToggleOperation(operation)}\r\n                      className={`\r\n                                        px-3 py-2 rounded-lg text-xs font-bold transition-all border\r\n                                        ${isSelected\r\n                          ? 'bg-blue-600 text-white border-blue-600 shadow-md'\r\n                          : 'bg-white text-gray-600 border-gray-200 hover:border-blue-300 hover:bg-blue-50'}\r\n                                    `}\r\n                    >\r\n                      {isSelected && <span className=\"mr-1\">Γ£ô</span>}\r\n                      {operation.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            <Button type=\"submit\" variant=\"primary\" className=\"w-full py-3 shadow-lg shadow-blue-100\">\r\n              ≡ƒÆ╛ Create Service Charge\r\n            </Button>\r\n          </form>\r\n        </GlassCard>\r\n\r\n        {/* Existing Charges List */}\r\n        <GlassCard className=\"p-6\">\r\n          <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            <span className=\"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 text-sm\">≡ƒôï</span>\r\n            Existing Service Charges ({charges.length})\r\n          </h4>\r\n\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4\"></div>\r\n              <p className=\"text-gray-500 font-medium\">Loading charges...</p>\r\n            </div>\r\n          ) : charges.length === 0 ? (\r\n            <div className=\"text-center py-12 text-gray-400 bg-gray-50 rounded-xl border border-dashed border-gray-200\">\r\n              <div className=\"text-4xl mb-4\">≡ƒô¡</div>\r\n              <p>No service charges configured yet.</p>\r\n              <p className=\"text-sm\">Create one using the form.</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar\">\r\n              {charges.map((charge) => (\r\n                <div\r\n                  key={charge.id}\r\n                  className={`\r\n                        p-4 rounded-xl border transition-all\r\n                        ${charge.is_active\r\n                      ? 'bg-white border-gray-100 shadow-sm hover:shadow-md'\r\n                      : 'bg-gray-50 border-gray-100 opacity-75'}\r\n                    `}\r\n                >\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <div>\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <h5 className=\"font-bold text-gray-800\">{charge.name}</h5>\r\n                        {charge.applicable_to.length > 0 && (\r\n                          <span className=\"text-[10px] font-bold bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full uppercase\">\r\n                            {charge.applicable_to.length} Ops\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className={`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase ${charge.charge_type === 'fixed' ? 'bg-blue-100 text-blue-700' : 'bg-amber-100 text-amber-700'}`}>\r\n                          {charge.charge_type}\r\n                        </span>\r\n                        <span className={`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase ${charge.is_active ? 'bg-emerald-100 text-emerald-700' : 'bg-gray-200 text-gray-500'}`}>\r\n                          {charge.is_active ? 'Active' : 'Inactive'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-xl font-black text-coastal-primary\">\r\n                        {charge.charge_type === 'percentage' ? `${charge.rate}%` : `GHS ${charge.rate}`}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <p className=\"text-sm text-gray-500 mb-3 line-clamp-2\">\r\n                    {charge.description || 'No description provided.'}\r\n                  </p>\r\n\r\n                  <div className=\"flex flex-wrap gap-1 mb-4\">\r\n                    {charge.applicable_to.slice(0, 3).map((op, i) => (\r\n                      <span key={i} className=\"text-[10px] font-medium bg-gray-100 text-gray-600 px-2 py-1 rounded\">\r\n                        {op.replace(/_/g, ' ')}\r\n                      </span>\r\n                    ))}\r\n                    {charge.applicable_to.length > 3 && (\r\n                      <span className=\"text-[10px] font-medium bg-gray-100 text-gray-600 px-2 py-1 rounded\">\r\n                        +{charge.applicable_to.length - 3} more\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2 pt-3 border-t border-gray-100\">\r\n                    <Button\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      className=\"flex-1 text-xs py-1\"\r\n                      onClick={() => handleToggleActive(charge.id)}\r\n                    >\r\n                      {charge.is_active ? 'ΓÅ╕∩╕Å Deactivate' : 'Γû╢∩╕Å Activate'}\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"danger\"\r\n                      size=\"sm\"\r\n                      className=\"flex-1 text-xs py-1\"\r\n                      onClick={() => handleDeleteCharge(charge.id)}\r\n                    >\r\n                      ≡ƒùæ∩╕Å Delete\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </GlassCard>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ServiceChargesSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\StaffIdsSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[523,526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[523,526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[560,563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[560,563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'staffIdFilters' is defined but never used. Allowed unused args must match /^_/u.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchStaffIds' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":167,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":167,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\nimport ModernStatCard from '../ui/modern/ModernStatCard';\r\n\r\ninterface StaffId {\r\n  id: string;\r\n  email: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  role: string;\r\n  staff_id: string;\r\n  employment_date: string;\r\n  is_active: boolean;\r\n  date_joined: string;\r\n}\r\n\r\ninterface StaffIdsSectionProps {\r\n  staffIds: StaffId[];\r\n  staffIdFilters: any;\r\n  setStaffIdFilters: (filters: any) => void;\r\n  fetchStaffIds: () => void;\r\n}\r\n\r\nconst StaffIdsSection: React.FC<StaffIdsSectionProps> = ({\r\n  staffIds,\r\n  staffIdFilters,\r\n  setStaffIdFilters,\r\n  fetchStaffIds\r\n}) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedRole, setSelectedRole] = useState('');\r\n  const [selectedStatus, setSelectedStatus] = useState('');\r\n  const [showExport, setShowExport] = useState(false);\r\n\r\n  const handleSearch = () => {\r\n    const filters = {\r\n      search: searchTerm,\r\n      role: selectedRole,\r\n      status: selectedStatus\r\n    };\r\n    setStaffIdFilters(filters);\r\n  };\r\n\r\n  const handleExport = (format: string) => {\r\n    // Implement export functionality\r\n    alert(`Exporting staff IDs in ${format} format...`);\r\n    setShowExport(false);\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    setSearchTerm('');\r\n    setSelectedRole('');\r\n    setSelectedStatus('');\r\n    setStaffIdFilters({});\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <GlassCard className=\"p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n          <span>≡ƒåö</span> Staff IDs Management\r\n        </h2>\r\n\r\n        {/* Filters Section */}\r\n        <div className=\"bg-gray-50/80 p-6 rounded-2xl border border-gray-100 mb-6\">\r\n          <h3 className=\"text-lg font-bold text-gray-700 mb-4\">Filters & Search</h3>\r\n          <div className=\"flex flex-col lg:flex-row gap-4 flex-wrap items-end\">\r\n            <div className=\"flex-1 min-w-[200px]\">\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Search</label>\r\n              <Input\r\n                className=\"mb-0\"\r\n                placeholder=\"name, email, or staff ID...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"w-full lg:w-48\">\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Role</label>\r\n              <select\r\n                value={selectedRole}\r\n                onChange={(e) => setSelectedRole(e.target.value)}\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n              >\r\n                <option value=\"\">All Roles</option>\r\n                <option value=\"cashier\">Cashier</option>\r\n                <option value=\"mobile_banker\">Mobile Banker</option>\r\n                <option value=\"manager\">Manager</option>\r\n                <option value=\"operations_manager\">Operations Manager</option>\r\n                <option value=\"administrator\">Administrator</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"w-full lg:w-48\">\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Status</label>\r\n              <select\r\n                value={selectedStatus}\r\n                onChange={(e) => setSelectedStatus(e.target.value)}\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n              >\r\n                <option value=\"\">All Status</option>\r\n                <option value=\"active\">Active</option>\r\n                <option value=\"inactive\">Inactive</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex gap-2 w-full lg:w-auto mt-2 lg:mt-0\">\r\n              <Button onClick={handleSearch} variant=\"primary\" className=\"flex-1 lg:flex-none\">\r\n                Search\r\n              </Button>\r\n              <Button onClick={handleClearFilters} variant=\"secondary\" className=\"flex-1 lg:flex-none\">\r\n                Clear\r\n              </Button>\r\n              <div className=\"relative\">\r\n                <Button onClick={() => setShowExport(!showExport)} variant=\"success\" className=\"flex-1 lg:flex-none\">\r\n                  Export\r\n                </Button>\r\n                {showExport && (\r\n                  <div className=\"absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-100 p-2 z-10 flex flex-col gap-1\">\r\n                    <button\r\n                      onClick={() => handleExport('csv')}\r\n                      className=\"text-left px-4 py-2 hover:bg-gray-50 rounded-lg text-gray-700 font-medium transition-colors\"\r\n                    >\r\n                      CSV\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleExport('excel')}\r\n                      className=\"text-left px-4 py-2 hover:bg-gray-50 rounded-lg text-gray-700 font-medium transition-colors\"\r\n                    >\r\n                      Excel\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleExport('pdf')}\r\n                      className=\"text-left px-4 py-2 hover:bg-gray-50 rounded-lg text-gray-700 font-medium transition-colors\"\r\n                    >\r\n                      PDF\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Staff IDs Table */}\r\n        <div className=\"overflow-x-auto rounded-xl border border-gray-200\">\r\n          <table className=\"w-full border-collapse\">\r\n            <thead>\r\n              <tr className=\"bg-coastal-primary text-white text-left\">\r\n                <th className=\"p-4 font-bold text-sm tracking-wider\">Staff ID</th>\r\n                <th className=\"p-4 font-bold text-sm tracking-wider\">Name</th>\r\n                <th className=\"p-4 font-bold text-sm tracking-wider\">Email</th>\r\n                <th className=\"p-4 font-bold text-sm tracking-wider\">Role</th>\r\n                <th className=\"p-4 font-bold text-sm tracking-wider\">Employment Date</th>\r\n                <th className=\"p-4 font-bold text-sm tracking-wider\">Status</th>\r\n                <th className=\"p-4 font-bold text-sm tracking-wider\">Joined</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-100\">\r\n              {staffIds.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={7} className=\"p-10 text-center text-gray-500\">\r\n                    No staff IDs found matching the criteria.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                staffIds.map((staff, index) => (\r\n                  <tr key={staff.id} className=\"hover:bg-blue-50/50 transition-colors\">\r\n                    <td className=\"p-4 font-mono font-bold text-coastal-primary\">\r\n                      {staff.staff_id || <span className=\"text-gray-400 italic\">Not Generated</span>}\r\n                    </td>\r\n                    <td className=\"p-4 font-medium text-gray-800\">\r\n                      {staff.first_name} {staff.last_name}\r\n                    </td>\r\n                    <td className=\"p-4 text-gray-600\">{staff.email}</td>\r\n                    <td className=\"p-4\">\r\n                      <span className=\"capitalize px-2 py-1 bg-gray-100 rounded text-xs font-bold text-gray-600\">\r\n                        {staff.role.replace('_', ' ')}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"p-4 text-gray-600\">\r\n                      {staff.employment_date ? new Date(staff.employment_date).toLocaleDateString() : 'N/A'}\r\n                    </td>\r\n                    <td className=\"p-4\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-bold uppercase ${staff.is_active ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'\r\n                        }`}>\r\n                        {staff.is_active ? 'Active' : 'Inactive'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"p-4 text-gray-500\">\r\n                      {new Date(staff.date_joined).toLocaleDateString()}\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Summary Stats */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8\">\r\n          <ModernStatCard\r\n            label=\"Total Staff\"\r\n            value={String(staffIds.length)}\r\n            icon={<span>≡ƒæÑ</span>}\r\n            colorClass=\"text-blue-600 bg-blue-50\"\r\n            trend=\"neutral\"\r\n          />\r\n          <ModernStatCard\r\n            label=\"Active Staff\"\r\n            value={String(staffIds.filter(s => s.is_active).length)}\r\n            icon={<span>Γ£à</span>}\r\n            colorClass=\"text-emerald-600 bg-emerald-50\"\r\n            trend=\"up\"\r\n          />\r\n          <ModernStatCard\r\n            label=\"Generated IDs\"\r\n            value={String(staffIds.filter(s => s.staff_id).length)}\r\n            icon={<span>≡ƒåö</span>}\r\n            colorClass=\"text-purple-600 bg-purple-50\"\r\n            trend=\"neutral\"\r\n          />\r\n        </div>\r\n      </GlassCard>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StaffIdsSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\StatementsSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[281,284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[281,284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[338,341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[338,341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[619,622],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[619,622],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { authService } from '../../services/api';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\n\r\ninterface StatementsSectionProps {\r\n  formData: any;\r\n  setFormData: React.Dispatch<React.SetStateAction<any>>;\r\n  handleGenerateStatement: () => void;\r\n}\r\n\r\nconst StatementsSection: React.FC<StatementsSectionProps> = ({\r\n  formData,\r\n  setFormData,\r\n  handleGenerateStatement\r\n}) => {\r\n  const [generating, setGenerating] = useState(false);\r\n  const [accounts, setAccounts] = useState<any[]>([]);\r\n  const [loadingAccounts, setLoadingAccounts] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchAccounts = async () => {\r\n      try {\r\n        const response = await authService.getStaffAccounts();\r\n        if (response.success && response.data) {\r\n          // Handle both paginated and list responses\r\n          const accountData = response.data.results || response.data;\r\n          setAccounts(Array.isArray(accountData) ? accountData : []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching accounts for statements:', error);\r\n      } finally {\r\n        setLoadingAccounts(false);\r\n      }\r\n    };\r\n    fetchAccounts();\r\n  }, []);\r\n\r\n  const handleGenerate = () => {\r\n    setGenerating(true);\r\n    // Simulate generation delay\r\n    setTimeout(() => {\r\n      handleGenerateStatement();\r\n      setGenerating(false);\r\n    }, 1500);\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h3 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n        <span>≡ƒô£</span> Account Statements\r\n      </h3>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {/* Generation Form */}\r\n        <GlassCard className=\"p-6 border-t-[6px] border-t-blue-600\">\r\n          <h4 className=\"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n            <span className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-sm\">≡ƒ¢á∩╕Å</span>\r\n            Generate New Statement\r\n          </h4>\r\n\r\n          <div className=\"space-y-5\">\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">\r\n                Select Account\r\n              </label>\r\n              <select\r\n                name=\"account_number\"\r\n                value={formData.account_number || ''}\r\n                onChange={handleChange}\r\n                disabled={loadingAccounts}\r\n                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50 disabled:bg-gray-100 disabled:text-gray-400\"\r\n              >\r\n                <option value=\"\">\r\n                  {loadingAccounts ? 'Loading accounts...' : '-- Choose Account --'}\r\n                </option>\r\n                {accounts.map((account) => (\r\n                  <option key={account.id} value={account.account_number}>\r\n                    {account.account_number} - {account.owner?.first_name} {account.owner?.last_name} ({account.type})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <Input\r\n                label=\"Start Date\"\r\n                type=\"date\"\r\n                name=\"start_date\"\r\n                value={formData.start_date || ''}\r\n                onChange={handleChange}\r\n              />\r\n\r\n              <Input\r\n                label=\"End Date\"\r\n                type=\"date\"\r\n                name=\"end_date\"\r\n                value={formData.end_date || ''}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n            <Button\r\n              onClick={handleGenerate}\r\n              disabled={!formData.account_number || !formData.start_date || generating}\r\n              variant=\"primary\"\r\n              className=\"w-full py-4 shadow-lg shadow-blue-100 flex justify-center items-center gap-2\"\r\n            >\r\n              {generating ? (\r\n                <>\r\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                  Generating PDF...\r\n                </>\r\n              ) : (\r\n                <>≡ƒôä Generate PDF</>\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </GlassCard>\r\n\r\n        {/* Info / Preview Panel */}\r\n        <GlassCard className=\"p-6 flex flex-col items-center justify-center text-center bg-gradient-to-br from-gray-50 to-white\">\r\n          <div className=\"text-6xl mb-6 opacity-80 animate-bounce-slow\">≡ƒû¿∩╕Å</div>\r\n\r\n          <h4 className=\"text-xl font-bold text-gray-800 mb-4\">\r\n            Ready to Print\r\n          </h4>\r\n\r\n          <p className=\"max-w-xs text-gray-500 leading-relaxed mb-8\">\r\n            Select an account and date range to generate a comprehensive PDF statement including all transactions, fees, and interest applied.\r\n          </p>\r\n\r\n          <div className=\"w-full max-w-sm p-4 bg-blue-50 text-blue-800 rounded-xl border border-blue-100 text-sm text-left flex gap-3\">\r\n            <span className=\"text-xl\">Γä╣∩╕Å</span>\r\n            <div>\r\n              <strong className=\"block mb-1\">Note:</strong>\r\n              Statements are generated in PDF format and will be automatically downloaded to your device.\r\n            </div>\r\n          </div>\r\n        </GlassCard>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StatementsSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\TransactionsSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[507,510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[507,510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[528,531],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[528,531],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { authService } from '../../services/api';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\nimport { Card } from '../ui/Card';\r\nimport GlassCard from '../ui/modern/GlassCard';\r\nimport ModernStatCard from '../ui/modern/ModernStatCard';\r\n\r\ninterface Transaction {\r\n  id: number;\r\n  amount: string | number;\r\n  transaction_type: string;\r\n  description: string;\r\n  status: string;\r\n  timestamp: string;\r\n  from_account?: any;\r\n  to_account?: any;\r\n}\r\n\r\nconst TransactionsSection: React.FC = () => {\r\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState({\r\n    type: 'all',\r\n    status: 'all',\r\n    search: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchTransactions();\r\n  }, []);\r\n\r\n  const fetchTransactions = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await authService.getAllTransactions();\r\n      if (response.success) {\r\n        const txData = Array.isArray(response.data) ? response.data :\r\n          (response.data?.results || []);\r\n        setTransactions(txData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch transactions:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (amount: string | number) => {\r\n    const num = typeof amount === 'string' ? parseFloat(amount) : amount;\r\n    return new Intl.NumberFormat('en-GH', {\r\n      style: 'currency',\r\n      currency: 'GHS'\r\n    }).format(num);\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleString('en-GH', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const s = status.toLowerCase();\r\n    let classes = 'bg-gray-100 text-gray-600';\r\n    if (s === 'completed') classes = 'bg-emerald-100 text-emerald-700';\r\n    else if (s === 'pending') classes = 'bg-amber-100 text-amber-700';\r\n    else if (s === 'failed') classes = 'bg-red-100 text-red-700';\r\n    else if (s === 'cancelled') classes = 'bg-slate-200 text-slate-600';\r\n\r\n    return (\r\n      <span className={`px-3 py-1 rounded-full text-xs font-bold uppercase ${classes}`}>\r\n        {status}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getTypeIcon = (type: string) => {\r\n    switch (type.toLowerCase()) {\r\n      case 'deposit': return '≡ƒÆ░';\r\n      case 'withdrawal': return '≡ƒÆ╕';\r\n      case 'transfer': return '≡ƒöä';\r\n      case 'payment': return '≡ƒÆ│';\r\n      case 'fee': return '≡ƒôï';\r\n      default: return '≡ƒÆ╡';\r\n    }\r\n  };\r\n\r\n  const filteredTransactions = transactions.filter(tx => {\r\n    const matchesType = filter.type === 'all' || tx.transaction_type === filter.type;\r\n    const matchesStatus = filter.status === 'all' || tx.status === filter.status;\r\n    const matchesSearch = filter.search === '' ||\r\n      tx.description.toLowerCase().includes(filter.search.toLowerCase()) ||\r\n      tx.id.toString().includes(filter.search);\r\n    return matchesType && matchesStatus && matchesSearch;\r\n  });\r\n\r\n  const totalVolume = filteredTransactions\r\n    .filter(t => t.status === 'completed')\r\n    .reduce((sum, t) => sum + (typeof t.amount === 'string' ? parseFloat(t.amount) : t.amount), 0);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center p-20 text-gray-400\">\r\n        <div className=\"animate-spin text-4xl mb-4\">ΓÅ│</div>\r\n        <p>Loading transactions...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n        <h3 className=\"text-2xl font-bold text-gray-800 flex items-center gap-2\">\r\n          <span>≡ƒÆ╕</span> All Transactions\r\n        </h3>\r\n        <Button onClick={fetchTransactions} variant=\"secondary\" icon={() => <span>≡ƒöä</span>}>\r\n          Refresh\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Stats Summary */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <ModernStatCard\r\n          label=\"Total Transactions\"\r\n          value={String(filteredTransactions.length)}\r\n          icon={<span>≡ƒôè</span>}\r\n          colorClass=\"text-blue-600 bg-blue-50\"\r\n          trend=\"neutral\"\r\n        />\r\n        <ModernStatCard\r\n          label=\"Completed\"\r\n          value={String(filteredTransactions.filter(t => t.status === 'completed').length)}\r\n          icon={<span>Γ£à</span>}\r\n          colorClass=\"text-emerald-600 bg-emerald-50\"\r\n          trend=\"up\"\r\n        />\r\n        <ModernStatCard\r\n          label=\"Pending\"\r\n          value={String(filteredTransactions.filter(t => t.status === 'pending').length)}\r\n          icon={<span>ΓÅ│</span>}\r\n          colorClass=\"text-amber-600 bg-amber-50\"\r\n          trend=\"neutral\"\r\n        />\r\n        <ModernStatCard\r\n          label=\"Total Volume\"\r\n          value={formatCurrency(totalVolume)}\r\n          icon={<span>≡ƒÆ░</span>}\r\n          colorClass=\"text-purple-600 bg-purple-50\"\r\n          trend=\"up\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"p-6 bg-white\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1.5 ml-1\">Search</label>\r\n            <Input\r\n              className=\"mb-0\"\r\n              placeholder=\"ID or description...\"\r\n              value={filter.search}\r\n              onChange={(e) => setFilter({ ...filter, search: e.target.value })}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1.5 ml-1\">Type</label>\r\n            <select\r\n              value={filter.type}\r\n              onChange={(e) => setFilter({ ...filter, type: e.target.value })}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 focus:bg-white focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n            >\r\n              <option value=\"all\">All Types</option>\r\n              <option value=\"deposit\">Deposit</option>\r\n              <option value=\"withdrawal\">Withdrawal</option>\r\n              <option value=\"transfer\">Transfer</option>\r\n              <option value=\"payment\">Payment</option>\r\n              <option value=\"fee\">Fee</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1.5 ml-1\">Status</label>\r\n            <select\r\n              value={filter.status}\r\n              onChange={(e) => setFilter({ ...filter, status: e.target.value })}\r\n              className=\"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 text-gray-900 focus:bg-white focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none\"\r\n            >\r\n              <option value=\"all\">All Status</option>\r\n              <option value=\"completed\">Completed</option>\r\n              <option value=\"pending\">Pending</option>\r\n              <option value=\"failed\">Failed</option>\r\n              <option value=\"cancelled\">Cancelled</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Transactions Table */}\r\n      <GlassCard className=\"overflow-hidden p-0\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full border-collapse\">\r\n            <thead>\r\n              <tr className=\"bg-gray-50/50 border-b border-gray-200 text-left\">\r\n                <th className=\"p-4 font-bold text-gray-700 text-sm uppercase tracking-wider\">ID</th>\r\n                <th className=\"p-4 font-bold text-gray-700 text-sm uppercase tracking-wider\">Type</th>\r\n                <th className=\"p-4 font-bold text-gray-700 text-sm uppercase tracking-wider\">Amount</th>\r\n                <th className=\"p-4 font-bold text-gray-700 text-sm uppercase tracking-wider\">Description</th>\r\n                <th className=\"p-4 font-bold text-gray-700 text-sm uppercase tracking-wider\">Status</th>\r\n                <th className=\"p-4 font-bold text-gray-700 text-sm uppercase tracking-wider\">Date</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-100\">\r\n              {filteredTransactions.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={6} className=\"p-10 text-center text-gray-400\">\r\n                    <div className=\"text-4xl mb-2\">≡ƒô¡</div>\r\n                    <p>No transactions found</p>\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredTransactions.map((tx) => (\r\n                  <tr\r\n                    key={tx.id}\r\n                    className=\"hover:bg-blue-50/30 transition-colors\"\r\n                  >\r\n                    <td className=\"p-4 font-mono text-sm text-gray-500\">#{tx.id}</td>\r\n                    <td className=\"p-4 font-medium text-gray-800\">\r\n                      <span className=\"text-xl mr-2\">{getTypeIcon(tx.transaction_type)}</span>\r\n                      {tx.transaction_type}\r\n                    </td>\r\n                    <td className=\"p-4 font-bold text-gray-900\">\r\n                      {formatCurrency(tx.amount)}\r\n                    </td>\r\n                    <td className=\"p-4 text-gray-600 text-sm max-w-xs truncate\">\r\n                      {tx.description || 'No description'}\r\n                    </td>\r\n                    <td className=\"p-4\">\r\n                      {getStatusBadge(tx.status)}\r\n                    </td>\r\n                    <td className=\"p-4 text-sm text-gray-500\">\r\n                      {formatDate(tx.timestamp)}\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </GlassCard>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionsSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\manager\\UserManagementSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[298,301],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[298,301],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[355,358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[355,358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport EnhancedUserManagementForm from '../EnhancedUserManagementForm';\r\nimport '../EnhancedUserManagementForm.css';\r\n\r\ninterface StaffMember {\r\n  id: string;\r\n  name: string;\r\n  role: string;\r\n  status: string;\r\n}\r\n\r\ninterface UserManagementSectionProps {\r\n  formData: any;\r\n  setFormData: React.Dispatch<React.SetStateAction<any>>;\r\n  otpCode: string;\r\n  setOtpCode: React.Dispatch<React.SetStateAction<string>>;\r\n  phoneVerified: boolean;\r\n  setPhoneVerified: React.Dispatch<React.SetStateAction<boolean>>;\r\n  otpSent: boolean;\r\n  setOtpSent: React.Dispatch<React.SetStateAction<boolean>>;\r\n  otpExpiresIn: number;\r\n  setOtpExpiresIn: React.Dispatch<React.SetStateAction<number>>;\r\n  otpLoading: boolean;\r\n  handleSendOTP: () => void;\r\n  handleVerifyOTP: () => void;\r\n  handleCreateUser: (e: React.FormEvent) => void;\r\n  staffMembers: StaffMember[];\r\n  fetchStaffMembers: () => void;\r\n}\r\n\r\nconst UserManagementSection: React.FC<UserManagementSectionProps> = (props) => {\r\n  return (\r\n    <div className=\"manager-user-management\">\r\n      <EnhancedUserManagementForm {...props} />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default UserManagementSection;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\member\\RequestServicesTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2987,2990],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2987,2990],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'response' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":104,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":104,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4096,4099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4096,4099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":192,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6723,6726],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6723,6726],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\n\r\ninterface Account {\r\n    id: number;\r\n    account_number: string;\r\n    account_type: string;\r\n    account_type_display?: string;\r\n    balance: number;\r\n    calculated_balance?: number;\r\n}\r\n\r\ninterface ServiceRequest {\r\n    id: number;\r\n    request_type: string;\r\n    status: string;\r\n    created_at: string;\r\n    admin_notes: string;\r\n}\r\n\r\nconst RequestServicesTab: React.FC = () => {\r\n    const [accounts, setAccounts] = useState<Account[]>([]);\r\n    const [requests, setRequests] = useState<ServiceRequest[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [activeTab, setActiveTab] = useState<'statement' | 'checkbook' | 'history'>('statement');\r\n    const [message, setMessage] = useState({ type: '', text: '' });\r\n\r\n    // Statement form\r\n    const [statementForm, setStatementForm] = useState({\r\n        account_id: '',\r\n        start_date: '',\r\n        end_date: ''\r\n    });\r\n\r\n    // Checkbook form\r\n    const [checkbookForm, setCheckbookForm] = useState({\r\n        account_id: '',\r\n        quantity: '1',\r\n        notes: ''\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchAccounts();\r\n        fetchRequests();\r\n    }, []);\r\n\r\n    const fetchAccounts = async () => {\r\n        try {\r\n            const response = await api.get('accounts/');\r\n            setAccounts(response.data?.results || response.data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching accounts:', error);\r\n        }\r\n    };\r\n\r\n    const fetchRequests = async () => {\r\n        try {\r\n            const response = await api.get('services/requests/');\r\n            setRequests(response.data?.results || response.data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching requests:', error);\r\n        }\r\n    };\r\n\r\n    const handleStatementRequest = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!statementForm.account_id || !statementForm.start_date || !statementForm.end_date) {\r\n            setMessage({ type: 'error', text: 'Please fill all fields' });\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const response = await api.post('operations/statements/request_statement/', {\r\n                account_id: parseInt(statementForm.account_id),\r\n                start_date: statementForm.start_date,\r\n                end_date: statementForm.end_date\r\n            });\r\n\r\n            if (response.data?.success) {\r\n                setMessage({ type: 'success', text: 'Statement generated successfully! You can download it from history.' });\r\n                setStatementForm({ account_id: '', start_date: '', end_date: '' });\r\n                fetchRequests();\r\n                setActiveTab('history');\r\n            } else {\r\n                setMessage({ type: 'error', text: response.data?.error || 'Failed to generate statement' });\r\n            }\r\n        } catch (error: any) {\r\n            setMessage({ type: 'error', text: error.message || 'Error requesting statement' });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCheckbookRequest = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!checkbookForm.account_id) {\r\n            setMessage({ type: 'error', text: 'Please select an account' });\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const response = await api.post('services/requests/', {\r\n                request_type: 'checkbook',\r\n                account_id: parseInt(checkbookForm.account_id),\r\n                quantity: parseInt(checkbookForm.quantity),\r\n                notes: checkbookForm.notes,\r\n                delivery_method: 'pickup'\r\n            });\r\n\r\n            setMessage({ type: 'success', text: 'Checkbook request submitted! Awaiting Operations Manager approval.' });\r\n            setCheckbookForm({ account_id: '', quantity: '1', notes: '' });\r\n            fetchRequests();\r\n            setActiveTab('history');\r\n        } catch (error: any) {\r\n            setMessage({ type: 'error', text: error.message || 'Error submitting request' });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const inputStyle = {\r\n        width: '100%',\r\n        padding: '12px',\r\n        border: '1px solid #e2e8f0',\r\n        borderRadius: '8px',\r\n        fontSize: '14px',\r\n        marginBottom: '16px'\r\n    };\r\n\r\n    const buttonStyle = {\r\n        background: '#1e40af',\r\n        color: 'white',\r\n        padding: '12px 24px',\r\n        border: 'none',\r\n        borderRadius: '8px',\r\n        fontWeight: '600' as const,\r\n        cursor: 'pointer',\r\n        width: '100%'\r\n    };\r\n\r\n    const getStatusBadge = (status: string) => {\r\n        const colors: Record<string, { bg: string; text: string }> = {\r\n            pending: { bg: '#fef9c3', text: '#ca8a04' },\r\n            processing: { bg: '#dbeafe', text: '#1d4ed8' },\r\n            completed: { bg: '#dcfce7', text: '#16a34a' },\r\n            rejected: { bg: '#fee2e2', text: '#dc2626' }\r\n        };\r\n        const style = colors[status] || colors.pending;\r\n        return (\r\n            <span style={{\r\n                padding: '4px 12px',\r\n                borderRadius: '12px',\r\n                background: style.bg,\r\n                color: style.text,\r\n                fontSize: '12px',\r\n                fontWeight: '600'\r\n            }}>\r\n                {status.charAt(0).toUpperCase() + status.slice(1)}\r\n            </span>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2 style={{ fontSize: '24px', fontWeight: '700', color: '#1e293b', marginBottom: '24px' }}>\r\n                ≡ƒÅª Request Services\r\n            </h2>\r\n\r\n            {message.text && (\r\n                <div style={{\r\n                    padding: '12px 16px',\r\n                    borderRadius: '8px',\r\n                    marginBottom: '16px',\r\n                    background: message.type === 'success' ? '#dcfce7' : '#fee2e2',\r\n                    color: message.type === 'success' ? '#16a34a' : '#dc2626'\r\n                }}>\r\n                    {message.text}\r\n                </div>\r\n            )}\r\n\r\n            {/* Tabs */}\r\n            <div style={{ display: 'flex', gap: '8px', marginBottom: '24px' }}>\r\n                {[\r\n                    { id: 'statement', label: '≡ƒô£ Account Statement' },\r\n                    { id: 'checkbook', label: '≡ƒô¥ Request Checkbook' },\r\n                    { id: 'history', label: '≡ƒôï My Requests' }\r\n                ].map((tab) => (\r\n                    <button\r\n                        key={tab.id}\r\n                        onClick={() => setActiveTab(tab.id as any)}\r\n                        style={{\r\n                            padding: '10px 20px',\r\n                            background: activeTab === tab.id ? '#1e40af' : '#f1f5f9',\r\n                            color: activeTab === tab.id ? 'white' : '#64748b',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            cursor: 'pointer',\r\n                            fontWeight: '600'\r\n                        }}\r\n                    >\r\n                        {tab.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Statement Request */}\r\n            {activeTab === 'statement' && (\r\n                <div style={{ background: 'white', padding: '24px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\r\n                    <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '20px' }}>Request Account Statement</h3>\r\n                    <p style={{ color: '#64748b', marginBottom: '20px' }}>\r\n                        Generate a PDF statement of your account activity for a specific period.\r\n                        The statement will be generated instantly based on your transaction history.\r\n                    </p>\r\n                    <form onSubmit={handleStatementRequest}>\r\n                        <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>\r\n                            Select Account\r\n                        </label>\r\n                        <select\r\n                            value={statementForm.account_id}\r\n                            onChange={(e) => setStatementForm({ ...statementForm, account_id: e.target.value })}\r\n                            style={inputStyle}\r\n                        >\r\n                            <option value=\"\">-- Select Account --</option>\r\n                            {accounts.map((acc) => (\r\n                                <option key={acc.id} value={acc.id}>\r\n                                    {acc.account_number} - {acc.account_type_display || acc.account_type} (GHS {Number(acc.calculated_balance ?? acc.balance ?? 0).toFixed(2)})\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px' }}>\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>\r\n                                    Start Date\r\n                                </label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={statementForm.start_date}\r\n                                    onChange={(e) => setStatementForm({ ...statementForm, start_date: e.target.value })}\r\n                                    style={inputStyle}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>\r\n                                    End Date\r\n                                </label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={statementForm.end_date}\r\n                                    onChange={(e) => setStatementForm({ ...statementForm, end_date: e.target.value })}\r\n                                    style={inputStyle}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button type=\"submit\" disabled={loading} style={buttonStyle}>\r\n                            {loading ? 'Generating...' : '≡ƒôÑ Generate Statement'}\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            )}\r\n\r\n            {/* Checkbook Request */}\r\n            {activeTab === 'checkbook' && (\r\n                <div style={{ background: 'white', padding: '24px', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\r\n                    <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '20px' }}>Request Checkbook</h3>\r\n                    <p style={{ color: '#64748b', marginBottom: '20px' }}>\r\n                        Submit a request for a new checkbook. Your request will be reviewed by the Operations Manager.\r\n                    </p>\r\n                    <form onSubmit={handleCheckbookRequest}>\r\n                        <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>\r\n                            Select Account\r\n                        </label>\r\n                        <select\r\n                            value={checkbookForm.account_id}\r\n                            onChange={(e) => setCheckbookForm({ ...checkbookForm, account_id: e.target.value })}\r\n                            style={inputStyle}\r\n                        >\r\n                            <option value=\"\">-- Select Account --</option>\r\n                            {accounts.map((acc) => (\r\n                                <option key={acc.id} value={acc.id}>\r\n                                    {acc.account_number} - {acc.account_type}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n\r\n                        <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>\r\n                            Number of Checkbooks\r\n                        </label>\r\n                        <select\r\n                            value={checkbookForm.quantity}\r\n                            onChange={(e) => setCheckbookForm({ ...checkbookForm, quantity: e.target.value })}\r\n                            style={inputStyle}\r\n                        >\r\n                            <option value=\"1\">1 Checkbook (25 leaves)</option>\r\n                            <option value=\"2\">2 Checkbooks (50 leaves)</option>\r\n                            <option value=\"3\">3 Checkbooks (75 leaves)</option>\r\n                        </select>\r\n\r\n                        <label style={{ display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' }}>\r\n                            Additional Notes (Optional)\r\n                        </label>\r\n                        <textarea\r\n                            value={checkbookForm.notes}\r\n                            onChange={(e) => setCheckbookForm({ ...checkbookForm, notes: e.target.value })}\r\n                            placeholder=\"Any special requirements...\"\r\n                            style={{ ...inputStyle, minHeight: '80px', resize: 'vertical' }}\r\n                        />\r\n\r\n                        <button type=\"submit\" disabled={loading} style={buttonStyle}>\r\n                            {loading ? 'Submitting...' : '≡ƒô¥ Submit Request'}\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            )}\r\n\r\n            {/* Request History */}\r\n            {activeTab === 'history' && (\r\n                <div style={{ background: 'white', borderRadius: '12px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)', overflow: 'hidden' }}>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ background: '#f8fafc' }}>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0' }}>Type</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0' }}>Status</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0' }}>Date</th>\r\n                                <th style={{ padding: '16px', textAlign: 'left', borderBottom: '1px solid #e2e8f0' }}>Notes</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {requests.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan={4} style={{ padding: '40px', textAlign: 'center', color: '#64748b' }}>\r\n                                        No service requests yet\r\n                                    </td>\r\n                                </tr>\r\n                            ) : (\r\n                                requests.map((req) => (\r\n                                    <tr key={req.id} style={{ borderBottom: '1px solid #f1f5f9' }}>\r\n                                        <td style={{ padding: '12px 16px', fontWeight: '600' }}>\r\n                                            {req.request_type === 'checkbook' ? '≡ƒô¥ Checkbook' :\r\n                                                req.request_type === 'statement' ? '≡ƒô£ Statement' : req.request_type}\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px' }}>{getStatusBadge(req.status)}</td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b' }}>\r\n                                            {new Date(req.created_at).toLocaleDateString()}\r\n                                        </td>\r\n                                        <td style={{ padding: '12px 16px', color: '#64748b' }}>\r\n                                            {req.admin_notes || '-'}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RequestServicesTab;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\messaging\\CallModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\messaging\\CallOverlay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MonitorSmartphone' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Maximize2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":77,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":86},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentUser' is defined but never used. Allowed unused args must match /^_/u.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":35,"column":17,"nodeType":"MemberExpression","messageId":"limited","endLine":35,"endColumn":28,"suggestions":[{"fix":{"range":[1288,1368],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'peerConnections.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'peerConnections.current' to a variable inside the effect, and use that variable in the cleanup function.","line":68,"column":29,"nodeType":"Identifier","endLine":68,"endColumn":36},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'activeCall.participants', 'activeCall.type', 'createPeerConnection', 'handleEndCall', and 'localStream'. Either include them or remove the dependency array.","line":70,"column":8,"nodeType":"ArrayExpression","endLine":70,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [activeCall.participants, activeCall.type, createPeerConnection, handleEndCall, localStream]","fix":{"range":[2593,2595],"text":"[activeCall.participants, activeCall.type, createPeerConnection, handleEndCall, localStream]"}}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":76,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":76,"endColumn":20,"suggestions":[{"fix":{"range":[2805,2901],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":87,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":87,"endColumn":24,"suggestions":[{"fix":{"range":[3229,3296],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":100,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":100,"endColumn":24,"suggestions":[{"fix":{"range":[3715,3797],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":105,"column":17,"nodeType":"MemberExpression","messageId":"limited","endLine":105,"endColumn":28,"suggestions":[{"fix":{"range":[4057,4115],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":124,"column":17,"nodeType":"MemberExpression","messageId":"limited","endLine":124,"endColumn":28,"suggestions":[{"fix":{"range":[4776,4835],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":168,"column":21,"nodeType":"MemberExpression","messageId":"limited","endLine":168,"endColumn":32,"suggestions":[{"fix":{"range":[6843,6897],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":175,"column":21,"nodeType":"MemberExpression","messageId":"limited","endLine":175,"endColumn":32,"suggestions":[{"fix":{"range":[7321,7376],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":179,"column":21,"nodeType":"MemberExpression","messageId":"limited","endLine":179,"endColumn":32,"suggestions":[{"fix":{"range":[7594,7652],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":182,"column":21,"nodeType":"MemberExpression","messageId":"limited","endLine":182,"endColumn":32,"suggestions":[{"fix":{"range":[7804,7854],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'activeCall.participants', 'createPeerConnection', and 'handleEndCall'. Either include them or remove the dependency array.","line":199,"column":8,"nodeType":"ArrayExpression","endLine":199,"endColumn":72,"suggestions":[{"desc":"Update the dependencies array to be: [incomingSignal, activeCall.isInitiator, wsManager, localStream, activeCall.participants, createPeerConnection, handleEndCall]","fix":{"range":[8433,8497],"text":"[incomingSignal, activeCall.isInitiator, wsManager, localStream, activeCall.participants, createPeerConnection, handleEndCall]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { Mic, MicOff, Video, VideoOff, Phone, MonitorSmartphone, Minimize2, Maximize2 } from 'lucide-react';\r\n\r\nconst CallOverlay = ({\r\n    activeCall,\r\n    onEndCall,\r\n    wsManager,\r\n    currentUser,\r\n    incomingSignal, // Latest signaling message passed from parent\r\n}) => {\r\n    const [localStream, setLocalStream] = useState(null);\r\n    // Map of userId -> MediaStream\r\n    const [remoteStreams, setRemoteStreams] = useState(new Map());\r\n    const [isMuted, setIsMuted] = useState(false);\r\n    const [isVideoOff, setIsVideoOff] = useState(false);\r\n    const [callStatus, setCallStatus] = useState('initializing'); // initializing, calling, connected, ended\r\n    const [isMinimized, setIsMinimized] = useState(false);\r\n\r\n    const localVideoRef = useRef(null);\r\n    // Map of userId -> RTCPeerConnection\r\n    const peerConnections = useRef(new Map());\r\n\r\n    // WebRTC Configuration\r\n    const rtcConfig = {\r\n        iceServers: [\r\n            { urls: 'stun:stun.l.google.com:19302' },\r\n            { urls: 'stun:stun1.l.google.com:19302' },\r\n        ],\r\n    };\r\n\r\n    // Initialize Call for all participants\r\n    useEffect(() => {\r\n        const startCall = async () => {\r\n            try {\r\n                console.log('[CALL] Starting call with participants:', activeCall.participants);\r\n                const stream = await navigator.mediaDevices.getUserMedia({\r\n                    audio: true,\r\n                    video: activeCall.type === 'video'\r\n                });\r\n\r\n                setLocalStream(stream);\r\n                if (localVideoRef.current) {\r\n                    localVideoRef.current.srcObject = stream;\r\n                }\r\n\r\n                // Create a PeerConnection for EACH participant\r\n                activeCall.participants.forEach(participant => {\r\n                    createPeerConnection(participant, stream);\r\n                });\r\n\r\n                setCallStatus('calling');\r\n\r\n            } catch (error) {\r\n                console.error('[CALL] Error accessing media devices:', error);\r\n                alert('Could not access camera/microphone. Please check permissions.');\r\n                handleEndCall();\r\n            }\r\n        };\r\n\r\n        startCall();\r\n\r\n        return () => {\r\n            // Cleanup all connections\r\n            if (localStream) {\r\n                localStream.getTracks().forEach(track => track.stop());\r\n            }\r\n            peerConnections.current.forEach(pc => pc.close());\r\n            peerConnections.current.clear();\r\n        };\r\n    }, []); // Run once on mount\r\n\r\n    // Create RTCPeerConnection helper\r\n    const createPeerConnection = async (participant, stream) => {\r\n        if (peerConnections.current.has(participant.id)) return;\r\n\r\n        console.log(`[CALL] Creating PeerConnection for ${participant.first_name} (${participant.id})`);\r\n        const pc = new RTCPeerConnection(rtcConfig);\r\n        peerConnections.current.set(participant.id, pc);\r\n\r\n        // Add local tracks\r\n        stream.getTracks().forEach(track => {\r\n            pc.addTrack(track, stream);\r\n        });\r\n\r\n        // Handle remote tracks\r\n        pc.ontrack = (event) => {\r\n            console.log(`[CALL] Received remote track from ${participant.id}`);\r\n            setRemoteStreams(prev => new Map(prev.set(participant.id, event.streams[0])));\r\n        };\r\n\r\n        // Handle ICE candidates\r\n        pc.onicecandidate = (event) => {\r\n            if (event.candidate) {\r\n                wsManager.sendCandidate(event.candidate, participant.id);\r\n            }\r\n        };\r\n\r\n        // Connection state changes\r\n        pc.onconnectionstatechange = () => {\r\n            console.log(`[CALL] Connection state for ${participant.id}:`, pc.connectionState);\r\n            if (pc.connectionState === 'connected') {\r\n                setCallStatus('connected');\r\n            } else if (pc.connectionState === 'failed' || pc.connectionState === 'disconnected') {\r\n                // Remove this peer only\r\n                console.log(`[CALL] Peer ${participant.id} disconnected`);\r\n                peerConnections.current.get(participant.id)?.close();\r\n                peerConnections.current.delete(participant.id);\r\n                setRemoteStreams(prev => {\r\n                    const newMap = new Map(prev);\r\n                    newMap.delete(participant.id);\r\n                    return newMap;\r\n                });\r\n\r\n                // If no peers left, end call\r\n                if (peerConnections.current.size === 0) {\r\n                    handleEndCall();\r\n                }\r\n            }\r\n        };\r\n\r\n        // If initiator, create offer immediately\r\n        if (activeCall.isInitiator) {\r\n            try {\r\n                console.log(`[CALL] Creating offer for ${participant.id}`);\r\n                const offer = await pc.createOffer();\r\n                await pc.setLocalDescription(offer);\r\n                wsManager.sendOffer(offer, participant.id);\r\n            } catch (err) {\r\n                console.error(`[CALL] Error creating offer for ${participant.id}:`, err);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Handle Incoming Signals\r\n    useEffect(() => {\r\n        if (!incomingSignal) return;\r\n\r\n        const handleSignal = async () => {\r\n            try {\r\n                const { type, offer, answer, candidate, sender_id } = incomingSignal;\r\n                const senderId = sender_id; // Ensure consistent naming\r\n\r\n                // Find or create PC for this sender\r\n                let pc = peerConnections.current.get(senderId);\r\n\r\n                // If we are receiver receiving an OFFER, we might not have a PC yet if we just started\r\n                if (!pc && type === 'call_offer' && !activeCall.isInitiator) {\r\n                    // Identify the participant object\r\n                    const participant = activeCall.participants.find(p => p.id === senderId) || { id: senderId, first_name: 'Unknown' };\r\n                    // We need local stream to create PC\r\n                    if (localStream) {\r\n                        await createPeerConnection(participant, localStream);\r\n                        pc = peerConnections.current.get(senderId);\r\n                    } else {\r\n                        // Wait for local stream? This race condition is tricky.\r\n                        // Ideally startCall establishes stream first.\r\n                        console.warn('[CALL] Received offer but local stream not ready');\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (!pc) {\r\n                    console.warn(`[CALL] Received signal from unknown peer ${senderId}`);\r\n                    return;\r\n                }\r\n\r\n                if (type === 'call_offer' && !activeCall.isInitiator) {\r\n                    console.log(`[CALL] Handling offer from ${senderId}`);\r\n                    await pc.setRemoteDescription(new RTCSessionDescription(offer));\r\n                    const answerSd = await pc.createAnswer();\r\n                    await pc.setLocalDescription(answerSd);\r\n                    wsManager.sendAnswer(answerSd, senderId);\r\n                    setCallStatus('connected');\r\n                } else if (type === 'call_answer' && activeCall.isInitiator) {\r\n                    console.log(`[CALL] Handling answer from ${senderId}`);\r\n                    await pc.setRemoteDescription(new RTCSessionDescription(answer));\r\n                    setCallStatus('connected');\r\n                } else if (type === 'new_ice_candidate') {\r\n                    console.log(`[CALL] Handling candidate from ${senderId}`);\r\n                    await pc.addIceCandidate(new RTCIceCandidate(candidate));\r\n                } else if (type === 'call_end') {\r\n                    console.log(`[CALL] Peer ${senderId} ended call`);\r\n                    pc.close();\r\n                    peerConnections.current.delete(senderId);\r\n                    setRemoteStreams(prev => {\r\n                        const newMap = new Map(prev);\r\n                        newMap.delete(senderId);\r\n                        return newMap;\r\n                    });\r\n                    if (peerConnections.current.size === 0) handleEndCall();\r\n                }\r\n            } catch (error) {\r\n                console.error('[CALL] Error handling signal:', error);\r\n            }\r\n        };\r\n\r\n        handleSignal();\r\n\r\n    }, [incomingSignal, activeCall.isInitiator, wsManager, localStream]); // Added localStream dependency\r\n\r\n    const handleEndCall = useCallback(() => {\r\n        if (localStream) {\r\n            localStream.getTracks().forEach(track => track.stop());\r\n        }\r\n        // Notify all peers\r\n        activeCall.participants.forEach(p => {\r\n            wsManager.sendEndCall(p.id);\r\n        });\r\n\r\n        peerConnections.current.forEach(pc => pc.close());\r\n        peerConnections.current.clear();\r\n        onEndCall();\r\n    }, [localStream, onEndCall, wsManager, activeCall.participants]);\r\n\r\n    const toggleMute = () => {\r\n        if (localStream) {\r\n            localStream.getAudioTracks().forEach(track => {\r\n                track.enabled = !track.enabled;\r\n            });\r\n            setIsMuted(!isMuted);\r\n        }\r\n    };\r\n\r\n    const toggleVideo = () => {\r\n        if (localStream) {\r\n            localStream.getVideoTracks().forEach(track => {\r\n                track.enabled = !track.enabled;\r\n            });\r\n            setIsVideoOff(!isVideoOff);\r\n        }\r\n    };\r\n\r\n    // Render Logic for Grid\r\n    const renderRemoteVideos = () => {\r\n        const streams = Array.from(remoteStreams.entries());\r\n\r\n        if (streams.length === 0) {\r\n            // Waiting for connection\r\n            return (\r\n                <div className=\"absolute inset-0 flex items-center justify-center flex-col\">\r\n                    <div className=\"flex space-x-4 mb-8\">\r\n                        {activeCall.participants.map(p => (\r\n                            <div key={p.id} className=\"flex flex-col items-center\">\r\n                                <div className=\"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mb-2 animate-pulse\">\r\n                                    <span className=\"text-2xl text-white font-bold\">\r\n                                        {p.first_name?.[0]}{p.last_name?.[0]}\r\n                                    </span>\r\n                                </div>\r\n                                <span className=\"text-white text-sm\">{p.first_name}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    <p className=\"text-white text-xl animate-pulse\">\r\n                        {callStatus === 'calling' ? 'Calling participants...' : 'Connecting...'}\r\n                    </p>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // Grid Layout logic\r\n        const gridCols = streams.length === 1 ? 'grid-cols-1' : streams.length <= 4 ? 'grid-cols-2' : 'grid-cols-3';\r\n\r\n        return (\r\n            <div className={`w-full h-full grid ${gridCols} gap-4 p-4`}>\r\n                {streams.map(([userId, stream]) => {\r\n                    // Find user info\r\n                    const participant = activeCall.participants.find(p => p.id === userId) || { first_name: 'Unknown' };\r\n                    return (\r\n                        <div key={userId} className=\"relative bg-gray-800 rounded-xl overflow-hidden border border-gray-700\">\r\n                            <video\r\n                                ref={el => { if (el) el.srcObject = stream; }}\r\n                                autoPlay\r\n                                playsInline\r\n                                className=\"w-full h-full object-cover\"\r\n                            />\r\n                            <div className=\"absolute bottom-4 left-4 bg-black/50 px-3 py-1 rounded-full text-white text-sm\">\r\n                                {participant.first_name} {participant.last_name}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (isMinimized) {\r\n        return (\r\n            <div className=\"fixed bottom-4 right-4 w-48 h-32 bg-gray-900 rounded-xl shadow-2xl z-50 overflow-hidden cursor-pointer border border-gray-700 flex items-center justify-center\"\r\n                onClick={() => setIsMinimized(false)}>\r\n                <span className=\"text-white font-bold\">\r\n                    {remoteStreams.size > 0 ? `${remoteStreams.size} Active` : 'Call Active'}\r\n                </span>\r\n                <div className=\"absolute bottom-2 right-2 bg-green-500 w-3 h-3 rounded-full animate-pulse\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-gray-900 z-[100] flex flex-col\">\r\n            {/* Main Remote Video Grid */}\r\n            <div className=\"relative flex-1 bg-black\">\r\n                {renderRemoteVideos()}\r\n\r\n                {/* Local Video Picture-in-Picture */}\r\n                <div className=\"absolute top-4 right-4 w-32 h-48 bg-gray-800 rounded-xl overflow-hidden shadow-lg border border-gray-700 transition-all hover:scale-105 z-10\">\r\n                    <video\r\n                        ref={localVideoRef}\r\n                        autoPlay\r\n                        playsInline\r\n                        muted\r\n                        className={`w-full h-full object-cover ${isVideoOff ? 'hidden' : ''}`}\r\n                        style={{ transform: 'scaleX(-1)' }}\r\n                    />\r\n                    {isVideoOff && (\r\n                        <div className=\"w-full h-full flex items-center justify-center bg-gray-800\">\r\n                            <VideoOff className=\"text-white w-8 h-8\" />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <button\r\n                    onClick={() => setIsMinimized(true)}\r\n                    className=\"absolute top-4 left-4 p-2 bg-black/40 rounded-full hover:bg-black/60 text-white z-10\"\r\n                >\r\n                    <Minimize2 className=\"w-6 h-6\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Controls Bar */}\r\n            <div className=\"h-24 bg-gray-900 flex items-center justify-center space-x-8 pb-4\">\r\n                <button\r\n                    onClick={toggleMute}\r\n                    className={`p-4 rounded-full transition-all ${isMuted ? 'bg-white text-gray-900' : 'bg-gray-700 text-white hover:bg-gray-600'}`}\r\n                >\r\n                    {isMuted ? <MicOff className=\"w-6 h-6\" /> : <Mic className=\"w-6 h-6\" />}\r\n                </button>\r\n\r\n                <button\r\n                    onClick={handleEndCall}\r\n                    className=\"p-4 rounded-full bg-red-600 text-white hover:bg-red-700 transition-all transform hover:scale-110 shadow-lg shadow-red-600/30\"\r\n                >\r\n                    <Phone className=\"w-8 h-8 transform rotate-[135deg]\" />\r\n                </button>\r\n\r\n                <button\r\n                    onClick={toggleVideo}\r\n                    className={`p-4 rounded-full transition-all ${isVideoOff ? 'bg-white text-gray-900' : 'bg-gray-700 text-white hover:bg-gray-600'}`}\r\n                >\r\n                    {isVideoOff ? <VideoOff className=\"w-6 h-6\" /> : <Video className=\"w-6 h-6\" />}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CallOverlay;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\messaging\\MessageItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreVertical' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'theme' is defined but never used. Allowed unused args must match /^_/u.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showActions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":81,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":81,"endColumn":16,"suggestions":[{"fix":{"range":[2976,3022],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { CheckCheck, MessageCircle, Smile, Reply, MoreVertical, Trash2 } from 'lucide-react';\r\nimport UserAvatar from './UserAvatar';\r\n\r\nconst MessageItem = ({\r\n  message,\r\n  user,\r\n  decryptedMessages,\r\n  messageReactions,\r\n  setMessageReactions,\r\n  authService,\r\n  theme\r\n}) => {\r\n  const isFromCurrentUser = message.is_from_current_user || message.sender_id === user.id;\r\n  const decryptedContent = decryptedMessages.get(message.id) || 'Decrypting...';\r\n  const reactions = messageReactions.get(message.id) || [];\r\n  const [showReactionPicker, setShowReactionPicker] = useState(false);\r\n  const [showActions, setShowActions] = useState(false);\r\n\r\n  const handleAddReaction = async (emoji) => {\r\n    try {\r\n      const result = await authService.addMessageReaction(message.id, emoji);\r\n      if (result.success) {\r\n        // Update local state immediately for better UX\r\n        const currentReactions = messageReactions.get(message.id) || [];\r\n        const existingReaction = currentReactions.find(r => r.emoji === emoji);\r\n\r\n        if (existingReaction) {\r\n          existingReaction.count += 1;\r\n          if (!existingReaction.users.some(u => u.id === user.id)) {\r\n            existingReaction.users.push({\r\n              id: user.id,\r\n              name: `${user.first_name} ${user.last_name}`\r\n            });\r\n          }\r\n        } else {\r\n          currentReactions.push({\r\n            emoji: emoji,\r\n            count: 1,\r\n            users: [{\r\n              id: user.id,\r\n              name: `${user.first_name} ${user.last_name}`\r\n            }]\r\n          });\r\n        }\r\n\r\n        setMessageReactions(prev => new Map(prev.set(message.id, currentReactions)));\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to add reaction:', error);\r\n    }\r\n    setShowReactionPicker(false);\r\n  };\r\n\r\n  const handleRemoveReaction = async (emoji) => {\r\n    try {\r\n      const result = await authService.removeMessageReaction(message.id, emoji);\r\n      if (result.success) {\r\n        // Update local state immediately for better UX\r\n        const currentReactions = messageReactions.get(message.id) || [];\r\n        const existingReaction = currentReactions.find(r => r.emoji === emoji);\r\n\r\n        if (existingReaction) {\r\n          existingReaction.count -= 1;\r\n          existingReaction.users = existingReaction.users.filter(u => u.id !== user.id);\r\n          if (existingReaction.count <= 0) {\r\n            const updatedReactions = currentReactions.filter(r => r.emoji !== emoji);\r\n            setMessageReactions(prev => new Map(prev.set(message.id, updatedReactions)));\r\n          } else {\r\n            setMessageReactions(prev => new Map(prev.set(message.id, currentReactions)));\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to remove reaction:', error);\r\n    }\r\n  };\r\n\r\n  const handleReply = () => {\r\n    // Reply functionality should be handled by parent component\r\n    console.log('Reply to:', message.sender_name);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      id={`message-${message.id}`}\r\n      className={`flex ${isFromCurrentUser ? 'justify-end' : 'justify-start'} mb-6 group relative`}\r\n      onMouseLeave={() => setShowActions(false)}\r\n    >\r\n      {/* Avatar for received messages */}\r\n      {!isFromCurrentUser && (\r\n        <div className=\"mr-3 flex-shrink-0 self-end mb-1\">\r\n          <UserAvatar user={message.sender} size={32} />\r\n        </div>\r\n      )}\r\n\r\n      <div className={`relative max-w-[85%] lg:max-w-[70%] xl:max-w-[60%] flex flex-col ${isFromCurrentUser ? 'items-end' : 'items-start'}`}>\r\n\r\n        {/* Helper Name for Group Chats (only if not from current user) */}\r\n        {!isFromCurrentUser && (\r\n          <span className=\"ml-1 mb-1 text-xs text-gray-500 font-medium\">\r\n            {message.sender_name}\r\n          </span>\r\n        )}\r\n\r\n        {/* Message Bubble */}\r\n        <div\r\n          className={`px-5 py-3 rounded-2xl shadow-sm relative text-sm leading-relaxed ${isFromCurrentUser\r\n              ? 'bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-br-none'\r\n              : 'bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 border border-gray-100 dark:border-gray-700 rounded-bl-none'\r\n            }`}\r\n        >\r\n          {/* Reply context */}\r\n          {message.reply_to_message && (\r\n            <div className={`mb-2 pl-3 border-l-2 py-1 text-xs rounded-r bg-black/5 dark:bg-white/5 ${isFromCurrentUser ? 'border-white/50 text-white/90' : 'border-blue-500 text-gray-600 dark:text-gray-300'\r\n              }`}>\r\n              <div className=\"font-bold opacity-75\">{message.reply_to_message.sender_name}</div>\r\n              <div className=\"truncate opacity-75\">{message.reply_to_message.content || '[Encrypted]'}</div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Forwarded context */}\r\n          {message.forwarded_from_message && (\r\n            <div className={`mb-1 text-xs italic flex items-center gap-1 ${isFromCurrentUser ? 'text-blue-100' : 'text-gray-500'\r\n              }`}>\r\n              <Reply className=\"w-3 h-3 rotate-180\" />\r\n              Forwarded\r\n            </div>\r\n          )}\r\n\r\n          {/* Content */}\r\n          <div className=\"whitespace-pre-wrap break-words\">\r\n            {decryptedContent}\r\n          </div>\r\n\r\n          {/* Time & Read Status */}\r\n          <div className={`flex items-center justify-end gap-1 mt-1 text-[10px] ${isFromCurrentUser ? 'text-blue-100' : 'text-gray-400'\r\n            }`}>\r\n            <span>{new Date(message.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n            {isFromCurrentUser && (\r\n              <CheckCheck className={`w-3 h-3 ${message.is_read ? 'text-blue-200' : 'opacity-60'}`} />\r\n            )}\r\n          </div>\r\n\r\n          {/* Reactions (displayed on the bubble edge) */}\r\n          {reactions.length > 0 && (\r\n            <div className={`absolute -bottom-3 ${isFromCurrentUser ? 'right-0' : 'left-0'} flex gap-1`}>\r\n              {reactions.map((reaction, index) => {\r\n                const hasUserReacted = reaction.users.some(u => u.id === user.id);\r\n                return (\r\n                  <button\r\n                    key={index}\r\n                    onClick={() => hasUserReacted ? handleRemoveReaction(reaction.emoji) : handleAddReaction(reaction.emoji)}\r\n                    className={`flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] shadow-sm border ${hasUserReacted\r\n                        ? 'bg-blue-50 border-blue-200 text-blue-600'\r\n                        : 'bg-white border-gray-200 text-gray-600 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <span>{reaction.emoji}</span>\r\n                    <span className=\"font-semibold\">{reaction.count}</span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Action Menu (Reply, React, etc.) - Floating beside bubble */}\r\n        <div className={`absolute top-0 py-1 ${isFromCurrentUser\r\n            ? '-left-24 pr-2'\r\n            : '-right-24 pl-2'\r\n          } opacity-0 group-hover:opacity-100 transition-all duration-200 flex items-center gap-1`}>\r\n\r\n          <button\r\n            onClick={() => setShowReactionPicker(!showReactionPicker)}\r\n            className=\"p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-blue-500 transition-colors shadow-sm\"\r\n            title=\"Add reaction\"\r\n          >\r\n            <Smile className=\"w-4 h-4\" />\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleReply}\r\n            className=\"p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-blue-500 transition-colors shadow-sm\"\r\n            title=\"Reply\"\r\n          >\r\n            <Reply className=\"w-4 h-4\" />\r\n          </button>\r\n\r\n          {isFromCurrentUser && (\r\n            <button\r\n              className=\"p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 hover:bg-red-100 hover:text-red-500 transition-colors shadow-sm\"\r\n              title=\"Delete\"\r\n            >\r\n              <Trash2 className=\"w-4 h-4\" />\r\n            </button>\r\n          )}\r\n\r\n          {/* Reaction Picker Popover */}\r\n          {showReactionPicker && (\r\n            <div className={`absolute bottom-full mb-2 ${isFromCurrentUser ? 'right-0' : 'left-0'} p-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 animate-in fade-in zoom-in duration-200 z-50 flex gap-1`}>\r\n              {['≡ƒæì', 'Γ¥ñ∩╕Å', '≡ƒÿé', '≡ƒÿ«', '≡ƒÿó', '≡ƒÿí'].map(emoji => (\r\n                <button\r\n                  key={emoji}\r\n                  onClick={() => handleAddReaction(emoji)}\r\n                  className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors text-xl transform hover:scale-110 active:scale-95\"\r\n                >\r\n                  {emoji}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageItem;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\messaging\\NewThreadModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'theme' is defined but never used. Allowed unused args must match /^_/u.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport UserAvatar from './UserAvatar';\r\n\r\nconst NewThreadModal = ({\r\n  showNewThread,\r\n  setShowNewThread,\r\n  newThreadData,\r\n  setNewThreadData,\r\n  staffUsers,\r\n  user,\r\n  handleCreateThread,\r\n  theme\r\n}) => {\r\n  if (!showNewThread) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\r\n        <h3 className=\"text-lg font-bold mb-4\">Create New Thread</h3>\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium mb-2\">Subject</label>\r\n          <input\r\n            type=\"text\"\r\n            value={newThreadData.subject}\r\n            onChange={(e) => setNewThreadData(prev => ({ ...prev, subject: e.target.value }))}\r\n            className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            placeholder=\"Enter thread subject\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium mb-2\">Participants</label>\r\n          <div className=\"max-h-40 overflow-y-auto border rounded p-2\">\r\n            {staffUsers.filter(u => u.id !== user.id).map(staff => (\r\n              <label key={staff.id} className=\"flex items-center space-x-2 p-2 hover:bg-gray-50 cursor-pointer\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={newThreadData.participants.includes(staff.id)}\r\n                  onChange={(e) => {\r\n                    if (e.target.checked) {\r\n                      setNewThreadData(prev => ({\r\n                        ...prev,\r\n                        participants: [...prev.participants, staff.id]\r\n                      }));\r\n                    } else {\r\n                      setNewThreadData(prev => ({\r\n                        ...prev,\r\n                        participants: prev.participants.filter(id => id !== staff.id)\r\n                      }));\r\n                    }\r\n                  }}\r\n                />\r\n                <UserAvatar user={staff} size={24} />\r\n                <span>{staff.first_name} {staff.last_name}</span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-sm font-medium mb-2\">Initial Message (Optional)</label>\r\n          <textarea\r\n            value={newThreadData.initial_message}\r\n            onChange={(e) => setNewThreadData(prev => ({ ...prev, initial_message: e.target.value }))}\r\n            className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            rows={3}\r\n            placeholder=\"Start the conversation...\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex justify-end space-x-2\">\r\n          <button\r\n            onClick={() => {\r\n              setShowNewThread(false);\r\n              setNewThreadData({ participants: [], subject: '', initial_message: '' });\r\n            }}\r\n            className=\"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleCreateThread}\r\n            disabled={!newThreadData.participants.length || !newThreadData.subject.trim()}\r\n            className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\"\r\n          >\r\n            Create Thread\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewThreadModal;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\messaging\\SearchModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleSearch' is defined but never used. Allowed unused args must match /^_/u.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport UserAvatar from './UserAvatar';\r\n\r\nconst SearchModal = ({\r\n  showSearch,\r\n  setShowSearch,\r\n  searchQuery,\r\n  setSearchQuery,\r\n  searchResults,\r\n  decryptedMessages,\r\n  handleSearch\r\n}) => {\r\n  if (!showSearch) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-96 overflow-hidden flex flex-col\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-bold\">Search Messages</h3>\r\n          <button\r\n            onClick={() => setShowSearch(false)}\r\n            className=\"text-gray-500 hover:text-gray-700\"\r\n          >\r\n            ├ù\r\n          </button>\r\n        </div>\r\n\r\n        <input\r\n          type=\"text\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n          className=\"w-full p-2 border rounded mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          placeholder=\"Search messages...\"\r\n          autoFocus\r\n        />\r\n\r\n        <div className=\"flex-1 overflow-y-auto\">\r\n          {searchResults.map(message => (\r\n            <div\r\n              key={message.id}\r\n              className=\"p-3 border-b hover:bg-gray-50 cursor-pointer\"\r\n              onClick={() => {\r\n                // Scroll to message\r\n                const messageElement = document.getElementById(`message-${message.id}`);\r\n                messageElement?.scrollIntoView({ behavior: 'smooth' });\r\n                setShowSearch(false);\r\n              }}\r\n            >\r\n              <div className=\"flex items-center space-x-2 mb-1\">\r\n                <UserAvatar user={message.sender} size={20} />\r\n                <span className=\"font-medium\">{message.sender_name}</span>\r\n                <span className=\"text-sm text-gray-500\">\r\n                  {new Date(message.timestamp).toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <p className=\"text-sm text-gray-700\">\r\n                {decryptedMessages.get(message.id) || 'Decrypting...'}\r\n              </p>\r\n            </div>\r\n          ))}\r\n          {searchQuery && searchResults.length === 0 && (\r\n            <p className=\"text-center text-gray-500 py-8\">No messages found</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchModal;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\messaging\\SettingsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EyeOff' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[242,245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[242,245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'notificationsEnabled' is defined but never used. Allowed unused args must match /^_/u.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setNotificationsEnabled' is defined but never used. Allowed unused args must match /^_/u.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\nimport { Settings, Volume2, VolumeX, Eye, EyeOff, Shield, Users, X } from 'lucide-react';\r\n\r\ninterface Theme {\r\n  name: string;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface SettingsModalProps {\r\n  showSettings: boolean;\r\n  setShowSettings: (show: boolean) => void;\r\n  currentTheme: string;\r\n  setCurrentTheme: (theme: string) => void;\r\n  notificationsEnabled: boolean;\r\n  setNotificationsEnabled: (enabled: boolean) => void;\r\n  themes: Record<string, Theme>;\r\n}\r\n\r\nconst SettingsModal: React.FC<SettingsModalProps> = ({\r\n  showSettings,\r\n  setShowSettings,\r\n  currentTheme,\r\n  setCurrentTheme,\r\n  notificationsEnabled,\r\n  setNotificationsEnabled,\r\n  themes\r\n}) => {\r\n  const [preferences, setPreferences] = useState({\r\n    sound_enabled: true,\r\n    notification_sound: 'default',\r\n    read_receipts_enabled: true,\r\n    typing_indicators_enabled: true,\r\n    last_seen_visible: true,\r\n    auto_delete_enabled: false,\r\n    auto_delete_days: 30,\r\n    markdown_enabled: true,\r\n    emoji_shortcuts_enabled: true,\r\n    font_size: 'medium'\r\n  });\r\n\r\n  const [blockedUsers, setBlockedUsers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('general');\r\n\r\n  // Load preferences and blocked users\r\n  useEffect(() => {\r\n    if (showSettings) {\r\n      loadPreferences();\r\n      loadBlockedUsers();\r\n    }\r\n  }, [showSettings]);\r\n\r\n  const loadPreferences = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('messaging/preferences/');\r\n      setPreferences(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to load preferences:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadBlockedUsers = async () => {\r\n    try {\r\n      const response = await api.get('messaging/blocked-users/');\r\n      setBlockedUsers(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to load blocked users:', error);\r\n    }\r\n  };\r\n\r\n  const savePreferences = async (updates) => {\r\n    try {\r\n      setSaving(true);\r\n      const response = await api.post('messaging/preferences/', updates);\r\n      setPreferences(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to save preferences:', error);\r\n      alert('Failed to save preferences');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleUnblock = async (userId) => {\r\n    try {\r\n      await api.post('messaging/blocked-users/unblock/', { user_id: userId });\r\n      setBlockedUsers(blockedUsers.filter(u => u.blocked !== userId));\r\n    } catch (error) {\r\n      console.error('Failed to unblock user:', error);\r\n      alert('Failed to unblock user');\r\n    }\r\n  };\r\n\r\n  const updatePreference = (key, value) => {\r\n    const updates = { ...preferences, [key]: value };\r\n    setPreferences(updates);\r\n    savePreferences({ [key]: value });\r\n  };\r\n\r\n  if (!showSettings) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <Settings className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n            <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Messaging Settings</h3>\r\n          </div>\r\n          <button\r\n            onClick={() => setShowSettings(false)}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-gray-500 dark:text-gray-400\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex border-b border-gray-200 dark:border-gray-700 px-6\">\r\n          {[\r\n            { id: 'general', label: 'General', icon: Settings },\r\n            { id: 'privacy', label: 'Privacy', icon: Shield },\r\n            { id: 'blocked', label: 'Blocked Users', icon: Users }\r\n          ].map(tab => {\r\n            const Icon = tab.icon;\r\n            return (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => setActiveTab(tab.id)}\r\n                className={`flex items-center space-x-2 px-4 py-3 border-b-2 transition-colors ${activeTab === tab.id\r\n                  ? 'border-blue-600 text-blue-600 dark:text-blue-400'\r\n                  : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\r\n                  }`}\r\n              >\r\n                <Icon className=\"w-4 h-4\" />\r\n                <span className=\"font-medium\">{tab.label}</span>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n              <p className=\"mt-4 text-gray-500\">Loading settings...</p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* General Tab */}\r\n              {activeTab === 'general' && (\r\n                <div className=\"space-y-6\">\r\n                  {/* Theme */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300\">Theme</label>\r\n                    <select\r\n                      value={currentTheme}\r\n                      onChange={(e) => setCurrentTheme(e.target.value)}\r\n                      className=\"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                    >\r\n                      {Object.entries(themes).map(([key, theme]) => (\r\n                        <option key={key} value={key}>{theme.name}</option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/* Sound Settings */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold mb-3 text-gray-700 dark:text-gray-300\">Sound & Notifications</label>\r\n                    <div className=\"space-y-3\">\r\n                      <label className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          {preferences.sound_enabled ? <Volume2 className=\"w-5 h-5 text-blue-600\" /> : <VolumeX className=\"w-5 h-5 text-gray-400\" />}\r\n                          <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Sound enabled</span>\r\n                        </div>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={preferences.sound_enabled}\r\n                          onChange={(e) => updatePreference('sound_enabled', e.target.checked)}\r\n                          className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                        />\r\n                      </label>\r\n\r\n                      {preferences.sound_enabled && (\r\n                        <div className=\"ml-8\">\r\n                          <label className=\"block text-xs font-medium mb-2 text-gray-600 dark:text-gray-400\">Notification Sound</label>\r\n                          <select\r\n                            value={preferences.notification_sound}\r\n                            onChange={(e) => updatePreference('notification_sound', e.target.value)}\r\n                            className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-sm\"\r\n                          >\r\n                            <option value=\"default\">Default</option>\r\n                            <option value=\"chime\">Chime</option>\r\n                            <option value=\"ding\">Ding</option>\r\n                            <option value=\"bell\">Bell</option>\r\n                            <option value=\"none\">Silent</option>\r\n                          </select>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Message Formatting */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold mb-3 text-gray-700 dark:text-gray-300\">Message Formatting</label>\r\n                    <div className=\"space-y-3\">\r\n                      <label className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Markdown formatting</span>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={preferences.markdown_enabled}\r\n                          onChange={(e) => updatePreference('markdown_enabled', e.target.checked)}\r\n                          className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                        />\r\n                      </label>\r\n\r\n                      <label className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Emoji shortcuts</span>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={preferences.emoji_shortcuts_enabled}\r\n                          onChange={(e) => updatePreference('emoji_shortcuts_enabled', e.target.checked)}\r\n                          className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                        />\r\n                      </label>\r\n\r\n                      <div>\r\n                        <label className=\"block text-xs font-medium mb-2 text-gray-600 dark:text-gray-400\">Font Size</label>\r\n                        <select\r\n                          value={preferences.font_size}\r\n                          onChange={(e) => updatePreference('font_size', e.target.value)}\r\n                          className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-sm\"\r\n                        >\r\n                          <option value=\"small\">Small</option>\r\n                          <option value=\"medium\">Medium</option>\r\n                          <option value=\"large\">Large</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Keyboard Shortcuts */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold mb-3 text-gray-700 dark:text-gray-300\">Keyboard Shortcuts</label>\r\n                    <div className=\"text-sm text-gray-600 dark:text-gray-400 space-y-2 pl-3\">\r\n                      <p><kbd className=\"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono\">Alt+ΓåÉ</kbd> Go back</p>\r\n                      <p><kbd className=\"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono\">Ctrl+K</kbd> Search messages</p>\r\n                      <p><kbd className=\"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono\">Ctrl+N</kbd> New thread</p>\r\n                      <p><kbd className=\"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono\">Ctrl+/</kbd> Focus message input</p>\r\n                      <p><kbd className=\"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono\">Esc</kbd> Close modals</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Privacy Tab */}\r\n              {activeTab === 'privacy' && (\r\n                <div className=\"space-y-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold mb-3 text-gray-700 dark:text-gray-300\">Privacy Controls</label>\r\n                    <div className=\"space-y-3\">\r\n                      <label className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                        <div>\r\n                          <div className=\"flex items-center space-x-3\">\r\n                            <Eye className=\"w-5 h-5 text-blue-600\" />\r\n                            <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Read receipts</span>\r\n                          </div>\r\n                          <p className=\"text-xs text-gray-500 dark-gray-400 mt-1 ml-8\">Let others know when you've read their messages</p>\r\n                        </div>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={preferences.read_receipts_enabled}\r\n                          onChange={(e) => updatePreference('read_receipts_enabled', e.target.checked)}\r\n                          className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                        />\r\n                      </label>\r\n\r\n                      <label className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                        <div>\r\n                          <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Typing indicators</span>\r\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">Show when you're typing</p>\r\n                        </div>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={preferences.typing_indicators_enabled}\r\n                          onChange={(e) => updatePreference('typing_indicators_enabled', e.target.checked)}\r\n                          className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                        />\r\n                      </label>\r\n\r\n                      <label className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                        <div>\r\n                          <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Last seen</span>\r\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">Show your online status</p>\r\n                        </div>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={preferences.last_seen_visible}\r\n                          onChange={(e) => updatePreference('last_seen_visible', e.target.checked)}\r\n                          className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                        />\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold mb-3 text-gray-700 dark:text-gray-300\">Auto-Delete Messages</label>\r\n                    <label className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\">\r\n                      <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Enable auto-delete</span>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={preferences.auto_delete_enabled}\r\n                        onChange={(e) => updatePreference('auto_delete_enabled', e.target.checked)}\r\n                        className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                      />\r\n                    </label>\r\n\r\n                    {preferences.auto_delete_enabled && (\r\n                      <div className=\"mt-3\">\r\n                        <label className=\"block text-xs font-medium mb-2 text-gray-600 dark:text-gray-400\">Delete messages after</label>\r\n                        <select\r\n                          value={preferences.auto_delete_days}\r\n                          onChange={(e) => updatePreference('auto_delete_days', parseInt(e.target.value))}\r\n                          className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-sm\"\r\n                        >\r\n                          <option value={1}>24 Hours</option>\r\n                          <option value={7}>7 Days</option>\r\n                          <option value={30}>30 Days</option>\r\n                          <option value={90}>90 Days</option>\r\n                          <option value={365}>Never</option>\r\n                        </select>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Blocked Users Tab */}\r\n              {activeTab === 'blocked' && (\r\n                <div className=\"space-y-4\">\r\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                    Blocked users cannot send you messages or see your online status.\r\n                  </p>\r\n\r\n                  {blockedUsers.length === 0 ? (\r\n                    <div className=\"text-center py-12\">\r\n                      <Users className=\"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4\" />\r\n                      <p className=\"text-gray-500 dark:text-gray-400\">No blocked users</p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"space-y-2\">\r\n                      {blockedUsers.map((blocked) => (\r\n                        <div\r\n                          key={blocked.id}\r\n                          className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl\"\r\n                        >\r\n                          <div>\r\n                            <p className=\"font-medium text-gray-900 dark:text-white\">{blocked.blocked_full_name}</p>\r\n                            <p className=\"text-sm text-gray-500 dark:text-gray-400\">@{blocked.blocked_username}</p>\r\n                          </div>\r\n                          <button\r\n                            onClick={() => handleUnblock(blocked.blocked)}\r\n                            className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors\"\r\n                          >\r\n                            Unblock\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        {saving && (\r\n          <div className=\"px-6 py-3 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-100 dark:border-blue-800\">\r\n            <p className=\"text-sm text-blue-600 dark:text-blue-400 flex items-center\">\r\n              <span className=\"animate-spin mr-2\">Γƒ│</span> Saving preferences...\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsModal;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\messaging\\UserAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\mobile\\ClientsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\mobile\\FieldToolbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\mobile\\MessagingTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\mobile\\MobileMetrics.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1677,1680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1677,1680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ModernStatCard from '../ui/modern/ModernStatCard';\r\nimport { formatCurrencyGHS } from '../../utils/formatters';\r\n\r\ninterface MobileMetricsProps {\r\n  metrics: {\r\n    scheduled_visits?: number;\r\n    completed_today?: number;\r\n    collections_due?: number;\r\n    new_applications?: number;\r\n  };\r\n  loadingMetrics: boolean;\r\n}\r\n\r\nconst MobileMetrics: React.FC<MobileMetricsProps> = ({ metrics, loadingMetrics }) => {\r\n  const fieldMetrics = [\r\n    {\r\n      label: 'Visits',\r\n      value: loadingMetrics ? '...' : (metrics?.scheduled_visits || 0).toString(),\r\n      icon: '≡ƒ¢╡',\r\n      colorClass: 'text-indigo-600 bg-indigo-50',\r\n      trend: 'neutral'\r\n    },\r\n    {\r\n      label: 'Done',\r\n      value: loadingMetrics ? '...' : (metrics?.completed_today || 0).toString(),\r\n      icon: 'Γ£à',\r\n      colorClass: 'text-emerald-600 bg-emerald-50',\r\n      trend: 'up'\r\n    },\r\n    {\r\n      label: 'Collect',\r\n      value: loadingMetrics ? '...' : formatCurrencyGHS(metrics?.collections_due || 0),\r\n      icon: '≡ƒÆ░',\r\n      colorClass: 'text-amber-600 bg-amber-50',\r\n      trend: 'neutral'\r\n    },\r\n    {\r\n      label: 'New Apps',\r\n      value: loadingMetrics ? '...' : (metrics?.new_applications || 0).toString(),\r\n      icon: '≡ƒô¥',\r\n      colorClass: 'text-sky-600 bg-sky-50',\r\n      trend: 'up'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n      {fieldMetrics.map((m, i) => (\r\n        <ModernStatCard\r\n          key={i}\r\n          label={m.label}\r\n          value={m.value}\r\n          icon={<span className=\"text-2xl\">{m.icon}</span>}\r\n          colorClass={m.colorClass}\r\n          trend={m.trend as any}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MobileMetrics;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\mobile\\MobileModals.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1829,1832],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1829,1832],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2206,2209],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2206,2209],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2787,2790],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2787,2790],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3322,3325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3322,3325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":105,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3814,3817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3814,3817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":111,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4040,4043],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4040,4043],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":117,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4259,4262],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4259,4262],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4799,4802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4799,4802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5078,5081],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5078,5081],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":145,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5294,5297],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5294,5297],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":160,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5796,5799],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5796,5799],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6056,6059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6056,6059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6384,6387],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6384,6387],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":189,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6895,6898],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6895,6898],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7174,7177],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7174,7177],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":202,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7405,7408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7405,7408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":209,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7687,7690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7687,7690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":215,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7909,7912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7909,7912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":230,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8423,8426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8423,8426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8654,8657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8654,8657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":243,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":243,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8928,8931],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8928,8931],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":248,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9125,9128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9125,9128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":254,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":254,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9361,9364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9361,9364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":269,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":269,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9845,9848],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9845,9848],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":280,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":280,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10277,10280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10277,10280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":286,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":286,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10592,10595],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10592,10595],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":295,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":295,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10984,10987],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10984,10987],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":27,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Button } from '../ui/Button';\r\nimport { Input } from '../ui/Input';\r\n\r\n// --- GENERIC MOBILE MODAL ---\r\ninterface MobileModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    title: string;\r\n    children: React.ReactNode;\r\n    footer?: React.ReactNode;\r\n}\r\n\r\nconst MobileModal: React.FC<MobileModalProps> = ({ isOpen, onClose, title, children, footer }) => {\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm\">\r\n            <div className=\"w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden border-2 border-gray-100 animate-scale-in\">\r\n                {/* Header */}\r\n                <div className=\"px-5 py-4 bg-gray-50 border-b border-gray-100 flex justify-between items-center\">\r\n                    <h3 className=\"m-0 text-lg font-black text-gray-800\">{title}</h3>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"bg-transparent border-none text-2xl cursor-pointer text-gray-400 hover:text-gray-600 transition-colors\"\r\n                    >\r\n                        ├ù\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div className=\"p-5 max-h-[70vh] overflow-y-auto\">\r\n                    {children}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                {footer && (\r\n                    <div className=\"px-5 py-4 border-t border-gray-100 flex justify-end gap-3 bg-gray-50/50\">\r\n                        {footer}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- STYLED INPUTS ---\r\nconst InputGroup = ({ label, type = 'text', value, onChange, placeholder, options }: any) => (\r\n    <div className=\"mb-4\">\r\n        {options ? (\r\n            <div className=\"relative\">\r\n                <Input\r\n                    label={label}\r\n                    as=\"select\"\r\n                    value={value}\r\n                    onChange={onChange}\r\n                    className=\"w-full font-bold\"\r\n                >\r\n                    {options.map((opt: any) => (\r\n                        <option key={opt.value} value={opt.value}>{opt.label}</option>\r\n                    ))}\r\n                </Input>\r\n            </div>\r\n        ) : (\r\n            <Input\r\n                label={label}\r\n                type={type}\r\n                value={value}\r\n                onChange={onChange}\r\n                placeholder={placeholder}\r\n                className=\"w-full font-bold\"\r\n            />\r\n        )}\r\n    </div>\r\n);\r\n\r\n// --- SPECIFIC MODALS ---\r\n\r\nexport const DepositModal = ({ isOpen, onClose, formData, setFormData, onSubmit }: any) => (\r\n    <MobileModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        title=\"≡ƒôÑ New Deposit\"\r\n        footer={\r\n            <>\r\n                <Button onClick={onClose} variant=\"ghost\" className=\"text-gray-600\">Cancel</Button>\r\n                <Button onClick={onSubmit} variant=\"success\">Process Deposit ≡ƒÆ░</Button>\r\n            </>\r\n        }\r\n    >\r\n        <InputGroup\r\n            label=\"Member ID / Account Number\"\r\n            value={formData.account_number || formData.member_id}\r\n            onChange={(e: any) => setFormData({ ...formData, account_number: e.target.value })}\r\n            placeholder=\"Enter account number...\"\r\n        />\r\n        <InputGroup\r\n            label=\"Account Type\"\r\n            value={formData.account_type || 'daily_susu'}\r\n            options={[\r\n                { value: 'daily_susu', label: 'Daily Susu' },\r\n                { value: 'savings', label: 'Savings' },\r\n                { value: 'checking', label: 'Checking' }\r\n            ]}\r\n            onChange={(e: any) => setFormData({ ...formData, account_type: e.target.value })}\r\n        />\r\n        <InputGroup\r\n            label=\"Amount (GHS)\"\r\n            type=\"number\"\r\n            value={formData.amount}\r\n            onChange={(e: any) => setFormData({ ...formData, amount: e.target.value })}\r\n            placeholder=\"0.00\"\r\n        />\r\n    </MobileModal>\r\n);\r\n\r\nexport const WithdrawalModal = ({ isOpen, onClose, formData, setFormData, onSubmit }: any) => (\r\n    <MobileModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        title=\"≡ƒôñ New Withdrawal\"\r\n        footer={\r\n            <>\r\n                <Button onClick={onClose} variant=\"ghost\" className=\"text-gray-600\">Cancel</Button>\r\n                <Button onClick={onSubmit} variant=\"danger\">Process Withdrawal ≡ƒÆ╕</Button>\r\n            </>\r\n        }\r\n    >\r\n        <InputGroup\r\n            label=\"Member ID / Account Number\"\r\n            value={formData.account_number || formData.member_id}\r\n            onChange={(e: any) => setFormData({ ...formData, account_number: e.target.value })}\r\n            placeholder=\"Enter account number...\"\r\n        />\r\n        <InputGroup\r\n            label=\"Amount (GHS)\"\r\n            type=\"number\"\r\n            value={formData.amount}\r\n            onChange={(e: any) => setFormData({ ...formData, amount: e.target.value })}\r\n            placeholder=\"0.00\"\r\n        />\r\n    </MobileModal>\r\n);\r\n\r\nexport const PaymentModal = ({ isOpen, onClose, formData, setFormData, onSubmit }: any) => (\r\n    <MobileModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        title=\"≡ƒÆ╡ Collect Payment\"\r\n        footer={\r\n            <>\r\n                <Button onClick={onClose} variant=\"ghost\" className=\"text-gray-600\">Cancel</Button>\r\n                <Button onClick={onSubmit} variant=\"primary\">Collect Payment ≡ƒÆ│</Button>\r\n            </>\r\n        }\r\n    >\r\n        <InputGroup\r\n            label=\"Client Name / ID\"\r\n            value={formData.member_id}\r\n            onChange={(e: any) => setFormData({ ...formData, member_id: e.target.value })}\r\n            placeholder=\"Client...\"\r\n        />\r\n        <InputGroup\r\n            label=\"Amount (GHS)\"\r\n            type=\"number\"\r\n            value={formData.amount}\r\n            onChange={(e: any) => setFormData({ ...formData, amount: e.target.value })}\r\n            placeholder=\"0.00\"\r\n        />\r\n        <p className=\"text-xs text-gray-500 mt-2 italic\">Use this for loan repayments or generic collections.</p>\r\n    </MobileModal>\r\n);\r\n\r\nexport const LoanModal = ({ isOpen, onClose, formData, setFormData, onSubmit }: any) => (\r\n    <MobileModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        title=\"≡ƒñ¥ Loan Application\"\r\n        footer={\r\n            <>\r\n                <Button onClick={onClose} variant=\"ghost\" className=\"text-gray-600\">Cancel</Button>\r\n                <Button onClick={onSubmit} variant=\"secondary\">Submit Application ≡ƒô¥</Button>\r\n            </>\r\n        }\r\n    >\r\n        <InputGroup\r\n            label=\"Applicant Name\"\r\n            value={formData.applicant_name}\r\n            onChange={(e: any) => setFormData({ ...formData, applicant_name: e.target.value })}\r\n            placeholder=\"Full Name\"\r\n        />\r\n        <InputGroup\r\n            label=\"Loan Amount Requested\"\r\n            type=\"number\"\r\n            value={formData.loan_amount}\r\n            onChange={(e: any) => setFormData({ ...formData, loan_amount: e.target.value })}\r\n            placeholder=\"0.00\"\r\n        />\r\n        <InputGroup\r\n            label=\"Purpose\"\r\n            value={formData.loan_purpose}\r\n            onChange={(e: any) => setFormData({ ...formData, loan_purpose: e.target.value })}\r\n            placeholder=\"Reason for loan...\"\r\n        />\r\n        <InputGroup\r\n            label=\"Monthly Income\"\r\n            type=\"number\"\r\n            value={formData.monthly_income}\r\n            onChange={(e: any) => setFormData({ ...formData, monthly_income: e.target.value })}\r\n            placeholder=\"0.00\"\r\n        />\r\n    </MobileModal>\r\n);\r\n\r\nexport const VisitModal = ({ isOpen, onClose, formData, setFormData, onSubmit }: any) => (\r\n    <MobileModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        title=\"≡ƒ¢╡ Schedule Visit\"\r\n        footer={\r\n            <>\r\n                <Button onClick={onClose} variant=\"ghost\" className=\"text-gray-600\">Cancel</Button>\r\n                <Button onClick={onSubmit} variant=\"warning\" className=\"text-white\">Schedule ≡ƒôà</Button>\r\n            </>\r\n        }\r\n    >\r\n        <InputGroup\r\n            label=\"Client Name\"\r\n            value={formData.client_name}\r\n            onChange={(e: any) => setFormData({ ...formData, client_name: e.target.value })}\r\n            placeholder=\"Name...\"\r\n        />\r\n        <InputGroup\r\n            label=\"Location\"\r\n            value={formData.location}\r\n            onChange={(e: any) => setFormData({ ...formData, location: e.target.value })}\r\n            placeholder=\"Area/Town\"\r\n        />\r\n        <InputGroup\r\n            label=\"Date & Time\"\r\n            type=\"datetime-local\"\r\n            value={formData.scheduled_time}\r\n            onChange={(e: any) => setFormData({ ...formData, scheduled_time: e.target.value })}\r\n        />\r\n        <InputGroup\r\n            label=\"Purpose\"\r\n            value={formData.purpose}\r\n            onChange={(e: any) => setFormData({ ...formData, purpose: e.target.value })}\r\n            placeholder=\"Collection, Sales, etc.\"\r\n        />\r\n    </MobileModal>\r\n);\r\n\r\nexport const MessageModal = ({ isOpen, onClose, formData, setFormData, onSubmit }: any) => (\r\n    <MobileModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        title=\"≡ƒÆ¼ New Message\"\r\n        footer={\r\n            <>\r\n                <Button onClick={onClose} variant=\"ghost\" className=\"text-gray-600\">Cancel</Button>\r\n                <Button onClick={onSubmit} variant=\"primary\">Send Message ≡ƒô¿</Button>\r\n            </>\r\n        }\r\n    >\r\n        <InputGroup\r\n            label=\"Subject\"\r\n            value={formData.subject}\r\n            onChange={(e: any) => setFormData({ ...formData, subject: e.target.value })}\r\n            placeholder=\"Message Subject...\"\r\n        />\r\n        <InputGroup\r\n            label=\"Priority\"\r\n            value={formData.priority}\r\n            options={[\r\n                { value: 'low', label: 'Low' },\r\n                { value: 'medium', label: 'Medium' },\r\n                { value: 'high', label: 'High' }\r\n            ]}\r\n            onChange={(e: any) => setFormData({ ...formData, priority: e.target.value })}\r\n        />\r\n        <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-bold text-gray-500 mb-1\">Message</label>\r\n            <textarea\r\n                value={formData.content || formData.message}\r\n                onChange={(e: any) => setFormData({ ...formData, content: e.target.value })}\r\n                placeholder=\"Type your message...\"\r\n                rows={4}\r\n                className=\"w-full p-3 rounded-lg border-2 border-gray-200 outline-none focus:border-blue-400 font-medium text-gray-700 resize-y\"\r\n            />\r\n        </div>\r\n    </MobileModal>\r\n);\r\n\r\nexport const KycModal = ({ isOpen, onClose }: any) => (\r\n    <MobileModal\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        title=\"≡ƒô╕ KYC Document\"\r\n        footer={\r\n            <Button onClick={onClose} variant=\"ghost\" className=\"text-gray-600\">Close</Button>\r\n        }\r\n    >\r\n        <p className=\"text-center text-gray-500 py-8 italic\">KYC Upload feature coming soon! ≡ƒÜº</p>\r\n    </MobileModal>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\mobile\\MobileSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\mobile\\VisitsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\shared\\CameraCapture.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'stopCamera'. Either include it or remove the dependency array.","line":78,"column":8,"nodeType":"ArrayExpression","endLine":78,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [onPhotoCapture, stopCamera]","fix":{"range":[2821,2837],"text":"[onPhotoCapture, stopCamera]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useCallback } from 'react';\r\n\r\ninterface CameraCaptureProps {\r\n    onPhotoCapture: (photoData: string | null) => void;\r\n    photo?: string | null;\r\n    label?: string;\r\n    description?: string;\r\n    showPreview?: boolean;\r\n    previewWidth?: number;\r\n    previewHeight?: number;\r\n}\r\n\r\n/**\r\n * Shared Camera Capture Component\r\n * Provides webcam capture and file upload functionality for customer photos.\r\n * Used by Cashier Account Opening and Mobile Banker Client Registration.\r\n */\r\nconst CameraCapture: React.FC<CameraCaptureProps> = ({\r\n    onPhotoCapture,\r\n    photo = null,\r\n    label = '≡ƒô╖ Customer Photo',\r\n    description = 'Capture or upload a passport-style photo of the customer for identification.',\r\n    showPreview = true,\r\n    previewWidth = 150,\r\n    previewHeight = 180,\r\n}) => {\r\n    const [showCamera, setShowCamera] = useState(false);\r\n    const [cameraError, setCameraError] = useState<string | null>(null);\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Start camera\r\n    const startCamera = useCallback(async () => {\r\n        try {\r\n            setCameraError(null);\r\n            setShowCamera(true);\r\n\r\n            // Small delay to ensure video element is in DOM\r\n            await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n            const stream = await navigator.mediaDevices.getUserMedia({\r\n                video: {\r\n                    facingMode: 'user',\r\n                    width: { ideal: 640 },\r\n                    height: { ideal: 480 }\r\n                }\r\n            });\r\n\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = stream;\r\n                videoRef.current.onloadedmetadata = () => {\r\n                    videoRef.current?.play().catch(console.error);\r\n                };\r\n            }\r\n        } catch (error) {\r\n            console.error('Error accessing camera:', error);\r\n            setShowCamera(false);\r\n            setCameraError('Unable to access camera. Please check permissions or upload a photo instead.');\r\n        }\r\n    }, []);\r\n\r\n    // Capture photo from camera\r\n    const capturePhoto = useCallback(() => {\r\n        if (videoRef.current && canvasRef.current) {\r\n            const canvas = canvasRef.current;\r\n            const video = videoRef.current;\r\n            canvas.width = video.videoWidth;\r\n            canvas.height = video.videoHeight;\r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n                ctx.drawImage(video, 0, 0);\r\n                const dataUrl = canvas.toDataURL('image/jpeg', 0.8);\r\n                onPhotoCapture(dataUrl);\r\n                stopCamera();\r\n            }\r\n        }\r\n    }, [onPhotoCapture]);\r\n\r\n    // Stop camera\r\n    const stopCamera = useCallback(() => {\r\n        if (videoRef.current && videoRef.current.srcObject) {\r\n            const stream = videoRef.current.srcObject as MediaStream;\r\n            stream.getTracks().forEach(track => track.stop());\r\n            videoRef.current.srcObject = null;\r\n        }\r\n        setShowCamera(false);\r\n    }, []);\r\n\r\n    // Handle file upload\r\n    const handleFileUpload = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                onPhotoCapture(reader.result as string);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    }, [onPhotoCapture]);\r\n\r\n    // Remove photo\r\n    const removePhoto = useCallback(() => {\r\n        onPhotoCapture(null);\r\n        if (fileInputRef.current) {\r\n            fileInputRef.current.value = '';\r\n        }\r\n    }, [onPhotoCapture]);\r\n\r\n    const buttonBaseStyle: React.CSSProperties = {\r\n        padding: '10px 20px',\r\n        borderRadius: '8px',\r\n        border: '2px solid #2D3436',\r\n        fontWeight: 'bold',\r\n        fontSize: '14px',\r\n        cursor: 'pointer',\r\n        transition: 'all 0.2s',\r\n    };\r\n\r\n    const primaryButtonStyle: React.CSSProperties = {\r\n        ...buttonBaseStyle,\r\n        backgroundColor: '#6C5CE7',\r\n        color: 'white',\r\n    };\r\n\r\n    const successButtonStyle: React.CSSProperties = {\r\n        ...buttonBaseStyle,\r\n        backgroundColor: '#00B894',\r\n        color: 'white',\r\n    };\r\n\r\n    const dangerButtonStyle: React.CSSProperties = {\r\n        ...buttonBaseStyle,\r\n        backgroundColor: '#FF7675',\r\n        color: 'white',\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            marginBottom: '24px',\r\n            padding: '20px',\r\n            backgroundColor: '#F8F9FA',\r\n            borderRadius: '12px',\r\n            border: '2px dashed #DFE6E9'\r\n        }}>\r\n            <h3 style={{\r\n                margin: '0 0 15px 0',\r\n                color: '#2D3436',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '10px'\r\n            }}>\r\n                {label}\r\n            </h3>\r\n\r\n            {cameraError && (\r\n                <div style={{\r\n                    padding: '10px',\r\n                    marginBottom: '15px',\r\n                    borderRadius: '8px',\r\n                    backgroundColor: '#FFEBEE',\r\n                    color: '#C62828',\r\n                    border: '1px solid #FFCDD2'\r\n                }}>\r\n                    {cameraError}\r\n                </div>\r\n            )}\r\n\r\n            <div style={{ display: 'flex', gap: '20px', alignItems: 'flex-start' }}>\r\n                {/* Photo Preview */}\r\n                {showPreview && (\r\n                    <div style={{\r\n                        width: `${previewWidth}px`,\r\n                        height: `${previewHeight}px`,\r\n                        backgroundColor: '#E0E0E0',\r\n                        borderRadius: '12px',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        overflow: 'hidden',\r\n                        border: '3px solid #DFE6E9',\r\n                        flexShrink: 0,\r\n                    }}>\r\n                        {photo ? (\r\n                            <img src={photo} alt=\"Customer\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                        ) : showCamera ? (\r\n                            <video ref={videoRef} autoPlay playsInline style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                        ) : (\r\n                            <div style={{ textAlign: 'center', color: '#636E72' }}>\r\n                                <div style={{ fontSize: '48px' }}>≡ƒæñ</div>\r\n                                <div style={{ fontSize: '12px' }}>No Photo</div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Camera/Upload Controls */}\r\n                <div style={{ flex: 1 }}>\r\n                    <p style={{ margin: '0 0 15px 0', color: '#636E72', fontSize: '14px' }}>\r\n                        {description}\r\n                    </p>\r\n\r\n                    <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\r\n                        {!showCamera && !photo && (\r\n                            <>\r\n                                <button type=\"button\" onClick={startCamera} style={primaryButtonStyle}>\r\n                                    ≡ƒô╕ Open Camera\r\n                                </button>\r\n                                <button type=\"button\" onClick={() => fileInputRef.current?.click()} style={primaryButtonStyle}>\r\n                                    ≡ƒôü Upload Photo\r\n                                </button>\r\n                            </>\r\n                        )}\r\n\r\n                        {showCamera && (\r\n                            <>\r\n                                <button type=\"button\" onClick={capturePhoto} style={successButtonStyle}>\r\n                                    ≡ƒô╖ Capture\r\n                                </button>\r\n                                <button type=\"button\" onClick={stopCamera} style={dangerButtonStyle}>\r\n                                    Γ£ò Cancel\r\n                                </button>\r\n                            </>\r\n                        )}\r\n\r\n                        {photo && (\r\n                            <>\r\n                                <button type=\"button\" onClick={removePhoto} style={dangerButtonStyle}>\r\n                                    ≡ƒùæ∩╕Å Remove Photo\r\n                                </button>\r\n                                <button type=\"button\" onClick={startCamera} style={primaryButtonStyle}>\r\n                                    ≡ƒöä Retake\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={fileInputRef}\r\n                        accept=\"image/*\"\r\n                        onChange={handleFileUpload}\r\n                        style={{ display: 'none' }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CameraCapture;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\staff\\StaffPayslipViewer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1297,1300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1297,1300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../../services/api';\r\n\r\ninterface Payslip {\r\n    id: number;\r\n    month: number;\r\n    year: number;\r\n    pay_period_start: string;\r\n    pay_period_end: string;\r\n    gross_pay: string;\r\n    net_salary: string;\r\n    is_paid: boolean;\r\n    created_at: string;\r\n}\r\n\r\nconst StaffPayslipViewer: React.FC = () => {\r\n    const [payslips, setPayslips] = useState<Payslip[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchMyPayslips();\r\n    }, []);\r\n\r\n    const fetchMyPayslips = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await api.get('operations/payslips/my_payslips/');\r\n            setPayslips(response.data || []);\r\n            setError('');\r\n        } catch (err) {\r\n            console.error('Error fetching payslips:', err);\r\n            setError('Failed to load payslips.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDownload = async (id: number, month: number, year: number) => {\r\n        try {\r\n            const response = await api.get(`operations/payslips/${id}/download/`, {\r\n                responseType: 'blob'\r\n            } as any);\r\n            const url = window.URL.createObjectURL(new Blob([response.data]));\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', `payslip_${month}_${year}.pdf`);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            link.parentNode?.removeChild(link);\r\n        } catch (err) {\r\n            console.error('Download error:', err);\r\n            alert('Failed to download payslip.');\r\n        }\r\n    };\r\n\r\n    const getMonthName = (month: number) => {\r\n        return new Date(2000, month - 1, 1).toLocaleString('default', { month: 'long' });\r\n    };\r\n\r\n    const formatCurrency = (amount: string) => {\r\n        return new Intl.NumberFormat('en-GH', { style: 'currency', currency: 'GHS' }).format(parseFloat(amount));\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl shadow-sm border border-secondary-200\">\r\n            <h2 className=\"text-2xl font-bold text-secondary-900 mb-6\">≡ƒôä My Payslips</h2>\r\n\r\n            {error && (\r\n                <div className=\"bg-error-50 text-error-700 p-4 rounded-lg mb-6 border border-error-200\">\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            {loading ? (\r\n                <div className=\"text-center py-12 text-secondary-500\">Loading payslips...</div>\r\n            ) : payslips.length === 0 ? (\r\n                <div className=\"text-center py-12 bg-secondary-50 rounded-lg border border-dashed border-secondary-300\">\r\n                    <p className=\"text-secondary-500 font-medium\">No payslips available yet.</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left border-collapse\">\r\n                        <thead>\r\n                            <tr className=\"bg-secondary-50 border-b border-secondary-200\">\r\n                                <th className=\"p-4 font-bold text-secondary-700\">Period</th>\r\n                                <th className=\"p-4 font-bold text-secondary-700 text-right\">Gross Pay</th>\r\n                                <th className=\"p-4 font-bold text-secondary-700 text-right\">Net Take Home</th>\r\n                                <th className=\"p-4 font-bold text-secondary-700 text-center\">Status</th>\r\n                                <th className=\"p-4 font-bold text-secondary-700 text-center\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {payslips.map((payslip) => (\r\n                                <tr key={payslip.id} className=\"border-b border-secondary-100 hover:bg-secondary-50 transition-colors\">\r\n                                    <td className=\"p-4\">\r\n                                        <div className=\"font-bold text-secondary-900\">{getMonthName(payslip.month)} {payslip.year}</div>\r\n                                        <div className=\"text-xs text-secondary-500\">{payslip.pay_period_start} to {payslip.pay_period_end}</div>\r\n                                    </td>\r\n                                    <td className=\"p-4 text-right font-mono text-secondary-700\">\r\n                                        {formatCurrency(payslip.gross_pay)}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-right font-mono font-bold text-success-700\">\r\n                                        {formatCurrency(payslip.net_salary)}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-center\">\r\n                                        <span className={`px-3 py-1 rounded-full text-xs font-bold ${payslip.is_paid\r\n                                            ? 'bg-success-100 text-success-700'\r\n                                            : 'bg-warning-100 text-warning-700'\r\n                                            }`}>\r\n                                            {payslip.is_paid ? 'PAID' : 'PENDING'}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"p-4 text-center\">\r\n                                        <button\r\n                                            onClick={() => handleDownload(payslip.id, payslip.month, payslip.year)}\r\n                                            className=\"text-primary-600 hover:text-primary-800 font-bold hover:underline flex items-center justify-center gap-1 mx-auto\"\r\n                                        >\r\n                                            <span>≡ƒôÑ</span> Download PDF\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StaffPayslipViewer;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ui\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ui\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ui\\StatCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ui\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ui\\modern\\GlassCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\components\\ui\\modern\\ModernStatCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\context\\AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":85,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2363,2366],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2363,2366],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useState, useContext, useEffect, ReactNode } from 'react';\r\nimport { authService } from '../services/api';\r\n\r\ninterface User {\r\n  id: number;\r\n  username: string;\r\n  email: string;\r\n  first_name?: string;\r\n  last_name?: string;\r\n  role?: string;\r\n  needs_verification?: boolean;\r\n  phone?: string;\r\n  two_factor_phone?: string;\r\n  otp_verified?: boolean;\r\n}\r\n\r\ninterface AuthResponse {\r\n  authenticated: boolean;\r\n  user?: User;\r\n}\r\n\r\nexport interface AuthContextType {\r\n  user: User | null;\r\n  login: (username: string, password: string) => Promise<{ success: boolean; error?: string }>;\r\n  logout: () => Promise<void>;\r\n  checkAuth: () => Promise<void>;\r\n  getDashboardRoute: () => string;\r\n  loading: boolean;\r\n  isAuthenticated: boolean;\r\n\r\n  isManager: boolean;\r\n  isCashier: boolean;\r\n  isMobileBanker: boolean;\r\n  isOperationsManager: boolean;\r\n  isMember: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\n// Export for backward compatibility with useAuth.js and other imports\r\nexport { AuthContext };\r\n\r\nexport const useAuth = (): AuthContextType => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const checkAuth = async (): Promise<void> => {\r\n    try {\r\n      if (typeof authService.checkAuth !== 'function') {\r\n        console.error('checkAuth is not a function - checking exports');\r\n        return;\r\n      }\r\n      const data: AuthResponse = await authService.checkAuth();\r\n      if (data.authenticated && data.user) {\r\n        setUser(data.user);\r\n      }\r\n    } catch (error) {\r\n      console.error('Auth check failed:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const login = async (username: string, password: string): Promise<{ success: boolean; error?: string }> => {\r\n    try {\r\n      const data = await authService.login(username, password);\r\n      setUser(data.user);\r\n      return { success: true };\r\n    } catch (error: any) {\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const logout = async (): Promise<void> => {\r\n    try {\r\n      await authService.logout();\r\n      setUser(null);\r\n    } catch (error) {\r\n      console.error('Logout failed:', error);\r\n    }\r\n  };\r\n\r\n  // Derived role states\r\n  const isManager = user?.role === 'manager';\r\n  const isCashier = user?.role === 'cashier';\r\n  const isMobileBanker = user?.role === 'mobile_banker';\r\n  const isOperationsManager = user?.role === 'operations_manager';\r\n  const isMember = user?.role === 'customer' || user?.role === 'member';\r\n\r\n  const getDashboardRoute = () => {\r\n    if (isManager) return '/manager-dashboard';\r\n    if (isCashier) return '/cashier-dashboard';\r\n    if (isMobileBanker) return '/mobile-banker-dashboard';\r\n    if (isOperationsManager) return '/operations-dashboard';\r\n    return '/dashboard';\r\n  };\r\n\r\n  const value: AuthContextType = {\r\n    user,\r\n    login,\r\n    logout,\r\n    checkAuth,\r\n    getDashboardRoute,\r\n    loading,\r\n    isAuthenticated: !!user,\r\n    isManager,\r\n    isCashier,\r\n    isMobileBanker,\r\n    isOperationsManager,\r\n    isMember,\r\n  };\r\n\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\context\\ThemeContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\hooks\\useAuth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\hooks\\useWebSocket.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[184,187],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[184,187],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":69,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":69,"endColumn":22,"suggestions":[{"fix":{"range":[2054,2148],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\ninterface WebSocketMessage {\r\n  type: string;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface UseWebSocketOptions {\r\n  url: string;\r\n  onMessage?: (message: WebSocketMessage) => void;\r\n  onOpen?: () => void;\r\n  onClose?: () => void;\r\n  onError?: (error: Event) => void;\r\n  reconnectAttempts?: number;\r\n  reconnectInterval?: number;\r\n}\r\n\r\nexport const useWebSocket = ({\r\n  url,\r\n  onMessage,\r\n  onOpen,\r\n  onClose,\r\n  onError,\r\n  reconnectAttempts = 5,\r\n  reconnectInterval = 3000,\r\n}: UseWebSocketOptions) => {\r\n  const { user } = useAuth();\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [lastMessage, setLastMessage] = useState<WebSocketMessage | null>(null);\r\n  const wsRef = useRef<WebSocket | null>(null);\r\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const reconnectCountRef = useRef(0);\r\n\r\n  const connect = useCallback(() => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      // SECURITY: WebSocket authentication via cookies (not URL query params)\r\n      // The backend middleware reads the 'access' cookie for authentication\r\n      // Do NOT pass tokens in URL - they get logged and exposed in browser history\r\n      wsRef.current = new WebSocket(url);\r\n\r\n      wsRef.current.onopen = () => {\r\n\r\n        setIsConnected(true);\r\n        reconnectCountRef.current = 0;\r\n        onOpen?.();\r\n      };\r\n\r\n      wsRef.current.onmessage = (event) => {\r\n        try {\r\n          const message: WebSocketMessage = JSON.parse(event.data);\r\n          setLastMessage(message);\r\n          onMessage?.(message);\r\n        } catch (error) {\r\n          console.error('Failed to parse WebSocket message:', error);\r\n        }\r\n      };\r\n\r\n      wsRef.current.onclose = () => {\r\n\r\n        setIsConnected(false);\r\n        onClose?.();\r\n\r\n        // Attempt to reconnect if not intentionally closed\r\n        if (reconnectCountRef.current < reconnectAttempts) {\r\n          reconnectCountRef.current += 1;\r\n          console.log(`Attempting to reconnect (${reconnectCountRef.current}/${reconnectAttempts})...`);\r\n          reconnectTimeoutRef.current = setTimeout(() => {\r\n            connect();\r\n          }, reconnectInterval);\r\n        }\r\n      };\r\n\r\n      wsRef.current.onerror = (error) => {\r\n        console.error('WebSocket error:', error);\r\n        onError?.(error);\r\n      };\r\n    } catch (error) {\r\n      console.error('Failed to create WebSocket connection:', error);\r\n    }\r\n  }, [url, user, onMessage, onOpen, onClose, onError, reconnectAttempts, reconnectInterval]);\r\n\r\n  const disconnect = useCallback(() => {\r\n    if (reconnectTimeoutRef.current) {\r\n      clearTimeout(reconnectTimeoutRef.current);\r\n      reconnectTimeoutRef.current = null;\r\n    }\r\n\r\n    if (wsRef.current) {\r\n      wsRef.current.close();\r\n      wsRef.current = null;\r\n    }\r\n\r\n    setIsConnected(false);\r\n  }, []);\r\n\r\n  const sendMessage = useCallback((message: WebSocketMessage) => {\r\n    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\r\n      wsRef.current.send(JSON.stringify(message));\r\n    } else {\r\n      console.warn('WebSocket is not connected. Message not sent:', message);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      connect();\r\n    } else {\r\n      disconnect();\r\n    }\r\n\r\n    return () => {\r\n      disconnect();\r\n    };\r\n  }, [user, connect, disconnect]);\r\n\r\n  return {\r\n    isConnected,\r\n    lastMessage,\r\n    sendMessage,\r\n    connect,\r\n    disconnect,\r\n  };\r\n};\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\lib\\api.deprecated.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[157,160],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[157,160],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[598,601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[598,601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useQuery\" is called in function \"(api as any).useGetTransactions\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":28,"column":10,"nodeType":"Identifier","endLine":28,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[839,842],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[839,842],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useQuery\" is called in function \"(api as any).useGetAccounts\" that is neither a React function component nor a custom React Hook function. React component names must start with an uppercase letter. React Hook names must start with the word \"use\".","line":38,"column":10,"nodeType":"Identifier","endLine":38,"endColumn":18}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/lib/api.ts\r\nimport axios from 'axios';\r\nimport { useQuery } from '@tanstack/react-query';\r\n\r\nclass ApiClient {\r\n  instance;\r\n\r\n  constructor(options: any) {\r\n    this.instance = axios.create(options);\r\n  }\r\n}\r\n\r\nexport const api = new ApiClient({\r\n  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:8000/api',\r\n});\r\n\r\n// Add auth token if using JWT\r\napi.instance.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('access_token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Add hooks\r\n(api as any).useGetTransactions = () => {\r\n  return useQuery({\r\n    queryKey: ['transactions'],\r\n    queryFn: async () => {\r\n      const response = await api.instance.get('/transactions/');\r\n      return response.data;\r\n    },\r\n  });\r\n};\r\n\r\n(api as any).useGetAccounts = () => {\r\n  return useQuery({\r\n    queryKey: ['accounts'],\r\n    queryFn: async () => {\r\n      const response = await api.instance.get('/banking/accounts/');\r\n      return response.data;\r\n    },\r\n  });\r\n};\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\lib\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Accounts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\BankingOperations.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarChart' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":73,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":81},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bar' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":83,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":86},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[790,793],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[790,793],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[850,853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[850,853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[914,917],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[914,917],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[968,971],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[968,971],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1024,1027],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1024,1027],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1088,1091],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1088,1091],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1171,1174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1171,1174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1239,1242],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1239,1242],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1307,1310],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1307,1310],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1422,1425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1422,1425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1482,1485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1482,1485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1623,1626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1623,1626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":186,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5646,5649],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5646,5649],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":186,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5667,5670],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5667,5670],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":186,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5687,5690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5687,5690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":195,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6129,6132],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6129,6132],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6326,6329],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6326,6329],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6529,6532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6529,6532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6724,6727],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6724,6727],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":272,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":272,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8941,8944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8941,8944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":635,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":635,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26616,26619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26616,26619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":680,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":680,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28653,28656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28653,28656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":762,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":762,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33275,33278],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33275,33278],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'performanceMetrics' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPerformanceMetrics' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":33,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reportFilters' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":35,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setReportFilters' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":35,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":59,"column":6,"nodeType":"ArrayExpression","endLine":59,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [activeView, fetchData]","fix":{"range":[2235,2247],"text":"[activeView, fetchData]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { authService } from '../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, BarChart, Bar, PieChart, Pie, Cell, ResponsiveContainer } from 'recharts';\r\nimport GlassCard from '../components/ui/modern/GlassCard';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Input } from '../components/ui/Input';\r\n\r\nfunction BankingOperations() {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [activeView, setActiveView] = useState('loans');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Banking data state\r\n  const [loans, setLoans] = useState<any[]>([]);\r\n  const [complaints, setComplaints] = useState<any[]>([]);\r\n  const [cashAdvances, setCashAdvances] = useState<any[]>([]);\r\n  const [refunds, setRefunds] = useState<any[]>([]);\r\n  const [accounts, setAccounts] = useState<any[]>([]);\r\n  const [pendingLoans, setPendingLoans] = useState<any[]>([]);\r\n\r\n  // New feature states\r\n  const [messages, setMessages] = useState<any[]>([]);\r\n  const [messageThreads, setMessageThreads] = useState<any[]>([]);\r\n  const [selectedThread, setSelectedThread] = useState<any>(null);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [reportsData, setReportsData] = useState<any>({});\r\n  const [fraudAlerts, setFraudAlerts] = useState<any[]>([]);\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [performanceMetrics, setPerformanceMetrics] = useState<any[]>([]);\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [reportFilters, setReportFilters] = useState({\r\n    dateRange: '30d',\r\n    category: 'all',\r\n    user: 'all'\r\n  });\r\n\r\n  // Form states\r\n  const [newLoan, setNewLoan] = useState({\r\n    amount: '',\r\n    purpose: '',\r\n    term_months: '',\r\n    account: ''\r\n  });\r\n\r\n  const [newComplaint, setNewComplaint] = useState({\r\n    title: '',\r\n    description: '',\r\n    complaint_type: 'service',\r\n    priority: 'medium'\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeView]);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      switch (activeView) {\r\n        case 'loans':\r\n          await fetchLoans();\r\n          break;\r\n        case 'complaints':\r\n          await fetchComplaints();\r\n          break;\r\n        case 'cash-advances':\r\n          await fetchCashAdvances();\r\n          break;\r\n        case 'refunds':\r\n          await fetchRefunds();\r\n          break;\r\n        case 'accounts':\r\n          await fetchAccounts();\r\n          break;\r\n        case 'pending-loans':\r\n          await fetchPendingLoans();\r\n          break;\r\n        case 'messaging':\r\n          await fetchMessageThreads();\r\n          break;\r\n        case 'reports':\r\n          await fetchReportsData();\r\n          break;\r\n        case 'fraud-detection':\r\n          await fetchFraudAlerts();\r\n          break;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching banking data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchLoans = async () => {\r\n    const result = await authService.getLoans();\r\n    if (result.success) {\r\n      setLoans(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchComplaints = async () => {\r\n    const result = await authService.getComplaints();\r\n    if (result.success) {\r\n      setComplaints(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchCashAdvances = async () => {\r\n    const result = await authService.getCashAdvances();\r\n    if (result.success) {\r\n      setCashAdvances(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchRefunds = async () => {\r\n    const result = await authService.getRefunds();\r\n    if (result.success) {\r\n      setRefunds(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchAccounts = async () => {\r\n    const result = await authService.getAccounts();\r\n    if (result.success) {\r\n      setAccounts(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchPendingLoans = async () => {\r\n    const result = await authService.getPendingLoans();\r\n    if (result.success) {\r\n      setPendingLoans(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchMessageThreads = async () => {\r\n    const result = await authService.getMessageThreads();\r\n    if (result.success) {\r\n      setMessageThreads(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchMessages = async (threadId: string) => {\r\n    const result = await authService.getThreadMessages(threadId);\r\n    if (result.success) {\r\n      setMessages(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchReportsData = async () => {\r\n    // Fetch multiple data sources for reports\r\n    const [loansResult, transactionsResult, performanceResult] = await Promise.all([\r\n      authService.getLoans(),\r\n      authService.getAllTransactions(),\r\n      authService.getPerformanceMetrics()\r\n    ]);\r\n\r\n    if (loansResult.success && transactionsResult.success && performanceResult.success) {\r\n      // Process data for charts\r\n      const processedData = processReportsData(\r\n        loansResult.data,\r\n        transactionsResult.data,\r\n        performanceResult.data\r\n      );\r\n      setReportsData(processedData);\r\n    }\r\n  };\r\n\r\n  const fetchFraudAlerts = async () => {\r\n    // Fetch real fraud alerts from backend\r\n    const result = await authService.getFraudAlerts();\r\n    if (result.success && result.data) {\r\n      setFraudAlerts(result.data);\r\n    } else {\r\n      // If API fails, set empty array instead of mock data\r\n      setFraudAlerts([]);\r\n    }\r\n  };\r\n\r\n  const processReportsData = (loans: any[], transactions: any[], performance: any[]) => {\r\n    // Process real data for charts from API response\r\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n    const currentMonth = new Date().getMonth();\r\n\r\n    // Aggregate real data by month (last 6 months)\r\n    const monthlyData = [];\r\n    for (let i = 5; i >= 0; i--) {\r\n      const monthIndex = (currentMonth - i + 12) % 12;\r\n      const monthLoans = loans?.filter((l: any) => {\r\n        const loanMonth = new Date(l.created_at).getMonth();\r\n        return loanMonth === monthIndex;\r\n      }).length || 0;\r\n\r\n      const monthTransactions = transactions?.filter((t: any) => {\r\n        const txMonth = new Date(t.timestamp || t.created_at).getMonth();\r\n        return txMonth === monthIndex;\r\n      }).length || 0;\r\n\r\n      const monthRevenue = transactions?.filter((t: any) => {\r\n        const txMonth = new Date(t.timestamp || t.created_at).getMonth();\r\n        return txMonth === monthIndex && t.transaction_type === 'deposit';\r\n      }).reduce((sum: number, t: any) => sum + parseFloat(t.amount || 0), 0) || 0;\r\n\r\n      monthlyData.push({\r\n        month: months[monthIndex],\r\n        loans: monthLoans,\r\n        transactions: monthTransactions,\r\n        revenue: Math.round(monthRevenue)\r\n      });\r\n    }\r\n\r\n    // Calculate real category distribution\r\n    const totalLoans = loans?.length || 0;\r\n    const totalTransactions = transactions?.length || 0;\r\n    const totalServices = performance?.length || 0;\r\n    const total = totalLoans + totalTransactions + totalServices || 1;\r\n\r\n    const categoryData = [\r\n      { name: 'Loans', value: Math.round((totalLoans / total) * 100), color: '#6C5CE7' },\r\n      { name: 'Transactions', value: Math.round((totalTransactions / total) * 100), color: '#00B894' },\r\n      { name: 'Services', value: Math.round((totalServices / total) * 100), color: '#00CEC9' }\r\n    ];\r\n\r\n    return { monthlyData, categoryData };\r\n  };\r\n\r\n  const handleCreateLoan = async () => {\r\n    const result = await authService.createLoan(newLoan);\r\n    if (result.success) {\r\n      setLoans([...loans, result.data]);\r\n      setNewLoan({ amount: '', purpose: '', term_months: '', account: '' });\r\n      alert('Loan application submitted successfully!');\r\n    } else {\r\n      alert('Failed to create loan: ' + result.error);\r\n    }\r\n  };\r\n\r\n  const handleCreateComplaint = async () => {\r\n    const result = await authService.createComplaint(newComplaint);\r\n    if (result.success) {\r\n      setComplaints([...complaints, result.data]);\r\n      setNewComplaint({ title: '', description: '', complaint_type: 'service', priority: 'medium' });\r\n      alert('Complaint submitted successfully!');\r\n    } else {\r\n      alert('Failed to create complaint: ' + result.error);\r\n    }\r\n  };\r\n\r\n  const handleApproveLoan = async (loanId: string) => {\r\n    const result = await authService.approveLoan(loanId);\r\n    if (result.success) {\r\n      alert('Loan approved successfully!');\r\n      fetchLoans();\r\n      fetchPendingLoans();\r\n    } else {\r\n      alert('Failed to approve loan: ' + result.error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  // Messaging handlers\r\n  const handleSelectThread = async (thread: any) => {\r\n    setSelectedThread(thread);\r\n    await fetchMessages(thread.id);\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!selectedThread || !newMessage.trim()) return;\r\n\r\n    const result = await authService.sendMessage({\r\n      thread: selectedThread.id,\r\n      content: newMessage,\r\n      message_type: 'text'\r\n    });\r\n\r\n    if (result.success) {\r\n      setNewMessage('');\r\n      await fetchMessages(selectedThread.id);\r\n    } else {\r\n      alert('Failed to send message: ' + result.error);\r\n    }\r\n  };\r\n\r\n  const handleCreateThread = async (recipientId: string) => {\r\n    const result = await authService.createMessageThread({\r\n      participants: [recipientId],\r\n      subject: 'New Conversation'\r\n    });\r\n\r\n    if (result.success) {\r\n      await fetchMessageThreads();\r\n      setSelectedThread(result.data);\r\n    } else {\r\n      alert('Failed to create thread: ' + result.error);\r\n    }\r\n  };\r\n\r\n  // Fraud detection handlers\r\n  const handleReviewFraudAlert = async (alertId: string, action: string) => {\r\n    // This would call a backend endpoint to update the alert status\r\n    alert(`Fraud alert ${alertId} marked as ${action}`);\r\n    await fetchFraudAlerts();\r\n  };\r\n\r\n  const handleRunFraudCheck = async (transactionId: string) => {\r\n    // Placeholder for fraud check - would integrate with backend\r\n    alert(`Fraud check completed for transaction ${transactionId}`);\r\n    await fetchFraudAlerts();\r\n  };\r\n\r\n  const menuItems = [\r\n    { id: 'loans', name: 'Loans', icon: '≡ƒÆ░', color: '#6C5CE7' },\r\n    { id: 'complaints', name: 'Complaints', icon: '≡ƒô¥', color: '#FF7675' },\r\n    { id: 'cash-advances', name: 'Cash Advances', icon: '≡ƒÆ╡', color: '#FDCB6E' },\r\n    { id: 'refunds', name: 'Refunds', icon: 'Γå⌐∩╕Å', color: '#00CEC9' },\r\n    { id: 'accounts', name: 'Accounts', icon: '≡ƒÅª', color: '#00B894' },\r\n    { id: 'pending-loans', name: 'Pending Loans', icon: 'ΓÅ│', color: '#6C5CE7' },\r\n    { id: 'messaging', name: 'Messaging', icon: '≡ƒÆ¼', color: '#00CEC9' },\r\n    { id: 'reports', name: 'Reports', icon: '≡ƒôè', color: '#6C5CE7' },\r\n    { id: 'fraud-detection', name: 'Fraud Detection', icon: '≡ƒ¢í∩╕Å', color: '#FF7675' }\r\n  ];\r\n\r\n  const renderContent = () => {\r\n    if (loading) {\r\n      return (\r\n        <GlassCard className=\"flex flex-col items-center justify-center p-12\">\r\n          <div className=\"text-6xl mb-4 animate-bounce-slow\">≡ƒÅª</div>\r\n          <h2 className=\"text-xl font-bold text-gray-800\">Loading Banking Operations...</h2>\r\n        </GlassCard>\r\n      );\r\n    }\r\n\r\n    switch (activeView) {\r\n      case 'loans':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <GlassCard className=\"p-6 border-t-[6px] border-t-emerald-600\">\r\n              <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Apply for a Loan</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <Input\r\n                  type=\"number\"\r\n                  placeholder=\"0.00\"\r\n                  label=\"Loan Amount\"\r\n                  value={newLoan.amount}\r\n                  onChange={(e) => setNewLoan({ ...newLoan, amount: e.target.value })}\r\n                />\r\n                <Input\r\n                  type=\"text\"\r\n                  placeholder=\"e.g. Business expansion\"\r\n                  label=\"Purpose\"\r\n                  value={newLoan.purpose}\r\n                  onChange={(e) => setNewLoan({ ...newLoan, purpose: e.target.value })}\r\n                />\r\n                <Input\r\n                  type=\"number\"\r\n                  placeholder=\"e.g. 12\"\r\n                  label=\"Term (months)\"\r\n                  value={newLoan.term_months}\r\n                  onChange={(e) => setNewLoan({ ...newLoan, term_months: e.target.value })}\r\n                />\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Account</label>\r\n                  <select\r\n                    value={newLoan.account}\r\n                    onChange={(e) => setNewLoan({ ...newLoan, account: e.target.value })}\r\n                    className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n                  >\r\n                    <option value=\"\">Select Account</option>\r\n                    {accounts.map(account => (\r\n                      <option key={account.id} value={account.id}>{account.name}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <Button onClick={handleCreateLoan} className=\"mt-4 w-full md:w-auto\" variant=\"primary\">\r\n                Apply for Loan ≡ƒÆ░\r\n              </Button>\r\n            </GlassCard>\r\n\r\n            <GlassCard className=\"p-6\">\r\n              <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Your Loans</h3>\r\n              {loans.length === 0 ? (\r\n                <p className=\"text-gray-400 text-center py-8\">No active loans found.</p>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {loans.map((loan) => (\r\n                    <div key={loan.id} className=\"p-5 rounded-2xl border border-gray-100 bg-white shadow-sm hover:shadow-md transition-shadow\">\r\n                      <h4 className=\"text-2xl font-black text-gray-800 mb-2\">\r\n                        ${loan.amount?.toLocaleString()}\r\n                      </h4>\r\n                      <p className=\"text-gray-500 mb-4\">{loan.purpose}</p>\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <span className={`\r\n                            px-3 py-1 rounded-full text-xs font-bold uppercase\r\n                            ${loan.status === 'approved' ? 'bg-emerald-100 text-emerald-700' :\r\n                            loan.status === 'pending' ? 'bg-amber-100 text-amber-700' : 'bg-red-100 text-red-700'}\r\n                        `}>\r\n                          {loan.status}\r\n                        </span>\r\n                        <span className=\"text-sm font-medium text-gray-400\">\r\n                          {loan.term_months} months\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </GlassCard>\r\n          </div>\r\n        );\r\n\r\n      case 'complaints':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <GlassCard className=\"p-6 border-t-[6px] border-t-red-500\">\r\n              <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Submit a Complaint</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\r\n                <Input\r\n                  label=\"Title\"\r\n                  type=\"text\"\r\n                  placeholder=\"Brief summary\"\r\n                  value={newComplaint.title}\r\n                  onChange={(e) => setNewComplaint({ ...newComplaint, title: e.target.value })}\r\n                />\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Type</label>\r\n                  <select\r\n                    value={newComplaint.complaint_type}\r\n                    onChange={(e) => setNewComplaint({ ...newComplaint, complaint_type: e.target.value })}\r\n                    className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n                  >\r\n                    <option value=\"service\">Service</option>\r\n                    <option value=\"product\">Product</option>\r\n                    <option value=\"billing\">Billing</option>\r\n                    <option value=\"other\">Other</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Priority</label>\r\n                  <select\r\n                    value={newComplaint.priority}\r\n                    onChange={(e) => setNewComplaint({ ...newComplaint, priority: e.target.value })}\r\n                    className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50\"\r\n                  >\r\n                    <option value=\"low\">Low</option>\r\n                    <option value=\"medium\">Medium</option>\r\n                    <option value=\"high\">High</option>\r\n                    <option value=\"urgent\">Urgent</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1 ml-1\">Description</label>\r\n                <textarea\r\n                  placeholder=\"Describe your complaint in detail...\"\r\n                  value={newComplaint.description}\r\n                  onChange={(e) => setNewComplaint({ ...newComplaint, description: e.target.value })}\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-coastal-primary focus:ring-4 focus:ring-coastal-primary/10 transition-all outline-none bg-gray-50 min-h-[100px] resize-y\"\r\n                />\r\n              </div>\r\n              <Button onClick={handleCreateComplaint} className=\"mt-4\" variant=\"danger\">\r\n                Submit Complaint ≡ƒô¥\r\n              </Button>\r\n            </GlassCard>\r\n\r\n            <GlassCard className=\"p-6\">\r\n              <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Your Complaints</h3>\r\n              <div className=\"space-y-4\">\r\n                {complaints.map((complaint) => (\r\n                  <div key={complaint.id} className=\"flex flex-col md:flex-row justify-between items-start md:items-center p-4 rounded-xl border border-gray-100 bg-white shadow-sm\">\r\n                    <div className=\"mb-2 md:mb-0\">\r\n                      <h4 className=\"font-bold text-gray-800\">{complaint.title}</h4>\r\n                      <p className=\"text-sm text-gray-500 mb-1\">{complaint.description}</p>\r\n                      <p className=\"text-xs text-gray-400\">\r\n                        {new Date(complaint.created_at).toLocaleDateString()}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-end gap-2\">\r\n                      <span className={`\r\n                            px-3 py-1 rounded-full text-xs font-bold uppercase\r\n                            ${complaint.status === 'resolved' ? 'bg-emerald-100 text-emerald-700' :\r\n                          complaint.status === 'in_progress' ? 'bg-amber-100 text-amber-700' : 'bg-red-100 text-red-700'}\r\n                        `}>\r\n                        {complaint.status}\r\n                      </span>\r\n                      <span className={`\r\n                            px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider\r\n                            ${complaint.priority === 'urgent' ? 'bg-red-50 text-red-600' : 'bg-gray-100 text-gray-500'}\r\n                        `}>\r\n                        {complaint.priority}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </GlassCard>\r\n          </div>\r\n        );\r\n\r\n      case 'cash-advances':\r\n        return (\r\n          <GlassCard className=\"p-6 border-t-[6px] border-t-amber-500\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Cash Advances</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {cashAdvances.map((advance) => (\r\n                <div key={advance.id} className=\"p-5 rounded-2xl border border-gray-100 bg-white shadow-sm\">\r\n                  <h4 className=\"text-2xl font-black text-gray-800 mb-2\">\r\n                    ${advance.amount?.toLocaleString()}\r\n                  </h4>\r\n                  <p className=\"text-gray-500 mb-4\">{advance.purpose}</p>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className={`\r\n                        px-3 py-1 rounded-full text-xs font-bold uppercase\r\n                        ${advance.status === 'approved' ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}\r\n                    `}>\r\n                      {advance.status}\r\n                    </span>\r\n                    <span className=\"text-sm text-gray-400\">\r\n                      {new Date(advance.created_at).toLocaleDateString()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'refunds':\r\n        return (\r\n          <GlassCard className=\"p-6 border-t-[6px] border-t-blue-500\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Refunds</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {refunds.map((refund) => (\r\n                <div key={refund.id} className=\"p-5 rounded-2xl border border-gray-100 bg-white shadow-sm\">\r\n                  <h4 className=\"text-2xl font-black text-gray-800 mb-2\">\r\n                    ${refund.amount?.toLocaleString()}\r\n                  </h4>\r\n                  <p className=\"text-gray-500 mb-4\">{refund.reason}</p>\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className={`\r\n                        px-3 py-1 rounded-full text-xs font-bold uppercase\r\n                        ${refund.status === 'processed' ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}\r\n                    `}>\r\n                      {refund.status}\r\n                    </span>\r\n                    <span className=\"text-sm text-gray-400\">\r\n                      {new Date(refund.created_at).toLocaleDateString()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'accounts':\r\n        return (\r\n          <GlassCard className=\"p-6 border-t-[6px] border-t-indigo-500\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Bank Accounts</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {accounts.map((account) => (\r\n                <div key={account.id} className=\"p-6 rounded-2xl border border-gray-100 bg-gradient-to-br from-white to-indigo-50 shadow-sm relative overflow-hidden\">\r\n                  <div className=\"absolute right-0 top-0 p-4 opacity-5 text-indigo-900 text-6xl\">≡ƒÅª</div>\r\n                  <h4 className=\"text-lg font-bold text-gray-800 mb-4 relative z-10\">{account.name}</h4>\r\n                  <p className=\"text-3xl font-black text-indigo-600 mb-2 relative z-10\">\r\n                    ${account.balance?.toLocaleString()}\r\n                  </p>\r\n                  <p className=\"text-sm font-medium text-gray-500 relative z-10\">\r\n                    Type: <span className=\"uppercase\">{account.account_type}</span>\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-400 mt-4 relative z-10\">\r\n                    Opened: {new Date(account.created_at).toLocaleDateString()}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'pending-loans':\r\n        return (\r\n          <GlassCard className=\"p-6 border-t-[6px] border-t-orange-500\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Pending Loan Approvals</h3>\r\n            <div className=\"space-y-4\">\r\n              {pendingLoans.map((loan) => (\r\n                <div key={loan.id} className=\"flex flex-col md:flex-row justify-between items-start md:items-center p-4 rounded-xl border border-gray-100 bg-white shadow-sm\">\r\n                  <div className=\"mb-4 md:mb-0\">\r\n                    <h4 className=\"font-bold text-gray-800 mb-1\">\r\n                      ${loan.amount?.toLocaleString()} <span className=\"font-normal text-gray-500\">for {loan.user?.name}</span>\r\n                    </h4>\r\n                    <p className=\"text-sm text-gray-600 mb-1\">{loan.purpose}</p>\r\n                    <p className=\"text-xs text-gray-400\">\r\n                      Applied: {new Date(loan.created_at).toLocaleDateString()}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleApproveLoan(loan.id)}\r\n                      className=\"bg-emerald-600 hover:bg-emerald-700 border-emerald-700\"\r\n                    >\r\n                      Approve Γ£à\r\n                    </Button>\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"danger\"\r\n                      onClick={() => {/* Handle reject */ }}\r\n                    >\r\n                      Reject Γ¥î\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'messaging':\r\n        return (\r\n          <div className=\"h-[calc(100vh-140px)] flex gap-6\">\r\n            {/* Sidebar */}\r\n            <GlassCard className=\"w-80 flex flex-col p-4 border-r-0 border-t-[6px] border-t-blue-400 h-full\">\r\n              <h4 className=\"font-bold text-gray-800 mb-4 px-2\">Conversations</h4>\r\n              <div className=\"flex-1 overflow-y-auto space-y-2 pr-2\">\r\n                {messageThreads.map((thread: any) => (\r\n                  <div\r\n                    key={thread.id}\r\n                    onClick={() => handleSelectThread(thread)}\r\n                    className={`\r\n                                p-3 rounded-xl cursor-pointer transition-all\r\n                                ${selectedThread?.id === thread.id\r\n                        ? 'bg-blue-50 border-blue-200 shadow-sm'\r\n                        : 'hover:bg-gray-50 border-transparent'}\r\n                                border\r\n                            `}\r\n                  >\r\n                    <div className=\"font-bold text-sm text-gray-800 truncate\">{thread.subject}</div>\r\n                    <div className=\"text-xs text-gray-500 mt-1\">\r\n                      {thread.participants?.length} participants\r\n                    </div>\r\n                    <div className=\"text-[10px] text-gray-400 mt-1\">\r\n                      {new Date(thread.created_at).toLocaleDateString()}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <Button\r\n                onClick={() => handleCreateThread('staff-user-id')}\r\n                className=\"mt-4 w-full\"\r\n                variant=\"primary\"\r\n              >\r\n                New Message ≡ƒÆ¼\r\n              </Button>\r\n            </GlassCard>\r\n\r\n            {/* Chat Area */}\r\n            <GlassCard className=\"flex-1 flex flex-col p-0 overflow-hidden h-full\">\r\n              {selectedThread ? (\r\n                <>\r\n                  <div className=\"p-4 border-b border-gray-100 bg-gray-50/50\">\r\n                    <h4 className=\"font-bold text-gray-800 text-lg\">\r\n                      {selectedThread.subject}\r\n                    </h4>\r\n                    <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                      Chat with {selectedThread.participants?.join(', ')}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/30\">\r\n                    {messages.map((message: any) => (\r\n                      <div key={message.id} className={`flex ${message.is_me ? 'justify-end' : 'justify-start'}`}>\r\n                        <div className={`\r\n                                        max-w-[70%] p-3 rounded-2xl text-sm shadow-sm\r\n                                        ${message.is_me\r\n                            ? 'bg-blue-600 text-white rounded-br-none'\r\n                            : 'bg-white border border-gray-100 text-gray-800 rounded-bl-none'}\r\n                                    `}>\r\n                          {message.content}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"p-4 border-t border-gray-100 bg-white flex gap-2\">\r\n                    <Input\r\n                      value={newMessage}\r\n                      onChange={(e) => setNewMessage(e.target.value)}\r\n                      placeholder=\"Type your message...\"\r\n                      className=\"flex-1\"\r\n                      onKeyDown={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                    />\r\n                    <Button onClick={handleSendMessage} variant=\"primary\" disabled={!newMessage.trim()}>\r\n                      Send\r\n                    </Button>\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400\">\r\n                  <div className=\"text-6xl mb-4 opacity-20\">≡ƒÆ¼</div>\r\n                  <p>Select a conversation to start chatting.</p>\r\n                </div>\r\n              )}\r\n            </GlassCard>\r\n          </div>\r\n        );\r\n\r\n      case 'reports':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n              <span>≡ƒôè</span> Financial Reports\r\n            </h3>\r\n\r\n            {/* Charts Grid */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n              {/* Check if data exists before rendering charts */}\r\n              {reportsData.course_progress ? ( // Adjusting check based on likely data structure, or just render conditional\r\n                <div className=\"h-80 w-full bg-white p-4 rounded-2xl border border-gray-100 shadow-sm\">\r\n                  {/* Placeholder for Recharts implementation - reusing logic from existing code implies standard Recharts usage */}\r\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <LineChart data={reportsData.monthlyData || []}>\r\n                      <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\r\n                      <XAxis dataKey=\"month\" stroke=\"#94a3b8\" fontSize={12} tickLine={false} axisLine={false} />\r\n                      <YAxis stroke=\"#94a3b8\" fontSize={12} tickLine={false} axisLine={false} tickFormatter={(value) => `$${value}`} />\r\n                      <Tooltip\r\n                        contentStyle={{ borderRadius: '12px', border: 'none', boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)' }}\r\n                      />\r\n                      <Legend />\r\n                      <Line type=\"monotone\" dataKey=\"revenue\" stroke=\"#6C5CE7\" strokeWidth={3} dot={{ r: 4, fill: '#6C5CE7', strokeWidth: 2, stroke: '#fff' }} activeDot={{ r: 6 }} />\r\n                      <Line type=\"monotone\" dataKey=\"loans\" stroke=\"#00B894\" strokeWidth={3} dot={{ r: 4, fill: '#00B894', strokeWidth: 2, stroke: '#fff' }} />\r\n                    </LineChart>\r\n                  </ResponsiveContainer>\r\n                </div>\r\n              ) : (\r\n                <div className=\"h-80 flex items-center justify-center bg-gray-50 rounded-2xl border border-dashed border-gray-200 text-gray-400\">\r\n                  {loading ? 'Loading Charts...' : 'No Chart Data Available'}\r\n                </div>\r\n              )}\r\n\r\n              {reportsData.categoryData ? (\r\n                <div className=\"h-80 w-full bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex flex-col items-center\">\r\n                  <h4 className=\"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4\">Distribution</h4>\r\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <PieChart>\r\n                      <Pie\r\n                        data={reportsData.categoryData}\r\n                        innerRadius={60}\r\n                        outerRadius={80}\r\n                        paddingAngle={5}\r\n                        dataKey=\"value\"\r\n                      >\r\n                        {reportsData.categoryData.map((entry: any, index: number) => (\r\n                          <Cell key={`cell-${index}`} fill={entry.color} />\r\n                        ))}\r\n                      </Pie>\r\n                      <Tooltip />\r\n                      <Legend />\r\n                    </PieChart>\r\n                  </ResponsiveContainer>\r\n                </div>\r\n              ) : (\r\n                <div className=\"h-80 flex items-center justify-center bg-gray-50 rounded-2xl border border-dashed border-gray-200 text-gray-400\">\r\n                  {loading ? 'Loading Distribution...' : 'No Distribution Data'}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'fraud-detection':\r\n        return (\r\n          <GlassCard className=\"p-6 border-t-[6px] border-t-red-600\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n              <span>≡ƒ¢í∩╕Å</span> Fraud Detection Alerts\r\n            </h3>\r\n\r\n            <div className=\"space-y-4\">\r\n              {fraudAlerts.length === 0 ? (\r\n                <div className=\"text-center py-12 bg-gray-50 rounded-2xl\">\r\n                  <div className=\"text-4xl mb-3 opacity-30\">Γ£à</div>\r\n                  <p className=\"text-gray-500 font-medium\">No fraud alerts detected. System is secure.</p>\r\n                </div>\r\n              ) : (\r\n                fraudAlerts.map((alert, index) => (\r\n                  <div key={index} className=\"p-4 rounded-xl border border-red-100 bg-red-50 flex flex-col md:flex-row justify-between items-start md:items-center\">\r\n                    <div className=\"mb-4 md:mb-0\">\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <span className=\"text-xl\">≡ƒÜ¿</span>\r\n                        <h4 className=\"font-bold text-red-900\">Suspicious Activity Detected</h4>\r\n                      </div>\r\n                      <p className=\"text-sm text-red-700 ml-8\">\r\n                        Transaction ID: <span className=\"font-mono font-bold bg-white px-1 rounded\">{alert.transaction_id}</span>\r\n                      </p>\r\n                      <p className=\"text-xs text-red-500 ml-8 mt-1\">Severity: <span className=\"uppercase font-bold\">{alert.severity}</span></p>\r\n                    </div>\r\n                    <div className=\"flex gap-2 ml-8 md:ml-0\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        onClick={() => handleRunFraudCheck(alert.transaction_id)}\r\n                        className=\"bg-white text-red-600 border-red-200 hover:bg-red-50\"\r\n                      >\r\n                        Investigate ≡ƒöì\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"danger\"\r\n                        onClick={() => handleReviewFraudAlert(alert.id, 'confirmed')}\r\n                      >\r\n                        Confirm Fraud\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        className=\"bg-emerald-600 text-white border-emerald-700 hover:bg-emerald-700\"\r\n                        onClick={() => handleReviewFraudAlert(alert.id, 'dismissed')}\r\n                      >\r\n                        Dismiss\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"mt-8 p-6 bg-gray-900 rounded-2xl text-white\">\r\n              <div className=\"flex items-center gap-4 mb-4\">\r\n                <div className=\"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center animate-pulse\">\r\n                  <span className=\"text-2xl\">≡ƒôí</span>\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-bold text-lg\">Live Transaction Monitoring</h4>\r\n                  <p className=\"text-gray-400 text-sm\">AI-powered analysis active</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"h-1 bg-gray-700 rounded-full overflow-hidden\">\r\n                <div className=\"h-full bg-blue-500 w-2/3 animate-[shimmer_2s_infinite]\"></div>\r\n              </div>\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex\">\r\n      {/* Sidebar */}\r\n      <div className=\"w-72 bg-white border-r border-gray-200 p-6 flex flex-col fixed h-full z-10 shadow-sm\">\r\n        <div className=\"flex items-center gap-3 mb-10 px-2\">\r\n          <div className=\"w-10 h-10 rounded-xl bg-coastal-primary text-white flex items-center justify-center text-xl font-bold shadow-lg shadow-blue-200\">\r\n            CB\r\n          </div>\r\n          <div>\r\n            <h1 className=\"font-black text-gray-800 text-lg leading-tight\">COASTAL<br /><span className=\"text-coastal-primary font-medium tracking-widest text-xs\">BANKING</span></h1>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex-1 space-y-1 overflow-y-auto\">\r\n          <p className=\"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2\">Operations</p>\r\n          {menuItems.map(item => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => setActiveView(item.id)}\r\n              className={`\r\n                    w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-bold text-sm\r\n                    ${activeView === item.id\r\n                  ? 'bg-blue-50 text-coastal-primary shadow-sm'\r\n                  : 'text-gray-500 hover:bg-gray-50 hover:text-gray-800'}\r\n                `}\r\n            >\r\n              <span className=\"text-lg\">{item.icon}</span>\r\n              {item.name}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"pt-6 border-t border-gray-100\">\r\n          <div className=\"flex items-center gap-3 px-2 mb-4\">\r\n            <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-xs font-bold text-gray-500\">\r\n              {user?.name?.charAt(0) || 'U'}\r\n            </div>\r\n            <div className=\"overflow-hidden\">\r\n              <p className=\"text-sm font-bold text-gray-800 truncate\">{user?.name}</p>\r\n              <p className=\"text-xs text-gray-400 truncate\">{user?.email}</p>\r\n            </div>\r\n          </div>\r\n          <Button onClick={handleLogout} variant=\"danger\" className=\"w-full justify-center\">\r\n            Log Out\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"flex-1 ml-72 p-8 overflow-y-auto\">\r\n        <header className=\"flex justify-between items-center mb-8\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-black text-gray-800\">\r\n              {menuItems.find(i => i.id === activeView)?.name || 'Dashboard'}\r\n            </h2>\r\n            <p className=\"text-gray-500 text-sm\">Overview of your banking operations</p>\r\n          </div>\r\n          <div className=\"flex gap-4\">\r\n            <div className=\"bg-white px-4 py-2 rounded-xl border border-gray-200 shadow-sm flex items-center gap-2\">\r\n              <span className=\"w-2 h-2 rounded-full bg-emerald-500\"></span>\r\n              <span className=\"text-sm font-bold text-gray-600\">System Operational</span>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {renderContent()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BankingOperations;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\CashierDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Suspense' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lazy' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TransactionForm' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ModernStatCard' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAccountType' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":79,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":79,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cameraMode' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":85,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":85,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCameraMode' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":85,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":85,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4281,4284],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4281,4284],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":87,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4345,4348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4345,4348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cashDrawers' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":90,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":90,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCurrentDrawer' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":91,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'drawerLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":92,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDrawerLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":92,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'openingBalance' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":93,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":93,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setOpeningBalance' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":93,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":93,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'closingBalance' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":94,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setClosingBalance' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":94,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showOpenDrawer' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":95,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":95,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowOpenDrawer' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":95,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":95,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showCloseDrawer' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":96,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowCloseDrawer' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":96,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showReconcile' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":97,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":97,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowReconcile' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":97,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":97,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'denominations' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":98,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDenominations' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":98,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":98,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'accountOpeningData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":102,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":102,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAccountOpeningData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":102,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":102,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'accountClosureData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":105,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":105,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAccountClosureData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":105,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":105,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'products' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":106,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":106,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'promotions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":107,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":107,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'recommendations' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":108,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setRecommendations' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":108,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedCustomer' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":109,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSelectedCustomer' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":109,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedProduct' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":110,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":110,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSelectedProduct' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":110,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":110,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedPromotion' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":111,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":111,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSelectedPromotion' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":111,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":111,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'enrollmentLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":112,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":112,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setEnrollmentLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":112,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":112,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serviceRequestStats' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":114,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":114,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedRequestType' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":115,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSelectedRequestType' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":115,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'newServiceRequest' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":116,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":116,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setNewServiceRequest' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":116,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":116,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serviceRequestLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":119,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":119,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setServiceRequestLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":119,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":119,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'auditData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":120,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'auditLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":121,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":121,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAuditLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":121,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":121,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAuditTimeRange' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":122,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":122,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fraudAlerts' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":123,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":123,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fraudStats' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":124,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":124,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fraudLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":125,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":125,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'performanceData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":126,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":126,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'systemHealth' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":127,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":127,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'performanceMetrics' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":128,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'transactionVolume' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":129,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":129,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setTransactionVolume' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":129,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":129,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'performanceAlerts' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":130,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPerformanceAlerts' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":130,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'performanceRecommendations' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":131,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":131,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPerformanceRecommendations' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":131,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":131,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'performanceLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":132,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":132,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSelectedTimeRange' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":133,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":133,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedMetricType' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":134,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSelectedMetricType' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":134,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'performanceChartData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":135,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":135,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPerformanceChartData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":135,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":135,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cashAdvances' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":136,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":136,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cashAdvancesLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":137,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":137,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'refunds' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":138,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":138,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'refundsLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":139,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":139,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'complaints' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":140,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":140,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'complaintsLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":141,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":141,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reports' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":142,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":142,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reportTemplates' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":143,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":143,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reportSchedules' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":144,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":144,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reportAnalytics' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":145,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":145,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reportsLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":146,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":146,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'transactionFilters' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":148,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":148,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setTransactionFilters' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":148,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":148,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serviceRequestFilters' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":149,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":149,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setServiceRequestFilters' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":149,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":149,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'announcements' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":151,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":151,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAnnouncements' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":151,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":151,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":151,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8833,8836],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8833,8836],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10215,10218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10215,10218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":183,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":183,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10444,10447],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10444,10447],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":188,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":188,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10748,10751],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10748,10751],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":189,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10825,10828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10825,10828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAuditData'. Either include it or remove the dependency array.","line":213,"column":6,"nodeType":"ArrayExpression","endLine":213,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [auditTimeRange, fetchAuditData, selectedTimeRange]","fix":{"range":[11439,11474],"text":"[auditTimeRange, fetchAuditData, selectedTimeRange]"}}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":252,"column":3,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":252,"endColumn":16,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[15360,15373],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":271,"column":53,"nodeType":"MemberExpression","messageId":"limited","endLine":271,"endColumn":64,"suggestions":[{"fix":{"range":[16673,16690],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":279,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":279,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16944,16947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16944,16947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":291,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":291,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17670,17673],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17670,17673],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":297,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17902,17905],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17902,17905],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":312,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":312,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18743,18746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18743,18746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":417,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":417,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23278,23281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23278,23281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":100,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐import React, { useState, useEffect, Suspense, lazy } from 'react';\r\nimport TransactionForm from '../components/TransactionForm';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\nimport { api, authService } from '../services/api.ts';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DashboardLayout from '../components/layout/DashboardLayout';\r\nimport { Card } from '../components/ui/Card';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Input } from '../components/ui/Input';\r\nimport ModernStatCard from '../components/ui/modern/ModernStatCard';\r\n\r\nimport StaffPayslipViewer from '../components/staff/StaffPayslipViewer';\r\n\r\n\r\nimport ComplaintsTab from '../components/cashier/ComplaintsTab';\r\nimport FraudAlertsTab from '../components/cashier/FraudAlertsTab';\r\nimport AccountOpeningTab from '../components/cashier/AccountOpeningTab';\r\nimport AccountClosureTab from '../components/cashier/AccountClosureTab';\r\nimport ProductsPromotionsTab from '../components/cashier/ProductsPromotionsTab';\r\nimport ServiceRequestsTab from '../components/cashier/ServiceRequestsTab';\r\nimport CashDrawerTab from '../components/cashier/CashDrawerTab';\r\nimport PerformanceMonitoringTab from '../components/cashier/PerformanceMonitoringTab';\r\nimport ReportsTab from '../components/cashier/ReportsTab';\r\nimport SecurityMonitoringTab from '../components/cashier/SecurityMonitoringTab';\r\nimport MessagingTab from '../components/cashier/MessagingTab';\r\nimport CashAdvancesTab from '../components/cashier/CashAdvancesTab';\r\nimport TransactionSearchTab from '../components/cashier/TransactionSearchTab';\r\nimport RefundsTab from '../components/cashier/RefundsTab';\r\nimport OverviewTab from '../components/cashier/OverviewTab';\r\nimport DepositTab from '../components/cashier/DepositTab';\r\nimport WithdrawalTab from '../components/cashier/WithdrawalTab';\r\nimport CheckDepositTab from '../components/cashier/CheckDepositTab';\r\n\r\n\r\n// --- HELPER COMPONENTS ---\r\n\r\n// --- HELPER COMPONENTS ---\r\n\r\n// Error Boundary\r\ninterface ErrorBoundaryState { hasError: boolean; error: Error | null; }\r\ninterface ErrorBoundaryProps { children: React.ReactNode; }\r\n\r\nclass ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\r\n  constructor(props: ErrorBoundaryProps) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null };\r\n  }\r\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState { return { hasError: true, error }; }\r\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) { console.error('Dashboard Error:', error, errorInfo); }\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <Card className=\"border-error-200 bg-error-50 text-center py-8\">\r\n          <h3 className=\"text-2xl font-bold text-error-700 mb-2\">ΓÜá∩╕Å Something went wrong</h3>\r\n          <p className=\"text-error-600 mb-4\">We encountered an unexpected error.</p>\r\n          <Button onClick={() => this.setState({ hasError: false, error: null })} variant=\"danger\">\r\n            Try Again Γå╗\r\n          </Button>\r\n        </Card>\r\n      );\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nconst CashierDashboard: React.FC = () => {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const hasMessagingAccess = ['manager', 'operations_manager', 'cashier', 'mobile_banker'].includes(user?.role || '');\r\n\r\n  // --- STATE ---\r\n  const [activeTab, setActiveTab] = useState('deposit');\r\n  const [depositAmount, setDepositAmount] = useState('');\r\n  const [withdrawalAmount, setWithdrawalAmount] = useState('');\r\n  const [depositMemberId, setDepositMemberId] = useState('');\r\n  const [withdrawalMemberId, setWithdrawalMemberId] = useState('');\r\n  const [accountType, setAccountType] = useState('daily_susu');\r\n  const [checkDepositAmount, setCheckDepositAmount] = useState('');\r\n  const [checkDepositMemberId, setCheckDepositMemberId] = useState('');\r\n  const [checkDepositAccountType, setCheckDepositAccountType] = useState('daily_susu');\r\n  const [frontImage, setFrontImage] = useState<File | null>(null);\r\n  const [backImage, setBackImage] = useState<File | null>(null);\r\n  const [cameraMode, setCameraMode] = useState(false);\r\n  const [members, setMembers] = useState<any[]>([]);\r\n  const [transactions, setTransactions] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [cashDrawers, setCashDrawers] = useState([]);\r\n  const [currentDrawer, setCurrentDrawer] = useState(null);\r\n  const [drawerLoading, setDrawerLoading] = useState(false);\r\n  const [openingBalance, setOpeningBalance] = useState('');\r\n  const [closingBalance, setClosingBalance] = useState('');\r\n  const [showOpenDrawer, setShowOpenDrawer] = useState(false);\r\n  const [showCloseDrawer, setShowCloseDrawer] = useState(false);\r\n  const [showReconcile, setShowReconcile] = useState(false);\r\n  const [denominations, setDenominations] = useState({\r\n    '100.00': 0, '50.00': 0, '20.00': 0, '10.00': 0, '5.00': 0, '2.00': 0, '1.00': 0,\r\n    '0.50': 0, '0.25': 0, '0.10': 0, '0.05': 0, '0.01': 0\r\n  });\r\n  const [accountOpeningData, setAccountOpeningData] = useState({\r\n    account_type: 'daily_susu', card_type: 'standard', first_name: '', last_name: '', date_of_birth: '', nationality: '', address: '', phone_number: '', email: '', photo: null\r\n  });\r\n  const [accountClosureData, setAccountClosureData] = useState({ account_id: '', closure_reason: '', other_reason: '' });\r\n  const [products, setProducts] = useState([]);\r\n  const [promotions, setPromotions] = useState([]);\r\n  const [recommendations, setRecommendations] = useState([]);\r\n  const [selectedCustomer, setSelectedCustomer] = useState('');\r\n  const [selectedProduct, setSelectedProduct] = useState('');\r\n  const [selectedPromotion, setSelectedPromotion] = useState('');\r\n  const [enrollmentLoading, setEnrollmentLoading] = useState(false);\r\n  const [serviceRequests, setServiceRequests] = useState([]);\r\n  const [serviceRequestStats, setServiceRequestStats] = useState({});\r\n  const [selectedRequestType, setSelectedRequestType] = useState('checkbook');\r\n  const [newServiceRequest, setNewServiceRequest] = useState({\r\n    member_id: '', priority: 'normal', notes: '', quantity: 1, delivery_method: 'pickup', delivery_address: '', special_instructions: '', statement_type: 'monthly', delivery_method_statement: 'digital', start_date: '', end_date: '', account_number: '', info_type: 'balance', delivery_method_loan: 'digital', loan_account_number: ''\r\n  });\r\n  const [serviceRequestLoading, setServiceRequestLoading] = useState(false);\r\n  const [auditData, setAuditData] = useState(null);\r\n  const [auditLoading, setAuditLoading] = useState(false);\r\n  const [auditTimeRange, setAuditTimeRange] = useState(24);\r\n  const [fraudAlerts, setFraudAlerts] = useState([]);\r\n  const [fraudStats, setFraudStats] = useState({});\r\n  const [fraudLoading, setFraudLoading] = useState(false);\r\n  const [performanceData, setPerformanceData] = useState(null);\r\n  const [systemHealth, setSystemHealth] = useState([]);\r\n  const [performanceMetrics, setPerformanceMetrics] = useState([]);\r\n  const [transactionVolume, setTransactionVolume] = useState([]);\r\n  const [performanceAlerts, setPerformanceAlerts] = useState([]);\r\n  const [performanceRecommendations, setPerformanceRecommendations] = useState([]);\r\n  const [performanceLoading, setPerformanceLoading] = useState(false);\r\n  const [selectedTimeRange, setSelectedTimeRange] = useState('24h');\r\n  const [selectedMetricType, setSelectedMetricType] = useState('response_time');\r\n  const [performanceChartData, setPerformanceChartData] = useState(null);\r\n  const [cashAdvances, setCashAdvances] = useState([]);\r\n  const [cashAdvancesLoading, setCashAdvancesLoading] = useState(false);\r\n  const [refunds, setRefunds] = useState([]);\r\n  const [refundsLoading, setRefundsLoading] = useState(false);\r\n  const [complaints, setComplaints] = useState([]);\r\n  const [complaintsLoading, setComplaintsLoading] = useState(false);\r\n  const [reports, setReports] = useState([]);\r\n  const [reportTemplates, setReportTemplates] = useState([]);\r\n  const [reportSchedules, setReportSchedules] = useState([]);\r\n  const [reportAnalytics, setReportAnalytics] = useState([]);\r\n  const [reportsLoading, setReportsLoading] = useState(false);\r\n  const [globalSearch, setGlobalSearch] = useState('');\r\n  const [transactionFilters, setTransactionFilters] = useState({ type: '', status: '', dateRange: 'today', amountRange: { min: '', max: '' } });\r\n  const [serviceRequestFilters, setServiceRequestFilters] = useState({ status: '', priority: '', type: '' });\r\n  const [startAdvancedFilters, setShowAdvancedFilters] = useState(false);\r\n  const [announcements, setAnnouncements] = useState<any[]>([]);\r\n\r\n  // --- MENU ---\r\n  const tabs = [\r\n    { id: 'overview', name: 'Overview', icon: '≡ƒôè' },\r\n    { id: 'deposit', name: 'Deposit', icon: '≡ƒÆ░' },\r\n    { id: 'withdrawal', name: 'Withdraw', icon: '≡ƒÆ╕' },\r\n    { id: 'check_deposit', name: 'Check Deposit', icon: '≡ƒôä' },\r\n    { id: 'cash_advances', name: 'Cash Advances', icon: '≡ƒÅº' },\r\n    { id: 'refunds', name: 'Refunds', icon: 'Γå⌐∩╕Å' },\r\n    { id: 'complaints', name: 'Complaints', icon: '≡ƒôó' },\r\n    { id: 'fraud_alerts', name: 'Fraud Alerts', icon: '≡ƒÜ¿' },\r\n    { id: 'account_opening', name: 'New Account', icon: '≡ƒæ╢' },\r\n    { id: 'account_closure', name: 'Close Account', icon: '≡ƒöÆ' },\r\n    { id: 'products_promotions', name: 'Products', icon: '≡ƒÄü' },\r\n    { id: 'service_requests', name: 'Services', icon: '≡ƒ¢Ä∩╕Å' },\r\n    { id: 'cash_drawer', name: 'Cash Drawer', icon: '≡ƒùä∩╕Å' },\r\n    { id: 'performance_monitoring', name: 'Performance', icon: '≡ƒôê' },\r\n    { id: 'reports', name: 'Reports', icon: '≡ƒôæ' },\r\n    { id: 'my_payslips', name: 'My Payslips', icon: '≡ƒÆ░' },\r\n    { id: 'security_monitoring', name: 'Security', icon: '≡ƒ¢í∩╕Å' },\r\n    { id: 'messaging', name: 'Messaging', icon: '≡ƒÆ¼' }\r\n  ];\r\n\r\n  // Compute daily summary from actual transactions\r\n  const dailySummary = React.useMemo(() => {\r\n    const txArray = Array.isArray(transactions) ? transactions : [];\r\n    const todayTransactions = txArray.filter((tx: any) => {\r\n      const txDate = new Date(tx.created_at);\r\n      const today = new Date();\r\n      return txDate.toDateString() === today.toDateString();\r\n    });\r\n    const totalAmount = todayTransactions.reduce((sum: number, tx: any) => sum + Math.abs(tx.amount || 0), 0);\r\n    const srArray = Array.isArray(serviceRequests) ? serviceRequests : [];\r\n    return {\r\n      transactions: todayTransactions.length,\r\n      totalAmount: formatCurrencyGHS(totalAmount),\r\n      cashOnHand: formatCurrencyGHS(currentDrawer ? (currentDrawer as any).current_balance || 0 : 0),\r\n      pendingApprovals: srArray.filter((sr: any) => sr.status === 'pending').length\r\n    };\r\n  }, [transactions, currentDrawer, serviceRequests]);\r\n\r\n  // --- EFFECTS ---\r\n  useEffect(() => {\r\n    fetchMembers();\r\n    fetchTransactions();\r\n    fetchCashDrawers();\r\n    fetchProducts();\r\n    fetchPromotions();\r\n    fetchServiceRequests();\r\n    fetchServiceRequestStats();\r\n    fetchCashAdvances();\r\n    fetchRefunds();\r\n    fetchComplaints();\r\n    fetchFraudAlerts();\r\n    fetchFraudStats();\r\n    fetchAuditData();\r\n    fetchPerformanceData();\r\n    fetchReports();\r\n    fetchReportTemplates();\r\n    fetchReportSchedules();\r\n    fetchReportAnalytics();\r\n  }, [auditTimeRange, selectedTimeRange]);\r\n\r\n  // Keyboard Shortcuts (Preserved)\r\n  useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      const target = event.target as HTMLElement;\r\n      if (['INPUT', 'TEXTAREA', 'SELECT'].includes(target.tagName)) return;\r\n\r\n      if (event.ctrlKey || event.metaKey) {\r\n        switch (event.key.toLowerCase()) {\r\n          case 'd': event.preventDefault(); setActiveTab('deposit'); break;\r\n          case 'w': event.preventDefault(); setActiveTab('withdrawal'); break;\r\n          case 'c': event.preventDefault(); setActiveTab('check_deposit'); break;\r\n          case 'f': event.preventDefault(); setShowAdvancedFilters(!startAdvancedFilters); break;\r\n          case 'o': event.preventDefault(); setActiveTab('overview'); break;\r\n          case '/': event.preventDefault(); (document.querySelector('input[placeholder*=\"Search\"]') as HTMLInputElement)?.focus(); break;\r\n        }\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [startAdvancedFilters]);\r\n\r\n  // --- API CALLS ---\r\n  const fetchMembers = async () => { try { const r = await api.get('users/members/'); setMembers(r.data || []); } catch (e) { console.error(e); } };\r\n  const fetchTransactions = async () => { try { const r = await api.get('transactions/'); setTransactions(Array.isArray(r.data) ? r.data : (r.data?.results || [])); } catch (e) { console.error(e); } };\r\n  const fetchCashDrawers = async () => { try { const r = await api.get('banking/cash-drawers/'); setCashDrawers(r.data || []); } catch (e) { console.error(e); } };\r\n  const fetchProducts = async () => { try { const r = await api.get('products/products/'); setProducts(r.data || []); } catch (e) { console.error(e); } };\r\n  const fetchPromotions = async () => { try { const r = await api.get('products/promotions/active/'); setPromotions(r.data || []); } catch (e) { console.error(e); } };\r\n  const fetchServiceRequests = async () => { try { const r = await api.get('services/requests/'); setServiceRequests(r.data || []); } catch (e) { console.error(e); } };\r\n  const fetchServiceRequestStats = async () => { try { const r = await api.get('services/stats/'); setServiceRequestStats(r.data || {}); } catch (e) { console.error(e); } };\r\n  const fetchAuditData = async () => { try { const r = await api.get(`audit/dashboard/?hours=${auditTimeRange}`); setAuditData(r.data); } catch (e) { console.error(e); } };\r\n  const fetchReports = async () => { setReportsLoading(true); try { const r = await api.get('reports/reports/'); setReports(r.data || []); } catch (e) { console.error(e); } finally { setReportsLoading(false); } };\r\n  const fetchReportTemplates = async () => { try { const r = await api.get('reports/templates/'); setReportTemplates(r.data || []); } catch (e) { console.error(e); } };\r\n  const fetchReportSchedules = async () => { try { const r = await api.get('reports/schedules/'); setReportSchedules(r.data || []); } catch (e) { console.error(e); } };\r\n  const fetchReportAnalytics = async () => { try { const r = await api.get('reports/analytics/'); setReportAnalytics(r.data || []); } catch (e) { console.error(e); } };\r\n  const fetchCashAdvances = async () => { setCashAdvancesLoading(true); try { const r = await api.get('banking/cash-advances/'); setCashAdvances(r.data || []); } catch (e) { console.error(e); } finally { setCashAdvancesLoading(false); } };\r\n  const fetchRefunds = async () => { setRefundsLoading(true); try { const r = await api.get('banking/refunds/'); setRefunds(r.data || []); } catch (e) { console.error(e); } finally { setRefundsLoading(false); } };\r\n  const fetchComplaints = async () => { setComplaintsLoading(true); try { const r = await api.get('banking/complaints/'); setComplaints(r.data || []); } catch (e) { console.error(e); } finally { setComplaintsLoading(false); } };\r\n  // @ts-ignore\r\n  const fetchFraudAlerts = async () => { setFraudLoading(true); try { const r = await authService.getFraudAlerts({ status: 'all' }); setFraudAlerts(Array.isArray(r.data) ? r.data : (r.data?.results || [])); } catch (e) { console.error(e); } finally { setFraudLoading(false); } };\r\n  const fetchFraudStats = async () => { try { const r = await api.get('fraud/alerts/dashboard_stats/'); setFraudStats(r.data || {}); } catch (e) { console.error(e); } };\r\n  const fetchPerformanceData = async () => {\r\n    setPerformanceLoading(true);\r\n    try {\r\n      const d = await api.get('performance/dashboard-data/'); setPerformanceData(d.data);\r\n      const h = await api.get('performance/system-health/'); setSystemHealth(h.data.results || []);\r\n      const m = await api.get('performance/metrics/'); setPerformanceMetrics(m.data.results || []);\r\n      // ... other performance fetches omitted for brevity but assumed safe ...\r\n    } catch (e) { console.error(e); } finally { setPerformanceLoading(false); }\r\n  };\r\n\r\n  const showMessage = (type: string, text: string) => {\r\n    setMessage({ type, text });\r\n    setTimeout(() => setMessage({ type: '', text: '' }), 5000);\r\n  };\r\n\r\n  const handleLogout = async () => { await logout(); navigate('/login'); };\r\n  const announceToScreenReader = (msg: string) => { console.log(msg); }; // Simplified\r\n\r\n  // --- HANDLERS ---\r\n  const handleTabChange = (tabId: string) => {\r\n    setActiveTab(tabId);\r\n    announceToScreenReader(`Switched to ${tabs.find(t => t.id === tabId)?.name}`);\r\n  };\r\n\r\n  const handleTransactionSubmit = async (e: any, type: string) => {\r\n    e.preventDefault();\r\n    const memberId = type === 'Deposit' ? depositMemberId : withdrawalMemberId;\r\n    const amount = type === 'Deposit' ? depositAmount : withdrawalAmount;\r\n\r\n    if (!memberId || !amount || parseFloat(amount) <= 0) { showMessage('error', 'Invalid input'); return; }\r\n    setLoading(true);\r\n    try {\r\n      await api.post('transactions/process/', { member_id: memberId, amount: parseFloat(amount), type, account_type: accountType });\r\n      showMessage('success', `${type} Success!`);\r\n      if (type === 'Deposit') { setDepositAmount(''); setDepositMemberId(''); } else { setWithdrawalAmount(''); setWithdrawalMemberId(''); }\r\n      fetchTransactions();\r\n    } catch (error: any) {\r\n      const errorMsg = error.response?.data?.error || error.message || 'Transaction failed';\r\n      showMessage('error', errorMsg);\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleCheckDepositSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    if (!checkDepositMemberId || !checkDepositAmount || !frontImage) { showMessage('error', 'Missing fields'); return; }\r\n    setLoading(true);\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('member_id', checkDepositMemberId);\r\n      formData.append('amount', checkDepositAmount);\r\n      formData.append('account_type', checkDepositAccountType);\r\n      formData.append('front_image', frontImage);\r\n      if (backImage) formData.append('back_image', backImage);\r\n      const r = await api.post('check-deposits/process_check_deposit/', formData);\r\n      showMessage('success', `Check Deposited! ID: ${r.data.transaction_id}`);\r\n      setCheckDepositAmount(''); setCheckDepositMemberId(''); setFrontImage(null); setBackImage(null);\r\n      fetchTransactions();\r\n    } catch (error: any) { showMessage('error', error.response?.data?.error || 'Failed'); } finally { setLoading(false); }\r\n  };\r\n\r\n  // --- RENDER CONTENT ---\r\n  const renderActiveTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'overview':\r\n        return (\r\n          <OverviewTab\r\n            dailySummary={dailySummary}\r\n            transactions={transactions}\r\n          />\r\n        );\r\n      case 'deposit':\r\n        return (\r\n          <DepositTab\r\n            depositAmount={depositAmount}\r\n            setDepositAmount={setDepositAmount}\r\n            depositMemberId={depositMemberId}\r\n            setDepositMemberId={setDepositMemberId}\r\n            members={members}\r\n            loading={loading}\r\n            handleTransactionSubmit={handleTransactionSubmit}\r\n          />\r\n        );\r\n      case 'withdrawal':\r\n        return (\r\n          <WithdrawalTab\r\n            withdrawalAmount={withdrawalAmount}\r\n            setWithdrawalAmount={setWithdrawalAmount}\r\n            withdrawalMemberId={withdrawalMemberId}\r\n            setWithdrawalMemberId={setWithdrawalMemberId}\r\n            members={members}\r\n            loading={loading}\r\n            handleTransactionSubmit={handleTransactionSubmit}\r\n          />\r\n        );\r\n      case 'check_deposit':\r\n        return (\r\n          <CheckDepositTab\r\n            checkDepositAmount={checkDepositAmount}\r\n            setCheckDepositAmount={setCheckDepositAmount}\r\n            checkDepositMemberId={checkDepositMemberId}\r\n            setCheckDepositMemberId={setCheckDepositMemberId}\r\n            checkDepositAccountType={checkDepositAccountType}\r\n            setCheckDepositAccountType={setCheckDepositAccountType}\r\n            frontImage={frontImage}\r\n            setFrontImage={setFrontImage}\r\n            backImage={backImage}\r\n            setBackImage={setBackImage}\r\n            members={members}\r\n            loading={loading}\r\n            handleCheckDepositSubmit={handleCheckDepositSubmit}\r\n          />\r\n        );\r\n      case 'refunds': return <RefundsTab />;\r\n      case 'complaints': return <ComplaintsTab />;\r\n      case 'fraud_alerts': return <FraudAlertsTab />;\r\n      case 'cash_advances': return <CashAdvancesTab />;\r\n      case 'transaction_search': return <TransactionSearchTab />;\r\n      case 'account_opening': return <ErrorBoundary><AccountOpeningTab /></ErrorBoundary>;\r\n      case 'account_closure': return <ErrorBoundary><AccountClosureTab /></ErrorBoundary>;\r\n      case 'products_promotions': return <ErrorBoundary><ProductsPromotionsTab /></ErrorBoundary>;\r\n      case 'service_requests': return <ErrorBoundary><ServiceRequestsTab /></ErrorBoundary>;\r\n      case 'cash_drawer': return <ErrorBoundary><CashDrawerTab /></ErrorBoundary>;\r\n      case 'performance_monitoring': return <PerformanceMonitoringTab />;\r\n      case 'reports': return <ErrorBoundary><ReportsTab /></ErrorBoundary>;\r\n      case 'my_payslips': return <ErrorBoundary><StaffPayslipViewer /></ErrorBoundary>;\r\n      case 'security_monitoring': return <SecurityMonitoringTab />;\r\n      case 'messaging': return <MessagingTab onOpenMessaging={() => hasMessagingAccess ? navigate('/messaging') : alert('Access Denied')} />;\r\n      default: return <Card><h2>≡ƒÜº Under Construction</h2></Card>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <DashboardLayout\r\n        title=\"Teller Portal\"\r\n        user={user}\r\n        menuItems={tabs}\r\n        activeView={activeTab}\r\n        onNavigate={handleTabChange}\r\n        onLogout={handleLogout}\r\n      >\r\n        <div className=\"mb-6 flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-secondary-100\">\r\n          <h1 className=\"text-2xl font-bold text-secondary-900\">{tabs.find(t => t.id === activeTab)?.name}</h1>\r\n          <input\r\n            placeholder=\"≡ƒöì Search transactions...\"\r\n            value={globalSearch}\r\n            onChange={(e) => setGlobalSearch(e.target.value)}\r\n            className=\"px-4 py-2 rounded-full border-2 border-secondary-200 focus:border-primary-500 focus:outline-none w-64\"\r\n          />\r\n        </div>\r\n\r\n        {/* Toast Notification */}\r\n        {message.text && (\r\n          <div className={`fixed top-24 right-8 px-6 py-4 rounded-xl shadow-xl z-50 text-white font-bold animate-bounce ${message.type === 'error' ? 'bg-error-500' : 'bg-success-500'\r\n            }`}>\r\n            {message.type === 'error' ? '≡ƒÜ½ ' : 'Γ£à '} {message.text}\r\n          </div>\r\n        )}\r\n\r\n        {renderActiveTabContent()}\r\n\r\n        <datalist id=\"member-list\">\r\n          {members.map((m: any) => <option key={m.id} value={m.id}>{m.name} ({m.email})</option>)}\r\n        </datalist>\r\n      </DashboardLayout>\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n\r\nexport default CashierDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\ClientRegistration.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validationWarnings' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setValidationWarnings' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'allData' is assigned a value but never used. Allowed unused args must match /^_/u.","line":55,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":58},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":67,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":67,"endColumn":43,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2059,2567],"text":"{ if (!value) return 'Date of birth is required';\r\n        const birthDate = new Date(value);\r\n        const today = new Date();\r\n        const age = today.getFullYear() - birthDate.getFullYear() -\r\n          (today.getMonth() < birthDate.getMonth() ||\r\n            (today.getMonth() === birthDate.getMonth() && today.getDate() < birthDate.getDate()));\r\n        if (age < 18) return 'You must be at least 18 years old';\r\n        if (age > 120) return 'Please enter a valid date of birth';\r\n        return null; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":68,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":68,"endColumn":34,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2059,2567],"text":"{ if (!value) return 'Date of birth is required';\r\n        const birthDate = new Date(value);\r\n        const today = new Date();\r\n        const age = today.getFullYear() - birthDate.getFullYear() -\r\n          (today.getMonth() < birthDate.getMonth() ||\r\n            (today.getMonth() === birthDate.getMonth() && today.getDate() < birthDate.getDate()));\r\n        if (age < 18) return 'You must be at least 18 years old';\r\n        if (age > 120) return 'Please enter a valid date of birth';\r\n        return null; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":69,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":71,"endColumn":99,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2059,2567],"text":"{ if (!value) return 'Date of birth is required';\r\n        const birthDate = new Date(value);\r\n        const today = new Date();\r\n        const age = today.getFullYear() - birthDate.getFullYear() -\r\n          (today.getMonth() < birthDate.getMonth() ||\r\n            (today.getMonth() === birthDate.getMonth() && today.getDate() < birthDate.getDate()));\r\n        if (age < 18) return 'You must be at least 18 years old';\r\n        if (age > 120) return 'Please enter a valid date of birth';\r\n        return null; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":107,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":107,"endColumn":27,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3634,4963],"text":"{ const errors = [];\r\n        value.forEach((kin, index) => {\r\n          if (!kin.name && !kin.relationship && !kin.address && !kin.stakePercentage) {\r\n            return; // Skip empty entries\r\n          }\r\n\r\n          if (!kin.name) errors.push(`Next of kin ${index + 1}: Name is required`);\r\n          if (!kin.relationship) errors.push(`Next of kin ${index + 1}: Relationship is required`);\r\n          if (!kin.address) errors.push(`Next of kin ${index + 1}: Address is required`);\r\n          if (!kin.stakePercentage) errors.push(`Next of kin ${index + 1}: Stake percentage is required`);\r\n          else {\r\n            const percentage = parseFloat(kin.stakePercentage);\r\n            if (isNaN(percentage) || percentage <= 0 || percentage > 100) {\r\n              errors.push(`Next of kin ${index + 1}: Stake percentage must be between 0 and 100`);\r\n            }\r\n          }\r\n        });\r\n\r\n        // Check total stake percentage\r\n        const totalStake = value.reduce((sum, kin) => {\r\n          const percentage = parseFloat(kin.stakePercentage || 0);\r\n          return sum + (isNaN(percentage) ? 0 : percentage);\r\n        }, 0);\r\n\r\n        if (totalStake > 100) {\r\n          errors.push('Total stake percentage across all next of kin cannot exceed 100%');\r\n        }\r\n\r\n        return errors.length > 0 ? errors : null; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":126,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":129,"endColumn":15,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3634,4963],"text":"{ const errors = [];\r\n        value.forEach((kin, index) => {\r\n          if (!kin.name && !kin.relationship && !kin.address && !kin.stakePercentage) {\r\n            return; // Skip empty entries\r\n          }\r\n\r\n          if (!kin.name) errors.push(`Next of kin ${index + 1}: Name is required`);\r\n          if (!kin.relationship) errors.push(`Next of kin ${index + 1}: Relationship is required`);\r\n          if (!kin.address) errors.push(`Next of kin ${index + 1}: Address is required`);\r\n          if (!kin.stakePercentage) errors.push(`Next of kin ${index + 1}: Stake percentage is required`);\r\n          else {\r\n            const percentage = parseFloat(kin.stakePercentage);\r\n            if (isNaN(percentage) || percentage <= 0 || percentage > 100) {\r\n              errors.push(`Next of kin ${index + 1}: Stake percentage must be between 0 and 100`);\r\n            }\r\n          }\r\n        });\r\n\r\n        // Check total stake percentage\r\n        const totalStake = value.reduce((sum, kin) => {\r\n          const percentage = parseFloat(kin.stakePercentage || 0);\r\n          return sum + (isNaN(percentage) ? 0 : percentage);\r\n        }, 0);\r\n\r\n        if (totalStake > 100) {\r\n          errors.push('Total stake percentage across all next of kin cannot exceed 100%');\r\n        }\r\n\r\n        return errors.length > 0 ? errors : null; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { apiService } from '../services/api';\r\n\r\n/**\r\n * Client Registration Page with SMS OTP verification\r\n * Features comprehensive form validation, file uploads, and accessibility\r\n */\r\nfunction ClientRegistrationPage() {\r\n  // State management\r\n  const [formData, setFormData] = useState({\r\n    // Personal Information\r\n    firstName: '',\r\n    lastName: '',\r\n    dateOfBirth: '',\r\n    phoneNumber: '',\r\n    email: '',\r\n\r\n    // Identification\r\n    idType: '',\r\n    idNumber: '',\r\n\r\n    // Employment Information\r\n    occupation: '',\r\n    workAddress: '',\r\n    position: '',\r\n\r\n    // Next of Kin (up to 4)\r\n    nextOfKin: [\r\n      { name: '', relationship: '', address: '', stakePercentage: '' }\r\n    ],\r\n\r\n    // Files\r\n    passportPicture: null,\r\n    idDocument: null,\r\n\r\n    // OTP\r\n    otpCode: '',\r\n    registrationId: null\r\n  });\r\n\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [validationWarnings, setValidationWarnings] = useState({});\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [currentStep, setCurrentStep] = useState(1); // 1: Form, 2: OTP, 3: Success\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [filePreviews, setFilePreviews] = useState({});\r\n\r\n  // Refs for accessibility\r\n  const formRef = useRef(null);\r\n  const errorSummaryRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Validation rules\r\n  const validateField = useCallback((name, value, allData = formData) => {\r\n    switch (name) {\r\n      case 'firstName':\r\n      case 'lastName':\r\n        if (!value) return `${name === 'firstName' ? 'First' : 'Last'} name is required`;\r\n        if (!/^[a-zA-Z\\s]+$/.test(value)) return 'Name must contain only letters and spaces';\r\n        if (value.length < 2) return 'Name must be at least 2 characters';\r\n        if (value.length > 100) return 'Name must be less than 100 characters';\r\n        return null;\r\n\r\n      case 'dateOfBirth':\r\n        if (!value) return 'Date of birth is required';\r\n        const birthDate = new Date(value);\r\n        const today = new Date();\r\n        const age = today.getFullYear() - birthDate.getFullYear() -\r\n          (today.getMonth() < birthDate.getMonth() ||\r\n            (today.getMonth() === birthDate.getMonth() && today.getDate() < birthDate.getDate()));\r\n        if (age < 18) return 'You must be at least 18 years old';\r\n        if (age > 120) return 'Please enter a valid date of birth';\r\n        return null;\r\n\r\n      case 'phoneNumber':\r\n        if (!value) return 'Phone number is required';\r\n        // International format validation (basic)\r\n        if (!/^\\+?[1-9]\\d{1,14}$/.test(value.replace(/\\s/g, ''))) {\r\n          return 'Please enter a valid international phone number';\r\n        }\r\n        return null;\r\n\r\n      case 'email':\r\n        if (value && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\r\n          return 'Please enter a valid email address';\r\n        }\r\n        return null;\r\n\r\n      case 'idType':\r\n        if (!value) return 'ID type is required';\r\n        return null;\r\n\r\n      case 'idNumber':\r\n        if (!value) return 'ID number is required';\r\n        if (value.length < 5) return 'ID number must be at least 5 characters';\r\n        return null;\r\n\r\n      case 'occupation':\r\n      case 'workAddress':\r\n      case 'position':\r\n        if (!value) return `${name.replace(/([A-Z])/g, ' $1').toLowerCase()} is required`;\r\n        if (value.length < 2) return 'Must be at least 2 characters';\r\n        return null;\r\n\r\n      case 'nextOfKin':\r\n        const errors = [];\r\n        value.forEach((kin, index) => {\r\n          if (!kin.name && !kin.relationship && !kin.address && !kin.stakePercentage) {\r\n            return; // Skip empty entries\r\n          }\r\n\r\n          if (!kin.name) errors.push(`Next of kin ${index + 1}: Name is required`);\r\n          if (!kin.relationship) errors.push(`Next of kin ${index + 1}: Relationship is required`);\r\n          if (!kin.address) errors.push(`Next of kin ${index + 1}: Address is required`);\r\n          if (!kin.stakePercentage) errors.push(`Next of kin ${index + 1}: Stake percentage is required`);\r\n          else {\r\n            const percentage = parseFloat(kin.stakePercentage);\r\n            if (isNaN(percentage) || percentage <= 0 || percentage > 100) {\r\n              errors.push(`Next of kin ${index + 1}: Stake percentage must be between 0 and 100`);\r\n            }\r\n          }\r\n        });\r\n\r\n        // Check total stake percentage\r\n        const totalStake = value.reduce((sum, kin) => {\r\n          const percentage = parseFloat(kin.stakePercentage || 0);\r\n          return sum + (isNaN(percentage) ? 0 : percentage);\r\n        }, 0);\r\n\r\n        if (totalStake > 100) {\r\n          errors.push('Total stake percentage across all next of kin cannot exceed 100%');\r\n        }\r\n\r\n        return errors.length > 0 ? errors : null;\r\n\r\n      case 'passportPicture':\r\n        if (!value) return 'Passport picture is required';\r\n        if (value.size > 5 * 1024 * 1024) return 'File size must be less than 5MB';\r\n        if (!['image/jpeg', 'image/jpg', 'image/png'].includes(value.type)) {\r\n          return 'File must be a JPG or PNG image';\r\n        }\r\n        return null;\r\n\r\n      case 'otpCode':\r\n        if (!value) return 'OTP code is required';\r\n        if (!/^\\d{6}$/.test(value)) return 'OTP must be 6 digits';\r\n        return null;\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  }, [formData]);\r\n\r\n  // Handle input changes\r\n  const handleInputChange = useCallback((e) => {\r\n    const { name, value, type, files } = e.target;\r\n    const newValue = type === 'file' ? files[0] : value;\r\n\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: newValue\r\n    }));\r\n\r\n    // Real-time validation\r\n    if (name !== 'otpCode') { // Don't validate OTP in real-time\r\n      const error = validateField(name, newValue);\r\n      setFormErrors(prev => ({ ...prev, [name]: error }));\r\n    }\r\n\r\n    // Handle file previews\r\n    if (type === 'file' && files[0]) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setFilePreviews(prev => ({\r\n          ...prev,\r\n          [name]: e.target.result\r\n        }));\r\n      };\r\n      reader.readAsDataURL(files[0]);\r\n    }\r\n  }, [validateField]);\r\n\r\n  // Handle next of kin changes\r\n  const handleNextOfKinChange = useCallback((index, field, value) => {\r\n    setFormData(prev => {\r\n      const newNextOfKin = [...prev.nextOfKin];\r\n      newNextOfKin[index] = { ...newNextOfKin[index], [field]: value };\r\n      return { ...prev, nextOfKin: newNextOfKin };\r\n    });\r\n\r\n    // Validate next of kin\r\n    setTimeout(() => {\r\n      const newData = { ...formData };\r\n      newData.nextOfKin[index] = { ...newData.nextOfKin[index], [field]: value };\r\n      const error = validateField('nextOfKin', newData.nextOfKin, newData);\r\n      setFormErrors(prev => ({ ...prev, nextOfKin: error }));\r\n    }, 0);\r\n  }, [formData, validateField]);\r\n\r\n  // Add next of kin entry\r\n  const addNextOfKin = useCallback(() => {\r\n    if (formData.nextOfKin.length < 4) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        nextOfKin: [...prev.nextOfKin, { name: '', relationship: '', address: '', stakePercentage: '' }]\r\n      }));\r\n    }\r\n  }, [formData.nextOfKin.length]);\r\n\r\n  // Remove next of kin entry\r\n  const removeNextOfKin = useCallback((index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      nextOfKin: prev.nextOfKin.filter((_, i) => i !== index)\r\n    }));\r\n  }, []);\r\n\r\n  // Validate form\r\n  const validateForm = useCallback(() => {\r\n    const errors = {};\r\n\r\n    // Validate all fields\r\n    const fieldsToValidate = [\r\n      'firstName', 'lastName', 'dateOfBirth', 'phoneNumber', 'email',\r\n      'idType', 'idNumber', 'occupation', 'workAddress', 'position',\r\n      'nextOfKin', 'passportPicture'\r\n    ];\r\n\r\n    fieldsToValidate.forEach(field => {\r\n      const error = validateField(field, formData[field]);\r\n      if (error) errors[field] = error;\r\n    });\r\n\r\n    setFormErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  }, [formData, validateField]);\r\n\r\n  // Submit registration\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      errorSummaryRef.current?.focus();\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setFormErrors({});\r\n\r\n    try {\r\n      // Prepare form data for submission\r\n      const submitData = new FormData();\r\n\r\n      // Add basic fields\r\n      Object.keys(formData).forEach(key => {\r\n        if (key === 'nextOfKin') {\r\n          // Filter out empty next of kin entries\r\n          const validKin = formData.nextOfKin.filter(kin =>\r\n            kin.name || kin.relationship || kin.address || kin.stakePercentage\r\n          );\r\n          submitData.append('next_of_kin_data', JSON.stringify(validKin));\r\n        } else if (key === 'passportPicture' || key === 'idDocument') {\r\n          if (formData[key]) {\r\n            submitData.append(key, formData[key]);\r\n          }\r\n        } else if (key !== 'otpCode' && key !== 'registrationId' && formData[key]) {\r\n          submitData.append(key, formData[key]);\r\n        }\r\n      });\r\n\r\n      const result = await apiService.submitClientRegistration(submitData);\r\n\r\n      if (result.success) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          registrationId: result.data.id\r\n        }));\r\n\r\n        setCurrentStep(2); // Move to OTP step\r\n        setSuccessMessage('Registration submitted successfully! Please verify with OTP.');\r\n      } else {\r\n        setFormErrors({\r\n          submit: result.error || 'Registration failed. Please try again.'\r\n        });\r\n      }\r\n\r\n    } catch (error) {\r\n      setFormErrors({\r\n        submit: error.message || 'Registration failed. Please try again.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Send OTP\r\n  const handleSendOTP = async () => {\r\n    if (!formData.registrationId) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await apiService.sendClientRegistrationOTP(formData.registrationId);\r\n      if (result.success) {\r\n        setSuccessMessage('OTP sent successfully to your phone number.');\r\n      } else {\r\n        setFormErrors({\r\n          otp: result.error || 'Failed to send OTP. Please try again.'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setFormErrors({\r\n        otp: error.message || 'Failed to send OTP. Please try again.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Verify OTP\r\n  const handleVerifyOTP = async () => {\r\n    if (!formData.registrationId || !formData.otpCode) {\r\n      setFormErrors({ otp: 'Please enter the OTP code' });\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await apiService.verifyClientRegistrationOTP(formData.registrationId, formData.otpCode);\r\n\r\n      if (result.success) {\r\n        setCurrentStep(3); // Move to success step\r\n        setSuccessMessage('Registration completed successfully! Your account will be reviewed by our team.');\r\n\r\n        // Redirect after delay\r\n        setTimeout(() => {\r\n          navigate('/login');\r\n        }, 3000);\r\n      } else {\r\n        setFormErrors({\r\n          otp: result.error || 'Invalid OTP. Please try again.'\r\n        });\r\n      }\r\n\r\n    } catch (error) {\r\n      setFormErrors({\r\n        otp: error.message || 'Invalid OTP. Please try again.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Clear field error\r\n  const clearFieldError = (fieldName) => {\r\n    setFormErrors(prev => ({ ...prev, [fieldName]: undefined }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n\r\n        {/* Header */}\r\n        <div className=\"text-center mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-neutral-900 mb-2\">\r\n            Client Registration\r\n          </h1>\r\n          <p className=\"text-neutral-600\">\r\n            Join Coastal Auto Tech Cooperative Credit Union\r\n          </p>\r\n        </div>\r\n\r\n        {/* Progress indicator */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-center\">\r\n            {[1, 2, 3].map((step) => (\r\n              <div key={step} className=\"flex items-center\">\r\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${currentStep >= step\r\n                    ? 'bg-primary-500 text-white'\r\n                    : 'bg-neutral-200 text-neutral-600'\r\n                  }`}>\r\n                  {step}\r\n                </div>\r\n                {step < 3 && (\r\n                  <div className={`w-16 h-1 mx-2 ${currentStep > step ? 'bg-primary-500' : 'bg-neutral-200'\r\n                    }`} />\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"flex justify-center mt-2 text-sm text-neutral-600\">\r\n            <span className={currentStep === 1 ? 'font-medium' : ''}>Registration Form</span>\r\n            <span className=\"mx-4\">ΓåÆ</span>\r\n            <span className={currentStep === 2 ? 'font-medium' : ''}>OTP Verification</span>\r\n            <span className=\"mx-4\">ΓåÆ</span>\r\n            <span className={currentStep === 3 ? 'font-medium' : ''}>Complete</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Step 1: Registration Form */}\r\n        {currentStep === 1 && (\r\n          <form onSubmit={handleSubmit} ref={formRef} className=\"space-y-8\">\r\n\r\n            {/* Error summary */}\r\n            {Object.keys(formErrors).length > 0 && (\r\n              <div ref={errorSummaryRef} className=\"bg-error-50 border border-error-200 rounded-xl p-4\" role=\"alert\">\r\n                <h2 className=\"text-sm font-semibold text-error-800 mb-2\">Please fix the following errors:</h2>\r\n                <ul className=\"list-disc list-inside text-sm text-error-700 space-y-1\">\r\n                  {Object.entries(formErrors).map(([field, error]) => (\r\n                    <li key={field}>\r\n                      {Array.isArray(error) ? error.join(', ') : error}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n\r\n            {/* Personal Information */}\r\n            <div className=\"bg-white border border-neutral-200 rounded-xl p-6\">\r\n              <h2 className=\"text-xl font-semibold text-neutral-900 mb-4\">Personal Information</h2>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    First Name <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"firstName\"\r\n                    value={formData.firstName}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('firstName')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    Last Name <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"lastName\"\r\n                    value={formData.lastName}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('lastName')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    Date of Birth <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    name=\"dateOfBirth\"\r\n                    value={formData.dateOfBirth}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('dateOfBirth')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    Phone Number <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    name=\"phoneNumber\"\r\n                    value={formData.phoneNumber}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('phoneNumber')}\r\n                    placeholder=\"+1234567890\"\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    Email Address\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    value={formData.email}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('email')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Identification */}\r\n            <div className=\"bg-white border border-neutral-200 rounded-xl p-6\">\r\n              <h2 className=\"text-xl font-semibold text-neutral-900 mb-4\">Identification</h2>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    ID Type <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <select\r\n                    name=\"idType\"\r\n                    value={formData.idType}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('idType')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  >\r\n                    <option value=\"\">Select ID Type</option>\r\n                    <option value=\"passport\">Passport</option>\r\n                    <option value=\"national_id\">National ID</option>\r\n                    <option value=\"drivers_license\">Driver's License</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    ID Number <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"idNumber\"\r\n                    value={formData.idNumber}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('idNumber')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Employment Information */}\r\n            <div className=\"bg-white border border-neutral-200 rounded-xl p-6\">\r\n              <h2 className=\"text-xl font-semibold text-neutral-900 mb-4\">Employment Information</h2>\r\n              <div className=\"space-y-6\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    Occupation <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"occupation\"\r\n                    value={formData.occupation}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('occupation')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    Work Address <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    name=\"workAddress\"\r\n                    value={formData.workAddress}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('workAddress')}\r\n                    rows={3}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    Position <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"position\"\r\n                    value={formData.position}\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('position')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Next of Kin */}\r\n            <div className=\"bg-white border border-neutral-200 rounded-xl p-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h2 className=\"text-xl font-semibold text-neutral-900\">Next of Kin</h2>\r\n                {formData.nextOfKin.length < 4 && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={addNextOfKin}\r\n                    className=\"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors\"\r\n                  >\r\n                    Add Next of Kin\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {formData.nextOfKin.map((kin, index) => (\r\n                <div key={index} className=\"border border-neutral-200 rounded-lg p-4 mb-4\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <h3 className=\"text-lg font-medium\">Next of Kin {index + 1}</h3>\r\n                    {formData.nextOfKin.length > 1 && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => removeNextOfKin(index)}\r\n                        className=\"text-error-500 hover:text-error-700\"\r\n                      >\r\n                        Remove\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                        Name <span className=\"text-error-500\">*</span>\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={kin.name}\r\n                        onChange={(e) => handleNextOfKinChange(index, 'name', e.target.value)}\r\n                        className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                        Relationship <span className=\"text-error-500\">*</span>\r\n                      </label>\r\n                      <select\r\n                        value={kin.relationship}\r\n                        onChange={(e) => handleNextOfKinChange(index, 'relationship', e.target.value)}\r\n                        className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                      >\r\n                        <option value=\"\">Select Relationship</option>\r\n                        <option value=\"spouse\">Spouse</option>\r\n                        <option value=\"parent\">Parent</option>\r\n                        <option value=\"child\">Child</option>\r\n                        <option value=\"sibling\">Sibling</option>\r\n                        <option value=\"friend\">Friend</option>\r\n                        <option value=\"other\">Other</option>\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"md:col-span-2\">\r\n                      <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                        Address <span className=\"text-error-500\">*</span>\r\n                      </label>\r\n                      <textarea\r\n                        value={kin.address}\r\n                        onChange={(e) => handleNextOfKinChange(index, 'address', e.target.value)}\r\n                        rows={2}\r\n                        className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                        Stake Percentage <span className=\"text-error-500\">*</span>\r\n                      </label>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        max=\"100\"\r\n                        step=\"0.01\"\r\n                        value={kin.stakePercentage}\r\n                        onChange={(e) => handleNextOfKinChange(index, 'stakePercentage', e.target.value)}\r\n                        className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Document Upload */}\r\n            <div className=\"bg-white border border-neutral-200 rounded-xl p-6\">\r\n              <h2 className=\"text-xl font-semibold text-neutral-900 mb-4\">Document Upload</h2>\r\n              <div className=\"space-y-6\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                    Passport Picture <span className=\"text-error-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    name=\"passportPicture\"\r\n                    accept=\"image/jpeg,image/jpg,image/png\"\r\n                    onChange={handleInputChange}\r\n                    onFocus={() => clearFieldError('passportPicture')}\r\n                    className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500\"\r\n                    required\r\n                  />\r\n                  {filePreviews.passportPicture && (\r\n                    <div className=\"mt-2\">\r\n                      <img\r\n                        src={filePreviews.passportPicture}\r\n                        alt=\"Passport preview\"\r\n                        className=\"w-32 h-32 object-cover border border-neutral-300 rounded-lg\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  <p className=\"text-sm text-neutral-500 mt-1\">\r\n                    JPG or PNG, max 5MB\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Submit Button */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"w-full py-4 px-6 bg-primary-500 text-white rounded-xl hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold\"\r\n            >\r\n              {isLoading ? 'Submitting...' : 'Submit Registration'}\r\n            </button>\r\n          </form>\r\n        )}\r\n\r\n        {/* Step 2: OTP Verification */}\r\n        {currentStep === 2 && (\r\n          <div className=\"bg-white border border-neutral-200 rounded-xl p-6 max-w-md mx-auto\">\r\n            <h2 className=\"text-xl font-semibold text-neutral-900 mb-4 text-center\">OTP Verification</h2>\r\n\r\n            {successMessage && (\r\n              <div className=\"mb-4 p-4 bg-success-50 border border-success-200 rounded-xl\">\r\n                <p className=\"text-sm text-success-800\">{successMessage}</p>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-neutral-700 mb-2\">\r\n                  Enter 6-digit OTP <span className=\"text-error-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"otpCode\"\r\n                  value={formData.otpCode}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('otpCode')}\r\n                  placeholder=\"000000\"\r\n                  className=\"w-full px-4 py-3 border border-neutral-300 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500 text-center text-2xl tracking-widest\"\r\n                  maxLength={6}\r\n                />\r\n                {formErrors.otp && (\r\n                  <p className=\"text-sm text-error-600 mt-1\">{formErrors.otp}</p>\r\n                )}\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleVerifyOTP}\r\n                disabled={isLoading || !formData.otpCode}\r\n                className=\"w-full py-3 px-6 bg-primary-500 text-white rounded-xl hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold\"\r\n              >\r\n                {isLoading ? 'Verifying...' : 'Verify OTP'}\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleSendOTP}\r\n                disabled={isLoading}\r\n                className=\"w-full py-2 px-4 text-primary-600 hover:text-primary-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm\"\r\n              >\r\n                Resend OTP\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Step 3: Success */}\r\n        {currentStep === 3 && (\r\n          <div className=\"bg-white border border-neutral-200 rounded-xl p-6 max-w-md mx-auto text-center\">\r\n            <div className=\"w-16 h-16 bg-success-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <svg className=\"w-8 h-8 text-success-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n              </svg>\r\n            </div>\r\n            <h2 className=\"text-xl font-semibold text-neutral-900 mb-2\">Registration Complete!</h2>\r\n            <p className=\"text-neutral-600 mb-4\">{successMessage}</p>\r\n            <p className=\"text-sm text-neutral-500\">\r\n              You will be redirected to the login page shortly...\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClientRegistrationPage;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isMember' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":84}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐import React from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\n// Import all role-specific dashboards\r\nimport ManagerDashboard from './ManagerDashboard';\r\nimport CashierDashboard from './CashierDashboard';\r\nimport MobileBankerDashboard from './MobileBankerDashboard';\r\nimport OperationsManagerDashboard from './OperationsManagerDashboard';\r\nimport MemberDashboard from './MemberDashboard';\r\n\r\nfunction Dashboard() {\r\n  const { user, isManager, isCashier, isMobileBanker, isOperationsManager, isMember } = useAuth();\r\n\r\n  // Role-based dashboard rendering\r\n  const renderDashboard = () => {\r\n    if (isManager) return <ManagerDashboard />;\r\n    if (isCashier) return <CashierDashboard />;\r\n    if (isMobileBanker) return <MobileBankerDashboard />;\r\n    if (isOperationsManager) return <OperationsManagerDashboard />;\r\n    return <MemberDashboard />;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {renderDashboard()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\FraudAlerts.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[338,341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[338,341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[448,451],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[448,451],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedAlert' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":20,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAlerts'. Either include it or remove the dependency array.","line":28,"column":6,"nodeType":"ArrayExpression","endLine":28,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAlerts, filterStatus]","fix":{"range":[871,885],"text":"[fetchAlerts, filterStatus]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\ninterface FraudStats {\r\n  new_alerts?: number;\r\n  investigating?: number;\r\n  resolved?: number;\r\n  critical_alerts?: number;\r\n  total_alerts?: number;\r\n  escalated?: number;\r\n  [key: string]: any;\r\n}\r\n\r\nconst FraudAlerts = () => {\r\n  const { user } = useAuth();\r\n  const [alerts, setAlerts] = useState<any[]>([]);\r\n  const [stats, setStats] = useState<FraudStats>({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedAlert, setSelectedAlert] = useState(null);\r\n  const [resolutionNotes, setResolutionNotes] = useState('');\r\n  const [actionTaken, setActionTaken] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n\r\n  useEffect(() => {\r\n    fetchAlerts();\r\n    fetchStats();\r\n  }, [filterStatus]);\r\n\r\n  const fetchAlerts = async () => {\r\n    try {\r\n      const response = await api.get('/api/fraud/alerts/', {\r\n        params: filterStatus !== 'all' ? { status: filterStatus } : {}\r\n      });\r\n      setAlerts(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching alerts:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await api.get('/api/fraud/alerts/dashboard_stats/');\r\n      setStats(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching stats:', error);\r\n    }\r\n  };\r\n\r\n  const handleAssignToMe = async (alertId) => {\r\n    try {\r\n      await api.post(`/api/fraud/alerts/${alertId}/assign_to_me/`);\r\n      fetchAlerts();\r\n    } catch (error) {\r\n      console.error('Error assigning alert:', error);\r\n    }\r\n  };\r\n\r\n  const handleResolve = async (alertId) => {\r\n    try {\r\n      await api.post(`/api/fraud/alerts/${alertId}/resolve/`, {\r\n        resolution_notes: resolutionNotes,\r\n        action_taken: actionTaken\r\n      });\r\n      setSelectedAlert(null);\r\n      setResolutionNotes('');\r\n      setActionTaken('');\r\n      fetchAlerts();\r\n      fetchStats();\r\n    } catch (error) {\r\n      console.error('Error resolving alert:', error);\r\n    }\r\n  };\r\n\r\n  const handleEscalate = async (alertId, escalatedTo, reason) => {\r\n    try {\r\n      await api.post(`/api/fraud/alerts/${alertId}/escalate/`, {\r\n        escalated_to: escalatedTo,\r\n        escalation_reason: reason\r\n      });\r\n      fetchAlerts();\r\n      fetchStats();\r\n    } catch (error) {\r\n      console.error('Error escalating alert:', error);\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'critical': return 'bg-red-500';\r\n      case 'high': return 'bg-orange-500';\r\n      case 'medium': return 'bg-yellow-500';\r\n      case 'low': return 'bg-blue-500';\r\n      default: return 'bg-gray-500';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'new': return 'bg-red-100 text-red-800';\r\n      case 'investigating': return 'bg-yellow-100 text-yellow-800';\r\n      case 'resolved': return 'bg-green-100 text-green-800';\r\n      case 'escalated': return 'bg-purple-100 text-purple-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const filteredAlerts = alerts.filter(alert =>\r\n    filterStatus === 'all' || alert.status === filterStatus\r\n  );\r\n\r\n  if (loading) {\r\n    return <div className=\"flex justify-center items-center h-64\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '24px' }}>\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <h1 style={{ fontSize: '28px', fontWeight: 'bold', marginBottom: '8px', color: '#1e293b' }}>Fraud Detection Dashboard</h1>\r\n        <p style={{ color: '#64748b' }}>Monitor and manage suspicious transaction alerts</p>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\r\n        gap: '16px',\r\n        marginBottom: '24px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: '#fee2e2',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginRight: '12px'\r\n            }}>\r\n              ΓÜá∩╕Å\r\n            </div>\r\n            <div>\r\n              <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#1e293b' }}>{stats.new_alerts || 0}</p>\r\n              <p style={{ fontSize: '14px', color: '#64748b' }}>New Alerts</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: '#fef3c7',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginRight: '12px'\r\n            }}>\r\n              ≡ƒòÉ\r\n            </div>\r\n            <div>\r\n              <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#1e293b' }}>{stats.investigating || 0}</p>\r\n              <p style={{ fontSize: '14px', color: '#64748b' }}>Investigating</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: '#d1fae5',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginRight: '12px'\r\n            }}>\r\n              Γ£à\r\n            </div>\r\n            <div>\r\n              <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#1e293b' }}>{stats.resolved || 0}</p>\r\n              <p style={{ fontSize: '14px', color: '#64748b' }}>Resolved</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: '#e9d5ff',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginRight: '12px'\r\n            }}>\r\n              ≡ƒæü∩╕Å\r\n            </div>\r\n            <div>\r\n              <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#1e293b' }}>{stats.critical_alerts || 0}</p>\r\n              <p style={{ fontSize: '14px', color: '#64748b' }}>Critical</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter Tabs */}\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '4px',\r\n        marginBottom: '24px',\r\n        background: '#f1f5f9',\r\n        borderRadius: '12px',\r\n        padding: '4px'\r\n      }}>\r\n        {[\r\n          { value: 'all', label: `All (${stats.total_alerts || 0})` },\r\n          { value: 'new', label: `New (${stats.new_alerts || 0})` },\r\n          { value: 'investigating', label: `Investigating (${stats.investigating || 0})` },\r\n          { value: 'resolved', label: `Resolved (${stats.resolved || 0})` },\r\n          { value: 'escalated', label: `Escalated (${stats.escalated || 0})` }\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.value}\r\n            onClick={() => setFilterStatus(tab.value)}\r\n            style={{\r\n              flex: 1,\r\n              padding: '12px 16px',\r\n              background: filterStatus === tab.value ? 'white' : 'transparent',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              color: filterStatus === tab.value ? '#1e293b' : '#64748b',\r\n              fontWeight: filterStatus === tab.value ? '600' : '500',\r\n              cursor: 'pointer',\r\n              boxShadow: filterStatus === tab.value ? '0 1px 3px rgba(0,0,0,0.1)' : 'none'\r\n            }}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Alerts List */}\r\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n        {filteredAlerts.map((alert) => (\r\n          <div key={alert.id} style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '24px',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            border: '1px solid #e2e8f0',\r\n            transition: 'box-shadow 0.2s'\r\n          }}\r\n            onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)'}\r\n            onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)'}\r\n          >\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '16px' }}>\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n                  <span style={{\r\n                    padding: '4px 8px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600',\r\n                    color: 'white',\r\n                    background: getPriorityColor(alert.priority).replace('bg-', '').replace('-500', '')\r\n                  }}>\r\n                    {alert.priority.toUpperCase()}\r\n                  </span>\r\n                  <span style={{\r\n                    padding: '4px 8px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600',\r\n                    ...(() => {\r\n                      const colors = getStatusColor(alert.status).split(' ');\r\n                      return {\r\n                        background: colors[0].replace('bg-', ''),\r\n                        color: colors[1].replace('text-', '').replace('-800', '')\r\n                      };\r\n                    })()\r\n                  }}>\r\n                    {alert.status}\r\n                  </span>\r\n                  <span style={{ fontSize: '14px', color: '#64748b' }}>\r\n                    Score: {alert.fraud_score}\r\n                  </span>\r\n                </div>\r\n                <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '4px', color: '#1e293b' }}>{alert.title}</h3>\r\n                <p style={{ color: '#64748b', marginBottom: '8px' }}>{alert.description}</p>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '16px', fontSize: '14px', color: '#64748b' }}>\r\n                  <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                    ≡ƒæñ {alert.transaction_details?.member_name || 'Unknown'}\r\n                  </span>\r\n                  <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                    ≡ƒÆ░ ${alert.transaction_details?.amount || 0}\r\n                  </span>\r\n                  <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                    ≡ƒôà {new Date(alert.created_at).toLocaleDateString()}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div style={{ display: 'flex', gap: '8px' }}>\r\n                {alert.status === 'new' && (\r\n                  <button\r\n                    onClick={() => handleAssignToMe(alert.id)}\r\n                    style={{\r\n                      padding: '8px 16px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      background: 'white',\r\n                      color: '#374151',\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    Assign to Me\r\n                  </button>\r\n                )}\r\n\r\n                {alert.status === 'investigating' && (\r\n                  <>\r\n                    <button\r\n                      onClick={() => {\r\n                        const action = prompt('Action Taken (approved/blocked/investigated/false_positive):', actionTaken);\r\n                        if (action) {\r\n                          setActionTaken(action);\r\n                          const notes = prompt('Resolution Notes:', resolutionNotes);\r\n                          if (notes !== null) {\r\n                            setResolutionNotes(notes);\r\n                            handleResolve(alert.id);\r\n                          }\r\n                        }\r\n                      }}\r\n                      style={{\r\n                        padding: '8px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '6px',\r\n                        background: 'white',\r\n                        color: '#374151',\r\n                        fontSize: '14px',\r\n                        fontWeight: '500',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      Resolve\r\n                    </button>\r\n\r\n                    <button\r\n                      onClick={() => handleEscalate(alert.id, 'manager', 'Requires manager review')}\r\n                      style={{\r\n                        padding: '8px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '6px',\r\n                        background: 'white',\r\n                        color: '#374151',\r\n                        fontSize: '14px',\r\n                        fontWeight: '500',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      Escalate\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Alert Details */}\r\n            <div style={{ borderTop: '1px solid #e2e8f0', paddingTop: '16px' }}>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\r\n                gap: '16px',\r\n                fontSize: '14px'\r\n              }}>\r\n                <div><strong>Transaction ID:</strong> {alert.transaction_details?.id || 'N/A'}</div>\r\n                <div><strong>Account:</strong> {alert.account_details?.account_number || 'N/A'}</div>\r\n                <div><strong>Type:</strong> {alert.transaction_details?.type || 'N/A'}</div>\r\n                <div><strong>Amount:</strong> ${alert.transaction_details?.amount || 0}</div>\r\n              </div>\r\n              {alert.rule_details && (\r\n                <div style={{ marginTop: '16px' }}>\r\n                  <strong>Triggered Rules:</strong>\r\n                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px', marginTop: '4px' }}>\r\n                    {alert.rule_details.map((rule, index) => (\r\n                      <span key={index} style={{\r\n                        padding: '2px 8px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '12px',\r\n                        fontSize: '12px',\r\n                        background: '#f9fafb'\r\n                      }}>\r\n                        {rule.name}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {filteredAlerts.length === 0 && (\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '48px',\r\n            textAlign: 'center',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            border: '1px solid #e2e8f0'\r\n          }}>\r\n            <div style={{ fontSize: '48px', marginBottom: '16px' }}>ΓÜá∩╕Å</div>\r\n            <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '8px', color: '#1e293b' }}>No alerts found</h3>\r\n            <p style={{ color: '#64748b' }}>\r\n              {filterStatus === 'all'\r\n                ? 'There are currently no fraud alerts to review.'\r\n                : `No ${filterStatus} alerts found.`\r\n              }\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FraudAlerts;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\FraudCases.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[317,320],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[317,320],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[424,427],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[424,427],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedCase' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":19,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchCases'. Either include it or remove the dependency array.","line":29,"column":6,"nodeType":"ArrayExpression","endLine":29,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [fetchCases, filterStatus]","fix":{"range":[967,981],"text":"[fetchCases, filterStatus]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { api } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\ninterface CaseStats {\r\n  open_cases?: number;\r\n  investigating?: number;\r\n  closed_cases?: number;\r\n  total_cases?: number;\r\n  escalated_cases?: number;\r\n  [key: string]: any;\r\n}\r\n\r\nconst FraudCases = () => {\r\n  const { user } = useAuth();\r\n  const [cases, setCases] = useState<any[]>([]);\r\n  const [stats, setStats] = useState<CaseStats>({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedCase, setSelectedCase] = useState(null);\r\n  const [resolutionType, setResolutionType] = useState('');\r\n  const [resolutionDetails, setResolutionDetails] = useState('');\r\n  const [evidenceType, setEvidenceType] = useState('');\r\n  const [evidenceData, setEvidenceData] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n\r\n  useEffect(() => {\r\n    fetchCases();\r\n    fetchStats();\r\n  }, [filterStatus]);\r\n\r\n  const fetchCases = async () => {\r\n    try {\r\n      const response = await api.get('/api/fraud/cases/', {\r\n        params: filterStatus !== 'all' ? { status: filterStatus } : {}\r\n      });\r\n      setCases(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching cases:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await api.get('/api/fraud/cases/case_stats/');\r\n      setStats(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching stats:', error);\r\n    }\r\n  };\r\n\r\n  const handleAssignInvestigator = async (caseId, investigatorId) => {\r\n    try {\r\n      await api.post(`/api/fraud/cases/${caseId}/assign_investigator/`, {\r\n        investigator_id: investigatorId\r\n      });\r\n      fetchCases();\r\n    } catch (error) {\r\n      console.error('Error assigning investigator:', error);\r\n    }\r\n  };\r\n\r\n  const handleCloseCase = async (caseId) => {\r\n    try {\r\n      await api.post(`/api/fraud/cases/${caseId}/close_case/`, {\r\n        resolution_type: resolutionType,\r\n        resolution_details: resolutionDetails\r\n      });\r\n      setSelectedCase(null);\r\n      setResolutionType('');\r\n      setResolutionDetails('');\r\n      fetchCases();\r\n      fetchStats();\r\n    } catch (error) {\r\n      console.error('Error closing case:', error);\r\n    }\r\n  };\r\n\r\n  const handleAddEvidence = async (caseId) => {\r\n    try {\r\n      await api.post(`/api/fraud/cases/${caseId}/add_evidence/`, {\r\n        evidence_type: evidenceType,\r\n        evidence_data: evidenceData\r\n      });\r\n      setEvidenceType('');\r\n      setEvidenceData('');\r\n      fetchCases();\r\n    } catch (error) {\r\n      console.error('Error adding evidence:', error);\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'critical': return 'bg-red-500';\r\n      case 'high': return 'bg-orange-500';\r\n      case 'medium': return 'bg-yellow-500';\r\n      case 'low': return 'bg-blue-500';\r\n      default: return 'bg-gray-500';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'open': return 'bg-red-100 text-red-800';\r\n      case 'investigating': return 'bg-yellow-100 text-yellow-800';\r\n      case 'closed': return 'bg-green-100 text-green-800';\r\n      case 'escalated': return 'bg-purple-100 text-purple-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const filteredCases = cases.filter(caseItem =>\r\n    filterStatus === 'all' || caseItem.status === filterStatus\r\n  );\r\n\r\n  if (loading) {\r\n    return <div className=\"flex justify-center items-center h-64\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '24px' }}>\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <h1 style={{ fontSize: '28px', fontWeight: 'bold', marginBottom: '8px', color: '#1e293b' }}>Fraud Case Management</h1>\r\n        <p style={{ color: '#64748b' }}>Manage and track fraud investigation cases</p>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\r\n        gap: '16px',\r\n        marginBottom: '24px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: '#fee2e2',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginRight: '12px'\r\n            }}>\r\n              ΓÜá∩╕Å\r\n            </div>\r\n            <div>\r\n              <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#1e293b' }}>{stats.open_cases || 0}</p>\r\n              <p style={{ fontSize: '14px', color: '#64748b' }}>Open Cases</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: '#fef3c7',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginRight: '12px'\r\n            }}>\r\n              ≡ƒòÉ\r\n            </div>\r\n            <div>\r\n              <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#1e293b' }}>{stats.investigating || 0}</p>\r\n              <p style={{ fontSize: '14px', color: '#64748b' }}>Investigating</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: '#d1fae5',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginRight: '12px'\r\n            }}>\r\n              Γ£à\r\n            </div>\r\n            <div>\r\n              <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#1e293b' }}>{stats.closed_cases || 0}</p>\r\n              <p style={{ fontSize: '14px', color: '#64748b' }}>Closed Cases</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: '#dbeafe',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginRight: '12px'\r\n            }}>\r\n              ≡ƒôä\r\n            </div>\r\n            <div>\r\n              <p style={{ fontSize: '24px', fontWeight: 'bold', color: '#1e293b' }}>{stats.total_cases || 0}</p>\r\n              <p style={{ fontSize: '14px', color: '#64748b' }}>Total Cases</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter Tabs */}\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '4px',\r\n        marginBottom: '24px',\r\n        background: '#f1f5f9',\r\n        borderRadius: '12px',\r\n        padding: '4px'\r\n      }}>\r\n        {[\r\n          { value: 'all', label: `All (${stats.total_cases || 0})` },\r\n          { value: 'open', label: `Open (${stats.open_cases || 0})` },\r\n          { value: 'investigating', label: `Investigating (${stats.investigating || 0})` },\r\n          { value: 'closed', label: `Closed (${stats.closed_cases || 0})` },\r\n          { value: 'escalated', label: `Escalated (${stats.escalated_cases || 0})` }\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.value}\r\n            onClick={() => setFilterStatus(tab.value)}\r\n            style={{\r\n              flex: 1,\r\n              padding: '12px 16px',\r\n              background: filterStatus === tab.value ? 'white' : 'transparent',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              color: filterStatus === tab.value ? '#1e293b' : '#64748b',\r\n              fontWeight: filterStatus === tab.value ? '600' : '500',\r\n              cursor: 'pointer',\r\n              boxShadow: filterStatus === tab.value ? '0 1px 3px rgba(0,0,0,0.1)' : 'none'\r\n            }}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Cases List */}\r\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n        {filteredCases.map((caseItem) => (\r\n          <div key={caseItem.id} style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '24px',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            border: '1px solid #e2e8f0',\r\n            transition: 'box-shadow 0.2s'\r\n          }}\r\n            onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)'}\r\n            onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)'}\r\n          >\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '16px' }}>\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n                  <span style={{\r\n                    padding: '4px 8px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600',\r\n                    color: 'white',\r\n                    background: getPriorityColor(caseItem.priority).replace('bg-', '').replace('-500', '')\r\n                  }}>\r\n                    {caseItem.priority.toUpperCase()}\r\n                  </span>\r\n                  <span style={{\r\n                    padding: '4px 8px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600',\r\n                    ...(() => {\r\n                      const colors = getStatusColor(caseItem.status).split(' ');\r\n                      return {\r\n                        background: colors[0].replace('bg-', ''),\r\n                        color: colors[1].replace('text-', '').replace('-800', '')\r\n                      };\r\n                    })()\r\n                  }}>\r\n                    {caseItem.status}\r\n                  </span>\r\n                  <span style={{ fontSize: '14px', color: '#64748b' }}>\r\n                    Case #{caseItem.case_number}\r\n                  </span>\r\n                </div>\r\n                <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '4px', color: '#1e293b' }}>{caseItem.title}</h3>\r\n                <p style={{ color: '#64748b', marginBottom: '8px' }}>{caseItem.description}</p>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '16px', fontSize: '14px', color: '#64748b' }}>\r\n                  <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                    ≡ƒæñ {caseItem.primary_account_details?.owner_name || 'Unknown'}\r\n                  </span>\r\n                  <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                    ≡ƒÆ░ ${caseItem.estimated_loss || 0}\r\n                  </span>\r\n                  <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                    ≡ƒôà {new Date(caseItem.created_at).toLocaleDateString()}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div style={{ display: 'flex', gap: '8px' }}>\r\n                {caseItem.status === 'open' && (\r\n                  <button\r\n                    onClick={() => handleAssignInvestigator(caseItem.id, user.id)}\r\n                    style={{\r\n                      padding: '8px 16px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      background: 'white',\r\n                      color: '#374151',\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    Assign to Me\r\n                  </button>\r\n                )}\r\n\r\n                {caseItem.status === 'investigating' && (\r\n                  <>\r\n                    <button\r\n                      onClick={() => {\r\n                        const type = prompt('Evidence Type (document/screenshot/log/statement/other):', evidenceType);\r\n                        if (type) {\r\n                          setEvidenceType(type);\r\n                          const data = prompt('Evidence Data:', evidenceData);\r\n                          if (data !== null) {\r\n                            setEvidenceData(data);\r\n                            handleAddEvidence(caseItem.id);\r\n                          }\r\n                        }\r\n                      }}\r\n                      style={{\r\n                        padding: '8px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '6px',\r\n                        background: 'white',\r\n                        color: '#374151',\r\n                        fontSize: '14px',\r\n                        fontWeight: '500',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      Add Evidence\r\n                    </button>\r\n\r\n                    <button\r\n                      onClick={() => {\r\n                        const type = prompt('Resolution Type (confirmed_fraud/false_positive/insufficient_evidence/resolved):', resolutionType);\r\n                        if (type) {\r\n                          setResolutionType(type);\r\n                          const details = prompt('Resolution Details:', resolutionDetails);\r\n                          if (details !== null) {\r\n                            setResolutionDetails(details);\r\n                            handleCloseCase(caseItem.id);\r\n                          }\r\n                        }\r\n                      }}\r\n                      style={{\r\n                        padding: '8px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '6px',\r\n                        background: '#1e40af',\r\n                        color: 'white',\r\n                        fontSize: '14px',\r\n                        fontWeight: '500',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      Close Case\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Case Details */}\r\n            <div style={{ borderTop: '1px solid #e2e8f0', paddingTop: '16px' }}>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\r\n                gap: '16px',\r\n                fontSize: '14px',\r\n                marginBottom: '16px'\r\n              }}>\r\n                <div>\r\n                  <strong>Primary Transaction:</strong>\r\n                  <p>{caseItem.primary_transaction_details?.id || 'N/A'}</p>\r\n                  <p>${caseItem.primary_transaction_details?.amount || 0}</p>\r\n                </div>\r\n                <div>\r\n                  <strong>Account:</strong>\r\n                  <p>{caseItem.primary_account_details?.account_number || 'N/A'}</p>\r\n                  <p>{caseItem.primary_account_details?.owner_name || 'N/A'}</p>\r\n                </div>\r\n                <div>\r\n                  <strong>Investigator:</strong>\r\n                  <p>{caseItem.assigned_investigator_name || 'Unassigned'}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {caseItem.investigation_notes && (\r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <strong>Investigation Notes:</strong>\r\n                  <p style={{ fontSize: '14px', color: '#64748b', marginTop: '4px' }}>{caseItem.investigation_notes}</p>\r\n                </div>\r\n              )}\r\n\r\n              {caseItem.evidence && caseItem.evidence.length > 0 && (\r\n                <div>\r\n                  <strong>Evidence ({caseItem.evidence.length}):</strong>\r\n                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px', marginTop: '4px' }}>\r\n                    {caseItem.evidence.map((evidence, index) => (\r\n                      <span key={index} style={{\r\n                        padding: '2px 8px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '12px',\r\n                        fontSize: '12px',\r\n                        background: '#f9fafb'\r\n                      }}>\r\n                        {evidence.type}: {evidence.description}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {filteredCases.length === 0 && (\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '48px',\r\n            textAlign: 'center',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            border: '1px solid #e2e8f0'\r\n          }}>\r\n            <div style={{ fontSize: '48px', marginBottom: '16px' }}>≡ƒôä</div>\r\n            <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '8px', color: '#1e293b' }}>No cases found</h3>\r\n            <p style={{ color: '#64748b' }}>\r\n              {filterStatus === 'all'\r\n                ? 'There are currently no fraud cases to review.'\r\n                : `No ${filterStatus} cases found.`\r\n              }\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FraudCases;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\FraudRules.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isConnected' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":44,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":22},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":48,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":48,"endColumn":20,"suggestions":[{"fix":{"range":[1720,1773],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'fetchActiveRules' and 'fetchRules'. Either include them or remove the dependency array.","line":53,"column":8,"nodeType":"ArrayExpression","endLine":53,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchActiveRules, fetchRules]","fix":{"range":[1900,1902],"text":"[fetchActiveRules, fetchRules]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchActiveRules' and 'fetchRules'. Either include them or remove the dependency array.","line":59,"column":6,"nodeType":"ArrayExpression","endLine":59,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchActiveRules, fetchRules]","fix":{"range":[1985,1987],"text":"[fetchActiveRules, fetchRules]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":298,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":298,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { api, API_BASE_URL } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { FraudRule, FraudRuleRequest } from '../api/models/FraudRule';\r\nimport { useWebSocket } from '../hooks/useWebSocket';\r\nimport VirtualizedList from '../components/VirtualizedList';\r\n\r\n// Get WebSocket base URL from environment\r\nconst getWsBaseUrl = () => {\r\n  if (import.meta.env.VITE_WS_BASE_URL) {\r\n    return import.meta.env.VITE_WS_BASE_URL;\r\n  }\r\n\r\n  // Use centralized API_BASE_URL and convert to WebSocket\r\n  return API_BASE_URL\r\n    .replace('http://', 'ws://')\r\n    .replace('https://', 'wss://')\r\n    .replace('/api/', '/ws/');\r\n};\r\n\r\nconst FraudRules: React.FC = React.memo(() => {\r\n  const { user } = useAuth();\r\n  const [rules, setRules] = useState<FraudRule[]>([]);\r\n  const [activeRules, setActiveRules] = useState<FraudRule[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\r\n  const [editingRule, setEditingRule] = useState<FraudRule | null>(null);\r\n  const [formData, setFormData] = useState<FraudRuleRequest>({\r\n    name: '',\r\n    description: '',\r\n    rule_type: '',\r\n    severity: 'medium',\r\n    field: '',\r\n    operator: '',\r\n    value: '',\r\n    additional_conditions: {},\r\n    is_active: true,\r\n    auto_block: false,\r\n    require_approval: false,\r\n    escalation_threshold: 0\r\n  });\r\n\r\n  // WebSocket for real-time fraud alerts\r\n  const { isConnected } = useWebSocket({\r\n    url: `${getWsBaseUrl()}fraud-alerts/${user?.id || ''}`,\r\n    onMessage: useCallback((message) => {\r\n      if (message.type === 'fraud_alert_update') {\r\n        console.log('Real-time fraud alert:', message.alert);\r\n        // Refresh rules to show updated trigger counts\r\n        fetchRules();\r\n        fetchActiveRules();\r\n      }\r\n    }, []),\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchRules();\r\n    fetchActiveRules();\r\n  }, []);\r\n\r\n  const fetchRules = useCallback(async () => {\r\n    try {\r\n      const response = await api.get('fraud/rules/');\r\n      setRules(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching rules:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchActiveRules = useCallback(async () => {\r\n    try {\r\n      const response = await api.get('fraud/rules/active_rules/');\r\n      setActiveRules(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching active rules:', error);\r\n    }\r\n  }, []);\r\n\r\n  const handleCreateRule = async () => {\r\n    try {\r\n      const response = await api.post('fraud/rules/', formData);\r\n      setRules([...rules, response.data]);\r\n      setShowCreateDialog(false);\r\n      resetForm();\r\n      fetchActiveRules();\r\n    } catch (error) {\r\n      console.error('Error creating rule:', error);\r\n    }\r\n  };\r\n\r\n  const handleUpdateRule = async () => {\r\n    if (!editingRule?.id) return;\r\n    try {\r\n      const response = await api.put(`fraud/rules/${editingRule.id}/`, formData);\r\n      setRules(rules.map(rule => rule.id === editingRule.id ? response.data : rule));\r\n      setEditingRule(null);\r\n      resetForm();\r\n      fetchActiveRules();\r\n    } catch (error) {\r\n      console.error('Error updating rule:', error);\r\n    }\r\n  };\r\n\r\n  const handleToggleActive = async (ruleId: number) => {\r\n    try {\r\n      await api.post(`fraud/rules/${ruleId}/toggle_active/`, {});\r\n      fetchRules();\r\n      fetchActiveRules();\r\n    } catch (error) {\r\n      console.error('Error toggling rule:', error);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      description: '',\r\n      rule_type: '',\r\n      severity: 'medium',\r\n      field: '',\r\n      operator: '',\r\n      value: '',\r\n      additional_conditions: {},\r\n      is_active: true,\r\n      auto_block: false,\r\n      require_approval: false,\r\n      escalation_threshold: 0\r\n    });\r\n  };\r\n\r\n  const openEditDialog = (rule) => {\r\n    setEditingRule(rule);\r\n    setFormData({\r\n      name: rule.name,\r\n      description: rule.description,\r\n      rule_type: rule.rule_type,\r\n      severity: rule.severity,\r\n      field: rule.field,\r\n      operator: rule.operator,\r\n      value: rule.value,\r\n      additional_conditions: rule.additional_conditions || {},\r\n      is_active: rule.is_active,\r\n      auto_block: rule.auto_block,\r\n      require_approval: rule.require_approval,\r\n      escalation_threshold: rule.escalation_threshold\r\n    });\r\n  };\r\n\r\n  const getSeverityColor = (severity) => {\r\n    switch (severity) {\r\n      case 'critical': return 'bg-red-500';\r\n      case 'high': return 'bg-orange-500';\r\n      case 'medium': return 'bg-yellow-500';\r\n      case 'low': return 'bg-blue-500';\r\n      default: return 'bg-gray-500';\r\n    }\r\n  };\r\n\r\n  const getRuleTypeIcon = (ruleType) => {\r\n    switch (ruleType) {\r\n      case 'amount_threshold': return '≡ƒÆ░';\r\n      case 'velocity_check': return 'ΓÜí';\r\n      case 'unusual_pattern': return '≡ƒöì';\r\n      case 'location_anomaly': return '≡ƒôì';\r\n      case 'time_based': return 'ΓÅ░';\r\n      case 'account_behavior': return '≡ƒæñ';\r\n      default: return 'ΓÜÖ∩╕Å';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"flex justify-center items-center h-64\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{ maxWidth: '1200px', margin: '0 auto', padding: '24px' }}\r\n      role=\"main\"\r\n      aria-labelledby=\"fraud-rules-heading\"\r\n    >\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <h1\r\n          id=\"fraud-rules-heading\"\r\n          style={{ fontSize: '28px', fontWeight: 'bold', marginBottom: '8px', color: '#1e293b' }}\r\n        >\r\n          Fraud Detection Rules\r\n        </h1>\r\n        <p style={{ color: '#64748b' }}>Configure and manage fraud detection rules</p>\r\n      </div>\r\n\r\n      {/* Active Rules Summary */}\r\n      <div style={{\r\n        background: 'white',\r\n        borderRadius: '12px',\r\n        padding: '24px',\r\n        marginBottom: '24px',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        border: '1px solid #e2e8f0'\r\n      }}>\r\n        <h2 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '16px', display: 'flex', alignItems: 'center', gap: '8px', color: '#1e293b' }}>\r\n          ≡ƒ¢í∩╕Å Active Rules Summary\r\n        </h2>\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\r\n          gap: '16px'\r\n        }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#16a34a' }}>{activeRules.length}</div>\r\n            <div style={{ fontSize: '14px', color: '#64748b' }}>Active Rules</div>\r\n          </div>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#dc2626' }}>\r\n              {activeRules.filter(r => r.severity === 'critical').length}\r\n            </div>\r\n            <div style={{ fontSize: '14px', color: '#64748b' }}>Critical Rules</div>\r\n          </div>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#ea580c' }}>\r\n              {activeRules.filter(r => r.auto_block).length}\r\n            </div>\r\n            <div style={{ fontSize: '14px', color: '#64748b' }}>Auto-Block Rules</div>\r\n          </div>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#2563eb' }}>\r\n              {activeRules.filter(r => r.require_approval).length}\r\n            </div>\r\n            <div style={{ fontSize: '14px', color: '#64748b' }}>Approval Required</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create Rule Button */}\r\n      <div style={{ marginBottom: '24px' }}>\r\n        <button\r\n          onClick={() => setShowCreateDialog(true)}\r\n          aria-label=\"Create new fraud detection rule\"\r\n          style={{\r\n            padding: '12px 24px',\r\n            background: '#1e40af',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '8px',\r\n            fontSize: '16px',\r\n            fontWeight: '500',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px'\r\n          }}\r\n        >\r\n          Γ₧ò Create New Rule\r\n        </button>\r\n      </div>\r\n\r\n      {/* Create Rule Modal */}\r\n      {showCreateDialog && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.5)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '24px',\r\n            maxWidth: '600px',\r\n            width: '90%',\r\n            maxHeight: '80vh',\r\n            overflowY: 'auto'\r\n          }}>\r\n            <h2 style={{ fontSize: '20px', fontWeight: '600', marginBottom: '16px', color: '#1e293b' }}>Create Fraud Detection Rule</h2>\r\n            <RuleForm\r\n              formData={formData}\r\n              setFormData={setFormData}\r\n              onSubmit={handleCreateRule}\r\n              onCancel={() => setShowCreateDialog(false)}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Rules List */}\r\n      {rules.length > 20 ? (\r\n        <VirtualizedList\r\n          items={rules}\r\n          itemHeight={120}\r\n          containerHeight={600}\r\n          renderItem={(rule, index) => (\r\n            <div\r\n              key={rule.id}\r\n              role=\"listitem\"\r\n              aria-label={`Fraud rule: ${rule.name}, severity ${rule.severity}, ${rule.is_active ? 'active' : 'inactive'}`}\r\n              style={{\r\n                background: 'white',\r\n                borderRadius: '12px',\r\n                padding: '24px',\r\n                boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n                border: '1px solid #e2e8f0',\r\n                transition: 'box-shadow 0.2s',\r\n                marginBottom: '16px'\r\n              }}\r\n              onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)'}\r\n              onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)'}\r\n            >\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '16px' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n                    <span style={{ fontSize: '24px' }}>{getRuleTypeIcon(rule.rule_type)}</span>\r\n                    <span style={{\r\n                      padding: '4px 8px',\r\n                      borderRadius: '12px',\r\n                      fontSize: '12px',\r\n                      fontWeight: '600',\r\n                      color: 'white',\r\n                      background: getSeverityColor(rule.severity).replace('bg-', '').replace('-500', '')\r\n                    }}>\r\n                      {rule.severity.toUpperCase()}\r\n                    </span>\r\n                    <span style={{\r\n                      padding: '4px 8px',\r\n                      borderRadius: '12px',\r\n                      fontSize: '12px',\r\n                      fontWeight: '600',\r\n                      background: rule.is_active ? '#dbeafe' : '#f3f4f6',\r\n                      color: rule.is_active ? '#1e40af' : '#374151'\r\n                    }}>\r\n                      {rule.is_active ? 'Active' : 'Inactive'}\r\n                    </span>\r\n                    {rule.auto_block && (\r\n                      <span style={{\r\n                        padding: '4px 8px',\r\n                        borderRadius: '12px',\r\n                        fontSize: '12px',\r\n                        fontWeight: '600',\r\n                        background: '#fee2e2',\r\n                        color: '#dc2626'\r\n                      }}>\r\n                        Auto-Block\r\n                      </span>\r\n                    )}\r\n                    {rule.require_approval && (\r\n                      <span style={{\r\n                        padding: '4px 8px',\r\n                        borderRadius: '12px',\r\n                        fontSize: '12px',\r\n                        fontWeight: '600',\r\n                        border: '1px solid #d1d5db',\r\n                        background: 'white'\r\n                      }}>\r\n                        Approval Required\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '4px', color: '#1e293b' }}>{rule.name}</h3>\r\n                  <p style={{ color: '#64748b', marginBottom: '8px' }}>{rule.description}</p>\r\n                  <div style={{ fontSize: '14px', color: '#64748b' }}>\r\n                    <strong>Condition:</strong> {rule.field} {rule.operator} {rule.value}\r\n                  </div>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px', fontSize: '14px', color: '#64748b', marginTop: '8px' }}>\r\n                    <span>Triggered: {rule.trigger_count} times</span>\r\n                    <span>False Positives: {rule.false_positive_count}</span>\r\n                    {rule.last_triggered && (\r\n                      <span>Last triggered: {new Date(rule.last_triggered).toLocaleDateString()}</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '8px' }}>\r\n                  <button\r\n                    onClick={() => openEditDialog(rule)}\r\n                    style={{\r\n                      padding: '8px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      background: 'white',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    Γ£Å∩╕Å\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleToggleActive(rule.id)}\r\n                    style={{\r\n                      padding: '8px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      background: 'white',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    {rule.is_active ? '≡ƒƒó' : 'ΓÜ¬'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        />\r\n      ) : (\r\n        <div\r\n          role=\"list\"\r\n          aria-label=\"Fraud detection rules\"\r\n          style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}\r\n        >\r\n          {rules.map((rule) => (\r\n            <div\r\n              key={rule.id}\r\n              role=\"listitem\"\r\n              aria-label={`Fraud rule: ${rule.name}, severity ${rule.severity}, ${rule.is_active ? 'active' : 'inactive'}`}\r\n              style={{\r\n                background: 'white',\r\n                borderRadius: '12px',\r\n                padding: '24px',\r\n                boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n                border: '1px solid #e2e8f0',\r\n                transition: 'box-shadow 0.2s'\r\n              }}\r\n              onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)'}\r\n              onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)'}\r\n            >\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '16px' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\r\n                    <span style={{ fontSize: '24px' }}>{getRuleTypeIcon(rule.rule_type)}</span>\r\n                    <span style={{\r\n                      padding: '4px 8px',\r\n                      borderRadius: '12px',\r\n                      fontSize: '12px',\r\n                      fontWeight: '600',\r\n                      color: 'white',\r\n                      background: getSeverityColor(rule.severity).replace('bg-', '').replace('-500', '')\r\n                    }}>\r\n                      {rule.severity.toUpperCase()}\r\n                    </span>\r\n                    <span style={{\r\n                      padding: '4px 8px',\r\n                      borderRadius: '12px',\r\n                      fontSize: '12px',\r\n                      fontWeight: '600',\r\n                      background: rule.is_active ? '#dbeafe' : '#f3f4f6',\r\n                      color: rule.is_active ? '#1e40af' : '#374151'\r\n                    }}>\r\n                      {rule.is_active ? 'Active' : 'Inactive'}\r\n                    </span>\r\n                    {rule.auto_block && (\r\n                      <span style={{\r\n                        padding: '4px 8px',\r\n                        borderRadius: '12px',\r\n                        fontSize: '12px',\r\n                        fontWeight: '600',\r\n                        background: '#fee2e2',\r\n                        color: '#dc2626'\r\n                      }}>\r\n                        Auto-Block\r\n                      </span>\r\n                    )}\r\n                    {rule.require_approval && (\r\n                      <span style={{\r\n                        padding: '4px 8px',\r\n                        borderRadius: '12px',\r\n                        fontSize: '12px',\r\n                        fontWeight: '600',\r\n                        border: '1px solid #d1d5db',\r\n                        background: 'white'\r\n                      }}>\r\n                        Approval Required\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '4px', color: '#1e293b' }}>{rule.name}</h3>\r\n                  <p style={{ color: '#64748b', marginBottom: '8px' }}>{rule.description}</p>\r\n                  <div style={{ fontSize: '14px', color: '#64748b' }}>\r\n                    <strong>Condition:</strong> {rule.field} {rule.operator} {rule.value}\r\n                  </div>\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px', fontSize: '14px', color: '#64748b', marginTop: '8px' }}>\r\n                    <span>Triggered: {rule.trigger_count} times</span>\r\n                    <span>False Positives: {rule.false_positive_count}</span>\r\n                    {rule.last_triggered && (\r\n                      <span>Last triggered: {new Date(rule.last_triggered).toLocaleDateString()}</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '8px' }}>\r\n                  <button\r\n                    onClick={() => openEditDialog(rule)}\r\n                    style={{\r\n                      padding: '8px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      background: 'white',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    Γ£Å∩╕Å\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleToggleActive(rule.id)}\r\n                    style={{\r\n                      padding: '8px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      background: 'white',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    {rule.is_active ? '≡ƒƒó' : 'ΓÜ¬'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {rules.length === 0 && (\r\n            <div style={{\r\n              background: 'white',\r\n              borderRadius: '12px',\r\n              padding: '48px',\r\n              textAlign: 'center',\r\n              boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n              border: '1px solid #e2e8f0'\r\n            }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '16px' }}>≡ƒ¢í∩╕Å</div>\r\n              <h3 style={{ fontSize: '18px', fontWeight: '600', marginBottom: '8px', color: '#1e293b' }}>No rules configured</h3>\r\n              <p style={{ color: '#64748b', marginBottom: '16px' }}>\r\n                Create your first fraud detection rule to start monitoring transactions.\r\n              </p>\r\n              <button\r\n                onClick={() => setShowCreateDialog(true)}\r\n                style={{\r\n                  padding: '12px 24px',\r\n                  background: '#1e40af',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  fontSize: '16px',\r\n                  fontWeight: '500',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Γ₧ò Create First Rule\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Edit Rule Modal */}\r\n      {editingRule && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.5)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '24px',\r\n            maxWidth: '600px',\r\n            width: '90%',\r\n            maxHeight: '80vh',\r\n            overflowY: 'auto'\r\n          }}>\r\n            <h2 style={{ fontSize: '20px', fontWeight: '600', marginBottom: '16px', color: '#1e293b' }}>Edit Fraud Detection Rule</h2>\r\n            <RuleForm\r\n              formData={formData}\r\n              setFormData={setFormData}\r\n              onSubmit={handleUpdateRule}\r\n              onCancel={() => setEditingRule(null)}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\n// Rule Form Component\r\nconst RuleForm = ({ formData, setFormData, onSubmit, onCancel }) => {\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit();\r\n  };\r\n\r\n  const updateFormData = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '16px' }}>\r\n        <div>\r\n          <label htmlFor=\"name\" style={{ display: 'block', marginBottom: '4px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>Rule Name</label>\r\n          <input\r\n            id=\"name\"\r\n            type=\"text\"\r\n            value={formData.name}\r\n            onChange={(e) => updateFormData('name', e.target.value)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '8px 12px',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '6px',\r\n              fontSize: '14px'\r\n            }}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"rule_type\" style={{ display: 'block', marginBottom: '4px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>Rule Type</label>\r\n          <select\r\n            id=\"rule_type\"\r\n            value={formData.rule_type}\r\n            onChange={(e) => updateFormData('rule_type', e.target.value)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '8px 12px',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '6px',\r\n              fontSize: '14px',\r\n              background: 'white'\r\n            }}\r\n          >\r\n            <option value=\"\">Select rule type</option>\r\n            <option value=\"amount_threshold\">Amount Threshold</option>\r\n            <option value=\"velocity_check\">Velocity Check</option>\r\n            <option value=\"unusual_pattern\">Unusual Pattern</option>\r\n            <option value=\"location_anomaly\">Location Anomaly</option>\r\n            <option value=\"time_based\">Time-Based Rule</option>\r\n            <option value=\"account_behavior\">Account Behavior</option>\r\n            <option value=\"custom\">Custom Rule</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"description\" style={{ display: 'block', marginBottom: '4px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>Description</label>\r\n        <textarea\r\n          id=\"description\"\r\n          value={formData.description}\r\n          onChange={(e) => updateFormData('description', e.target.value)}\r\n          rows={3}\r\n          style={{\r\n            width: '100%',\r\n            padding: '8px 12px',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '6px',\r\n            fontSize: '14px',\r\n            resize: 'vertical'\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '16px' }}>\r\n        <div>\r\n          <label htmlFor=\"severity\" style={{ display: 'block', marginBottom: '4px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>Severity</label>\r\n          <select\r\n            id=\"severity\"\r\n            value={formData.severity}\r\n            onChange={(e) => updateFormData('severity', e.target.value)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '8px 12px',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '6px',\r\n              fontSize: '14px',\r\n              background: 'white'\r\n            }}\r\n          >\r\n            <option value=\"low\">Low</option>\r\n            <option value=\"medium\">Medium</option>\r\n            <option value=\"high\">High</option>\r\n            <option value=\"critical\">Critical</option>\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"field\" style={{ display: 'block', marginBottom: '4px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>Field</label>\r\n          <input\r\n            id=\"field\"\r\n            type=\"text\"\r\n            value={formData.field}\r\n            onChange={(e) => updateFormData('field', e.target.value)}\r\n            placeholder=\"e.g., amount, account_id\"\r\n            style={{\r\n              width: '100%',\r\n              padding: '8px 12px',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '6px',\r\n              fontSize: '14px'\r\n            }}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"operator\" style={{ display: 'block', marginBottom: '4px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>Operator</label>\r\n          <select\r\n            id=\"operator\"\r\n            value={formData.operator}\r\n            onChange={(e) => updateFormData('operator', e.target.value)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '8px 12px',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '6px',\r\n              fontSize: '14px',\r\n              background: 'white'\r\n            }}\r\n          >\r\n            <option value=\"\">Select operator</option>\r\n            <option value=\"gt\">Greater Than</option>\r\n            <option value=\"gte\">Greater Than or Equal</option>\r\n            <option value=\"lt\">Less Than</option>\r\n            <option value=\"lte\">Less Than or Equal</option>\r\n            <option value=\"eq\">Equal</option>\r\n            <option value=\"ne\">Not Equal</option>\r\n            <option value=\"contains\">Contains</option>\r\n            <option value=\"in\">In List</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"value\" style={{ display: 'block', marginBottom: '4px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>Value</label>\r\n        <input\r\n          id=\"value\"\r\n          type=\"text\"\r\n          value={formData.value}\r\n          onChange={(e) => updateFormData('value', e.target.value)}\r\n          style={{\r\n            width: '100%',\r\n            padding: '8px 12px',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '6px',\r\n            fontSize: '14px'\r\n          }}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '16px' }}>\r\n        <div>\r\n          <label htmlFor=\"escalation_threshold\" style={{ display: 'block', marginBottom: '4px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>Escalation Threshold</label>\r\n          <input\r\n            id=\"escalation_threshold\"\r\n            type=\"number\"\r\n            value={formData.escalation_threshold}\r\n            onChange={(e) => updateFormData('escalation_threshold', parseInt(e.target.value) || 0)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '8px 12px',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '6px',\r\n              fontSize: '14px'\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>\r\n        <label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer' }}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={formData.is_active}\r\n            onChange={(e) => updateFormData('is_active', e.target.checked)}\r\n          />\r\n          <span style={{ fontSize: '14px', color: '#374151' }}>Active</span>\r\n        </label>\r\n        <label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer' }}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={formData.auto_block}\r\n            onChange={(e) => updateFormData('auto_block', e.target.checked)}\r\n          />\r\n          <span style={{ fontSize: '14px', color: '#374151' }}>Auto-Block</span>\r\n        </label>\r\n        <label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer' }}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={formData.require_approval}\r\n            onChange={(e) => updateFormData('require_approval', e.target.checked)}\r\n          />\r\n          <span style={{ fontSize: '14px', color: '#374151' }}>Require Approval</span>\r\n        </label>\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '8px', marginTop: '16px' }}>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          style={{\r\n            padding: '8px 16px',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '6px',\r\n            background: 'white',\r\n            color: '#374151',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          style={{\r\n            padding: '8px 16px',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            background: '#1e40af',\r\n            color: 'white',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          {formData.id ? 'Update Rule' : 'Create Rule'}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default FraudRules;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Login.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validationWarnings' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setValidationWarnings' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":18,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lastInput' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":21,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkAuth' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDashboardRoute' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":52},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":54,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":54,"endColumn":49,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2086,2165],"text":"{ const emailError = validateEmail(value);\r\n        return { email: emailError }; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":57,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":57,"endColumn":56,"suggestions":[{"messageId":"addBrackets","fix":{"range":[2199,2438],"text":"{ const passwordErrors = validatePassword(value);\r\n        return {\r\n          password: passwordErrors.length > 0 ?\r\n            `Password must contain: ${passwordErrors.map(rule => rule.message).join(', ')}` :\r\n            null\r\n        }; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":140,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":140,"endColumn":20,"suggestions":[{"fix":{"range":[4820,4884],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":153,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":153,"endColumn":20,"suggestions":[{"fix":{"range":[5319,5380],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":162,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":162,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleKeyDown' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":213,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":213,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport logo from '../assets/logo.png';\r\n\r\n/**\r\n * Production-ready, accessible login component with modern best practices\r\n * Features WCAG 2.1 AA compliance, comprehensive validation, and responsive design\r\n */\r\nfunction LoginPage() {\r\n  // State management\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    rememberMe: false\r\n  });\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [validationWarnings, setValidationWarnings] = useState({});\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [lastInput, setLastInput] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n\r\n  // Accessibility and refs\r\n  const emailInputRef = useRef(null);\r\n  const passwordInputRef = useRef(null);\r\n  const formRef = useRef(null);\r\n  const errorSummaryRef = useRef(null);\r\n  const { login, checkAuth, getDashboardRoute, user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  // Password validation disabled - we only check if password exists now\r\n  // Complex password rules are handled by the backend during registration\r\n\r\n  // Email validation\r\n  const validateEmail = useCallback((email) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!email) return 'Email is required';\r\n    if (!emailRegex.test(email)) return 'Please enter a valid email address';\r\n    if (email.length > 254) return 'Email address is too long';\r\n    return null;\r\n  }, []);\r\n\r\n  // Password validation - simplified (just require password exists)\r\n  const validatePassword = useCallback((password) => {\r\n    if (!password) return [{ message: 'Password is required' }];\r\n    return []; // No complex rules - just need a password\r\n  }, []);\r\n\r\n  // Real-time validation\r\n  const validateField = useCallback((name, value) => {\r\n    switch (name) {\r\n      case 'email':\r\n        const emailError = validateEmail(value);\r\n        return { email: emailError };\r\n      case 'password':\r\n        const passwordErrors = validatePassword(value);\r\n        return {\r\n          password: passwordErrors.length > 0 ?\r\n            `Password must contain: ${passwordErrors.map(rule => rule.message).join(', ')}` :\r\n            null\r\n        };\r\n      default:\r\n        return {};\r\n    }\r\n  }, [validateEmail, validatePassword]);\r\n\r\n  // Update form data and validate\r\n  const handleInputChange = useCallback((e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    const newValue = type === 'checkbox' ? checked : value;\r\n\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: newValue\r\n    }));\r\n\r\n    // Real-time validation for focused field\r\n    if (name === 'email' || name === 'password') {\r\n      const errors = validateField(name, newValue);\r\n      setFormErrors(prev => ({ ...prev, ...errors }));\r\n    }\r\n\r\n    setLastInput(name);\r\n  }, [validateField]);\r\n\r\n  // Form validation on submit\r\n  const validateForm = useCallback(() => {\r\n    const errors = {};\r\n\r\n    // Email validation\r\n    const emailError = validateEmail(formData.email);\r\n    if (emailError) errors.email = emailError;\r\n\r\n    // Password validation\r\n    const passwordErrors = validatePassword(formData.password);\r\n    if (passwordErrors.length > 0) {\r\n      errors.password = `Password must contain: ${passwordErrors.map(rule => rule.message).join(', ')}`;\r\n    }\r\n\r\n    setFormErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  }, [formData.email, formData.password, validateEmail, validatePassword]);\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      // Focus first error field\r\n      if (errorSummaryRef.current) {\r\n        errorSummaryRef.current.focus();\r\n      } else if (emailInputRef.current && formErrors.email) {\r\n        emailInputRef.current.focus();\r\n      } else if (passwordInputRef.current && formErrors.password) {\r\n        passwordInputRef.current.focus();\r\n      }\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setFormErrors({});\r\n    setSuccessMessage('');\r\n\r\n    try {\r\n      const result = await login(formData.email, formData.password);\r\n\r\n      if (result.success) {\r\n        setSuccessMessage('Login successful! Redirecting...');\r\n\r\n        // Store remember me preference\r\n        if (formData.rememberMe) {\r\n          localStorage.setItem('rememberedEmail', formData.email);\r\n        } else {\r\n          localStorage.removeItem('rememberedEmail');\r\n        }\r\n\r\n        // Calculate route directly from login response user data (not async state)\r\n        const userRole = result.user?.role;\r\n        console.log('[DEBUG] User role from login response:', userRole);\r\n\r\n        const roleRoutes = {\r\n          customer: '/member-dashboard',\r\n          cashier: '/cashier-dashboard',\r\n          mobile_banker: '/mobile-banker-dashboard',\r\n          manager: '/manager-dashboard',\r\n          operations_manager: '/operations-dashboard',\r\n          administrator: '/dashboard',\r\n          superuser: '/dashboard',\r\n        };\r\n\r\n        const targetRoute = roleRoutes[userRole] || '/dashboard';\r\n        console.log('[DEBUG] Calculated target route:', targetRoute);\r\n\r\n        // Navigate using React Router to preserve state (User object from login response)\r\n        // This avoids a full page reload which would lose the state and force a checkAuth (which might fail if cookies aren't ready)\r\n        navigate(targetRoute);\r\n      } else {\r\n        setFormErrors({ submit: result.error || 'Login failed. Please try again.' });\r\n        passwordInputRef.current?.focus();\r\n      }\r\n    } catch (error) {\r\n      setFormErrors({\r\n        submit: 'Network error. Please check your connection and try again.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Clear specific field error\r\n  const clearFieldError = (fieldName) => {\r\n    setFormErrors(prev => ({ ...prev, [fieldName]: undefined }));\r\n  };\r\n\r\n  // Load remembered email on mount\r\n  useEffect(() => {\r\n    const rememberedEmail = localStorage.getItem('rememberedEmail');\r\n    if (rememberedEmail) {\r\n      setFormData(prev => ({ ...prev, email: rememberedEmail, rememberMe: true }));\r\n    }\r\n  }, []);\r\n\r\n  // Pre-fill email from URL params if available\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const prefillEmail = urlParams.get('email');\r\n    if (prefillEmail) {\r\n      setFormData(prev => ({ ...prev, email: prefillEmail }));\r\n    }\r\n  }, []);\r\n\r\n  // Simplified password strength calculation (for login, not registration)\r\n  const getPasswordStrength = useCallback((password) => {\r\n    if (!password) return 0;\r\n\r\n    let strength = 0;\r\n\r\n    // Basic checks for visual feedback\r\n    if (password.length >= 8) strength += 25;\r\n    if (password.length > 12) strength += 15;\r\n    if (/[A-Z]/.test(password)) strength += 20;\r\n    if (/[a-z]/.test(password)) strength += 15;\r\n    if (/[0-9]/.test(password)) strength += 15;\r\n    if (/[^A-Za-z0-9]/.test(password)) strength += 10;\r\n\r\n    return Math.min(100, strength);\r\n  }, []);\r\n\r\n  const passwordStrength = getPasswordStrength(formData.password);\r\n\r\n  // Keyboard navigation support\r\n  const handleKeyDown = (e, action) => {\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      e.preventDefault();\r\n      action();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex bg-white\">\r\n      {/* Skip to main content link */}\r\n      <a href=\"#main-content\" className=\"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary-600 text-white px-4 py-2 rounded-md z-50\">\r\n        Skip to main content\r\n      </a>\r\n\r\n      {/* Left Column - Hero/Branding (Hidden on mobile) */}\r\n      <div className=\"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary-900 to-secondary-900 p-12 flex-col justify-between relative overflow-hidden\">\r\n        {/* Background Decorative Circles */}\r\n        <div className=\"absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-primary-700/30 rounded-full blur-3xl\"></div>\r\n        <div className=\"absolute bottom-0 left-0 -ml-20 -mb-20 w-80 h-80 bg-accent-600/20 rounded-full blur-3xl\"></div>\r\n\r\n        <div className=\"relative z-10\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <img src={logo} alt=\"Coastal Banking Logo\" className=\"h-16 w-auto object-contain bg-white/10 rounded-lg p-1 backdrop-blur-md border border-white/20\" />\r\n            <span className=\"text-white text-xl font-bold tracking-tight\">Coastal Banking</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"relative z-10\">\r\n          <h1 className=\"text-5xl font-extrabold text-white mb-6 leading-tight\">\r\n            Banking built for <span className=\"text-accent-400\">your future.</span>\r\n          </h1>\r\n          <p className=\"text-primary-100 text-xl max-w-lg mb-8 leading-relaxed\">\r\n            Experience secure, seamless, and smart banking solutions designed to help you grow.\r\n          </p>\r\n\r\n          <div className=\"flex gap-4\">\r\n            <div className=\"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-full border border-white/10 text-white/90 text-sm\">\r\n              <span className=\"w-2 h-2 bg-success-400 rounded-full animate-pulse\"></span>\r\n              System Operational\r\n            </div>\r\n            <div className=\"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-full border border-white/10 text-white/90 text-sm\">\r\n              <span>≡ƒ¢í∩╕Å</span> 256-bit Secure\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"relative z-10 text-primary-200 text-sm\">\r\n          ┬⌐ 2025 Coastal Auto Tech Cooperative Credit Union\r\n        </div>\r\n      </div>\r\n\r\n      {/* Right Column - Login Form */}\r\n      <main id=\"main-content\" className=\"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-20 xl:px-24 bg-white relative\">\r\n\r\n        <div className=\"mx-auto w-full max-w-sm lg:w-96\">\r\n          <div className=\"lg:hidden mb-10 text-center\">\r\n            <img src={logo} alt=\"Coastal Banking Logo\" className=\"h-24 mx-auto mb-6 object-contain\" />\r\n            <h2 className=\"text-3xl font-bold text-secondary-900\">Sign In</h2>\r\n          </div>\r\n\r\n          <div className=\"mb-8\">\r\n            <h2 className=\"hidden lg:block text-3xl font-bold text-secondary-900 mb-2\">Welcome Back</h2>\r\n            <p className=\"text-secondary-500\">Please enter your credentials to access your account.</p>\r\n          </div>\r\n\r\n          {/* Error Summary */}\r\n          {(formErrors.submit || Object.keys(formErrors).length > 1) && (\r\n            <div ref={errorSummaryRef} className=\"mb-6 p-4 bg-error-50 border border-error-100 rounded-xl flex items-start ring-1 ring-error-200\" role=\"alert\" tabIndex={-1}>\r\n              <span className=\"text-error-500 mt-0.5 mr-3\">ΓÜá∩╕Å</span>\r\n              <div>\r\n                <h3 className=\"text-sm font-semibold text-error-800\">Authentication Failed</h3>\r\n                <ul className=\"mt-1 text-sm text-error-700 list-disc list-inside\">\r\n                  {formErrors.submit && <li>{formErrors.submit}</li>}\r\n                  {formErrors.email && <li>{formErrors.email}</li>}\r\n                  {formErrors.password && <li>{formErrors.password}</li>}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Success Message */}\r\n          {successMessage && (\r\n            <div className=\"mb-6 p-4 bg-success-50 border border-success-100 rounded-xl flex items-center ring-1 ring-success-200\" role=\"alert\">\r\n              <span className=\"text-success-500 mr-3\">Γ£ô</span>\r\n              <p className=\"text-sm font-medium text-success-800\">{successMessage}</p>\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} ref={formRef} noValidate className=\"space-y-6\">\r\n\r\n\r\n\r\n            {/* Email */}\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-secondary-700 mb-1\">\r\n                Email Address\r\n              </label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-secondary-400\">\r\n                  ≡ƒôº\r\n                </div>\r\n                <input\r\n                  ref={emailInputRef}\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  autoComplete=\"email\"\r\n                  required\r\n                  value={formData.email}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('email')}\r\n                  className={`block w-full pl-10 pr-3 py-3 rounded-lg border focus:ring-2 focus:ring-offset-0 text-sm transition-colors ${formErrors.email\r\n                    ? 'border-error-300 focus:border-error-500 focus:ring-error-200 bg-error-50 text-error-900'\r\n                    : 'bg-white border-secondary-300 focus:border-primary-500 focus:ring-primary-100 text-secondary-900'\r\n                    }`}\r\n                  placeholder=\"name@example.com\"\r\n                />\r\n              </div>\r\n              {formErrors.email && <p className=\"mt-1 text-sm text-error-600\">{formErrors.email}</p>}\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <div className=\"flex justify-between items-center mb-1\">\r\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-secondary-700\">Password</label>\r\n                <Link to=\"/forgot-password\" className=\"text-sm font-medium text-primary-600 hover:text-primary-700\">Forgot password?</Link>\r\n              </div>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-secondary-400\">\r\n                  ≡ƒöÆ\r\n                </div>\r\n                <input\r\n                  ref={passwordInputRef}\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  autoComplete=\"current-password\"\r\n                  required\r\n                  value={formData.password}\r\n                  onChange={handleInputChange}\r\n                  onFocus={() => clearFieldError('password')}\r\n                  className={`block w-full pl-10 pr-10 py-3 rounded-lg border focus:ring-2 focus:ring-offset-0 text-sm transition-colors ${formErrors.password\r\n                    ? 'border-error-300 focus:border-error-500 focus:ring-error-200 bg-error-50 text-error-900'\r\n                    : 'bg-white border-secondary-300 focus:border-primary-500 focus:ring-primary-100 text-secondary-900'\r\n                    }`}\r\n                  placeholder=\"ΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇó\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-secondary-400 hover:text-secondary-600 cursor-pointer focus:outline-none\"\r\n                >\r\n                  {showPassword ? '≡ƒæü∩╕Å' : '≡ƒæü∩╕ÅΓÇì≡ƒù¿∩╕Å'}\r\n                </button>\r\n              </div>\r\n\r\n              {/* Password Strength Bar */}\r\n              {formData.password && (\r\n                <div className=\"mt-2\">\r\n                  <div className=\"flex justify-between text-xs text-secondary-500 mb-1\">\r\n                    <span>Password Strength</span>\r\n                    <span className={`${passwordStrength < 40 ? 'text-error-600' : 'text-success-600'}`}>\r\n                      {passwordStrength < 40 ? 'Weak' : passwordStrength < 80 ? 'Good' : 'Strong'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"w-full bg-secondary-200 rounded-full h-1.5 overflow-hidden\">\r\n                    <div\r\n                      className={`h-full transition-all duration-300 ${passwordStrength < 40 ? 'bg-error-500' :\r\n                        passwordStrength < 80 ? 'bg-warning-500' : 'bg-success-500'\r\n                        }`}\r\n                      style={{ width: `${passwordStrength}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {formErrors.password && <p className=\"mt-1 text-sm text-error-600\">{formErrors.password}</p>}\r\n            </div>\r\n\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                id=\"remember-me\"\r\n                name=\"rememberMe\"\r\n                type=\"checkbox\"\r\n                checked={formData.rememberMe}\r\n                onChange={handleInputChange}\r\n                className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-secondary-300 rounded cursor-pointer\"\r\n              />\r\n              <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-secondary-700 cursor-pointer\">\r\n                Remember me for 30 days\r\n              </label>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-bold text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-wait transition-all\"\r\n            >\r\n              {isLoading ? (\r\n                <>\r\n                  <span className=\"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin mr-2\"></span>\r\n                  Signing in...\r\n                </>\r\n              ) : (\r\n                'Sign in'\r\n              )}\r\n            </button>\r\n          </form>\r\n\r\n          <div className=\"mt-8 text-center\">\r\n            <p className=\"text-sm text-secondary-600\">\r\n              Don't have an account?{' '}\r\n              <Link to=\"/register\" className=\"font-semibold text-primary-600 hover:text-primary-500\">\r\n                Create an account\r\n              </Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      {/* Live Region */}\r\n      <div className=\"sr-only\" aria-live=\"polite\">\r\n        {successMessage || Object.values(formErrors).join(', ')}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\ManagerDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatCurrencyGHS' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3356,3359],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3356,3359],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'transactions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":62,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchStaffIds'. Either include it or remove the dependency array.","line":131,"column":6,"nodeType":"ArrayExpression","endLine":131,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [activeView, fetchStaffIds, staffIdFilters]","fix":{"range":[7868,7896],"text":"[activeView, fetchStaffIds, staffIdFilters]"}}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":139,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":139,"endColumn":18,"suggestions":[{"fix":{"range":[8102,8161],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":152,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":152,"endColumn":16,"suggestions":[{"fix":{"range":[8486,8542],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":160,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":160,"endColumn":18,"suggestions":[{"fix":{"range":[8708,8749],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":204,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":204,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10126,10129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10126,10129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10639,10642],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10639,10642],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":222,"column":71,"nodeType":"MemberExpression","messageId":"limited","endLine":222,"endColumn":82,"suggestions":[{"fix":{"range":[11052,11079],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":228,"column":73,"nodeType":"MemberExpression","messageId":"limited","endLine":228,"endColumn":84,"suggestions":[{"fix":{"range":[11351,11378],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport ProductsServicesManagement from '../components/manager/ProductsServicesManagement';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\nimport { authService } from '../services/api.ts';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport DashboardLayout from '../components/layout/DashboardLayout.tsx'; // Unified Layout\r\nimport OverviewSection from '../components/manager/OverviewSection';\r\nimport MessagingSection from '../components/manager/MessagingSection';\r\nimport UserManagementSection from '../components/manager/UserManagementSection';\r\nimport StaffIdsSection from '../components/manager/StaffIdsSection';\r\nimport TransactionsSection from '../components/manager/TransactionsSection';\r\nimport LoansSection from '../components/manager/LoansSection';\r\nimport ServiceChargesSection from '../components/manager/ServiceChargesSection';\r\nimport PayslipSection from '../components/manager/PayslipSection';\r\nimport CashFlowSection from '../components/manager/CashFlowSection';\r\nimport InterestSection from '../components/manager/InterestSection';\r\nimport CommissionSection from '../components/manager/CommissionSection';\r\nimport StatementsSection from '../components/manager/StatementsSection';\r\nimport ExpensesSection from '../components/manager/ExpensesSection';\r\nimport AccountsTab from '../components/AccountsTab';\r\nimport SecuritySection from '../components/manager/SecuritySection';\r\nimport StaffPayslipViewer from '../components/staff/StaffPayslipViewer';\r\nimport AccountOpeningsSection from '../components/manager/AccountOpeningsSection';\r\n\r\nfunction ManagerDashboard() {\r\n\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const hasMessagingAccess = ['manager', 'operations_manager', 'cashier', 'mobile_banker'].includes(user?.role);\r\n\r\n  // --- MENU ITEMS CONFIG ---\r\n  // Updated colors to match Unified Theme vaguely, but icons/IDs remain\r\n  const menuItems = React.useMemo(() => [\r\n    { id: 'overview', name: 'Overview', icon: '≡ƒôè' },\r\n    { id: 'accounts', name: 'Accounts', icon: '≡ƒÅª' },\r\n    { id: 'account-openings', name: 'Account Requests', icon: '≡ƒôé' },\r\n    { id: 'messaging', name: 'Messaging', icon: '≡ƒÆ¼' },\r\n    { id: 'products-services', name: 'Products & Services', icon: '≡ƒÄü' },\r\n    { id: 'users', name: 'Staff Users', icon: '≡ƒæÑ' },\r\n    { id: 'staff-ids', name: 'Staff IDs', icon: '≡ƒåö' },\r\n    { id: 'transactions', name: 'All Transacs', icon: '≡ƒÆ╕' },\r\n    { id: 'loans', name: 'Loan Apps', icon: '≡ƒô¥' },\r\n    { id: 'charges', name: 'Charges', icon: '≡ƒÅ╖∩╕Å' },\r\n    { id: 'payslip', name: 'Payslips', icon: '≡ƒºº' },\r\n    { id: 'my_payslips', name: 'My Payslips', icon: '≡ƒÆ░' },\r\n    { id: 'cashflow', name: 'Cash Flow', icon: '≡ƒîè' },\r\n    { id: 'interest', name: 'Interest', icon: '≡ƒôê' },\r\n    { id: 'commission', name: 'Commission', icon: '≡ƒñ¥' },\r\n    { id: 'statements', name: 'Statements', icon: '≡ƒô£' },\r\n    { id: 'expenses', name: 'Expenses', icon: '≡ƒôë' },\r\n    { id: 'security', name: 'Security', icon: '≡ƒ¢í∩╕Å' }\r\n  ], []);\r\n\r\n  // --- STATE MANAGEMENT ---\r\n  const [activeView, setActiveView] = useState('overview');\r\n  const [dashboardData, setDashboardData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [formData, setFormData] = useState<any>({});\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loans, setLoans] = useState([]);\r\n  const [cashFlow, setCashFlow] = useState(null);\r\n  const [interestData, setInterestData] = useState(null);\r\n  const [commissionData, setCommissionData] = useState(null);\r\n  const [serviceCharges, setServiceCharges] = useState([]);\r\n  const [newCharge, setNewCharge] = useState({\r\n    name: '', description: '', charge_type: 'percentage', rate: '', applicable_to: []\r\n  });\r\n  const [serviceChargeCalculation, setServiceChargeCalculation] = useState(null);\r\n  // unused: const [interestCalculation, setInterestCalculation] = useState(null);\r\n  // unused: const [commissionCalculation, setCommissionCalculation] = useState(null);\r\n  // unused: const [showDropdown, setShowDropdown] = useState(false);\r\n  const [staffMembers, setStaffMembers] = useState([]);\r\n  const [otpCode, setOtpCode] = useState('');\r\n  const [phoneVerified, setPhoneVerified] = useState(false);\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [otpExpiresIn, setOtpExpiresIn] = useState(0);\r\n  const [otpLoading, setOtpLoading] = useState(false); // Prevent double-clicks\r\n  const [expenses, setExpenses] = useState([]);\r\n  const [newExpense, setNewExpense] = useState({\r\n    category: '', amount: '', description: '', date_incurred: new Date().toISOString().split('T')[0]\r\n  });\r\n  const [staffIds, setStaffIds] = useState([]);\r\n  const [staffIdFilters, setStaffIdFilters] = useState({});\r\n\r\n  // --- EFFECTS ---\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      const response = await authService.getOperationalMetrics();\r\n      if (response.success) {\r\n        setDashboardData({\r\n          branch_metrics: [\r\n            { label: 'System Uptime', value: response.data.system_uptime, change: '+0.1%', trend: 'up', icon: 'ΓÅ▒∩╕Å' },\r\n            { label: 'Transactions', value: response.data.transactions_today?.toLocaleString() || '0', change: `+${response.data.transaction_change || 0}%`, trend: 'up', icon: '≡ƒÆ│' },\r\n            { label: 'API Speed', value: `${response.data.api_response_time}ms`, change: '-5ms', trend: 'up', icon: 'ΓÜí' },\r\n            { label: 'Failed TXs', value: response.data.failed_transactions?.toString() || '0', change: `+${response.data.failed_change || 0}`, trend: 'down', icon: 'Γ¥î' }\r\n          ],\r\n          staff_performance: response.data.staff_performance || [],\r\n          pending_approvals: response.data.pending_approvals || []\r\n        });\r\n      } else { console.error('Failed to fetch dashboard data:', response.error); }\r\n    } catch (error) { console.error('Error fetching dashboard data:', error); } finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  const fetchTransactions = async () => { const r = await authService.getAllTransactions(); if (r.success) setTransactions(Array.isArray(r.data) ? r.data : []); };\r\n  const fetchLoans = async () => { const r = await authService.getPendingLoans(); if (r.success) setLoans(r.data); };\r\n  const fetchCashFlow = async () => { const r = await authService.getCashFlow(); if (r.success) setCashFlow(r.data); };\r\n  const fetchInterest = async () => { const r = await authService.calculateInterest({}); if (r.success) setInterestData(r.data); };\r\n  const fetchCommission = async () => { const r = await authService.calculateCommission({}); if (r.success) setCommissionData(r.data); };\r\n  const fetchServiceCharges = async () => { const r = await authService.getServiceCharges(); if (r.success) setServiceCharges(r.data); };\r\n  const fetchStaffMembers = async () => { const r = await authService.getAllStaff(); if (r.success) setStaffMembers(r.data); };\r\n  const fetchExpenses = async () => { const r = await authService.getExpenses(); if (r.success) setExpenses(r.data); };\r\n  const fetchStaffIds = async () => { const r = await authService.getStaffIds(staffIdFilters); if (r.success) setStaffIds(r.data.results || r.data); };\r\n\r\n  useEffect(() => {\r\n    if (activeView === 'transactions') fetchTransactions();\r\n    if (activeView === 'loans') fetchLoans();\r\n    if (activeView === 'cashflow') fetchCashFlow();\r\n    if (activeView === 'interest') fetchInterest();\r\n    if (activeView === 'commission') fetchCommission();\r\n    if (activeView === 'charges') fetchServiceCharges();\r\n    if (activeView === 'users' || activeView === 'payslip') fetchStaffMembers();\r\n    if (activeView === 'staff-ids') fetchStaffIds();\r\n    if (activeView === 'expenses') fetchExpenses();\r\n  }, [activeView, staffIdFilters]);\r\n\r\n  // --- HANDLERS ---\r\n  const handleLogout = async () => { await logout(); navigate('/login'); };\r\n\r\n  const handleSendOTP = async () => {\r\n    // Prevent double-clicks\r\n    if (otpLoading) {\r\n      console.log('[OTP] Request already in progress, ignoring');\r\n      return;\r\n    }\r\n\r\n    // Validate phone number exists and is not just whitespace\r\n    const phoneNumber = formData.phone?.trim();\r\n    if (!phoneNumber) {\r\n      alert('Please enter a phone number first');\r\n      return;\r\n    }\r\n\r\n    // Set loading state to prevent duplicate requests\r\n    setOtpLoading(true);\r\n    console.log('[OTP] Sending OTP to phone:', phoneNumber);\r\n\r\n    try {\r\n      const response = await authService.sendOTP({\r\n        phone_number: phoneNumber,\r\n        verification_type: 'user_creation'\r\n      });\r\n\r\n      console.log('[OTP] Response:', response);\r\n\r\n      if (response.success) {\r\n        setOtpSent(true);\r\n        setOtpExpiresIn(300);\r\n        if (response.data.test_mode && response.data.otp_code) {\r\n          alert(`TEST MODE OTP: ${response.data.otp_code}`);\r\n        } else {\r\n          alert('OTP sent to your phone number.');\r\n        }\r\n        const timer = setInterval(() => {\r\n          setOtpExpiresIn(prev => {\r\n            if (prev <= 1) { clearInterval(timer); setOtpSent(false); return 0; }\r\n            return prev - 1;\r\n          });\r\n        }, 1000);\r\n      } else {\r\n        alert('Failed to send OTP: ' + response.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('[OTP] Error:', error);\r\n      alert('Failed to send OTP. Please try again.');\r\n    } finally {\r\n      setOtpLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleVerifyOTP = async () => {\r\n    if (!otpCode) { alert('Please enter the OTP code'); return; }\r\n    const phoneNumber = formData.phone?.trim();\r\n    const response = await authService.verifyOTP({\r\n      phone_number: phoneNumber,\r\n      otp_code: otpCode,\r\n      verification_type: 'user_creation'\r\n    });\r\n    if (response.success) {\r\n      setPhoneVerified(true);\r\n      setOtpSent(false);\r\n      alert('Phone number verified successfully!');\r\n    } else {\r\n      alert('Failed to verify OTP: ' + response.error);\r\n    }\r\n  };\r\n\r\n  const handleCreateUser = async (e: any) => {\r\n    e.preventDefault();\r\n    if (!phoneVerified) { alert('Please verify your phone number with OTP before creating the user.'); return; }\r\n    const response = await authService.createUser(formData);\r\n    if (response.success) {\r\n      alert(`User created! ID: ${response.data.staff_id || 'N/A'}`);\r\n      setFormData({}); setOtpCode(''); setPhoneVerified(false); setOtpSent(false);\r\n    } else { alert('Failed to create user: ' + response.error); }\r\n  };\r\n\r\n  const handleApproveLoan = async (loanId: any) => {\r\n    const response = await authService.approveLoan(loanId);\r\n    if (response.success) { alert('Loan approved successfully!'); fetchLoans(); }\r\n    else { alert('Failed to approve loan: ' + response.error); }\r\n  };\r\n\r\n  const handleGeneratePayslip = async () => {\r\n    const response = await authService.generatePayslip(formData);\r\n    if (response.success) { alert('Payslip generated successfully!'); console.log(response.data); }\r\n    else { alert('Failed to generate payslip: ' + response.error); }\r\n  };\r\n\r\n  const handleGenerateStatement = async () => {\r\n    const response = await authService.generateStatement(formData);\r\n    if (response.success) { alert('Statement generated successfully!'); console.log(response.data); }\r\n    else { alert('Failed to generate statement: ' + response.error); }\r\n  };\r\n\r\n  // --- LOADING VIEW ---\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-secondary-50\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Handler to navigate to account openings section\r\n  const handleReviewAccountOpening = () => {\r\n    setActiveView('account-openings');\r\n  };\r\n\r\n  // --- RENDER CONTENT ---\r\n  const renderContent = () => {\r\n    switch (activeView) {\r\n      case 'overview': return <OverviewSection dashboardData={dashboardData} onReviewAccountOpening={handleReviewAccountOpening} />;\r\n      case 'accounts': return <AccountsTab />;\r\n      case 'account-openings': return <AccountOpeningsSection onRefreshDashboard={fetchDashboardData} />;\r\n      case 'messaging': return (\r\n        <MessagingSection onOpenMessaging={() => {\r\n          if (!hasMessagingAccess) { alert('Access denied.'); return; }\r\n          navigate('/messaging');\r\n        }} />\r\n      );\r\n      case 'products-services': return <ProductsServicesManagement />;\r\n      case 'users': return (\r\n        <UserManagementSection\r\n          formData={formData} setFormData={setFormData}\r\n          otpCode={otpCode} setOtpCode={setOtpCode}\r\n          phoneVerified={phoneVerified} setPhoneVerified={setPhoneVerified}\r\n          otpSent={otpSent} setOtpSent={setOtpSent}\r\n          otpExpiresIn={otpExpiresIn} setOtpExpiresIn={setOtpExpiresIn}\r\n          otpLoading={otpLoading}\r\n          handleSendOTP={handleSendOTP} handleVerifyOTP={handleVerifyOTP}\r\n          handleCreateUser={handleCreateUser}\r\n          staffMembers={staffMembers} fetchStaffMembers={fetchStaffMembers}\r\n        />\r\n      );\r\n      case 'staff-ids': return (\r\n        <StaffIdsSection\r\n          staffIds={staffIds} staffIdFilters={staffIdFilters}\r\n          setStaffIdFilters={setStaffIdFilters} fetchStaffIds={fetchStaffIds}\r\n        />\r\n      );\r\n      case 'transactions': return <TransactionsSection />;\r\n      case 'loans': return <LoansSection loans={loans} handleApproveLoan={handleApproveLoan} />;\r\n      case 'charges': return (\r\n        <ServiceChargesSection\r\n          newCharge={newCharge} setNewCharge={setNewCharge}\r\n          serviceChargeCalculation={serviceChargeCalculation}\r\n          setServiceChargeCalculation={setServiceChargeCalculation}\r\n          serviceCharges={serviceCharges} fetchServiceCharges={fetchServiceCharges}\r\n        />\r\n      );\r\n      case 'payslip': return (\r\n        <PayslipSection\r\n          formData={formData} setFormData={setFormData}\r\n          handleGeneratePayslip={handleGeneratePayslip}\r\n          staffMembers={staffMembers}\r\n        />\r\n      );\r\n      case 'my_payslips': return <StaffPayslipViewer />;\r\n      case 'cashflow': return cashFlow ? <CashFlowSection cashFlow={cashFlow} /> : null;\r\n      case 'interest': return interestData ? <InterestSection interestData={interestData} /> : null;\r\n      case 'commission': return commissionData ? <CommissionSection commissionData={commissionData} /> : null;\r\n      case 'statements': return (\r\n        <StatementsSection\r\n          formData={formData} setFormData={setFormData}\r\n          handleGenerateStatement={handleGenerateStatement}\r\n        />\r\n      );\r\n      case 'expenses': return (\r\n        <ExpensesSection\r\n          newExpense={newExpense} setNewExpense={setNewExpense}\r\n          expenses={expenses} fetchExpenses={fetchExpenses}\r\n        />\r\n      );\r\n      case 'security': return <SecuritySection />;\r\n      default: return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout\r\n      title=\"Manager Portal\"\r\n      user={user}\r\n      menuItems={menuItems}\r\n      activeView={activeView}\r\n      onNavigate={setActiveView}\r\n      onLogout={handleLogout}\r\n    >\r\n      {renderContent()}\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default ManagerDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\MemberDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serviceRequests' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":24,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'twoFactorStatus' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":25,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serviceRequestError' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":38,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchInitialData'. Either include it or remove the dependency array.","line":63,"column":6,"nodeType":"ArrayExpression","endLine":63,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchInitialData]","fix":{"range":[2429,2431],"text":"[fetchInitialData]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchAccountBalance', 'fetchAccounts', and 'fetchServiceRequests'. Either include them or remove the dependency array.","line":69,"column":6,"nodeType":"ArrayExpression","endLine":69,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [activeView, fetchAccountBalance, fetchAccounts, fetchServiceRequests]","fix":{"range":[2634,2646],"text":"[activeView, fetchAccountBalance, fetchAccounts, fetchServiceRequests]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleServiceRequest' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":169,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":169,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\nimport { apiService, authService } from '../services/api.ts';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DashboardLayout from '../components/layout/DashboardLayout';\r\nimport { Card } from '../components/ui/Card';\r\nimport { Button } from '../components/ui/Button';\r\nimport RequestServicesTab from '../components/member/RequestServicesTab';\r\n\r\nfunction MemberDashboard() {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  // --- STATE MANAGEMENT ---\r\n  const [activeView, setActiveView] = useState('balance');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Tab-specific state\r\n  const [accountBalance, setAccountBalance] = useState(null);\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [accounts, setAccounts] = useState([]);\r\n  const [serviceRequests, setServiceRequests] = useState([]);\r\n  const [twoFactorStatus, setTwoFactorStatus] = useState({ enabled: false });\r\n\r\n  // Form states\r\n  const [passwordForm, setPasswordForm] = useState({\r\n    current_password: '',\r\n    new_password: '',\r\n    confirm_password: ''\r\n  });\r\n  const [serviceRequestForm, setServiceRequestForm] = useState({\r\n    request_type: 'statement',\r\n    description: '',\r\n    delivery_method: 'email'\r\n  });\r\n  const [serviceRequestError, setServiceRequestError] = useState('');\r\n  const [otpCode, setOtpCode] = useState('');\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [otpExpiresIn, setOtpExpiresIn] = useState(0);\r\n\r\n  // Backend availability checks\r\n  const [backendStatus, setBackendStatus] = useState({\r\n    balance: true,\r\n    accounts: true,\r\n    services: true,\r\n    password: true,\r\n    twofa: true\r\n  });\r\n\r\n  const menuItems = [\r\n    { id: 'balance', name: 'Account Balance', icon: '≡ƒÆ░', available: backendStatus.balance },\r\n    { id: 'accounts', name: 'Account Types', icon: '≡ƒÅª', available: backendStatus.accounts },\r\n    { id: 'services', name: 'Request Services', icon: '≡ƒôï', available: backendStatus.services },\r\n    { id: 'password', name: 'Change Password', icon: '≡ƒöÆ', available: true },\r\n    { id: 'twofa', name: 'Activate 2FA', icon: '≡ƒöÉ', available: true }\r\n  ];\r\n\r\n  // --- EFFECTS ---\r\n  useEffect(() => {\r\n    fetchInitialData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (activeView === 'balance') fetchAccountBalance();\r\n    if (activeView === 'accounts') fetchAccounts();\r\n    if (activeView === 'services') fetchServiceRequests();\r\n  }, [activeView]);\r\n\r\n  // --- DATA FETCHING FUNCTIONS ---\r\n  const fetchInitialData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await checkBackendAvailability();\r\n      await Promise.allSettled([\r\n        fetchAccountBalance(),\r\n        fetchAccounts(),\r\n        fetchServiceRequests()\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error fetching initial data:', error);\r\n      setError('Failed to load dashboard data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkBackendAvailability = async () => {\r\n    const checks = {\r\n      balance: apiService.getMemberDashboardData(),\r\n      accounts: apiService.getAccounts(),\r\n      services: apiService.getServiceRequests ? apiService.getServiceRequests() : Promise.resolve([]),\r\n      password: Promise.resolve(true),\r\n      twofa: Promise.resolve(true)\r\n    };\r\n\r\n    const results = await Promise.allSettled(Object.values(checks));\r\n    const status = {};\r\n    Object.keys(checks).forEach((key, index) => {\r\n      status[key] = results[index].status === 'fulfilled';\r\n    });\r\n    setBackendStatus(status);\r\n  };\r\n\r\n  const fetchAccountBalance = async () => {\r\n    if (!backendStatus.balance) return;\r\n    try {\r\n      const data = await apiService.getMemberDashboardData();\r\n      setAccountBalance(data);\r\n      setTransactions(data.recent_transactions || []);\r\n    } catch (error) {\r\n      console.error('Error fetching balance:', error);\r\n      setBackendStatus(prev => ({ ...prev, balance: false }));\r\n    }\r\n  };\r\n\r\n  const fetchAccounts = async () => {\r\n    if (!backendStatus.accounts) return;\r\n    try {\r\n      const data = await apiService.getAccounts();\r\n      setAccounts(data);\r\n    } catch (error) {\r\n      console.error('Error fetching accounts:', error);\r\n      setBackendStatus(prev => ({ ...prev, accounts: false }));\r\n    }\r\n  };\r\n\r\n  const fetchServiceRequests = async () => {\r\n    if (!backendStatus.services) return;\r\n    try {\r\n      const data = await apiService.getServiceRequests();\r\n      setServiceRequests(data);\r\n    } catch (error) {\r\n      console.error('Error fetching service requests:', error);\r\n      setBackendStatus(prev => ({ ...prev, services: false }));\r\n    }\r\n  };\r\n\r\n  // --- HANDLERS ---\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  const handleChangePassword = async (e) => {\r\n    e.preventDefault();\r\n    if (!backendStatus.password) {\r\n      alert('Password change service unavailable');\r\n      return;\r\n    }\r\n    if (passwordForm.new_password !== passwordForm.confirm_password) {\r\n      alert('New passwords do not match');\r\n      return;\r\n    }\r\n    try {\r\n      const result = await apiService.changePassword(passwordForm);\r\n      if (result.success) {\r\n        alert('Password changed successfully!');\r\n        setPasswordForm({ current_password: '', new_password: '', confirm_password: '' });\r\n      } else {\r\n        alert('Failed: ' + result.error);\r\n      }\r\n    } catch (error) {\r\n      alert('Error: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleServiceRequest = async (e) => {\r\n    e.preventDefault();\r\n    if (!backendStatus.services) return;\r\n    try {\r\n      const response = await fetch('/api/users/service-requests/', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          // SECURITY: Auth handled by HTTP-only cookies (credentials: 'include')\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify(serviceRequestForm)\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        alert('Request submitted!');\r\n        setServiceRequestForm({ request_type: 'statement', description: '', delivery_method: 'email' });\r\n        setServiceRequestError('');\r\n        fetchServiceRequests();\r\n      } else {\r\n        if (data.requires_2fa) {\r\n          setServiceRequestError('2FA required. Please enable 2FA.');\r\n          setActiveView('twofa');\r\n        } else {\r\n          setServiceRequestError(data.error || 'Submission failed');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      setServiceRequestError('Error: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleSendOTP = async () => {\r\n    try {\r\n      const result = await authService.sendOTP({ phone_number: user.phone, verification_type: '2fa_setup' });\r\n      if (result.success) {\r\n        setOtpSent(true);\r\n        setOtpExpiresIn(300);\r\n        const timer = setInterval(() => {\r\n          setOtpExpiresIn(prev => {\r\n            if (prev <= 1) {\r\n              clearInterval(timer);\r\n              setOtpSent(false);\r\n              return 0;\r\n            }\r\n            return prev - 1;\r\n          });\r\n        }, 1000);\r\n      } else {\r\n        alert('Failed to send OTP: ' + result.error);\r\n      }\r\n    } catch (error) {\r\n      alert('Error: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleVerifyOTP = async () => {\r\n    try {\r\n      const result = await authService.verifyOTP({ phone_number: user.phone, otp_code: otpCode, verification_type: '2fa_setup' });\r\n      if (result.success) {\r\n        setTwoFactorStatus({ enabled: true });\r\n        setOtpCode('');\r\n        setOtpSent(false);\r\n        alert('2FA enabled successfully!');\r\n      } else {\r\n        alert('Failed: ' + result.error);\r\n      }\r\n    } catch (error) {\r\n      alert('Error: ' + error.message);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-secondary-50\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout\r\n      title=\"Member Hub\"\r\n      user={user}\r\n      menuItems={menuItems}\r\n      activeView={activeView}\r\n      onNavigate={setActiveView}\r\n      onLogout={handleLogout}\r\n    >\r\n      {error && (\r\n        <div className=\"bg-error-50 border border-error-200 text-error-700 px-4 py-3 rounded-lg mb-6 flex items-center\">\r\n          <span className=\"mr-2\">ΓÜá∩╕Å</span> {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* --- BALANCE VIEW --- */}\r\n      {activeView === 'balance' && (\r\n        <div className=\"space-y-6\">\r\n          {!backendStatus.balance ? (\r\n            <Card className=\"bg-error-50 border-error-200\">\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"text-4xl mb-4\">ΓÜá∩╕Å</div>\r\n                <h3 className=\"text-lg font-bold text-error-800\">Service Unavailable</h3>\r\n                <p className=\"text-error-600\">Account balance service is currently down.</p>\r\n              </div>\r\n            </Card>\r\n          ) : (\r\n            <>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Card className=\"bg-gradient-to-br from-primary-600 to-primary-800 text-white border-none\">\r\n                  <h3 className=\"text-primary-100 font-medium mb-2\">Total Balance</h3>\r\n                  <div className=\"text-4xl font-bold mb-4\">\r\n                    {formatCurrencyGHS(accountBalance?.account_balance || 0)}\r\n                  </div>\r\n                  <div className=\"text-sm text-primary-200 flex items-center\">\r\n                    <span className=\"w-2 h-2 bg-success-400 rounded-full mr-2\"></span>\r\n                    Available\r\n                  </div>\r\n                </Card>\r\n                <Card>\r\n                  <h3 className=\"text-secondary-500 font-medium mb-2\">Account Status</h3>\r\n                  <div className=\"flex items-center mt-2\">\r\n                    <span className=\"px-3 py-1 bg-success-50 text-success-700 rounded-full text-sm font-bold border border-success-200\">\r\n                      Active\r\n                    </span>\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n\r\n              <Card>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                  <h3 className=\"text-lg font-bold text-secondary-900\">Recent Transactions</h3>\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                  {transactions.slice(0, 5).map((transaction, index) => (\r\n                    <div key={index} className=\"flex justify-between items-center p-4 bg-secondary-50 rounded-lg border border-secondary-100 hover:border-primary-200 transition-colors\">\r\n                      <div className=\"flex items-center\">\r\n                        <div className={`p-2 rounded-full mr-4 ${transaction.amount > 0 ? 'bg-success-100 text-success-600' : 'bg-error-100 text-error-600'}`}>\r\n                          {transaction.amount > 0 ? 'Γåô' : 'Γåæ'}\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"font-semibold text-secondary-900\">{transaction.description}</p>\r\n                          <p className=\"text-xs text-secondary-500\">{new Date(transaction.date).toLocaleDateString()}</p>\r\n                        </div>\r\n                      </div>\r\n                      <span className={`font-bold ${transaction.amount > 0 ? 'text-success-600' : 'text-secondary-900'}`}>\r\n                        {formatCurrencyGHS(transaction.amount)}\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                  {transactions.length === 0 && (\r\n                    <p className=\"text-center text-secondary-500 py-4\">No recent transactions found.</p>\r\n                  )}\r\n                </div>\r\n              </Card>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* --- ACCOUNTS VIEW --- */}\r\n      {activeView === 'accounts' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {accounts.map((account, index) => (\r\n            <Card key={index} className=\"hover:border-primary-300 transition-all\">\r\n              <div className=\"flex justify-between items-start mb-4\">\r\n                <div className=\"p-2 bg-primary-50 rounded-lg text-primary-600 text-xl\">≡ƒÅª</div>\r\n                <span className=\"text-xs font-mono bg-secondary-100 text-secondary-600 px-2 py-1 rounded\">\r\n                  ****{account.account_number?.slice(-4) || '****'}\r\n                </span>\r\n              </div>\r\n              <h4 className=\"text-lg font-bold text-secondary-900 mb-1\">{account.type} Account</h4>\r\n              <p className=\"text-2xl font-bold text-primary-600\">{formatCurrencyGHS(account.balance || 0)}</p>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* --- SERVICES VIEW --- */}\r\n      {activeView === 'services' && (\r\n        <RequestServicesTab />\r\n      )}\r\n\r\n      {/* --- PASSWORD VIEW --- */}\r\n      {activeView === 'password' && (\r\n        <div className=\"max-w-md mx-auto\">\r\n          <Card>\r\n            <h3 className=\"text-lg font-bold text-secondary-900 mb-6\">Change Password</h3>\r\n            <form onSubmit={handleChangePassword} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-secondary-700 mb-1\">Current Password</label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={passwordForm.current_password}\r\n                  onChange={e => setPasswordForm({ ...passwordForm, current_password: e.target.value })}\r\n                  className=\"w-full rounded-lg border-secondary-300 border p-2\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-secondary-700 mb-1\">New Password</label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={passwordForm.new_password}\r\n                  onChange={e => setPasswordForm({ ...passwordForm, new_password: e.target.value })}\r\n                  className=\"w-full rounded-lg border-secondary-300 border p-2\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-secondary-700 mb-1\">Confirm New Password</label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={passwordForm.confirm_password}\r\n                  onChange={e => setPasswordForm({ ...passwordForm, confirm_password: e.target.value })}\r\n                  className=\"w-full rounded-lg border-secondary-300 border p-2\"\r\n                  required\r\n                />\r\n              </div>\r\n              <Button type=\"submit\" variant=\"primary\" className=\"w-full mt-4\">Update Password</Button>\r\n            </form>\r\n          </Card>\r\n        </div>\r\n      )}\r\n\r\n      {/* --- 2FA VIEW --- */}\r\n      {activeView === 'twofa' && (\r\n        <div className=\"max-w-md mx-auto\">\r\n          <Card>\r\n            <h3 className=\"text-lg font-bold text-secondary-900 mb-6\">Two-Factor Authentication</h3>\r\n            <p className=\"text-sm text-secondary-600 mb-6\">Secure your account by enabling SMS-based 2FA. We'll send a code to your registered phone.</p>\r\n\r\n            {!otpSent ? (\r\n              <Button onClick={handleSendOTP} className=\"w-full\">Send Verification Code</Button>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"bg-primary-50 p-4 rounded-lg text-center\">\r\n                  <p className=\"text-sm text-primary-700 mb-2\">Code sent to your phone</p>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Enter 6-digit code\"\r\n                    value={otpCode}\r\n                    onChange={e => setOtpCode(e.target.value)}\r\n                    className=\"text-center text-2xl tracking-widest w-full border-b-2 border-primary-300 focus:border-primary-600 outline-none bg-transparent py-2\"\r\n                    maxLength={6}\r\n                  />\r\n                  <p className=\"text-xs text-secondary-500 mt-2\">Expires in {otpExpiresIn}s</p>\r\n                </div>\r\n                <Button onClick={handleVerifyOTP} variant=\"success\" className=\"w-full\">Verify & Enable</Button>\r\n              </div>\r\n            )}\r\n          </Card>\r\n        </div>\r\n      )}\r\n\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default MemberDashboard;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Membership.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\MessagingPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Paperclip' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Menu' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reconnectTimeoutRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport EmojiPicker from 'emoji-picker-react';\r\nimport {\r\n    Send, Plus, Search, Users, MessageSquare, ArrowLeft,\r\n    MoreVertical, Phone, Paperclip, Mic, Smile,\r\n    Check, CheckCheck, Menu, X\r\n} from 'lucide-react';\r\n\r\n// API base URL\r\nconst API_BASE_URL = '/api/';\r\n\r\n// Helper to get CSRF token from cookies\r\nconst getCsrfToken = () => {\r\n    const match = document.cookie.match(/csrftoken=([^;]+)/);\r\n    return match ? match[1] : null;\r\n};\r\n\r\n/**\r\n * WhatsApp Clone Messaging Page\r\n * Features: Exact WhatsApp dark mode styling, Emoji picker, functional buttons\r\n */\r\nexport default function MessagingPage() {\r\n    const { user } = useAuth();\r\n\r\n    // State\r\n    const [rooms, setRooms] = useState([]);\r\n    const [selectedRoom, setSelectedRoom] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [sending, setSending] = useState(false);\r\n    const [wsConnected, setWsConnected] = useState(false);\r\n    const [showNewChat, setShowNewChat] = useState(false);\r\n    const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [staffUsers, setStaffUsers] = useState([]);\r\n\r\n    // Refs\r\n    const socketRef = useRef(null);\r\n    const messagesEndRef = useRef(null);\r\n    const reconnectTimeoutRef = useRef(null);\r\n    const emojiPickerRef = useRef(null);\r\n\r\n    // Click outside emoji picker to close\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (emojiPickerRef.current && !emojiPickerRef.current.contains(event.target)) {\r\n                setShowEmojiPicker(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    // Scroll to bottom\r\n    const scrollToBottom = useCallback(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'auto' }); // 'auto' effectively creates instant scroll for that snappy feel\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        scrollToBottom();\r\n    }, [messages, scrollToBottom]);\r\n\r\n    // Load rooms & staff on mount\r\n    useEffect(() => {\r\n        loadRooms();\r\n        loadStaffUsers();\r\n    }, []);\r\n\r\n    // API calls\r\n    const loadRooms = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await fetch(`${API_BASE_URL}chat/rooms/`, { credentials: 'include' });\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setRooms(data.results || data || []);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to load rooms:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const loadStaffUsers = async () => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}users/staff/`, { credentials: 'include' });\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setStaffUsers(data.results || data || []);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to load staff:', error);\r\n        }\r\n    };\r\n\r\n    const loadMessages = async (roomId) => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}chat/rooms/${roomId}/messages/`, { credentials: 'include' });\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setMessages((data.results || data).reverse());\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to load messages:', error);\r\n        }\r\n    };\r\n\r\n    const createRoom = async (memberIds, name = '', isGroup = false) => {\r\n        try {\r\n            const csrfToken = getCsrfToken();\r\n            const headers = { 'Content-Type': 'application/json' };\r\n            if (csrfToken) headers['X-CSRFToken'] = csrfToken;\r\n\r\n            const response = await fetch(`${API_BASE_URL}chat/rooms/create/`, {\r\n                method: 'POST',\r\n                headers: headers,\r\n                credentials: 'include',\r\n                body: JSON.stringify({ member_ids: memberIds, name, is_group: isGroup })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const room = await response.json();\r\n                await loadRooms();\r\n                selectRoom(room);\r\n                setShowNewChat(false);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to create room:', error);\r\n        }\r\n    };\r\n\r\n    // WebSocket\r\n    const connectWebSocket = useCallback((roomId) => {\r\n        if (socketRef.current) socketRef.current.close();\r\n\r\n        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n        const wsUrl = `${protocol}//${window.location.host}/ws/chat/${roomId}/`;\r\n        const socket = new WebSocket(wsUrl);\r\n\r\n        socket.onopen = () => setWsConnected(true);\r\n        socket.onmessage = (event) => {\r\n            try {\r\n                const data = JSON.parse(event.data);\r\n                if (data.type === 'message') {\r\n                    setMessages(prev => [...prev, {\r\n                        id: data.id,\r\n                        content: data.content,\r\n                        sender: data.sender_id,\r\n                        sender_name: data.sender_name,\r\n                        created_at: data.timestamp,\r\n                        is_own: data.sender_id === user?.id\r\n                    }]);\r\n                }\r\n            } catch (e) { console.error('WS Error', e); }\r\n        };\r\n        socket.onclose = () => {\r\n            setWsConnected(false);\r\n            // Reconnect logic would go here\r\n        };\r\n        socketRef.current = socket;\r\n    }, [user?.id]);\r\n\r\n    const selectRoom = (room) => {\r\n        setSelectedRoom(room);\r\n        setMessages([]);\r\n        loadMessages(room.id);\r\n        connectWebSocket(room.id);\r\n        setShowEmojiPicker(false); // Close emoji picker when switching\r\n    };\r\n\r\n    const sendMessage = async (e) => {\r\n        e?.preventDefault();\r\n        if (!newMessage.trim() || !selectedRoom || sending) return;\r\n\r\n        const content = newMessage.trim();\r\n        setNewMessage('');\r\n        setSending(true);\r\n        setShowEmojiPicker(false);\r\n\r\n        try {\r\n            if (socketRef.current?.readyState === WebSocket.OPEN) {\r\n                socketRef.current.send(JSON.stringify({ type: 'message', content }));\r\n            } else {\r\n                // REST Fallback (with CSRF)\r\n                const csrfToken = getCsrfToken();\r\n                const headers = { 'Content-Type': 'application/json' };\r\n                if (csrfToken) headers['X-CSRFToken'] = csrfToken;\r\n\r\n                await fetch(`${API_BASE_URL}chat/rooms/${selectedRoom.id}/messages/send/`, {\r\n                    method: 'POST',\r\n                    headers,\r\n                    credentials: 'include',\r\n                    body: JSON.stringify({ content })\r\n                });\r\n                loadMessages(selectedRoom.id);\r\n            }\r\n        } catch (error) {\r\n            console.error('Send failed:', error);\r\n        } finally {\r\n            setSending(false);\r\n        }\r\n    };\r\n\r\n    // Global styles for scrollbar (injected via useEffect)\r\n    useEffect(() => {\r\n        const styleSheet = document.createElement(\"style\");\r\n        styleSheet.innerText = `\r\n            ::-webkit-scrollbar { width: 6px !important; height: 6px !important; }\r\n            ::-webkit-scrollbar-track { background: transparent !important; }\r\n            ::-webkit-scrollbar-thumb { background-color: rgba(255,255,255,0.2) !important; }\r\n        `;\r\n        document.head.appendChild(styleSheet);\r\n        return () => document.head.removeChild(styleSheet);\r\n    }, []);\r\n\r\n    const onEmojiClick = (emojiObject) => {\r\n        setNewMessage(prev => prev + emojiObject.emoji);\r\n    };\r\n\r\n    // Filter users\r\n    const filteredUsers = staffUsers.filter(u =>\r\n        u.id !== user?.id &&\r\n        (u.first_name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            u.last_name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            u.email?.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    );\r\n\r\n    // --- STYLES (WhatsApp Dark Mode) ---\r\n    const colors = {\r\n        bgDeep: '#0b141a',    // Main app background\r\n        bgSidebar: '#111b21', // Sidebar list background\r\n        header: '#202c33',    // Headers (Sidebar & Chat)\r\n        incoming: '#202c33',  // Incoming message bubble\r\n        outgoing: '#005c4b',  // Outgoing message bubble\r\n        inputBar: '#202c33',  // Input bar background\r\n        inputField: '#2a3942',// Input field background\r\n        primary: '#00a884',   // WhatsApp Green (Accents)\r\n        textMain: '#e9edef',  // Primary text\r\n        textSec: '#8696a0',   // Secondary text (time, status)\r\n        divider: '#222d34',   // Borders\r\n        blueTick: '#53bdeb'   // Read receipt\r\n    };\r\n\r\n    const styles = {\r\n        container: { display: 'flex', height: '100vh', background: colors.bgDeep, color: colors.textMain, overflow: 'hidden', fontFamily: 'Segoe UI, Helvetica Neue, Helvetica, Arial, sans-serif' },\r\n\r\n        // Left Sidebar\r\n        sidebar: { width: '30%', minWidth: '320px', maxWidth: '420px', display: 'flex', flexDirection: 'column', background: colors.bgSidebar, borderRight: `1px solid ${colors.divider}` },\r\n        sidebarHeader: { height: '60px', padding: '10px 16px', background: colors.header, display: 'flex', justifyContent: 'space-between', alignItems: 'center', borderRight: `1px solid ${colors.divider}` },\r\n        userAvatar: { width: '40px', height: '40px', borderRadius: '50%', background: colors.textSec, display: 'flex', alignItems: 'center', justifyContent: 'center', overflow: 'hidden' },\r\n        headerIcons: { display: 'flex', gap: '20px', color: colors.textSec },\r\n        iconBtn: { cursor: 'pointer', display: 'flex', alignItems: 'center' },\r\n\r\n        searchBar: { height: '49px', borderBottom: `1px solid ${colors.divider}`, padding: '7px 12px', display: 'flex', alignItems: 'center' },\r\n        searchInputWrapper: { background: colors.header, borderRadius: '8px', height: '35px', width: '100%', display: 'flex', alignItems: 'center', padding: '0 12px' },\r\n        searchInput: { background: 'transparent', border: 'none', color: colors.textMain, width: '100%', marginLeft: '12px', outline: 'none', fontSize: '14px' },\r\n\r\n        chatList: { flex: 1, overflowY: 'auto' },\r\n        chatItem: { height: '72px', display: 'flex', alignItems: 'center', padding: '0 15px', cursor: 'pointer', borderBottom: `1px solid ${colors.divider}` },\r\n        chatItemHover: { background: '#202c33' },\r\n        chatInfo: { flex: 1, marginLeft: '15px', display: 'flex', flexDirection: 'column', justifyContent: 'center', height: '100%', borderBottom: `1px solid ${colors.divider}00` }, // using 00 for transparent if needed\r\n        chatRow1: { display: 'flex', justifyContent: 'space-between', marginBottom: '3px' },\r\n        chatRow2: { display: 'flex', justifyContent: 'space-between' },\r\n        chatName: { fontSize: '17px', fontWeight: '400', color: colors.textMain },\r\n        chatTime: { fontSize: '12px', color: colors.textSec },\r\n        chatPreview: { fontSize: '14px', color: colors.textSec, whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: '200px' },\r\n        unreadBadge: { background: colors.primary, color: '#111b21', borderRadius: '50%', minWidth: '20px', height: '20px', padding: '0 4px', fontSize: '12px', fontWeight: '500', display: 'flex', alignItems: 'center', justifyContent: 'center' },\r\n\r\n        // Right Chat Area\r\n        chatArea: { flex: 1, display: 'flex', flexDirection: 'column', background: colors.bgDeep, position: 'relative' },\r\n        chatHeader: { height: '60px', padding: '10px 16px', background: colors.header, display: 'flex', alignItems: 'center', justifyContent: 'space-between', zIndex: 10 },\r\n        chatBg: {\r\n            position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', zIndex: 0, opacity: 0.06,\r\n            backgroundImage: 'url(\"https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png\")' // Generic doodle pattern\r\n        },\r\n        messagesWrapper: { flex: 1, overflowY: 'auto', padding: '20px 60px', zIndex: 1, position: 'relative', display: 'flex', flexDirection: 'column' },\r\n\r\n        messageRow: { display: 'flex', marginBottom: '2px', width: '100%' },\r\n        messageBubble: {\r\n            maxWidth: '65%', padding: '6px 7px 8px 9px', borderRadius: '7.5px', fontSize: '14.2px', lineHeight: '19px', position: 'relative',\r\n            boxShadow: '0 1px 0.5px rgba(0,0,0,0.13)'\r\n        },\r\n        incoming: { background: colors.incoming, borderTopLeftRadius: 0, alignSelf: 'flex-start' },\r\n        outgoing: { background: colors.outgoing, borderTopRightRadius: 0, alignSelf: 'flex-end', marginLeft: 'auto' },\r\n\r\n        msgMeta: { display: 'flex', justifyContent: 'flex-end', alignItems: 'center', gap: '3px', marginTop: '-4px', float: 'right', paddingLeft: '7px', paddingTop: '6px' },\r\n        msgTime: { fontSize: '11px', color: 'rgba(255,255,255,0.6)' },\r\n\r\n        inputArea: { minHeight: '62px', background: colors.inputBar, padding: '5px 16px', display: 'flex', alignItems: 'center', gap: '10px', zIndex: 10 },\r\n        inputFieldWrapper: { flex: 1, background: colors.inputField, borderRadius: '8px', padding: '9px 12px', display: 'flex', alignItems: 'center' },\r\n        inputField: { background: 'transparent', border: 'none', color: colors.textMain, width: '100%', outline: 'none', fontSize: '15px', resize: 'none', height: '22px', maxHeight: '100px' },\r\n\r\n        // Empty State\r\n        emptyState: { flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', background: colors.divider, borderBottom: `6px solid ${colors.primary}`, color: colors.textSec, textAlign: 'center' },\r\n        emptyImg: { width: '300px', marginBottom: '30px', opacity: 0.6 }, // Need an illustration\r\n\r\n        // Modal\r\n        modalMask: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(11,20,26,0.8)', zIndex: 1000, display: 'flex', justifyContent: 'center', alignItems: 'center' },\r\n        modalBox: { width: '400px', height: '80%', background: colors.bgSidebar, borderRadius: '3px', display: 'flex', flexDirection: 'column', boxShadow: '0 17px 50px 0 rgba(0,0,0,0.19)' },\r\n    };\r\n\r\n    return (\r\n        <div style={styles.container}>\r\n            {/* 1. Left Sidebar */}\r\n            <div style={styles.sidebar}>\r\n                {/* Header */}\r\n                <div style={styles.sidebarHeader}>\r\n                    <div style={styles.userAvatar}>\r\n                        {/* Placeholder Avatar */}\r\n                        <Users size={24} color=\"#cfd8dc\" />\r\n                    </div>\r\n                    <div style={styles.headerIcons}>\r\n                        <div style={styles.iconBtn} title=\"Communities\"><Users size={24} strokeWidth={1.5} /></div>\r\n                        <div style={styles.iconBtn} title=\"Status\"><div style={{ border: '2px solid', borderRadius: '50%', width: 22, height: 22, display: 'flex', alignItems: 'center', justifyContent: 'center' }}><div style={{ width: 14, height: 14, border: '2px solid', borderRadius: '50%' }}></div></div></div>\r\n                        <div style={styles.iconBtn} title=\"New Chat\" onClick={() => setShowNewChat(true)}><MessageSquare size={22} strokeWidth={1.5} /></div>\r\n                        <div style={styles.iconBtn} title=\"Menu\"><MoreVertical size={22} strokeWidth={1.5} /></div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Search */}\r\n                <div style={styles.searchBar}>\r\n                    <div style={styles.searchInputWrapper}>\r\n                        <Search size={18} color={colors.textSec} style={{ minWidth: '18px' }} />\r\n                        <input\r\n                            placeholder=\"Search or start new chat\"\r\n                            style={styles.searchInput}\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Chat List */}\r\n                <div style={styles.chatList}>\r\n                    {loading ? (\r\n                        <div style={{ padding: '20px', textAlign: 'center', color: colors.textSec }}>Loading chats...</div>\r\n                    ) : rooms.length === 0 ? (\r\n                        <div style={{ padding: '20px', textAlign: 'center', color: colors.textSec }}>No chats. Click the icon to start a new chat.</div>\r\n                    ) : (\r\n                        rooms.map(room => (\r\n                            <div\r\n                                key={room.id}\r\n                                onClick={() => selectRoom(room)}\r\n                                onMouseEnter={(e) => e.currentTarget.style.background = '#202c33'}\r\n                                onMouseLeave={(e) => e.currentTarget.style.background = selectedRoom?.id === room.id ? '#2a3942' : 'transparent'}\r\n                                style={{\r\n                                    ...styles.chatItem,\r\n                                    background: selectedRoom?.id === room.id ? '#2a3942' : 'transparent'\r\n                                }}\r\n                            >\r\n                                <div style={{ ...styles.userAvatar, width: '49px', height: '49px', fontSize: '20px' }}>\r\n                                    {room.is_group ? <Users size={24} /> : room.display_name?.[0]?.toUpperCase()}\r\n                                </div>\r\n                                <div style={styles.chatInfo}>\r\n                                    <div style={styles.chatRow1}>\r\n                                        <div style={styles.chatName}>{room.display_name}</div>\r\n                                        {room.last_message && (\r\n                                            <div style={styles.chatTime}>\r\n                                                {new Date(room.last_message.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <div style={styles.chatRow2}>\r\n                                        <div style={styles.chatPreview}>\r\n                                            {room.last_message ? (\r\n                                                <>\r\n                                                    {user?.id !== room.last_message.sender_id && <span>{room.last_message.sender_name}: </span>}\r\n                                                    {room.last_message.content}\r\n                                                </>\r\n                                            ) : <i>No messages yet</i>}\r\n                                        </div>\r\n                                        {room.unread_count > 0 && (\r\n                                            <div style={styles.unreadBadge}>{room.unread_count}</div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* 2. Right Chat Area */}\r\n            {selectedRoom ? (\r\n                <div style={styles.chatArea}>\r\n                    {/* Header */}\r\n                    <div style={styles.chatHeader}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\r\n                            <div style={{ ...styles.userAvatar, marginRight: '15px' }}>\r\n                                {selectedRoom.is_group ? <Users size={22} /> : selectedRoom.display_name?.[0]?.toUpperCase()}\r\n                            </div>\r\n                            <div>\r\n                                <div style={{ fontSize: '16px', color: colors.textMain }}>{selectedRoom.display_name}</div>\r\n                                <div style={{ fontSize: '13px', color: colors.textSec }}>\r\n                                    {wsConnected ? 'online' : 'connecting...'}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div style={styles.headerIcons}>\r\n                            <div style={styles.iconBtn}><Search size={22} strokeWidth={1.5} /></div>\r\n                            <div style={styles.iconBtn}><MoreVertical size={22} strokeWidth={1.5} /></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Messages */}\r\n                    <div style={styles.chatBg}></div>\r\n                    <div style={styles.messagesWrapper}>\r\n                        {messages.map((msg, i) => {\r\n                            const isOwn = msg.sender === user?.id || msg.is_own;\r\n                            return (\r\n                                <div key={i} style={styles.messageRow}>\r\n                                    <div style={{\r\n                                        ...styles.messageBubble,\r\n                                        ...(isOwn ? styles.outgoing : styles.incoming)\r\n                                    }}>\r\n                                        {/* Sender Name in groups */}\r\n                                        {!isOwn && selectedRoom.is_group && (\r\n                                            <div style={{ color: colors.primary, fontSize: '13px', fontWeight: '500', marginBottom: '3px' }}>\r\n                                                {msg.sender_name}\r\n                                            </div>\r\n                                        )}\r\n                                        {/* Content */}\r\n                                        <span>{msg.content}</span>\r\n                                        {/* Meta (Time + Checks) */}\r\n                                        <div style={styles.msgMeta}>\r\n                                            <span style={styles.msgTime}>\r\n                                                {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                            </span>\r\n                                            {isOwn && (\r\n                                                <span style={{ color: msg.is_read ? colors.blueTick : colors.textSec }}>\r\n                                                    {msg.is_read ? <CheckCheck size={16} /> : <Check size={16} />}\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        <div ref={messagesEndRef} />\r\n                    </div>\r\n\r\n                    {/* Input Area */}\r\n                    <div style={styles.inputArea}>\r\n                        <div style={styles.iconBtn} onClick={() => setShowEmojiPicker(!showEmojiPicker)}>\r\n                            <Smile size={26} color={colors.textSec} />\r\n                        </div>\r\n                        {showEmojiPicker && (\r\n                            <div ref={emojiPickerRef} style={{ position: 'absolute', bottom: '70px', left: '20px', zIndex: 100 }}>\r\n                                <EmojiPicker theme=\"dark\" onEmojiClick={onEmojiClick} />\r\n                            </div>\r\n                        )}\r\n                        <div style={styles.iconBtn}>\r\n                            <Plus size={26} color={colors.textSec} style={{ transform: 'rotate(0deg)' }} />\r\n                        </div>\r\n                        <div style={styles.inputFieldWrapper}>\r\n                            <input\r\n                                style={styles.inputField}\r\n                                placeholder=\"Type a message\"\r\n                                value={newMessage}\r\n                                onChange={e => setNewMessage(e.target.value)}\r\n                                onKeyDown={e => e.key === 'Enter' && sendMessage(e)}\r\n                            />\r\n                        </div>\r\n                        <div style={styles.iconBtn} onClick={newMessage.trim() ? sendMessage : null}>\r\n                            {newMessage.trim() ? (\r\n                                <Send size={26} color={colors.textSec} />\r\n                            ) : (\r\n                                <Mic size={26} color={colors.textSec} />\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                /* Empty State */\r\n                <div style={styles.emptyState}>\r\n                    <div style={{ marginBottom: '20px' }}> {/** Illustration placeholder */}\r\n                        <div style={{ width: '200px', height: '200px', borderRadius: '50%', background: '#2a3942', margin: '0 auto', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                            <Phone size={80} color={colors.textSec} />\r\n                        </div>\r\n                    </div>\r\n                    <h1 style={{ fontSize: '32px', fontWeight: '300', marginBottom: '15px', color: colors.textMain }}>WhatsApp for Windows</h1>\r\n                    <p style={{ fontSize: '14px', color: colors.textSec, maxWidth: '450px', lineHeight: '20px' }}>\r\n                        Send and receive messages without keeping your phone online.<br />\r\n                        Use WhatsApp on up to 4 linked devices and 1 phone.\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* New Chat Modal */}\r\n            {showNewChat && (\r\n                <div style={styles.modalMask} onClick={() => setShowNewChat(false)}>\r\n                    <div style={styles.modalBox} onClick={e => e.stopPropagation()}>\r\n                        <div style={{ ...styles.sidebarHeader, background: colors.header, color: colors.textMain }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                                <ArrowLeft size={24} style={{ marginRight: '15px', cursor: 'pointer' }} onClick={() => setShowNewChat(false)} />\r\n                                <div style={{ fontSize: '19px', fontWeight: '500' }}>New Chat</div>\r\n                            </div>\r\n                        </div>\r\n                        <div style={styles.searchBar}>\r\n                            <div style={styles.searchInputWrapper}>\r\n                                <Search size={18} color={colors.textSec} />\r\n                                <input style={styles.searchInput} autoFocus placeholder=\"Search contact\" value={searchQuery} onChange={e => setSearchQuery(e.target.value)} />\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ ...styles.chatList, padding: '10px 0' }}>\r\n                            {filteredUsers.map(u => (\r\n                                <div key={u.id} style={styles.chatItem} onClick={() => createRoom([u.id])} onMouseEnter={e => e.currentTarget.style.background = '#202c33'} onMouseLeave={e => e.currentTarget.style.background = 'transparent'}>\r\n                                    <div style={{ ...styles.userAvatar, width: '49px', height: '49px', fontSize: '20px' }}>\r\n                                        {u.first_name?.[0]?.toUpperCase()}\r\n                                    </div>\r\n                                    <div style={{ marginLeft: '15px' }}>\r\n                                        <div style={{ color: colors.textMain, fontSize: '17px' }}>{u.first_name} {u.last_name}</div>\r\n                                        <div style={{ color: colors.textSec, fontSize: '14px' }}>{u.email}</div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\MobileBankerDashboard.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unused-vars').","line":214,"column":7,"severity":1,"nodeType":null,"fix":{"range":[9896,9931],"text":""}}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4026,4029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4026,4029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4484,4487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4484,4487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5016,5019],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5016,5019],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6179,6182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6179,6182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":145,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7115,7118],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7115,7118],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":158,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7620,7623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7620,7623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":168,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8027,8030],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8027,8030],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8373,8376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8373,8376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":190,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8792,8795],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8792,8795],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":194,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9039,9042],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9039,9042],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":199,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9224,9227],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9224,9227],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":211,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9655,9658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9655,9658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":215,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9949,9952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9949,9952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10169,10172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10169,10172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_err' is defined but never used.","line":220,"column":200,"nodeType":null,"messageId":"unusedVar","endLine":220,"endColumn":204,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":222,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10500,10503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10500,10503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":222,"column":199,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":202,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10657,10660],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10657,10660],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_err' is defined but never used.","line":222,"column":264,"nodeType":null,"messageId":"unusedVar","endLine":222,"endColumn":268,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { formatCurrencyGHS as _formatCurrencyGHS } from '../utils/formatters';\r\nimport { api, authService, MobileMessage, MobileBankerMetric } from '../services/api.ts';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Card } from '../components/ui/Card';\r\nimport DashboardLayout from '../components/layout/DashboardLayout'; // Unified Layout\r\nimport MobileMetrics from '../components/mobile/MobileMetrics';\r\nimport ClientsTab from '../components/mobile/ClientsTab';\r\nimport VisitsTab from '../components/mobile/VisitsTab';\r\nimport MessagingTab from '../components/mobile/MessagingTab';\r\nimport FieldToolbox from '../components/mobile/FieldToolbox';\r\nimport ClientRegistrationTab from '../components/ClientRegistrationTab';\r\nimport {\r\n  DepositModal, WithdrawalModal, PaymentModal, LoanModal, VisitModal, MessageModal, KycModal\r\n} from '../components/mobile/MobileModals';\r\nimport StaffPayslipViewer from '../components/staff/StaffPayslipViewer';\r\n\r\nfunction MobileBankerDashboard() {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const hasMessagingAccess = ['manager', 'operations_manager', 'cashier', 'mobile_banker'].includes(user?.role);\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  // --- MENU ITEMS CONFIG (For Sidebar) ---\r\n  const menuItems = React.useMemo(() => [\r\n    { id: 'client-registration', name: 'Registration', icon: '≡ƒæñ' },\r\n    { id: 'clients', name: 'My Clients', icon: '≡ƒæÑ' },\r\n    { id: 'visits', name: 'Visits', icon: '≡ƒ¢╡' },\r\n    { id: 'messaging', name: 'Messaging', icon: '≡ƒÆ¼' },\r\n    { id: 'my_payslips', name: 'My Payslips', icon: '≡ƒÆ░' },\r\n  ], []);\r\n\r\n  // --- STATE ---\r\n  const [activeTab, setActiveTab] = useState('client-registration');\r\n  const [showLoanModal, setShowLoanModal] = useState(false);\r\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n  const [showDepositModal, setShowDepositModal] = useState(false);\r\n  const [showWithdrawalModal, setShowWithdrawalModal] = useState(false);\r\n  const [showKycModal, setShowKycModal] = useState(false);\r\n  const [showVisitModal, setShowVisitModal] = useState(false);\r\n  const [showMessageModal, setShowMessageModal] = useState(false);\r\n\r\n  // Form states\r\n  const [loanForm, setLoanForm] = useState({ applicant_name: '', date_of_birth: '', applicant_id_type: 'ghana_card', applicant_id_number: '', digital_address: '', town: '', city: '', next_of_kin_1_name: '', next_of_kin_1_relationship: '', next_of_kin_1_phone: '', next_of_kin_1_address: '', next_of_kin_2_name: '', next_of_kin_2_relationship: '', next_of_kin_2_phone: '', next_of_kin_2_address: '', guarantor_1_name: '', guarantor_1_id_type: 'ghana_card', guarantor_1_id_number: '', guarantor_1_phone: '', guarantor_1_address: '', guarantor_2_name: '', guarantor_2_id_type: 'ghana_card', guarantor_2_id_number: '', guarantor_2_phone: '', guarantor_2_address: '', loan_amount: '', loan_purpose: '', repayment_period_months: '', monthly_income: '', employment_status: '' });\r\n  const [paymentForm, setPaymentForm] = useState({ member_id: '', amount: '', payment_type: 'cash' });\r\n  const [depositForm, setDepositForm] = useState({ member_id: '', amount: '', deposit_type: 'daily_susu', account_number: '' });\r\n  const [withdrawalForm, setWithdrawalForm] = useState({ member_id: '', amount: '', withdrawal_type: 'withdrawal_daily_susu', account_number: '' });\r\n  const [messageForm, setMessageForm] = useState({ recipient: '', subject: '', content: '', priority: 'normal' });\r\n  const [_messages, setMessages] = useState<MobileMessage[]>([]);\r\n  const [_loadingMessages, setLoadingMessages] = useState(false);\r\n  const [metrics, setMetrics] = useState<MobileBankerMetric | null>(null);\r\n  const [loadingMetrics, setLoadingMetrics] = useState(false);\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const [scheduledVisits, setScheduledVisits] = useState<any[]>([]);\r\n  const [_loadingVisits, setLoadingVisits] = useState(false);\r\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\r\n  const [scheduleForm, setScheduleForm] = useState({ client_name: '', location: '', scheduled_date: '', scheduled_time: '', purpose: '', assigned_to: '' });\r\n\r\n  // Assigned clients state\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const [assignedClients, setAssignedClients] = useState<any[]>([]);\r\n  const [_loadingClients, setLoadingClients] = useState(false);\r\n\r\n  // --- EFFECTS ---\r\n  useEffect(() => { fetchMessages(); fetchVisits(); fetchMetrics(); fetchAssignedClients(); }, []);\r\n\r\n  const fetchAssignedClients = async () => {\r\n    setLoadingClients(true);\r\n    try {\r\n      const response = await authService.getAssignments();\r\n      // Map API data to ClientsTab interface\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      const mappedClients = (response.data || []).map((client: any) => ({\r\n        ...client,\r\n        status: client.status || 'Active',\r\n        location: client.address || 'Unknown',\r\n        amountDue: client.balance || 0,\r\n        nextVisit: '2025-01-05', // Default or calculate\r\n        priority: 'Normal'\r\n      }));\r\n      setAssignedClients(mappedClients);\r\n    } catch (error) {\r\n      console.error('Error fetching assigned clients:', error);\r\n      setAssignedClients([]);\r\n    } finally {\r\n      setLoadingClients(false);\r\n    }\r\n  };\r\n\r\n  const fetchMessages = async () => {\r\n    setLoadingMessages(true);\r\n    try {\r\n      const response = await authService.getMobileMessages();\r\n      setMessages(response.data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching messages:', error);\r\n      setMessages([]);\r\n    } finally {\r\n      setLoadingMessages(false);\r\n    }\r\n  };\r\n\r\n  const fetchVisits = async () => {\r\n    setLoadingVisits(true);\r\n    try {\r\n      const response = await authService.getVisits();\r\n      // Map to Visit interface (needs scheduled_time)\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      const mappedVisits = (response.data || []).map((visit: any) => ({\r\n        ...visit,\r\n        scheduled_time: visit.scheduled_time || '09:00 AM', // Default\r\n        client: visit.client_name, // Map client_name to client prop if needed\r\n        type: visit.purpose || 'Collection',\r\n        location: visit.location || 'Client Shop'\r\n      }));\r\n      setScheduledVisits(mappedVisits);\r\n    } catch (error) {\r\n      console.error('Error fetching visits:', error);\r\n    } finally {\r\n      setLoadingVisits(false);\r\n    }\r\n  };\r\n\r\n  const fetchMetrics = async () => {\r\n    setLoadingMetrics(true);\r\n    try {\r\n      const response = await authService.getMobileBankerMetrics();\r\n      setMetrics(response.data || null);\r\n    } catch (error) {\r\n      console.error('Error fetching metrics:', error);\r\n    } finally {\r\n      setLoadingMetrics(false);\r\n    }\r\n  };\r\n\r\n\r\n  // --- HANDLERS ---\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const handleQuickAction = (action: any) => {\r\n    switch (action) {\r\n      case 'loan': setShowLoanModal(true); break;\r\n      case 'payment': setShowPaymentModal(true); break;\r\n      case 'deposit': setShowDepositModal(true); break;\r\n      case 'withdrawal': setShowWithdrawalModal(true); break;\r\n      case 'kyc': setShowKycModal(true); break;\r\n      case 'visit': setShowVisitModal(true); break;\r\n      default: break;\r\n    }\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const handleLoanSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    if (!loanForm.applicant_name || !loanForm.loan_amount || !loanForm.loan_purpose) {\r\n      alert('Please fill in all required fields (Name, Amount, Purpose)');\r\n      return;\r\n    }\r\n    alert('Loan application submitted!');\r\n    setShowLoanModal(false);\r\n  };\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const handlePaymentSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    if (!paymentForm.member_id || !paymentForm.amount) {\r\n      alert('Please enter Member ID and Amount');\r\n      return;\r\n    }\r\n    alert('Payment collected!');\r\n    setShowPaymentModal(false);\r\n  };\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const handleDepositSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    if (!depositForm.amount || parseFloat(depositForm.amount) <= 0) {\r\n      alert('Please enter a valid amount');\r\n      return;\r\n    }\r\n    if (!depositForm.account_number && !depositForm.member_id) {\r\n      alert('Please enter an account number or member ID');\r\n      return;\r\n    }\r\n    try {\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      const r: any = await api.post('operations/process_deposit/', depositForm);\r\n      alert(`Deposit Success! Ref: ${r.data.reference}`);\r\n      setShowDepositModal(false);\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    } catch (e: any) {\r\n      alert(e.message || 'Error processing deposit');\r\n    }\r\n  };\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const handleWithdrawalSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    if (!withdrawalForm.amount || parseFloat(withdrawalForm.amount) <= 0) {\r\n      alert('Please enter a valid amount');\r\n      return;\r\n    }\r\n    if (!withdrawalForm.account_number && !withdrawalForm.member_id) {\r\n      alert('Please enter an account number or member ID');\r\n      return;\r\n    }\r\n    try {\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      const r: any = await api.post('operations/process_withdrawal/', withdrawalForm);\r\n      alert(`Withdrawal Success! Ref: ${r.data.reference}`);\r\n      setShowWithdrawalModal(false);\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unused-vars\r\n    } catch (e: any) {\r\n      alert(e.message || 'Error processing withdrawal');\r\n    }\r\n  };\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unused-vars\r\n  const handleMessageSubmit = async (e: any) => { e.preventDefault(); try { await api.post('operations/messages/', messageForm); alert('Sent!'); setShowMessageModal(false); fetchMessages(); } catch (_err) { alert('Error'); } };\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unused-vars\r\n  const handleScheduleSubmit = async (e: any) => { e.preventDefault(); try { const r = await api.post('operations/schedule_visit/', scheduleForm); setScheduledVisits([...scheduledVisits, r.data] as any); alert('Scheduled!'); setShowScheduleModal(false); } catch (_err) { alert('Error'); } };\r\n\r\n  const quickActionButtons = [\r\n    { action: 'deposit', label: 'Deposit', icon: '≡ƒôÑ', variant: 'success' as const },\r\n    { action: 'withdrawal', label: 'Withdraw', icon: '≡ƒôñ', variant: 'danger' as const },\r\n    { action: 'loan', label: 'New Loan', icon: '≡ƒñ¥', variant: 'primary' as const },\r\n    { action: 'payment', label: 'Collect', icon: '≡ƒÆ╡', variant: 'warning' as const },\r\n    { action: 'kyc', label: 'KYC Doc', icon: '≡ƒô╕', variant: 'secondary' as const }\r\n  ];\r\n\r\n  return (\r\n    <DashboardLayout\r\n      title=\"Mobile Operations\"\r\n      user={user}\r\n      menuItems={menuItems}\r\n      activeView={activeTab}\r\n      onNavigate={setActiveTab}\r\n      onLogout={handleLogout}\r\n    >\r\n      {/* Mobile Header Ribbon removed - handled by DashboardLayout */}\r\n\r\n      <MobileMetrics metrics={metrics} loadingMetrics={loadingMetrics} />\r\n\r\n      {/* Main Grid: Content + Toolbox */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6\">\r\n\r\n        {/* LEFT COLUMN: Dynamic Tab Content (Spans 2 cols on Large) */}\r\n        <div className=\"lg:col-span-2\">\r\n          <Card className=\"min-h-[500px]\">\r\n            {activeTab === 'client-registration' && <ClientRegistrationTab />}\r\n            {activeTab === 'clients' && <ClientsTab assignedClients={assignedClients} />}\r\n            {activeTab === 'visits' && (\r\n              <VisitsTab\r\n                scheduledVisits={scheduledVisits}\r\n                onAddStop={() => setShowScheduleModal(true)}\r\n              />\r\n            )}\r\n            {activeTab === 'messaging' && (\r\n              <MessagingTab onOpenComms={() => {\r\n                if (!hasMessagingAccess) { alert('Access blocked.'); return; }\r\n                navigate('/messaging');\r\n              }} />\r\n            )}\r\n            {activeTab === 'my_payslips' && <StaffPayslipViewer />}\r\n          </Card>\r\n        </div>\r\n\r\n        {/* RIGHT COLUMN: Field Toolbox */}\r\n        <div>\r\n          <FieldToolbox\r\n            quickActionButtons={quickActionButtons}\r\n            onQuickAction={handleQuickAction}\r\n          />\r\n\r\n          <div className=\"mt-6 text-center\">\r\n            <p className=\"text-xs text-secondary-500 font-medium bg-secondary-50 py-2 rounded-lg border border-secondary-200\">\r\n              ΓÜá∩╕Å Verify ID before onboarding!\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* --- MODALS --- */}\r\n      <DepositModal\r\n        isOpen={showDepositModal}\r\n        onClose={() => setShowDepositModal(false)}\r\n        formData={depositForm}\r\n        setFormData={setDepositForm}\r\n        onSubmit={handleDepositSubmit}\r\n      />\r\n      <WithdrawalModal\r\n        isOpen={showWithdrawalModal}\r\n        onClose={() => setShowWithdrawalModal(false)}\r\n        formData={withdrawalForm}\r\n        setFormData={setWithdrawalForm}\r\n        onSubmit={handleWithdrawalSubmit}\r\n      />\r\n      <LoanModal\r\n        isOpen={showLoanModal}\r\n        onClose={() => setShowLoanModal(false)}\r\n        formData={loanForm}\r\n        setFormData={setLoanForm}\r\n        onSubmit={handleLoanSubmit}\r\n      />\r\n      <PaymentModal\r\n        isOpen={showPaymentModal}\r\n        onClose={() => setShowPaymentModal(false)}\r\n        formData={paymentForm}\r\n        setFormData={setPaymentForm}\r\n        onSubmit={handlePaymentSubmit}\r\n      />\r\n      <VisitModal\r\n        isOpen={showVisitModal || showScheduleModal}\r\n        onClose={() => { setShowVisitModal(false); setShowScheduleModal(false); }}\r\n        formData={scheduleForm}\r\n        setFormData={setScheduleForm}\r\n        onSubmit={handleScheduleSubmit}\r\n      />\r\n      <MessageModal\r\n        isOpen={showMessageModal}\r\n        onClose={() => setShowMessageModal(false)}\r\n        formData={messageForm}\r\n        setFormData={setMessageForm}\r\n        onSubmit={handleMessageSubmit}\r\n      />\r\n      <KycModal\r\n        isOpen={showKycModal}\r\n        onClose={() => setShowKycModal(false)}\r\n      />\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default MobileBankerDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\OperationsManagerDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleGenerateReport' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":63,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":63,"endColumn":29}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2643,2646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2643,2646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'reportData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":56,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":56,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":194,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8174,8177],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8174,8177],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { authService, OperationsMetrics, BranchActivity, SystemAlert, WorkflowStatus, ServiceCharge } from '../services/api.ts';\r\nimport DashboardLayout from '../components/layout/DashboardLayout';\r\nimport { Card } from '../components/ui/Card';\r\nimport { Button } from '../components/ui/Button';\r\n\r\n// Import Sub-components\r\nimport OverviewTab from '../components/OverviewTab';\r\nimport ServiceChargesTab from '../components/ServiceChargesTab';\r\nimport ReportsTab from '../components/cashier/ReportsTab';\r\nimport LoanApprovalsSection from '../components/LoanApprovalsSection';\r\nimport ClientRegistrationTab from '../components/ClientRegistrationTab';\r\nimport AccountsTab from '../components/AccountsTab';\r\n\r\nimport StaffIdsSection from '../components/manager/StaffIdsSection';\r\nimport MobileBankerManagementSection from '../components/manager/MobileBankerManagementSection.tsx';\r\nimport ProductsServicesManagement from '../components/manager/ProductsServicesManagement';\r\nimport SecuritySection from '../components/manager/SecuritySection';\r\n\r\n// --- Types ---\r\n// Local WorkflowStatus interface removed in favor of imported one\r\n\r\ntype ActiveView = 'overview' | 'accounts' | 'client-registration' | 'loan-approvals' | 'staff-ids' | 'mobile-banker-management' | 'branches' | 'reports' | 'alerts' | 'charges' | 'messaging' | 'products-services' | 'security';\r\n\r\nfunction OperationsManagerDashboard() {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const hasMessagingAccess = ['manager', 'operations_manager', 'cashier', 'mobile_banker'].includes(user?.role || '');\r\n\r\n  // --- STATE ---\r\n  const [activeView, setActiveView] = useState<ActiveView>('overview');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [dashboardData, setDashboardData] = useState<{\r\n    metrics: OperationsMetrics | null;\r\n    branchActivity: BranchActivity[];\r\n    systemAlerts: SystemAlert[];\r\n    workflowStatus: WorkflowStatus | Record<string, never>; // Allow empty object for initial state if needed\r\n    serviceCharges: ServiceCharge[];\r\n  }>({\r\n    metrics: null,\r\n    branchActivity: [],\r\n    systemAlerts: [],\r\n    workflowStatus: {},\r\n    serviceCharges: [],\r\n  });\r\n\r\n  const [newCharge, setNewCharge] = useState({\r\n    name: '', description: '', charge_type: 'percentage', rate: '', applicable_to: []\r\n  });\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const [serviceChargeCalculation, setServiceChargeCalculation] = useState<any>(null);\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const [reportData, setReportData] = useState<unknown>(null);\r\n  const [staffIds, setStaffIds] = useState([]);\r\n  const [staffIdFilters, setStaffIdFilters] = useState({});\r\n\r\n  // --- HANDLERS ---\r\n  const handleLogout = useCallback(async () => { await logout(); navigate('/login'); }, [logout, navigate]);\r\n\r\n  const handleGenerateReport = useCallback(async (reportType: string) => {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    const lastWeek = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];\r\n    const reportDataPayload = { type: reportType, date_from: lastWeek, date_to: today };\r\n\r\n    const result = await authService.generateOperationsReport(reportDataPayload);\r\n    if (result.success) {\r\n      alert(`Report '${reportType}' generated!`);\r\n      setReportData(result.data);\r\n    } else {\r\n      alert('Failed: ' + result.error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const [metricsRes, branchRes, alertsRes, workflowRes, chargesRes] = await Promise.all([\r\n          authService.getOperationalMetrics(),\r\n          authService.getBranchActivity(),\r\n          authService.getSystemAlerts(),\r\n          authService.getWorkflowStatus(),\r\n          authService.getServiceCharges()\r\n        ]);\r\n\r\n        setDashboardData({\r\n          metrics: metricsRes.success && metricsRes.data ? metricsRes.data : null,\r\n          branchActivity: branchRes.success && Array.isArray(branchRes.data) ? branchRes.data : [],\r\n          systemAlerts: alertsRes.success && Array.isArray(alertsRes.data) ? alertsRes.data : [],\r\n          workflowStatus: workflowRes.success && workflowRes.data ? workflowRes.data : {},\r\n          serviceCharges: chargesRes.success && Array.isArray(chargesRes.data) ? chargesRes.data : [],\r\n        });\r\n      } catch (error) {\r\n        console.error('Error fetching operations data:', error);\r\n      } finally { setLoading(false); }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Fetch staff IDs when view is active or filters change\r\n  const fetchStaffIds = useCallback(async () => {\r\n    const result = await authService.getStaffIds(staffIdFilters);\r\n    if (result.success) {\r\n      setStaffIds(result.data?.results || result.data || []);\r\n    }\r\n  }, [staffIdFilters]);\r\n\r\n  useEffect(() => {\r\n    if (activeView === 'staff-ids') {\r\n      fetchStaffIds();\r\n    }\r\n  }, [activeView, fetchStaffIds]);\r\n\r\n  // --- MENU ---\r\n  const menuItems = [\r\n    { id: 'overview', name: 'Overview', icon: '≡ƒôè' },\r\n    { id: 'accounts', name: 'Accounts', icon: '≡ƒÅª' },\r\n    { id: 'client-registration', name: 'Client Registration', icon: '≡ƒæñ' },\r\n    { id: 'loan-approvals', name: 'Loan Approvals', icon: 'Γ£à' },\r\n    { id: 'staff-ids', name: 'Staff IDs', icon: '≡ƒåö' },\r\n    { id: 'mobile-banker-management', name: 'Mobile Bankers', icon: '≡ƒ¢╡' },\r\n    { id: 'branches', name: 'Branches', icon: '≡ƒÅó' },\r\n    { id: 'reports', name: 'Reports', icon: '≡ƒôï' },\r\n    { id: 'alerts', name: 'Alerts', icon: '≡ƒÜ¿' },\r\n    { id: 'charges', name: 'Charges', icon: '≡ƒÅ╖∩╕Å' },\r\n    { id: 'products-services', name: 'Products & Services', icon: '≡ƒÄü' },\r\n    { id: 'messaging', name: 'Messaging', icon: '≡ƒÆ¼' },\r\n    { id: 'security', name: 'Security', icon: '≡ƒ¢í∩╕Å' }\r\n  ];\r\n\r\n  if (loading && !dashboardData.metrics) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-secondary-50\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- CONTENT ---\r\n  const renderContent = () => {\r\n    const { metrics, branchActivity, workflowStatus, serviceCharges, systemAlerts } = dashboardData;\r\n\r\n    switch (activeView) {\r\n      case 'overview':\r\n        return (\r\n          <OverviewTab\r\n            loading={loading}\r\n            metrics={metrics}\r\n            branchActivity={branchActivity}\r\n            workflowStatus={workflowStatus}\r\n          />\r\n        );\r\n      case 'accounts': return <Card><AccountsTab /></Card>;\r\n      case 'client-registration': return <Card><ClientRegistrationTab /></Card>;\r\n      case 'loan-approvals': return <Card><LoanApprovalsSection /></Card>;\r\n      case 'staff-ids':\r\n        return (\r\n          <StaffIdsSection\r\n            staffIds={staffIds}\r\n            staffIdFilters={staffIdFilters}\r\n            setStaffIdFilters={setStaffIdFilters}\r\n            fetchStaffIds={fetchStaffIds}\r\n          />\r\n        );\r\n      case 'mobile-banker-management':\r\n        return (\r\n          <Card>\r\n            <MobileBankerManagementSection />\r\n          </Card>\r\n        );\r\n      case 'branches':\r\n        return (\r\n          <Card>\r\n            <h2 className=\"text-2xl font-bold mb-4 text-secondary-900\">Branch Activity Details</h2>\r\n            <div className=\"text-center py-8 text-secondary-500\">Detailed branch activity view coming soon.</div>\r\n          </Card>\r\n        );\r\n      case 'reports':\r\n        return (\r\n          <Card>\r\n            <ReportsTab />\r\n          </Card>\r\n        );\r\n      case 'alerts':\r\n        return (\r\n          <Card>\r\n            <h2 className=\"text-2xl font-bold mb-6 text-secondary-900\">System Alerts</h2>\r\n            {systemAlerts && systemAlerts.length > 0 ? (\r\n              <div className=\"space-y-4\">\r\n                {/* eslint-disable-next-line @typescript-eslint/no-explicit-any */}\r\n                {systemAlerts.map((alert: any, index: number) => (\r\n                  <div key={alert.id || index} className={`p-4 rounded-lg border-l-4 ${alert.type === 'warning' ? 'bg-warning-50 border-l-warning-500' :\r\n                    alert.type === 'error' ? 'bg-error-50 border-l-error-500' :\r\n                      alert.type === 'info' ? 'bg-primary-50 border-l-primary-500' : 'bg-success-50 border-l-success-500'\r\n                    }`}>\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <span className=\"text-2xl\">\r\n                        {alert.type === 'warning' ? 'ΓÜá∩╕Å' : alert.type === 'error' ? 'Γ¥î' : alert.type === 'info' ? 'Γä╣∩╕Å' : 'Γ£à'}\r\n                      </span>\r\n                      <div className=\"flex-1\">\r\n                        <h3 className=\"font-bold text-lg text-secondary-900 mb-1\">{alert.message}</h3>\r\n                        <div className=\"flex flex-wrap gap-3 text-sm text-secondary-600\">\r\n                          <span>≡ƒåö {alert.id}</span>\r\n                          <span className=\"uppercase font-semibold\">≡ƒôè {alert.type}</span>\r\n                          <span className=\"uppercase font-semibold\">ΓÜí {alert.severity}</span>\r\n                          <span>≡ƒòÆ {new Date(alert.timestamp).toLocaleString()}</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center py-12 text-secondary-500\">\r\n                <div className=\"text-4xl mb-4\">Γ£à</div>\r\n                <p>No system alerts at this time.</p>\r\n              </div>\r\n            )}\r\n          </Card>\r\n        );\r\n      case 'charges':\r\n        return (\r\n          <Card>\r\n            <ServiceChargesTab\r\n              serviceCharges={serviceCharges}\r\n              newCharge={newCharge}\r\n              setNewCharge={setNewCharge}\r\n              serviceChargeCalculation={serviceChargeCalculation}\r\n              setServiceChargeCalculation={setServiceChargeCalculation}\r\n              authService={authService}\r\n              refetchCharges={async () => {\r\n                const chargesRes = await authService.getServiceCharges();\r\n                if (chargesRes.success && chargesRes.data) {\r\n                  const newCharges = chargesRes.data;\r\n                  setDashboardData(d => ({ ...d, serviceCharges: newCharges }));\r\n                }\r\n              }}\r\n            />\r\n          </Card>\r\n        );\r\n      case 'messaging':\r\n        return (\r\n          <Card className=\"text-center py-16 bg-gradient-to-br from-secondary-50 to-white\">\r\n            <div className=\"text-6xl mb-4\">≡ƒÆ¼</div>\r\n            <h3 className=\"text-2xl font-bold text-secondary-900 mb-2\">Secure Staff Messaging</h3>\r\n            <p className=\"text-secondary-600 mb-8 max-w-md mx-auto\">Encrypted internal communication channel.</p>\r\n            <Button onClick={() => hasMessagingAccess ? navigate('/messaging') : alert('Access Denied')} size=\"lg\" variant=\"primary\">\r\n              Open Secure Chat\r\n            </Button>\r\n          </Card>\r\n        );\r\n\r\n      case 'products-services':\r\n        return (\r\n          <Card>\r\n            <ProductsServicesManagement />\r\n          </Card>\r\n        );\r\n      case 'security':\r\n        return <SecuritySection />;\r\n      default: return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout\r\n      title=\"Operations Portal\"\r\n      user={user}\r\n      menuItems={menuItems}\r\n      activeView={activeView}\r\n      onNavigate={(id) => setActiveView(id as ActiveView)}\r\n      onLogout={handleLogout}\r\n    >\r\n      {renderContent()}\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default OperationsManagerDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\PerformanceDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[689,692],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[689,692],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[753,756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[753,756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[805,808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[805,808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[857,860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[857,860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[927,930],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[927,930],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1001,1004],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1001,1004],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1057,1060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1057,1060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6411,6414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6411,6414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":28,"column":6,"nodeType":"ArrayExpression","endLine":28,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [activeView, fetchData]","fix":{"range":[1177,1189],"text":"[activeView, fetchData]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { authService } from '../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport GlassCard from '../components/ui/modern/GlassCard';\r\nimport { Button } from '../components/ui/Button';\r\nimport DashboardLayout from '../components/layout/DashboardLayout';\r\n\r\nfunction PerformanceDashboard() {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [activeView, setActiveView] = useState('dashboard');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Performance data state\r\n  const [dashboardData, setDashboardData] = useState<any[]>([]);\r\n  const [systemHealth, setSystemHealth] = useState<any>({});\r\n  const [metrics, setMetrics] = useState<any[]>([]);\r\n  const [alerts, setAlerts] = useState<any[]>([]);\r\n  const [recommendations, setRecommendations] = useState<any[]>([]);\r\n  const [transactionVolume, setTransactionVolume] = useState<any>({});\r\n  const [chartData, setChartData] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeView]);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      switch (activeView) {\r\n        case 'dashboard':\r\n          await fetchDashboardData();\r\n          break;\r\n        case 'health':\r\n          await fetchSystemHealth();\r\n          break;\r\n        case 'metrics':\r\n          await fetchMetrics();\r\n          break;\r\n        case 'alerts':\r\n          await fetchAlerts();\r\n          break;\r\n        case 'recommendations':\r\n          await fetchRecommendations();\r\n          break;\r\n        case 'analytics':\r\n          await fetchAnalytics();\r\n          break;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching performance data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchDashboardData = async () => {\r\n    const result = await authService.getPerformanceDashboardData();\r\n    if (result.success) {\r\n      setDashboardData(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchSystemHealth = async () => {\r\n    const result = await authService.getSystemHealth();\r\n    if (result.success) {\r\n      setSystemHealth(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchMetrics = async () => {\r\n    const result = await authService.getPerformanceMetrics();\r\n    if (result.success) {\r\n      setMetrics(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchAlerts = async () => {\r\n    const result = await authService.getPerformanceAlerts();\r\n    if (result.success) {\r\n      setAlerts(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchRecommendations = async () => {\r\n    const result = await authService.getPerformanceRecommendations();\r\n    if (result.success) {\r\n      setRecommendations(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchAnalytics = async () => {\r\n    const [volumeResult, chartResult] = await Promise.all([\r\n      authService.getTransactionVolume({ time_range: '24h' }),\r\n      authService.getPerformanceChartData({ metric_type: 'response_time', time_range: '24h' })\r\n    ]);\r\n\r\n    if (volumeResult.success) {\r\n      setTransactionVolume(volumeResult.data);\r\n    }\r\n    if (chartResult.success) {\r\n      setChartData(chartResult.data);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  const menuItems = [\r\n    { id: 'dashboard', name: 'Dashboard', icon: '≡ƒôè' },\r\n    { id: 'health', name: 'System Health', icon: 'Γ¥ñ∩╕Å' },\r\n    { id: 'metrics', name: 'Metrics', icon: '≡ƒôê' },\r\n    { id: 'alerts', name: 'Alerts', icon: '≡ƒÜ¿' },\r\n    { id: 'recommendations', name: 'Recommendations', icon: '≡ƒÆí' },\r\n    { id: 'analytics', name: 'Analytics', icon: '≡ƒôë' }\r\n  ];\r\n\r\n  const renderContent = () => {\r\n    if (loading) {\r\n      return (\r\n        <GlassCard className=\"flex flex-col items-center justify-center p-12\">\r\n          <div className=\"text-6xl mb-4 animate-bounce-slow\">≡ƒôè</div>\r\n          <h2 className=\"text-xl font-bold text-gray-800\">Loading Performance Data...</h2>\r\n        </GlassCard>\r\n      );\r\n    }\r\n\r\n    switch (activeView) {\r\n      case 'dashboard':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n              <span>≡ƒÜÇ</span> Performance Overview\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {dashboardData.map((item, index) => (\r\n                <div key={index} className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm text-center transform hover:-translate-y-1 transition-transform duration-300\">\r\n                  <div className=\"text-3xl mb-3\">{item.icon || '≡ƒôè'}</div>\r\n                  <h4 className=\"text-sm font-bold text-gray-500 uppercase tracking-wide mb-1\">{item.metric}</h4>\r\n                  <p className=\"text-3xl font-black text-coastal-primary\">{item.value}</p>\r\n                  <p className=\"text-xs text-gray-400 mt-1\">{item.unit}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'health':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n              <span>≡ƒÅÑ</span> System Health Status\r\n            </h3>\r\n\r\n            <div className={`\r\n                p-6 rounded-2xl mb-8 border flex items-center gap-4 shadow-sm\r\n                ${systemHealth.status === 'healthy' ? 'bg-emerald-50 border-emerald-100' : 'bg-red-50 border-red-100'}\r\n            `}>\r\n              <div className=\"text-5xl\">\r\n                {systemHealth.status === 'healthy' ? 'Γ£à' : 'Γ¥î'}\r\n              </div>\r\n              <div>\r\n                <h4 className={`text-xl font-black ${systemHealth.status === 'healthy' ? 'text-emerald-700' : 'text-red-700'}`}>\r\n                  {systemHealth.status === 'healthy' ? 'All Systems Operational' : 'System Issues Detected'}\r\n                </h4>\r\n                <p className=\"text-sm opacity-70\">\r\n                  Last check completed successfully\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {systemHealth.components && systemHealth.components.map((component: any, index: number) => (\r\n                <div key={index} className={`\r\n                    p-5 rounded-2xl border bg-white\r\n                    ${component.status === 'healthy' ? 'border-gray-100' : 'border-red-100 shadow-red-50'}\r\n                `}>\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <h4 className=\"font-bold text-gray-800\">{component.name}</h4>\r\n                    <span className=\"text-xl\">{component.status === 'healthy' ? 'Γ£à' : 'Γ¥î'}</span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600 mb-3\">{component.message}</p>\r\n                  <p className=\"text-xs text-gray-400 font-medium\">\r\n                    Last checked: {new Date(component.last_check).toLocaleTimeString()}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'metrics':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Detailed Metrics</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {metrics.map((metric, index) => (\r\n                <div key={index} className=\"p-5 rounded-2xl bg-white border border-gray-100 shadow-sm relative overflow-hidden\">\r\n                  <div className={`absolute top-0 right-0 w-24 h-24 rounded-bl-full opacity-10\r\n                       ${metric.status === 'good' ? 'bg-emerald-500' : metric.status === 'warning' ? 'bg-amber-500' : 'bg-red-500'}\r\n                   `}></div>\r\n\r\n                  <h4 className=\"font-bold text-gray-800 mb-4 relative z-10\">{metric.name}</h4>\r\n\r\n                  <div className=\"flex items-end gap-2 mb-2 relative z-10\">\r\n                    <span className=\"text-3xl font-black text-gray-900\">{metric.value}</span>\r\n                    <span className=\"text-xs text-gray-500 font-bold uppercase mb-1.5\">{metric.unit}</span>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-2 mb-4 relative z-10\">\r\n                    <span className={`\r\n                          w-2 h-2 rounded-full\r\n                          ${metric.status === 'good' ? 'bg-emerald-500' : metric.status === 'warning' ? 'bg-amber-500' : 'bg-red-500'}\r\n                      `}></span>\r\n                    <span className=\"text-xs font-bold text-gray-500 uppercase\">{metric.status}</span>\r\n                  </div>\r\n\r\n                  <p className=\"text-sm text-gray-500 relative z-10\">\r\n                    {metric.description}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'alerts':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Performance Alerts</h3>\r\n            <div className=\"space-y-4\">\r\n              {alerts.length === 0 ? (\r\n                <div className=\"text-center py-12 text-gray-400\">\r\n                  No active alerts\r\n                </div>\r\n              ) : (\r\n                alerts.map((alert, index) => (\r\n                  <div key={index} className={`\r\n                        p-5 rounded-xl border flex flex-col md:flex-row justify-between items-start md:items-center\r\n                        ${alert.severity === 'critical' ? 'bg-red-50 border-red-100' :\r\n                      alert.severity === 'warning' ? 'bg-amber-50 border-amber-100' : 'bg-blue-50 border-blue-100'}\r\n                    `}>\r\n                    <div className=\"mb-4 md:mb-0\">\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <span className=\"text-xl\">\r\n                          {alert.severity === 'critical' ? '≡ƒÜ¿' : alert.severity === 'warning' ? 'ΓÜá∩╕Å' : 'Γä╣∩╕Å'}\r\n                        </span>\r\n                        <h4 className={`font-bold ${alert.severity === 'critical' ? 'text-red-900' :\r\n                            alert.severity === 'warning' ? 'text-amber-900' : 'text-blue-900'\r\n                          }`}>{alert.title}</h4>\r\n                      </div>\r\n                      <p className={`text-sm ml-8 ${alert.severity === 'critical' ? 'text-red-700' :\r\n                          alert.severity === 'warning' ? 'text-amber-700' : 'text-blue-700'\r\n                        }`}>{alert.message}</p>\r\n                      <p className=\"text-xs opacity-60 ml-8 mt-1\">\r\n                        {new Date(alert.timestamp).toLocaleString()}\r\n                      </p>\r\n                    </div>\r\n                    <Button\r\n                      size=\"sm\"\r\n                      className={`\r\n                            bg-white hover:bg-opacity-80 border-transparent shadow-sm\r\n                            ${alert.severity === 'critical' ? 'text-red-600' :\r\n                          alert.severity === 'warning' ? 'text-amber-600' : 'text-blue-600'}\r\n                        `}\r\n                      onClick={() => {/* Handle alert action */ }}\r\n                    >\r\n                      Acknowledge\r\n                    </Button>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'recommendations':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">System Recommendations</h3>\r\n            <div className=\"space-y-6\">\r\n              {recommendations.map((rec, index) => (\r\n                <div key={index} className=\"p-6 rounded-2xl bg-white border border-gray-100 shadow-sm flex flex-col md:flex-row gap-6\">\r\n                  <div className=\"flex-shrink-0 w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-2xl text-indigo-600\">\r\n                    ≡ƒÆí\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"text-lg font-bold text-gray-800 mb-2\">{rec.title}</h4>\r\n                    <p className=\"text-gray-600 mb-4 leading-relaxed\">{rec.description}</p>\r\n\r\n                    <div className=\"flex flex-wrap gap-4\">\r\n                      <div className=\"bg-gray-50 px-3 py-1 rounded-lg text-xs font-medium text-gray-500 border border-gray-100\">\r\n                        Category: <span className=\"text-gray-800\">{rec.category}</span>\r\n                      </div>\r\n                      <div className=\"bg-gray-50 px-3 py-1 rounded-lg text-xs font-medium text-gray-500 border border-gray-100\">\r\n                        Impact: <span className=\"text-gray-800\">{rec.impact}</span>\r\n                      </div>\r\n                      <div className=\"bg-gray-50 px-3 py-1 rounded-lg text-xs font-medium text-gray-500 border border-gray-100\">\r\n                        Effort: <span className=\"text-gray-800\">{rec.effort}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <Button variant=\"primary\">Implement</Button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'analytics':\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <GlassCard className=\"p-6 text-center\">\r\n                <h4 className=\"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4\">Total Volume</h4>\r\n                <div className=\"text-4xl font-black text-coastal-primary\">{transactionVolume.total || 0}</div>\r\n                <div className=\"text-xs text-gray-400 mt-1\">transactions (24h)</div>\r\n              </GlassCard>\r\n              <GlassCard className=\"p-6 text-center\">\r\n                <h4 className=\"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4\">Success Rate</h4>\r\n                <div className=\"text-4xl font-black text-emerald-500\">{transactionVolume.success_rate || 0}%</div>\r\n                <div className=\"text-xs text-gray-400 mt-1\">completion rate</div>\r\n              </GlassCard>\r\n              <GlassCard className=\"p-6 text-center\">\r\n                <h4 className=\"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4\">Avg Response</h4>\r\n                <div className=\"text-4xl font-black text-blue-500\">{transactionVolume.avg_response_time || 0}ms</div>\r\n                <div className=\"text-xs text-gray-400 mt-1\">latency</div>\r\n              </GlassCard>\r\n            </div>\r\n\r\n            <GlassCard className=\"p-8\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 mb-6\">Response Time Analysis</h3>\r\n              <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-2xl border border-dashed border-gray-200\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-4xl mb-2 opacity-20\">≡ƒôë</div>\r\n                  <p className=\"text-gray-400 font-medium\">Chart Visualization Placeholder</p>\r\n                  <p className=\"text-xs text-gray-300 mt-1\">{chartData.length} data points available</p>\r\n                </div>\r\n              </div>\r\n            </GlassCard>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout\r\n      title=\"Performance Monitor\"\r\n      user={user}\r\n      menuItems={menuItems}\r\n      activeView={activeView}\r\n      onNavigate={setActiveView}\r\n      onLogout={handleLogout}\r\n    >\r\n      {renderContent()}\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default PerformanceDashboard;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Products.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Reports.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[711,714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[711,714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[767,770],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[767,770],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[839,842],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[839,842],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[899,902],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[899,902],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":39,"column":8,"nodeType":"ArrayExpression","endLine":39,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [activeView, fetchData]","fix":{"range":[1378,1390],"text":"[activeView, fetchData]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { authService } from '../services/api.ts';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport GlassCard from '../components/ui/modern/GlassCard';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Input } from '../components/ui/Input';\r\nimport DashboardLayout from '../components/layout/DashboardLayout';\r\n\r\nfunction Reports() {\r\n    const { user, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const [activeView, setActiveView] = useState('templates');\r\n    const [loading, setLoading] = useState(true);\r\n    const [reportTemplates, setReportTemplates] = useState<any[]>([]);\r\n    const [reports, setReports] = useState<any[]>([]);\r\n    const [reportSchedules, setReportSchedules] = useState<any[]>([]);\r\n    const [analytics, setAnalytics] = useState<any[]>([]);\r\n\r\n    // Form states\r\n    const [newTemplate, setNewTemplate] = useState({\r\n        name: '',\r\n        description: '',\r\n        template_type: 'financial',\r\n        config: {}\r\n    });\r\n\r\n    const [newSchedule, setNewSchedule] = useState({\r\n        template: '',\r\n        name: '',\r\n        schedule_type: 'daily',\r\n        config: {}\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [activeView]);\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            switch (activeView) {\r\n                case 'templates':\r\n                    await fetchTemplates();\r\n                    break;\r\n                case 'reports':\r\n                    await fetchReports();\r\n                    break;\r\n                case 'schedules':\r\n                    await fetchSchedules();\r\n                    break;\r\n                case 'analytics':\r\n                    await fetchAnalytics();\r\n                    break;\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchTemplates = async () => {\r\n        const result = await authService.getReportTemplates();\r\n        if (result.success) setReportTemplates(result.data);\r\n    };\r\n\r\n    const fetchReports = async () => {\r\n        const result = await authService.getReports();\r\n        if (result.success) setReports(result.data);\r\n    };\r\n\r\n    const fetchSchedules = async () => {\r\n        const result = await authService.getReportSchedules();\r\n        if (result.success) setReportSchedules(result.data);\r\n    };\r\n\r\n    const fetchAnalytics = async () => {\r\n        const result = await authService.getReportAnalytics();\r\n        if (result.success) setAnalytics(result.data);\r\n    };\r\n\r\n    const handleCreateTemplate = async () => {\r\n        const result = await authService.createReportTemplate(newTemplate);\r\n        if (result.success) {\r\n            setReportTemplates([...reportTemplates, result.data]);\r\n            setNewTemplate({ name: '', description: '', template_type: 'financial', config: {} });\r\n            alert('Report template created successfully!');\r\n        } else {\r\n            alert('Failed to create template: ' + result.error);\r\n        }\r\n    };\r\n\r\n    const handleCreateSchedule = async () => {\r\n        const result = await authService.createReportSchedule(newSchedule);\r\n        if (result.success) {\r\n            setReportSchedules([...reportSchedules, result.data]);\r\n            setNewSchedule({ template: '', name: '', schedule_type: 'daily', config: {} });\r\n            alert('Report schedule created successfully!');\r\n        } else {\r\n            alert('Failed to create schedule: ' + result.error);\r\n        }\r\n    };\r\n\r\n\r\n    const handleGenerateReport = async (templateId: string) => {\r\n        const result = await authService.generateReport({ template: templateId });\r\n        if (result.success) {\r\n            alert('Report generated successfully!');\r\n            fetchReports();\r\n        } else {\r\n            alert('Failed to generate report: ' + result.error);\r\n        }\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        await logout();\r\n        navigate('/login');\r\n    };\r\n\r\n    const menuItems = [\r\n        { id: 'templates', name: 'Templates', icon: '≡ƒôï' },\r\n        { id: 'reports', name: 'Reports', icon: '≡ƒôè' },\r\n        { id: 'schedules', name: 'Schedules', icon: 'ΓÅ░' },\r\n        { id: 'analytics', name: 'Analytics', icon: '≡ƒôê' }\r\n    ];\r\n\r\n    const renderContent = () => {\r\n        if (loading) {\r\n            return (\r\n                <GlassCard className=\"flex flex-col items-center justify-center p-12\">\r\n                    <div className=\"text-6xl mb-4 animate-bounce-slow\">≡ƒôè</div>\r\n                    <h2 className=\"text-xl font-bold text-gray-800\">Loading Reports...</h2>\r\n                </GlassCard>\r\n            );\r\n        }\r\n\r\n        switch (activeView) {\r\n            case 'templates':\r\n                return (\r\n                    <div className=\"space-y-6\">\r\n                        <GlassCard className=\"p-6 border-t-[6px] border-t-emerald-500\">\r\n                            <h3 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n                                <span>Γ₧ò</span> Create New Template\r\n                            </h3>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                                <Input\r\n                                    type=\"text\"\r\n                                    placeholder=\"e.g. Monthly Revenue Summary\"\r\n                                    label=\"Template Name\"\r\n                                    value={newTemplate.name}\r\n                                    onChange={(e) => setNewTemplate({ ...newTemplate, name: e.target.value })}\r\n                                />\r\n                                <div>\r\n                                    <label className=\"block text-sm font-bold text-gray-700 mb-1 ml-1\">Type</label>\r\n                                    <div className=\"relative\">\r\n                                        <select\r\n                                            value={newTemplate.template_type}\r\n                                            onChange={(e) => setNewTemplate({ ...newTemplate, template_type: e.target.value })}\r\n                                            className=\"w-full pl-4 pr-10 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:ring-4 focus:ring-emerald-50 focus:border-emerald-400 outline-none transition-all appearance-none font-medium text-gray-700\"\r\n                                        >\r\n                                            <option value=\"financial\">Financial</option>\r\n                                            <option value=\"operational\">Operational</option>\r\n                                            <option value=\"compliance\">Compliance</option>\r\n                                            <option value=\"custom\">Custom</option>\r\n                                        </select>\r\n                                        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400\">Γû╝</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"mb-4\">\r\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1 ml-1\">Description</label>\r\n                                <textarea\r\n                                    placeholder=\"Describe the purpose of this report template...\"\r\n                                    value={newTemplate.description}\r\n                                    onChange={(e) => setNewTemplate({ ...newTemplate, description: e.target.value })}\r\n                                    className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:ring-4 focus:ring-emerald-50 focus:border-emerald-400 outline-none transition-all font-medium text-gray-700 min-h-[100px] resize-y\"\r\n                                />\r\n                            </div>\r\n                            <Button onClick={handleCreateTemplate} variant=\"primary\">\r\n                                Create Template ≡ƒôï\r\n                            </Button>\r\n                        </GlassCard>\r\n\r\n                        <GlassCard className=\"p-6\">\r\n                            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Available Templates</h3>\r\n                            {reportTemplates.length === 0 ? (\r\n                                <p className=\"text-gray-400 italic\">No templates created yet.</p>\r\n                            ) : (\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                                    {reportTemplates.map((template) => (\r\n                                        <div key={template.id} className=\"p-5 rounded-2xl bg-white border border-gray-100 shadow-sm hover:shadow-md transition-shadow\">\r\n                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                <h4 className=\"font-bold text-gray-800 text-lg\">{template.name}</h4>\r\n                                                <span className=\"px-2 py-1 rounded-lg bg-gray-100 text-xs font-bold uppercase text-gray-500\">\r\n                                                    {template.template_type}\r\n                                                </span>\r\n                                            </div>\r\n                                            <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">{template.description}</p>\r\n                                            <Button\r\n                                                size=\"sm\"\r\n                                                variant=\"secondary\"\r\n                                                onClick={() => handleGenerateReport(template.id)}\r\n                                                className=\"w-full\"\r\n                                            >\r\n                                                Generate Report ≡ƒÜÇ\r\n                                            </Button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </GlassCard>\r\n                    </div>\r\n                );\r\n\r\n            case 'reports':\r\n                return (\r\n                    <GlassCard className=\"p-6\">\r\n                        <h3 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2\">\r\n                            <span>≡ƒôé</span> Generated Reports\r\n                        </h3>\r\n                        <div className=\"space-y-4\">\r\n                            {reports.length === 0 ? (\r\n                                <div className=\"text-center py-12 text-gray-400 bg-gray-50 rounded-2xl border border-dashed border-gray-200\">\r\n                                    No reports generated yet.\r\n                                </div>\r\n                            ) : (\r\n                                reports.map((report) => (\r\n                                    <div key={report.id} className=\"flex flex-col md:flex-row justify-between items-center p-5 rounded-2xl bg-white border border-gray-100 shadow-sm hover:border-blue-200 transition-colors\">\r\n                                        <div className=\"mb-4 md:mb-0\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className=\"text-2xl\">≡ƒôä</span>\r\n                                                <h4 className=\"font-bold text-gray-800 text-lg\">{report.name}</h4>\r\n                                            </div>\r\n                                            <p className=\"text-sm text-gray-500 ml-8 mt-1\">\r\n                                                Generated: <span className=\"font-medium text-gray-700\">{new Date(report.created_at).toLocaleDateString()}</span>\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <span className={`\r\n                            px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider\r\n                            ${report.status === 'completed' ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}\r\n                        `}>\r\n                                                {report.status}\r\n                                            </span>\r\n                                            <Button\r\n                                                size=\"sm\"\r\n                                                onClick={() => window.open(report.file_url, '_blank')}\r\n                                                disabled={report.status !== 'completed'}\r\n                                                variant=\"primary\"\r\n                                            >\r\n                                                Download ≡ƒôÑ\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </GlassCard>\r\n                );\r\n\r\n            case 'schedules':\r\n                return (\r\n                    <div className=\"space-y-6\">\r\n                        <GlassCard className=\"p-6 border-t-[6px] border-t-amber-400\">\r\n                            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Schedule New Report</h3>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-bold text-gray-700 mb-1 ml-1\">Template</label>\r\n                                    <div className=\"relative\">\r\n                                        <select\r\n                                            value={newSchedule.template}\r\n                                            onChange={(e) => setNewSchedule({ ...newSchedule, template: e.target.value })}\r\n                                            className=\"w-full pl-4 pr-10 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:ring-4 focus:ring-amber-50 focus:border-amber-400 outline-none transition-all appearance-none font-medium text-gray-700\"\r\n                                        >\r\n                                            <option value=\"\">Select Template</option>\r\n                                            {reportTemplates.map(template => (\r\n                                                <option key={template.id} value={template.id}>{template.name}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400\">Γû╝</div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <Input\r\n                                    label=\"Schedule Name\"\r\n                                    type=\"text\"\r\n                                    placeholder=\"e.g. Daily Operations\"\r\n                                    value={newSchedule.name}\r\n                                    onChange={(e) => setNewSchedule({ ...newSchedule, name: e.target.value })}\r\n                                />\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-bold text-gray-700 mb-1 ml-1\">Frequency</label>\r\n                                    <div className=\"relative\">\r\n                                        <select\r\n                                            value={newSchedule.schedule_type}\r\n                                            onChange={(e) => setNewSchedule({ ...newSchedule, schedule_type: e.target.value })}\r\n                                            className=\"w-full pl-4 pr-10 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:ring-4 focus:ring-amber-50 focus:border-amber-400 outline-none transition-all appearance-none font-medium text-gray-700\"\r\n                                        >\r\n                                            <option value=\"daily\">Daily</option>\r\n                                            <option value=\"weekly\">Weekly</option>\r\n                                            <option value=\"monthly\">Monthly</option>\r\n                                        </select>\r\n                                        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400\">Γû╝</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <Button onClick={handleCreateSchedule} variant=\"warning\" className=\"text-white\">\r\n                                Create Schedule ΓÅ░\r\n                            </Button>\r\n                        </GlassCard>\r\n\r\n                        <GlassCard className=\"p-6\">\r\n                            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Active Schedules</h3>\r\n                            <div className=\"space-y-4\">\r\n                                {reportSchedules.map((schedule) => (\r\n                                    <div key={schedule.id} className=\"p-5 rounded-2xl bg-white border border-gray-100 shadow-sm flex items-center justify-between\">\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-gray-800 text-lg mb-1\">{schedule.name}</h4>\r\n                                            <div className=\"flex items-center gap-2 text-sm text-gray-500\">\r\n                                                <span className=\"capitalize px-2 py-0.5 bg-gray-100 rounded text-xs font-bold\">{schedule.schedule_type}</span>\r\n                                                <span>ΓÇó</span>\r\n                                                <span>Next run: {new Date(schedule.next_run).toLocaleDateString()}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className={`\r\n                        px-3 py-1 rounded-full text-xs font-bold uppercase\r\n                        ${schedule.is_active ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'}\r\n                    `}>\r\n                                            {schedule.is_active ? 'Active' : 'Inactive'}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </GlassCard>\r\n                    </div>\r\n                );\r\n\r\n            case 'analytics':\r\n                return (\r\n                    <GlassCard className=\"p-6\">\r\n                        <h3 className=\"text-2xl font-bold text-gray-800 mb-8 flex items-center gap-2\">\r\n                            <span>≡ƒôê</span> Report Analytics\r\n                        </h3>\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                            {analytics.map((item, index) => (\r\n                                <div key={index} className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm text-center transform hover:-translate-y-1 transition-transform duration-300\">\r\n                                    <div className=\"text-4xl mb-4 opacity-90\">{item.icon || '≡ƒôè'}</div>\r\n                                    <h4 className=\"text-sm font-bold text-gray-500 uppercase tracking-widest mb-2\">{item.metric}</h4>\r\n                                    <p className=\"text-4xl font-black text-coastal-primary\">{item.value}</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"mt-8 p-8 bg-gray-50 rounded-2xl border border-dashed border-gray-200 text-center\">\r\n                            <p className=\"text-gray-400 font-medium\">Detailed usage charts coming soon.</p>\r\n                        </div>\r\n                    </GlassCard>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <DashboardLayout\r\n            title=\"Reports Hub\"\r\n            user={user}\r\n            menuItems={menuItems}\r\n            activeView={activeView}\r\n            onNavigate={setActiveView}\r\n            onLogout={handleLogout}\r\n        >\r\n            {renderContent()}\r\n        </DashboardLayout>\r\n    );\r\n}\r\n\r\nexport default Reports;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Services.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userSettings' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[725,728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[725,728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[793,796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[793,796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[849,852],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[849,852],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[909,912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[909,912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[973,976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[973,976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":226,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9880,9883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9880,9883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":249,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11226,11229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11226,11229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":276,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12642,12645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12642,12645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":303,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14180,14183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14180,14183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":35,"column":6,"nodeType":"ArrayExpression","endLine":35,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [activeView, fetchData]","fix":{"range":[1276,1288],"text":"[activeView, fetchData]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { authService } from '../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport GlassCard from '../components/ui/modern/GlassCard';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Input } from '../components/ui/Input';\r\nimport DashboardLayout from '../components/layout/DashboardLayout';\r\n\r\nfunction Settings() {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [activeView, setActiveView] = useState('user-settings');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Settings data state\r\n  const [userSettings, setUserSettings] = useState<any[]>([]);\r\n  const [systemSettings, setSystemSettings] = useState<any[]>([]);\r\n  const [apiUsage, setApiUsage] = useState<any[]>([]);\r\n  const [rateLimits, setRateLimits] = useState<any[]>([]);\r\n  const [healthChecks, setHealthChecks] = useState<any[]>([]);\r\n\r\n  // Form states\r\n  const [userSettingsForm, setUserSettingsForm] = useState({\r\n    theme: 'light',\r\n    language: 'en',\r\n    notifications: true,\r\n    email_updates: false\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeView]);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      switch (activeView) {\r\n        case 'user-settings':\r\n          await fetchUserSettings();\r\n          break;\r\n        case 'system-settings':\r\n          await fetchSystemSettings();\r\n          break;\r\n        case 'api-usage':\r\n          await fetchApiUsage();\r\n          break;\r\n        case 'rate-limits':\r\n          await fetchRateLimits();\r\n          break;\r\n        case 'health-checks':\r\n          await fetchHealthChecks();\r\n          break;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching settings data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchUserSettings = async () => {\r\n    const result = await authService.getUserSettings();\r\n    if (result.success) {\r\n      setUserSettings(result.data);\r\n      // Update form with current settings\r\n      if (result.data.length > 0) {\r\n        const settings = result.data[0]; // Assuming first settings object\r\n        setUserSettingsForm({\r\n          theme: settings.theme || 'light',\r\n          language: settings.language || 'en',\r\n          notifications: settings.notifications || true,\r\n          email_updates: settings.email_updates || false\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const fetchSystemSettings = async () => {\r\n    const result = await authService.getSystemSettings();\r\n    if (result.success) {\r\n      setSystemSettings(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchApiUsage = async () => {\r\n    const result = await authService.getApiUsage();\r\n    if (result.success) {\r\n      setApiUsage(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchRateLimits = async () => {\r\n    const result = await authService.getRateLimits();\r\n    if (result.success) {\r\n      setRateLimits(result.data);\r\n    }\r\n  };\r\n\r\n  const fetchHealthChecks = async () => {\r\n    const result = await authService.getHealthChecks();\r\n    if (result.success) {\r\n      setHealthChecks(result.data);\r\n    }\r\n  };\r\n\r\n  const handleSaveUserSettings = async () => {\r\n    const result = await authService.updateUserSettings(userSettingsForm);\r\n    if (result.success) {\r\n      alert('User settings saved successfully!');\r\n      fetchUserSettings();\r\n    } else {\r\n      alert('Failed to save settings: ' + result.error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  const menuItems = [\r\n    { id: 'user-settings', name: 'User Settings', icon: '≡ƒæñ' },\r\n    { id: 'system-settings', name: 'System Settings', icon: 'ΓÜÖ∩╕Å' },\r\n    { id: 'api-usage', name: 'API Usage', icon: '≡ƒôè' },\r\n    { id: 'rate-limits', name: 'Rate Limits', icon: 'ΓÅ▒∩╕Å' },\r\n    { id: 'health-checks', name: 'Health Checks', icon: 'Γ¥ñ∩╕Å' }\r\n  ];\r\n\r\n  const renderContent = () => {\r\n    if (loading) {\r\n      return (\r\n        <GlassCard className=\"flex flex-col items-center justify-center p-12\">\r\n          <div className=\"text-6xl mb-4 animate-spin-slow\">ΓÜÖ∩╕Å</div>\r\n          <h2 className=\"text-xl font-bold text-gray-800\">Loading Configuration...</h2>\r\n        </GlassCard>\r\n      );\r\n    }\r\n\r\n    switch (activeView) {\r\n      case 'user-settings':\r\n        return (\r\n          <GlassCard className=\"p-8 max-w-3xl border-t-[6px] border-t-coastal-primary\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-8\">Personal Preferences</h3>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\r\n              <div>\r\n                <label className=\"block text-sm font-bold text-gray-700 mb-2 ml-1\">Theme</label>\r\n                <div className=\"relative\">\r\n                  <select\r\n                    value={userSettingsForm.theme}\r\n                    onChange={(e) => setUserSettingsForm({ ...userSettingsForm, theme: e.target.value })}\r\n                    className=\"w-full pl-4 pr-10 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:ring-4 focus:ring-blue-50 focus:border-blue-400 outline-none transition-all appearance-none font-medium text-gray-700\"\r\n                  >\r\n                    <option value=\"light\">ΓÿÇ∩╕Å Light Mode</option>\r\n                    <option value=\"dark\">≡ƒîÖ Dark Mode</option>\r\n                    <option value=\"auto\">≡ƒûÑ∩╕Å System Default</option>\r\n                  </select>\r\n                  <div className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400\">Γû╝</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-bold text-gray-700 mb-2 ml-1\">Language</label>\r\n                <div className=\"relative\">\r\n                  <select\r\n                    value={userSettingsForm.language}\r\n                    onChange={(e) => setUserSettingsForm({ ...userSettingsForm, language: e.target.value })}\r\n                    className=\"w-full pl-4 pr-10 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:ring-4 focus:ring-blue-50 focus:border-blue-400 outline-none transition-all appearance-none font-medium text-gray-700\"\r\n                  >\r\n                    <option value=\"en\">≡ƒç║≡ƒç╕ English</option>\r\n                    <option value=\"es\">≡ƒç¬≡ƒç╕ Spanish</option>\r\n                    <option value=\"fr\">≡ƒç½≡ƒç╖ French</option>\r\n                    <option value=\"de\">≡ƒç⌐≡ƒç¬ German</option>\r\n                  </select>\r\n                  <div className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400\">Γû╝</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4 mb-8\">\r\n              <div className=\"flex items-center justify-between p-4 rounded-xl bg-gray-50 border border-gray-100 hover:border-blue-200 transition-colors cursor-pointer\" onClick={() => setUserSettingsForm({ ...userSettingsForm, notifications: !userSettingsForm.notifications })}>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className={`w-10 h-10 rounded-full flex items-center justify-center text-xl transition-colors ${userSettingsForm.notifications ? 'bg-blue-100 text-blue-600' : 'bg-gray-200 text-gray-400'}`}>\r\n                    ≡ƒöö\r\n                  </div>\r\n                  <div>\r\n                    <h4 className=\"font-bold text-gray-800\">Push Notifications</h4>\r\n                    <p className=\"text-xs text-gray-500\">Receive alerts about new transactions and messages</p>\r\n                  </div>\r\n                </div>\r\n                <div className={`w-12 h-6 rounded-full p-1 transition-colors ${userSettingsForm.notifications ? 'bg-blue-500' : 'bg-gray-300'}`}>\r\n                  <div className={`w-4 h-4 rounded-full bg-white shadow-sm transform transition-transform ${userSettingsForm.notifications ? 'translate-x-6' : 'translate-x-0'}`}></div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between p-4 rounded-xl bg-gray-50 border border-gray-100 hover:border-blue-200 transition-colors cursor-pointer\" onClick={() => setUserSettingsForm({ ...userSettingsForm, email_updates: !userSettingsForm.email_updates })}>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className={`w-10 h-10 rounded-full flex items-center justify-center text-xl transition-colors ${userSettingsForm.email_updates ? 'bg-purple-100 text-purple-600' : 'bg-gray-200 text-gray-400'}`}>\r\n                    ≡ƒôº\r\n                  </div>\r\n                  <div>\r\n                    <h4 className=\"font-bold text-gray-800\">Email Updates</h4>\r\n                    <p className=\"text-xs text-gray-500\">Weekly summaries and marketing updates</p>\r\n                  </div>\r\n                </div>\r\n                <div className={`w-12 h-6 rounded-full p-1 transition-colors ${userSettingsForm.email_updates ? 'bg-purple-500' : 'bg-gray-300'}`}>\r\n                  <div className={`w-4 h-4 rounded-full bg-white shadow-sm transform transition-transform ${userSettingsForm.email_updates ? 'translate-x-6' : 'translate-x-0'}`}></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <Button onClick={handleSaveUserSettings} className=\"w-full md:w-auto px-8\" variant=\"primary\">\r\n              Save Changes ≡ƒÆ╛\r\n            </Button>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'system-settings':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">System Configuration</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {Array.isArray(systemSettings) && systemSettings.map((setting: any, index: number) => (\r\n                <div key={index} className=\"p-5 rounded-2xl bg-white border border-gray-100 shadow-sm hover:shadow-md transition-all group\">\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <div className=\"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors\">\r\n                      ΓÜÖ∩╕Å\r\n                    </div>\r\n                    <span className=\"text-xs font-bold text-gray-400 bg-gray-50 px-2 py-1 rounded uppercase\">{setting.setting_type}</span>\r\n                  </div>\r\n                  <h4 className=\"font-bold text-gray-800 mb-1\">{setting.key}</h4>\r\n                  <p className=\"text-sm font-mono text-gray-600 bg-gray-50 px-3 py-2 rounded-lg border border-gray-100 break-all\">\r\n                    {setting.value}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'api-usage':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">API Usage Statistics</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {Array.isArray(apiUsage) && apiUsage.map((usage: any, index: number) => (\r\n                <div key={index} className=\"p-6 rounded-2xl bg-white border border-gray-100 text-center relative overflow-hidden group\">\r\n                  {/* Background decoration */}\r\n                  <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-purple-500 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500\"></div>\r\n\r\n                  <div className=\"text-4xl mb-3 opacity-80 group-hover:scale-110 transition-transform duration-300\">≡ƒôè</div>\r\n\r\n                  <h4 className=\"text-sm font-bold text-gray-500 uppercase tracking-wide mb-2 truncate\" title={usage.endpoint}>\r\n                    {usage.endpoint}\r\n                  </h4>\r\n\r\n                  <div className=\"text-3xl font-black text-gray-800 group-hover:text-coastal-primary transition-colors\">\r\n                    {usage.request_count?.toLocaleString()}\r\n                  </div>\r\n\r\n                  <div className=\"text-xs text-gray-400 mt-1\">requests</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'rate-limits':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">Rate Limiting</h3>\r\n            <div className=\"space-y-4\">\r\n              {Array.isArray(rateLimits) && rateLimits.map((limit: any, index: number) => (\r\n                <div key={index} className=\"flex flex-col md:flex-row justify-between items-center p-5 rounded-2xl bg-white border border-gray-100 shadow-sm\">\r\n                  <div className=\"mb-4 md:mb-0 text-center md:text-left\">\r\n                    <h4 className=\"font-bold text-gray-800 text-lg mb-1\">{limit.name}</h4>\r\n                    <p className=\"text-sm text-gray-500\">{limit.description}</p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-4 bg-gray-50 px-6 py-3 rounded-xl border border-gray-200\">\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-2xl font-black text-gray-800 leading-none\">\r\n                        {limit.requests_per_hour?.toLocaleString()}\r\n                      </div>\r\n                      <div className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\">Req / Hour</div>\r\n                    </div>\r\n                    <div className=\"h-8 w-[1px] bg-gray-300\"></div>\r\n                    <div className=\"text-2xl\">ΓÜí</div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      case 'health-checks':\r\n        return (\r\n          <GlassCard className=\"p-6\">\r\n            <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">System Health</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {Array.isArray(healthChecks) && healthChecks.map((check: any, index: number) => (\r\n                <div key={index} className={`\r\n                    p-6 rounded-2xl border relative overflow-hidden\r\n                    ${check.status === 'healthy' ? 'bg-emerald-50 border-emerald-100' : 'bg-red-50 border-red-100'}\r\n                `}>\r\n                  <div className=\"flex justify-between items-start mb-4 relative z-10\">\r\n                    <div className={`p-2 rounded-lg ${check.status === 'healthy' ? 'bg-emerald-100 text-emerald-600' : 'bg-red-100 text-red-600'}`}>\r\n                      {check.status === 'healthy' ? 'Γ£à' : 'Γ¥î'}\r\n                    </div>\r\n                    <span className={`text-xs font-bold uppercase py-1 px-2 rounded ${check.status === 'healthy' ? 'bg-white/50 text-emerald-700' : 'bg-white/50 text-red-700'}`}>\r\n                      {check.status}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <h4 className=\"font-bold text-gray-800 text-lg mb-2 relative z-10\">{check.name}</h4>\r\n                  <p className=\"text-sm text-gray-600 mb-4 relative z-10\">{check.message}</p>\r\n\r\n                  <div className=\"relative z-10 pt-4 border-t border-black/5\">\r\n                    <p className=\"text-xs text-gray-500 font-medium\">\r\n                      Last checked: {new Date(check.last_check).toLocaleTimeString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </GlassCard>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout\r\n      title=\"Settings\"\r\n      user={user}\r\n      menuItems={menuItems}\r\n      activeView={activeView}\r\n      onNavigate={setActiveView}\r\n      onLogout={handleLogout}\r\n    >\r\n      {renderContent()}\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default Settings;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\StaffOTPVerificationPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":49}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Shield, Phone, AlertCircle, CheckCircle, RefreshCw, Lock } from 'lucide-react';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport { authService } from '../services/api.ts';\r\n\r\n/**\r\n * StaffOTPVerificationPage - First-login OTP verification for new staff members\r\n *\r\n * New staff created by superuser must verify their phone number via OTP\r\n * before accessing their role-specific dashboard.\r\n */\r\nconst StaffOTPVerificationPage = () => {\r\n    const navigate = useNavigate();\r\n    const { user, checkAuth, getDashboardRoute } = useAuth();\r\n\r\n    // OTP state\r\n    const [otpCode, setOtpCode] = useState('');\r\n    const [otpSent, setOtpSent] = useState(false);\r\n    const [otpExpiresIn, setOtpExpiresIn] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n    const [attempts, setAttempts] = useState(0);\r\n    const [isBlocked, setIsBlocked] = useState(false);\r\n    const [blockTimeRemaining, setBlockTimeRemaining] = useState(0);\r\n\r\n    // OTP expiration time (5 minutes)\r\n    const OTP_EXPIRATION_SECONDS = 300;\r\n    const MAX_ATTEMPTS = 5;\r\n    const BLOCK_DURATION_SECONDS = 300; // 5 minutes block after max attempts\r\n\r\n    // Countdown timer for OTP expiration\r\n    useEffect(() => {\r\n        let timer;\r\n        if (otpExpiresIn > 0) {\r\n            timer = setInterval(() => {\r\n                setOtpExpiresIn(prev => {\r\n                    if (prev <= 1) {\r\n                        clearInterval(timer);\r\n                        setError('OTP code has expired. Please request a new one.');\r\n                        return 0;\r\n                    }\r\n                    return prev - 1;\r\n                });\r\n            }, 1000);\r\n        }\r\n        return () => clearInterval(timer);\r\n    }, [otpExpiresIn]);\r\n\r\n    // Block timer countdown\r\n    useEffect(() => {\r\n        let timer;\r\n        if (blockTimeRemaining > 0) {\r\n            timer = setInterval(() => {\r\n                setBlockTimeRemaining(prev => {\r\n                    if (prev <= 1) {\r\n                        clearInterval(timer);\r\n                        setIsBlocked(false);\r\n                        setAttempts(0);\r\n                        return 0;\r\n                    }\r\n                    return prev - 1;\r\n                });\r\n            }, 1000);\r\n        }\r\n        return () => clearInterval(timer);\r\n    }, [blockTimeRemaining]);\r\n\r\n    // If user is already verified, redirect to dashboard\r\n    useEffect(() => {\r\n        // SECURITY: OTP verification status is tracked on the backend (user.otp_verified)\r\n        // Do NOT rely on localStorage for security-sensitive state\r\n        if (user?.otp_verified) {\r\n            const dashboardRoute = getDashboardRoute ? getDashboardRoute() : '/dashboard';\r\n            navigate(dashboardRoute, { replace: true });\r\n        }\r\n    }, [user, navigate, getDashboardRoute]);\r\n\r\n    // Send OTP to user's phone\r\n    const handleSendOTP = async () => {\r\n        if (isBlocked) return;\r\n\r\n        setLoading(true);\r\n        setError('');\r\n        setSuccess('');\r\n\r\n        try {\r\n            const phone = user?.phone || user?.two_factor_phone;\r\n            if (!phone) {\r\n                throw new Error('No phone number found on your account. Please contact an administrator.');\r\n            }\r\n\r\n            const response = await authService.sendOTP({\r\n                phone_number: phone,\r\n                verification_type: 'staff_onboarding'\r\n            });\r\n\r\n            if (response.success) {\r\n                setOtpSent(true);\r\n                setOtpExpiresIn(OTP_EXPIRATION_SECONDS);\r\n                setSuccess('OTP code sent to your phone. Please check your messages.');\r\n                setError('');\r\n            } else {\r\n                throw new Error(response.error || 'Failed to send OTP');\r\n            }\r\n        } catch (err) {\r\n            setError(err.message || 'Failed to send OTP. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Verify OTP code\r\n    const handleVerifyOTP = async () => {\r\n        if (isBlocked || !otpCode || otpCode.length !== 6) {\r\n            setError('Please enter a valid 6-digit code.');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const phone = user?.phone || user?.two_factor_phone;\r\n\r\n            const response = await authService.verifyOTP({\r\n                phone_number: phone,\r\n                otp_code: otpCode,\r\n                verification_type: 'staff_onboarding'\r\n            });\r\n\r\n            if (response.success) {\r\n                // SECURITY: OTP verification is tracked on the backend via user.otp_verified\r\n                // The checkAuth() call below will refresh the user state from the server\r\n\r\n                setSuccess('Phone verified successfully! Redirecting to your dashboard...');\r\n\r\n                // Refresh auth state and redirect\r\n                await checkAuth();\r\n\r\n                setTimeout(() => {\r\n                    const dashboardRoute = getDashboardRoute ? getDashboardRoute() : '/dashboard';\r\n                    navigate(dashboardRoute, { replace: true });\r\n                }, 1500);\r\n            } else {\r\n                // Handle invalid OTP\r\n                const newAttempts = attempts + 1;\r\n                setAttempts(newAttempts);\r\n\r\n                if (newAttempts >= MAX_ATTEMPTS) {\r\n                    setIsBlocked(true);\r\n                    setBlockTimeRemaining(BLOCK_DURATION_SECONDS);\r\n                    setError(`Too many failed attempts. Please wait ${Math.ceil(BLOCK_DURATION_SECONDS / 60)} minutes before trying again.`);\r\n                } else {\r\n                    setError(`Invalid OTP code. ${MAX_ATTEMPTS - newAttempts} attempts remaining.`);\r\n                }\r\n                setOtpCode('');\r\n            }\r\n        } catch (err) {\r\n            const newAttempts = attempts + 1;\r\n            setAttempts(newAttempts);\r\n\r\n            if (newAttempts >= MAX_ATTEMPTS) {\r\n                setIsBlocked(true);\r\n                setBlockTimeRemaining(BLOCK_DURATION_SECONDS);\r\n                setError(`Too many failed attempts. Please wait ${Math.ceil(BLOCK_DURATION_SECONDS / 60)} minutes before trying again.`);\r\n            } else {\r\n                setError(err.message || 'Verification failed. Please try again.');\r\n            }\r\n            setOtpCode('');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Handle OTP input change (only allow digits)\r\n    const handleOtpChange = (e) => {\r\n        const value = e.target.value.replace(/\\D/g, '').slice(0, 6);\r\n        setOtpCode(value);\r\n        setError('');\r\n    };\r\n\r\n    // Handle resend OTP\r\n    const handleResendOTP = () => {\r\n        setOtpCode('');\r\n        setOtpSent(false);\r\n        setOtpExpiresIn(0);\r\n        setError('');\r\n        setSuccess('');\r\n        handleSendOTP();\r\n    };\r\n\r\n    // Format time for display\r\n    const formatTime = (seconds) => {\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = seconds % 60;\r\n        return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    // Role display names\r\n    const roleDisplayNames = {\r\n        cashier: 'Cashier',\r\n        mobile_banker: 'Mobile Banker',\r\n        manager: 'Manager',\r\n        operations_manager: 'Operations Manager',\r\n        administrator: 'Administrator',\r\n        superuser: 'Superuser',\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center px-4 py-12\">\r\n            <div className=\"max-w-md w-full\">\r\n                {/* Header */}\r\n                <div className=\"text-center mb-8\">\r\n                    <div className=\"inline-flex items-center justify-center w-20 h-20 bg-blue-600 rounded-2xl mb-6 shadow-lg\">\r\n                        <Shield className=\"w-10 h-10 text-white\" />\r\n                    </div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Verify Your Identity</h1>\r\n                    <p className=\"text-gray-600\">\r\n                        Welcome, {user?.first_name || 'Staff Member'}!\r\n                        <br />\r\n                        <span className=\"text-sm\">Complete phone verification to access your <strong>{roleDisplayNames[user?.role] || 'Staff'}</strong> dashboard.</span>\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Main Card */}\r\n                <div className=\"bg-white rounded-2xl shadow-xl p-8\">\r\n                    {/* Phone Info */}\r\n                    <div className=\"flex items-center gap-3 p-4 bg-gray-50 rounded-xl mb-6\">\r\n                        <Phone className=\"w-5 h-5 text-blue-600\" />\r\n                        <div>\r\n                            <p className=\"text-sm text-gray-500\">Verification will be sent to:</p>\r\n                            <p className=\"font-medium text-gray-900\">\r\n                                {user?.phone ? `${user.phone.slice(0, 4)}****${user.phone.slice(-4)}` : 'No phone registered'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Error Message */}\r\n                    {error && (\r\n                        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3\">\r\n                            <AlertCircle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\r\n                            <p className=\"text-red-700 text-sm\">{error}</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Success Message */}\r\n                    {success && (\r\n                        <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-start gap-3\">\r\n                            <CheckCircle className=\"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5\" />\r\n                            <p className=\"text-green-700 text-sm\">{success}</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Blocked State */}\r\n                    {isBlocked ? (\r\n                        <div className=\"text-center py-8\">\r\n                            <Lock className=\"w-12 h-12 text-amber-500 mx-auto mb-4\" />\r\n                            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Temporarily Locked</h3>\r\n                            <p className=\"text-gray-600 mb-4\">Too many failed attempts. Please wait before trying again.</p>\r\n                            <div className=\"text-2xl font-mono font-bold text-amber-600\">\r\n                                {formatTime(blockTimeRemaining)}\r\n                            </div>\r\n                        </div>\r\n                    ) : !otpSent ? (\r\n                        /* Send OTP Button */\r\n                        <button\r\n                            onClick={handleSendOTP}\r\n                            disabled={loading || !user?.phone}\r\n                            className=\"w-full py-4 px-6 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                        >\r\n                            {loading ? (\r\n                                <>\r\n                                    <RefreshCw className=\"w-5 h-5 animate-spin\" />\r\n                                    Sending...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Phone className=\"w-5 h-5\" />\r\n                                    Send Verification Code\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    ) : (\r\n                        /* OTP Input and Verify */\r\n                        <div className=\"space-y-6\">\r\n                            {/* OTP Input */}\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                    Enter 6-digit verification code\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    inputMode=\"numeric\"\r\n                                    pattern=\"[0-9]*\"\r\n                                    maxLength={6}\r\n                                    value={otpCode}\r\n                                    onChange={handleOtpChange}\r\n                                    placeholder=\"000000\"\r\n                                    className=\"w-full text-center text-3xl font-mono tracking-[0.5em] py-4 px-6 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                                    autoFocus\r\n                                    disabled={loading}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Timer */}\r\n                            {otpExpiresIn > 0 && (\r\n                                <div className=\"text-center\">\r\n                                    <p className=\"text-sm text-gray-500\">\r\n                                        Code expires in: <span className=\"font-mono font-semibold text-blue-600\">{formatTime(otpExpiresIn)}</span>\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Verify Button */}\r\n                            <button\r\n                                onClick={handleVerifyOTP}\r\n                                disabled={loading || otpCode.length !== 6 || otpExpiresIn === 0}\r\n                                className=\"w-full py-4 px-6 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                            >\r\n                                {loading ? (\r\n                                    <>\r\n                                        <RefreshCw className=\"w-5 h-5 animate-spin\" />\r\n                                        Verifying...\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <CheckCircle className=\"w-5 h-5\" />\r\n                                        Verify Code\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n\r\n                            {/* Resend Option */}\r\n                            <div className=\"text-center\">\r\n                                {otpExpiresIn === 0 ? (\r\n                                    <button\r\n                                        onClick={handleResendOTP}\r\n                                        disabled={loading}\r\n                                        className=\"text-blue-600 hover:text-blue-700 font-medium text-sm\"\r\n                                    >\r\n                                        <RefreshCw className=\"w-4 h-4 inline mr-1\" />\r\n                                        Resend verification code\r\n                                    </button>\r\n                                ) : (\r\n                                    <p className=\"text-sm text-gray-500\">\r\n                                        Didn't receive the code? Wait for timer to resend.\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Help Text */}\r\n                <div className=\"mt-6 text-center text-sm text-gray-500\">\r\n                    <p>\r\n                        Having trouble? Contact your administrator for assistance.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StaffOTPVerificationPage;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Transactions.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadTransactions'. Either include it or remove the dependency array.","line":28,"column":6,"nodeType":"ArrayExpression","endLine":28,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [filters, loadTransactions]","fix":{"range":[917,926],"text":"[filters, loadTransactions]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1136,1139],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1136,1139],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'filteredTransactions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":150,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":150,"endColumn":29},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":1022,"column":23,"nodeType":"MemberExpression","messageId":"limited","endLine":1022,"endColumn":34,"suggestions":[{"fix":{"range":[38978,39020],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api.ts';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\nimport { sanitizeUserInput } from '../utils/sanitizer';\r\n\r\nfunction Transactions() {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    type: 'all',\r\n    status: 'all',\r\n    category: 'all',\r\n    dateRange: '7days',\r\n    search: '',\r\n    sortBy: 'timestamp',\r\n    sortOrder: 'desc',\r\n    memberName: '',\r\n    tags: ''\r\n  });\r\n  const [selectedTransaction, setSelectedTransaction] = useState(null);\r\n  const [balanceData, setBalanceData] = useState(null);\r\n  const [pagination, setPagination] = useState(null);\r\n  const [loadingBalance, setLoadingBalance] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadTransactions();\r\n    loadBalanceData();\r\n  }, [filters]);\r\n\r\n  const loadTransactions = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // Build query parameters for enhanced API\r\n      const params = {\r\n        page_size: 50,\r\n        page: 1\r\n      } as any;\r\n\r\n      if (filters.type !== 'all') params.type = filters.type;\r\n      if (filters.status !== 'all') params.status = filters.status;\r\n      if (filters.category !== 'all') params.category = filters.category;\r\n      if (filters.search) params.search = filters.search;\r\n      if (filters.memberName) params.member_name = filters.memberName;\r\n      if (filters.tags) params.tags = filters.tags;\r\n      if (filters.sortBy) params.sort_by = filters.sortBy;\r\n      if (filters.sortOrder) params.sort_order = filters.sortOrder;\r\n\r\n      // Handle date range\r\n      if (filters.dateRange !== 'custom') {\r\n        const now = new Date();\r\n        const dateFrom = new Date();\r\n\r\n        switch (filters.dateRange) {\r\n          case '7days':\r\n            dateFrom.setDate(now.getDate() - 7);\r\n            break;\r\n          case '30days':\r\n            dateFrom.setDate(now.getDate() - 30);\r\n            break;\r\n          case '90days':\r\n            dateFrom.setDate(now.getDate() - 90);\r\n            break;\r\n          default:\r\n            dateFrom.setDate(now.getDate() - 7);\r\n        }\r\n        params.date_from = dateFrom.toISOString().split('T')[0];\r\n        params.date_to = now.toISOString().split('T')[0];\r\n      }\r\n\r\n      const result = await apiService.getTransactions(params);\r\n      setTransactions(result.transactions || []);\r\n      setPagination(result.pagination);\r\n    } catch (error) {\r\n      console.error('Failed to load transactions:', error);\r\n      setTransactions([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadBalanceData = async () => {\r\n    try {\r\n      setLoadingBalance(true);\r\n      const result = await apiService.getBalanceInquiry();\r\n      setBalanceData(result);\r\n    } catch (error) {\r\n      console.error('Failed to load balance data:', error);\r\n    } finally {\r\n      setLoadingBalance(false);\r\n    }\r\n  };\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      // Use the same parameters as the current transaction load\r\n      const params = {\r\n        page_size: 10000  // Export all transactions (up to limit)\r\n      };\r\n\r\n      if (filters.type !== 'all') params.type = filters.type;\r\n      if (filters.status !== 'all') params.status = filters.status;\r\n      if (filters.category !== 'all') params.category = filters.category;\r\n      if (filters.search) params.search = filters.search;\r\n      if (filters.memberName) params.member_name = filters.memberName;\r\n      if (filters.tags) params.tags = filters.tags;\r\n      if (filters.sortBy) params.sort_by = filters.sortBy;\r\n      if (filters.sortOrder) params.sort_order = filters.sortOrder;\r\n\r\n      // Handle date range\r\n      if (filters.dateRange !== 'custom') {\r\n        const now = new Date();\r\n        const dateFrom = new Date();\r\n\r\n        switch (filters.dateRange) {\r\n          case '7days':\r\n            dateFrom.setDate(now.getDate() - 7);\r\n            break;\r\n          case '30days':\r\n            dateFrom.setDate(now.getDate() - 30);\r\n            break;\r\n          case '90days':\r\n            dateFrom.setDate(now.getDate() - 90);\r\n            break;\r\n          default:\r\n            dateFrom.setDate(now.getDate() - 7);\r\n        }\r\n        params.date_from = dateFrom.toISOString().split('T')[0];\r\n        params.date_to = now.toISOString().split('T')[0];\r\n      }\r\n\r\n      const response = await apiService.exportTransactions(params);\r\n\r\n      // Create download link\r\n      const url = window.URL.createObjectURL(new Blob([response]));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', `transactions_${new Date().toISOString().split('T')[0]}.csv`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      window.URL.revokeObjectURL(url);\r\n\r\n    } catch (error) {\r\n      console.error('Failed to export transactions:', error);\r\n      alert('Failed to export transactions. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Filter transactions based on current filters\r\n  const filteredTransactions = transactions.filter(transaction => {\r\n    // Handle subtype filtering\r\n    let matchesType = filters.type === 'all';\r\n    if (!matchesType) {\r\n      if (filters.type.startsWith('deposit_')) {\r\n        matchesType = transaction.type === 'deposit' && transaction.subtype === filters.type.replace('deposit_', '');\r\n      } else if (filters.type.startsWith('withdrawal_')) {\r\n        matchesType = transaction.type === 'withdrawal' && transaction.subtype === filters.type.replace('withdrawal_', '');\r\n      } else {\r\n        matchesType = transaction.type === filters.type;\r\n      }\r\n    }\r\n\r\n    const matchesStatus = filters.status === 'all' || transaction.status === filters.status;\r\n    const matchesSearch = transaction.description.toLowerCase().includes(filters.search.toLowerCase()) ||\r\n      transaction.amount.toString().includes(filters.search);\r\n    return matchesType && matchesStatus && matchesSearch;\r\n  });\r\n\r\n  const transactionTypes = [\r\n    { id: 'all', name: 'All Types', icon: '≡ƒôè' },\r\n    { id: 'deposit', name: 'Deposits', icon: '≡ƒÆ╡' },\r\n    { id: 'deposit_daily_susu', name: 'Daily Susu Deposit', icon: '≡ƒôà' },\r\n    { id: 'deposit_shares', name: 'Shares Deposit', icon: '≡ƒôê' },\r\n    { id: 'deposit_monthly_contribution', name: 'Monthly Contribution Deposit', icon: '≡ƒôå' },\r\n    { id: 'withdrawal', name: 'Withdrawals', icon: '≡ƒÅº' },\r\n    { id: 'withdrawal_daily_susu', name: 'Daily Susu Withdrawal', icon: '≡ƒôà' },\r\n    { id: 'withdrawal_shares', name: 'Shares Withdrawal', icon: '≡ƒôê' },\r\n    { id: 'withdrawal_monthly_contribution', name: 'Monthly Contribution Withdrawal', icon: '≡ƒôå' },\r\n    { id: 'transfer', name: 'Transfers', icon: 'Γåö∩╕Å' },\r\n    { id: 'payment', name: 'Payments', icon: '≡ƒÆ│' }\r\n  ];\r\n\r\n  const statusTypes = [\r\n    { id: 'all', name: 'All Status', color: '#6b7280' },\r\n    { id: 'completed', name: 'Completed', color: '#10b981' },\r\n    { id: 'pending', name: 'Pending', color: '#f59e0b' },\r\n    { id: 'failed', name: 'Failed', color: '#ef4444' },\r\n    { id: 'cancelled', name: 'Cancelled', color: '#6b7280' }\r\n  ];\r\n\r\n  const categoryTypes = [\r\n    { id: 'all', name: 'All Categories' },\r\n    { id: 'income', name: 'Income' },\r\n    { id: 'expense', name: 'Expense' },\r\n    { id: 'transfer', name: 'Transfer' },\r\n    { id: 'loan', name: 'Loan' },\r\n    { id: 'fee', name: 'Fee' },\r\n    { id: 'other', name: 'Other' }\r\n  ];\r\n\r\n  const sortOptions = [\r\n    { id: 'timestamp', name: 'Date' },\r\n    { id: 'amount', name: 'Amount' },\r\n    { id: 'type', name: 'Type' },\r\n    { id: 'description', name: 'Description' }\r\n  ];\r\n\r\n  const dateRanges = [\r\n    { id: '7days', name: 'Last 7 Days' },\r\n    { id: '30days', name: 'Last 30 Days' },\r\n    { id: '90days', name: 'Last 90 Days' },\r\n    { id: 'custom', name: 'Custom Range' }\r\n  ];\r\n\r\n  const exportOptions = [\r\n    { format: 'PDF', icon: '' },\r\n    { format: 'CSV', icon: '' },\r\n    { format: 'Excel', icon: '' }\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',\r\n        padding: '40px 20px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '16px',\r\n          padding: '40px',\r\n          textAlign: 'center',\r\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{\r\n            width: '40px',\r\n            height: '40px',\r\n            border: '3px solid #f3f4f6',\r\n            borderTop: '3px solid #3b82f6',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite',\r\n            margin: '0 auto 20px'\r\n          }}></div>\r\n          <p style={{ color: '#6b7280', fontSize: '16px' }}>Loading transactions...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      minHeight: '100vh',\r\n      background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',\r\n      padding: '20px'\r\n    }}>\r\n      {/* Balance Inquiry Section */}\r\n      {balanceData && (\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '16px',\r\n          padding: '24px',\r\n          marginBottom: '24px',\r\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n            <h2 style={{\r\n              margin: 0,\r\n              color: '#1e293b',\r\n              fontSize: '20px',\r\n              fontWeight: '700'\r\n            }}>\r\n              Account Balance Summary\r\n            </h2>\r\n            <button\r\n              onClick={loadBalanceData}\r\n              disabled={loadingBalance}\r\n              style={{\r\n                padding: '8px 16px',\r\n                background: '#3b82f6',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                color: 'white',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: loadingBalance ? 'not-allowed' : 'pointer',\r\n                opacity: loadingBalance ? 0.6 : 1\r\n              }}\r\n            >\r\n              {loadingBalance ? 'Refreshing...' : 'Refresh Balance'}\r\n            </button>\r\n          </div>\r\n\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '16px' }}>\r\n            <div style={{\r\n              background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n              color: 'white',\r\n              padding: '20px',\r\n              borderRadius: '12px',\r\n              textAlign: 'center'\r\n            }}>\r\n              <div style={{ fontSize: '14px', opacity: 0.9, marginBottom: '8px' }}>Total Balance</div>\r\n              <div style={{ fontSize: '28px', fontWeight: '700' }}>\r\n                {formatCurrencyGHS(balanceData.total_balance)}\r\n              </div>\r\n            </div>\r\n\r\n            {balanceData.accounts.map((account, index) => (\r\n              <div key={index} style={{\r\n                background: 'white',\r\n                border: '1px solid #e2e8f0',\r\n                padding: '20px',\r\n                borderRadius: '12px'\r\n              }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>\r\n                  <div>\r\n                    <div style={{ fontSize: '16px', fontWeight: '600', color: '#1e293b', marginBottom: '4px' }}>\r\n                      {account.account_type}\r\n                    </div>\r\n                    <div style={{ fontSize: '12px', color: '#64748b' }}>\r\n                      ****{account.account_number}\r\n                    </div>\r\n                  </div>\r\n                  <span style={{\r\n                    background: account.status === 'Active' ? '#d1fae5' : '#fee2e2',\r\n                    color: account.status === 'Active' ? '#065f46' : '#dc2626',\r\n                    padding: '4px 8px',\r\n                    borderRadius: '6px',\r\n                    fontSize: '10px',\r\n                    fontWeight: '600'\r\n                  }}>\r\n                    {account.status}\r\n                  </span>\r\n                </div>\r\n\r\n                <div style={{ fontSize: '24px', fontWeight: '700', color: '#1e293b', marginBottom: '8px' }}>\r\n                  {formatCurrencyGHS(account.current_balance)}\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '12px', color: '#64748b' }}>\r\n                  <span>Recent Deposits: {formatCurrencyGHS(account.recent_activity.total_deposits)}</span>\r\n                  <span>Recent Withdrawals: {formatCurrencyGHS(account.recent_activity.total_withdrawals)}</span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Header */}\r\n      <div style={{\r\n        background: 'white',\r\n        borderRadius: '16px',\r\n        padding: '30px',\r\n        marginBottom: '24px',\r\n        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n        border: '1px solid #e2e8f0'\r\n      }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '24px' }}>\r\n          <div>\r\n            <h1 style={{\r\n              margin: '0 0 8px 0',\r\n              color: '#1e293b',\r\n              fontSize: '28px',\r\n              fontWeight: '700'\r\n            }}>\r\n              Transaction History\r\n            </h1>\r\n            <p style={{\r\n              margin: 0,\r\n              color: '#64748b',\r\n              fontSize: '16px'\r\n            }}>\r\n              View and manage all your financial transactions\r\n            </p>\r\n          </div>\r\n          <div style={{ display: 'flex', gap: '12px' }}>\r\n            {/* Export Options */}\r\n            <div style={{ display: 'flex', gap: '8px' }}>\r\n              {exportOptions.map((option, index) => (\r\n                <button key={index} style={{\r\n                  padding: '10px 16px',\r\n                  background: '#f8fafc',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '8px',\r\n                  color: '#374151',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '6px',\r\n                  fontSize: '14px',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = '#3b82f6';\r\n                    e.currentTarget.style.color = 'white';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = '#f8fafc';\r\n                    e.currentTarget.style.color = '#374151';\r\n                  }}>\r\n                  <span>{option.icon}</span>\r\n                  {option.format}\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <button style={{\r\n              padding: '12px 20px',\r\n              background: 'linear-gradient(135deg, #059669 0%, #10b981 100%)',\r\n              border: 'none',\r\n              borderRadius: '10px',\r\n              color: 'white',\r\n              fontWeight: '600',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              transition: 'all 0.2s'\r\n            }}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'translateY(-2px)';\r\n                e.currentTarget.style.boxShadow = '0 8px 15px rgba(5, 150, 105, 0.3)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'translateY(0)';\r\n                e.currentTarget.style.boxShadow = 'none';\r\n              }}>\r\n              Print Statement\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filters Row */}\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))', gap: '16px', marginBottom: '16px' }}>\r\n          {/* Transaction Type Filter */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Transaction Type\r\n            </label>\r\n            <select\r\n              value={filters.type}\r\n              onChange={(e) => setFilters({ ...filters, type: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px 12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                background: 'white'\r\n              }}\r\n            >\r\n              {transactionTypes.map(type => (\r\n                <option key={type.id} value={type.id}>{type.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Category Filter */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Category\r\n            </label>\r\n            <select\r\n              value={filters.category}\r\n              onChange={(e) => setFilters({ ...filters, category: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px 12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                background: 'white'\r\n              }}\r\n            >\r\n              {categoryTypes.map(category => (\r\n                <option key={category.id} value={category.id}>{category.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Status Filter */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Status\r\n            </label>\r\n            <select\r\n              value={filters.status}\r\n              onChange={(e) => setFilters({ ...filters, status: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px 12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                background: 'white'\r\n              }}\r\n            >\r\n              {statusTypes.map(status => (\r\n                <option key={status.id} value={status.id}>{status.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Date Range Filter */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Date Range\r\n            </label>\r\n            <select\r\n              value={filters.dateRange}\r\n              onChange={(e) => setFilters({ ...filters, dateRange: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px 12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                background: 'white'\r\n              }}\r\n            >\r\n              {dateRanges.map(range => (\r\n                <option key={range.id} value={range.id}>{range.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Sort By */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Sort By\r\n            </label>\r\n            <select\r\n              value={filters.sortBy}\r\n              onChange={(e) => setFilters({ ...filters, sortBy: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px 12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                background: 'white'\r\n              }}\r\n            >\r\n              {sortOptions.map(option => (\r\n                <option key={option.id} value={option.id}>{option.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Search */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Search\r\n            </label>\r\n            <div style={{ position: 'relative' }}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search transactions...\"\r\n                value={filters.search}\r\n                onChange={(e) => setFilters({ ...filters, search: e.target.value })}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '10px 12px 10px 36px',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '8px',\r\n                  fontSize: '14px',\r\n                  background: '#f9fafb'\r\n                }}\r\n              />\r\n              <span style={{\r\n                position: 'absolute',\r\n                left: '12px',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n                color: '#6b7280'\r\n              }}>\r\n                ≡ƒöì\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Advanced Filters Row */}\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '16px', marginBottom: '16px' }}>\r\n          {/* Member Name Filter */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Member Name\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Filter by member name...\"\r\n              value={filters.memberName}\r\n              onChange={(e) => setFilters({ ...filters, memberName: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px 12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                background: 'white'\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* Tags Filter */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Tags (comma-separated)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Filter by tags...\"\r\n              value={filters.tags}\r\n              onChange={(e) => setFilters({ ...filters, tags: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px 12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                background: 'white'\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* Sort Order */}\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '8px', color: '#374151', fontWeight: '500', fontSize: '14px' }}>\r\n              Sort Order\r\n            </label>\r\n            <select\r\n              value={filters.sortOrder}\r\n              onChange={(e) => setFilters({ ...filters, sortOrder: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px 12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                background: 'white'\r\n              }}\r\n            >\r\n              <option value=\"desc\">Descending</option>\r\n              <option value=\"asc\">Ascending</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filter Summary */}\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <div style={{ color: '#64748b', fontSize: '14px' }}>\r\n            Showing {transactions.length} transactions\r\n            {pagination && ` (Page ${pagination.current_page} of ${pagination.total_pages})`}\r\n          </div>\r\n          <div style={{ display: 'flex', gap: '12px' }}>\r\n            <button\r\n              onClick={() => setFilters({\r\n                type: 'all',\r\n                status: 'all',\r\n                category: 'all',\r\n                dateRange: '7days',\r\n                search: '',\r\n                sortBy: 'timestamp',\r\n                sortOrder: 'desc',\r\n                memberName: '',\r\n                tags: ''\r\n              })}\r\n              style={{\r\n                background: 'none',\r\n                border: 'none',\r\n                color: '#3b82f6',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                textDecoration: 'underline'\r\n              }}\r\n            >\r\n              Clear Filters\r\n            </button>\r\n            <button\r\n              onClick={handleExport}\r\n              style={{\r\n                padding: '8px 16px',\r\n                background: '#10b981',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                color: 'white',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Export CSV\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Transactions Table */}\r\n      <div style={{\r\n        background: 'white',\r\n        borderRadius: '16px',\r\n        padding: '0',\r\n        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n        border: '1px solid #e2e8f0',\r\n        overflow: 'hidden'\r\n      }}>\r\n        {/* Table Header */}\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: '1fr 1fr 1fr 1fr 1fr auto',\r\n          gap: '16px',\r\n          padding: '20px 24px',\r\n          background: '#f8fafc',\r\n          borderBottom: '1px solid #e2e8f0',\r\n          fontWeight: '600',\r\n          color: '#374151',\r\n          fontSize: '14px'\r\n        }}>\r\n          <div>Description</div>\r\n          <div>Date</div>\r\n          <div>Type</div>\r\n          <div>Category</div>\r\n          <div>Status</div>\r\n          <div style={{ textAlign: 'right' }}>Amount</div>\r\n        </div>\r\n\r\n        {/* Table Body */}\r\n        <div style={{ maxHeight: '600px', overflowY: 'auto' }}>\r\n          {transactions.length > 0 ? (\r\n            transactions.map((transaction) => (\r\n              <div\r\n                key={transaction.id}\r\n                style={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: '1fr 1fr 1fr 1fr 1fr auto',\r\n                  gap: '16px',\r\n                  padding: '20px 24px',\r\n                  borderBottom: '1px solid #f1f5f9',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s',\r\n                  alignItems: 'center'\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.background = '#f8fafc';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.background = 'white';\r\n                }}\r\n                onClick={() => setSelectedTransaction(transaction)}\r\n              >\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                  <div style={{\r\n                    width: '36px',\r\n                    height: '36px',\r\n                    background: getTransactionColor(transaction.type).background,\r\n                    borderRadius: '8px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    fontSize: '14px',\r\n                    color: getTransactionColor(transaction.type, transaction.subtype).color\r\n                  }}>\r\n                    {getTransactionIcon(transaction.type, transaction.subtype)}\r\n                  </div>\r\n                  <div>\r\n                    <div style={{\r\n                      color: '#1e293b',\r\n                      fontWeight: '600',\r\n                      fontSize: '14px',\r\n                      marginBottom: '2px'\r\n                    }}>\r\n                      {sanitizeUserInput(transaction.description)}\r\n                    </div>\r\n                    <div style={{\r\n                      color: '#64748b',\r\n                      fontSize: '12px'\r\n                    }}>\r\n                      Ref: {transaction.reference || 'N/A'}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <div style={{\r\n                    color: '#1e293b',\r\n                    fontWeight: '500',\r\n                    fontSize: '14px'\r\n                  }}>\r\n                    {transaction.date}\r\n                  </div>\r\n                  <div style={{\r\n                    color: '#64748b',\r\n                    fontSize: '12px'\r\n                  }}>\r\n                    {transaction.time || '10:30 AM'}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <span style={{\r\n                    background: getTransactionColor(transaction.type, transaction.subtype).background,\r\n                    color: getTransactionColor(transaction.type, transaction.subtype).color,\r\n                    padding: '4px 8px',\r\n                    borderRadius: '6px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600',\r\n                    textTransform: 'capitalize'\r\n                  }}>\r\n                    {transaction.subtype ? `${transaction.subtype.replace('_', ' ')}` : transaction.type}\r\n                  </span>\r\n                </div>\r\n\r\n                <div>\r\n                  <span style={{\r\n                    background: getCategoryColor(transaction.category).background,\r\n                    color: getCategoryColor(transaction.category).color,\r\n                    padding: '4px 8px',\r\n                    borderRadius: '6px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600',\r\n                    textTransform: 'capitalize'\r\n                  }}>\r\n                    {transaction.category}\r\n                  </span>\r\n                </div>\r\n\r\n                <div>\r\n                  <span style={{\r\n                    background: getStatusColor(transaction.status).background,\r\n                    color: getStatusColor(transaction.status).color,\r\n                    padding: '4px 8px',\r\n                    borderRadius: '6px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600'\r\n                  }}>\r\n                    {transaction.status}\r\n                  </span>\r\n                </div>\r\n\r\n                <div style={{\r\n                  textAlign: 'right',\r\n                  color: transaction.amount >= 0 ? '#059669' : '#dc2626',\r\n                  fontWeight: '700',\r\n                  fontSize: '16px'\r\n                }}>\r\n                  {transaction.amount >= 0 ? '+' : ''}{formatCurrencyGHS(transaction.amount)}\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div style={{\r\n              padding: '60px 40px',\r\n              textAlign: 'center',\r\n              color: '#64748b'\r\n            }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '16px' }}></div>\r\n              <h3 style={{\r\n                margin: '0 0 8px 0',\r\n                color: '#1e293b',\r\n                fontSize: '20px',\r\n                fontWeight: '600'\r\n              }}>\r\n                No transactions found\r\n              </h3>\r\n              <p style={{ margin: 0, fontSize: '16px' }}>\r\n                {filters.search ? 'Try adjusting your search terms' : 'No transactions match your current filters'}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Transaction Detail Modal */}\r\n      {selectedTransaction && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0, 0, 0, 0.5)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000,\r\n          padding: '20px'\r\n        }}\r\n          onClick={() => setSelectedTransaction(null)}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '16px',\r\n            padding: '30px',\r\n            maxWidth: '500px',\r\n            width: '100%',\r\n            maxHeight: '90vh',\r\n            overflowY: 'auto',\r\n            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)'\r\n          }}\r\n            onClick={(e) => e.stopPropagation()}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '24px' }}>\r\n              <h3 style={{\r\n                margin: 0,\r\n                color: '#1e293b',\r\n                fontSize: '24px',\r\n                fontWeight: '700'\r\n              }}>\r\n                Transaction Details\r\n              </h3>\r\n              <button\r\n                onClick={() => setSelectedTransaction(null)}\r\n                style={{\r\n                  background: 'none',\r\n                  border: 'none',\r\n                  fontSize: '20px',\r\n                  color: '#64748b',\r\n                  cursor: 'pointer',\r\n                  padding: '4px'\r\n                }}\r\n              >\r\n\r\n              </button>\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\r\n              {/* Amount */}\r\n              <div style={{ textAlign: 'center', padding: '20px', background: '#f8fafc', borderRadius: '12px' }}>\r\n                <div style={{\r\n                  color: selectedTransaction.amount >= 0 ? '#059669' : '#dc2626',\r\n                  fontSize: '32px',\r\n                  fontWeight: '700',\r\n                  marginBottom: '8px'\r\n                }}>\r\n                  {selectedTransaction.amount >= 0 ? '+' : ''}{formatCurrencyGHS(selectedTransaction.amount)}\r\n                </div>\r\n                <div style={{ color: '#64748b', fontSize: '14px' }}>\r\n                  {selectedTransaction.type.toUpperCase()} ΓÇó {selectedTransaction.category} ΓÇó {selectedTransaction.status}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Details Grid */}\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px' }}>\r\n                <div>\r\n                  <div style={{ color: '#64748b', fontSize: '12px', marginBottom: '4px' }}>Description</div>\r\n                  <div style={{ color: '#1e293b', fontWeight: '600' }}>{sanitizeUserInput(selectedTransaction.description)}</div>\r\n                </div>\r\n                <div>\r\n                  <div style={{ color: '#64748b', fontSize: '12px', marginBottom: '4px' }}>Category</div>\r\n                  <div style={{ color: '#1e293b', fontWeight: '600' }}>{selectedTransaction.category}</div>\r\n                </div>\r\n                <div>\r\n                  <div style={{ color: '#64748b', fontSize: '12px', marginBottom: '4px' }}>Date & Time</div>\r\n                  <div style={{ color: '#1e293b', fontWeight: '600' }}>{selectedTransaction.date} ΓÇó 10:30 AM</div>\r\n                </div>\r\n                <div>\r\n                  <div style={{ color: '#64748b', fontSize: '12px', marginBottom: '4px' }}>Status</div>\r\n                  <div style={{ color: '#1e293b', fontWeight: '600' }}>{selectedTransaction.status}</div>\r\n                </div>\r\n                <div>\r\n                  <div style={{ color: '#64748b', fontSize: '12px', marginBottom: '4px' }}>Transaction ID</div>\r\n                  <div style={{ color: '#1e293b', fontWeight: '600', fontFamily: 'monospace' }}>\r\n                    {selectedTransaction.reference || 'TX-001234'}\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <div style={{ color: '#64748b', fontSize: '12px', marginBottom: '4px' }}>Account</div>\r\n                  <div style={{ color: '#1e293b', fontWeight: '600' }}>Primary Savings (****4587)</div>\r\n                </div>\r\n                {selectedTransaction.tags && selectedTransaction.tags.length > 0 && (\r\n                  <div style={{ gridColumn: '1 / -1' }}>\r\n                    <div style={{ color: '#64748b', fontSize: '12px', marginBottom: '4px' }}>Tags</div>\r\n                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px' }}>\r\n                      {selectedTransaction.tags.map((tag, index) => (\r\n                        <span key={index} style={{\r\n                          background: '#e2e8f0',\r\n                          color: '#374151',\r\n                          padding: '2px 6px',\r\n                          borderRadius: '4px',\r\n                          fontSize: '11px',\r\n                          fontWeight: '500'\r\n                        }}>\r\n                          {tag}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div style={{ display: 'flex', gap: '12px', marginTop: '20px' }}>\r\n                <button style={{\r\n                  flex: 1,\r\n                  padding: '12px',\r\n                  background: '#f8fafc',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '8px',\r\n                  color: '#374151',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = '#3b82f6';\r\n                    e.currentTarget.style.color = 'white';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = '#f8fafc';\r\n                    e.currentTarget.style.color = '#374151';\r\n                  }}\r\n                  onClick={async () => {\r\n                    try {\r\n                      const receiptData = await apiService.generateReceipt(selectedTransaction.id);\r\n                      // For now, just show the receipt data in console\r\n                      // In a real implementation, this would generate a PDF or printable format\r\n                      console.log('Receipt data:', receiptData);\r\n                      alert('Receipt generated successfully! Check console for details.');\r\n                    } catch (error) {\r\n                      console.error('Failed to generate receipt:', error);\r\n                      alert('Failed to generate receipt. Please try again.');\r\n                    }\r\n                  }}>\r\n                  Download Receipt\r\n                </button>\r\n                <button style={{\r\n                  flex: 1,\r\n                  padding: '12px',\r\n                  background: '#f8fafc',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '8px',\r\n                  color: '#374151',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = '#ef4444';\r\n                    e.currentTarget.style.color = 'white';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = '#f8fafc';\r\n                    e.currentTarget.style.color = '#374151';\r\n                  }}>\r\n                  Report Issue\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style>\r\n        {`\r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}\r\n      </style>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Helper functions\r\nfunction getTransactionIcon(type, subtype) {\r\n  const icons = {\r\n    deposit: '≡ƒÆ╡',\r\n    withdrawal: '≡ƒÅº',\r\n    transfer: 'Γåö∩╕Å',\r\n    payment: '≡ƒÆ│',\r\n    daily_susu: '≡ƒôà',\r\n    shares: '≡ƒôê',\r\n    monthly_contribution: '≡ƒôå',\r\n    withdrawal_daily_susu: '≡ƒôà',\r\n    withdrawal_shares: '≡ƒôê',\r\n    withdrawal_monthly_contribution: '≡ƒôå',\r\n    default: '≡ƒÆ░'\r\n  };\r\n  return icons[subtype] || icons[type] || icons.default;\r\n}\r\n\r\nfunction getTransactionColor(type, subtype) {\r\n  const colors = {\r\n    deposit: { background: '#d1fae5', color: '#065f46' },\r\n    withdrawal: { background: '#fee2e2', color: '#dc2626' },\r\n    transfer: { background: '#dbeafe', color: '#1e40af' },\r\n    payment: { background: '#fef3c7', color: '#92400e' },\r\n    daily_susu: { background: '#d1fae5', color: '#065f46' },\r\n    shares: { background: '#dbeafe', color: '#1e40af' },\r\n    monthly_contribution: { background: '#fef3c7', color: '#92400e' },\r\n    withdrawal_daily_susu: { background: '#fee2e2', color: '#dc2626' },\r\n    withdrawal_shares: { background: '#fed7d7', color: '#c53030' },\r\n    withdrawal_monthly_contribution: { background: '#feb2b2', color: '#b91c1c' },\r\n    default: { background: '#f3f4f6', color: '#374151' }\r\n  };\r\n  return colors[subtype] || colors[type] || colors.default;\r\n}\r\n\r\nfunction getCategoryColor(category) {\r\n  const colors = {\r\n    income: { background: '#d1fae5', color: '#065f46' },\r\n    expense: { background: '#fee2e2', color: '#dc2626' },\r\n    transfer: { background: '#dbeafe', color: '#1e40af' },\r\n    loan: { background: '#fef3c7', color: '#92400e' },\r\n    fee: { background: '#f3f4f6', color: '#374151' },\r\n    other: { background: '#f3f4f6', color: '#374151' },\r\n    default: { background: '#f3f4f6', color: '#374151' }\r\n  };\r\n  return colors[category] || colors.default;\r\n}\r\n\r\nfunction getStatusColor(status) {\r\n  const colors = {\r\n    completed: { background: '#d1fae5', color: '#065f46' },\r\n    pending: { background: '#fef3c7', color: '#92400e' },\r\n    failed: { background: '#fee2e2', color: '#dc2626' },\r\n    cancelled: { background: '#f3f4f6', color: '#374151' },\r\n    default: { background: '#f3f4f6', color: '#374151' }\r\n  };\r\n  return colors[status] || colors.default;\r\n}\r\n\r\nexport default Transactions;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\Transfer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[600,603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[600,603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'accountsLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":19,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[903,906],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[903,906],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[942,945],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[942,945],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[991,994],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[991,994],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"∩╗┐import React, { useState, useEffect } from 'react';\r\nimport { formatCurrencyGHS } from '../utils/formatters';\r\nimport { sanitizeUserInput } from '../utils/sanitizer';\r\nimport { apiService } from '../services/api';\r\n\r\nfunction Transfer() {\r\n  const [formData, setFormData] = useState({\r\n    fromAccount: '',\r\n    toAccount: '',\r\n    amount: '',\r\n    description: '',\r\n    pin: ''\r\n  });\r\n  const [step, setStep] = useState(1);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const [accounts, setAccounts] = useState<any[]>([]);\r\n  const [accountsLoading, setAccountsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchAccounts = async () => {\r\n      try {\r\n        const data = await apiService.getAccounts();\r\n        if (Array.isArray(data)) {\r\n          setAccounts(data);\r\n        } else if ((data as any).results && Array.isArray((data as any).results)) {\r\n          setAccounts((data as any).results);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch accounts\", err);\r\n      } finally {\r\n        setAccountsLoading(false);\r\n      }\r\n    };\r\n    fetchAccounts();\r\n  }, []);\r\n\r\n  const transferHistory = [\r\n    { to: 'Kwame Asare', amount: -500, date: '2025-10-08', status: 'completed' },\r\n    { to: 'Abena Mensah', amount: -1000, date: '2025-10-05', status: 'completed' },\r\n    { to: 'Coastal Utilities', amount: -250, date: '2025-10-01', status: 'completed' }\r\n  ];\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (step === 1) {\r\n      setStep(2);\r\n    } else {\r\n      setIsSubmitting(true);\r\n      // Simulate API call\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      setIsSubmitting(false);\r\n      setShowConfirmation(true);\r\n    }\r\n  };\r\n\r\n  const handleNewTransfer = () => {\r\n    setFormData({\r\n      fromAccount: '',\r\n      toAccount: '',\r\n      amount: '',\r\n      description: '',\r\n      pin: ''\r\n    });\r\n    setStep(1);\r\n    setShowConfirmation(false);\r\n  };\r\n\r\n  const selectedFromAccount = accounts.find(acc => acc.id === formData.fromAccount);\r\n  const transferFee = 1.50; // GHS\r\n  const totalAmount = parseFloat(formData.amount || 0) + transferFee;\r\n\r\n  return (\r\n    <div style={{\r\n      minHeight: '100vh',\r\n      background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)',\r\n      padding: '20px'\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        background: 'white',\r\n        borderRadius: '16px',\r\n        padding: '30px',\r\n        marginBottom: '24px',\r\n        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n        border: '1px solid #e2e8f0'\r\n      }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '8px' }}>\r\n          <div>\r\n            <h1 style={{\r\n              margin: '0 0 8px 0',\r\n              color: '#1e293b',\r\n              fontSize: '28px',\r\n              fontWeight: '700'\r\n            }}>\r\n              Transfer Funds\r\n            </h1>\r\n            <p style={{\r\n              margin: 0,\r\n              color: '#64748b',\r\n              fontSize: '16px'\r\n            }}>\r\n              Send money securely to other accounts\r\n            </p>\r\n          </div>\r\n          {/* Progress Steps */}\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n            {[1, 2].map((stepNumber) => (\r\n              <div key={stepNumber} style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                <div style={{\r\n                  width: '32px',\r\n                  height: '32px',\r\n                  background: step >= stepNumber ? '#3b82f6' : '#e2e8f0',\r\n                  color: step >= stepNumber ? 'white' : '#64748b',\r\n                  borderRadius: '50%',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontWeight: '600',\r\n                  fontSize: '14px'\r\n                }}>\r\n                  {stepNumber}\r\n                </div>\r\n                <div style={{\r\n                  color: step >= stepNumber ? '#3b82f6' : '#64748b',\r\n                  fontWeight: '600',\r\n                  fontSize: '14px',\r\n                  whiteSpace: 'nowrap'\r\n                }}>\r\n                  {stepNumber === 1 ? 'Details' : 'Confirm'}\r\n                </div>\r\n                {stepNumber < 2 && (\r\n                  <div style={{\r\n                    width: '20px',\r\n                    height: '2px',\r\n                    background: step > stepNumber ? '#3b82f6' : '#e2e8f0',\r\n                    marginLeft: '8px'\r\n                  }}></div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: '1fr 400px',\r\n        gap: '24px'\r\n      }}>\r\n        {/* Transfer Form */}\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '16px',\r\n          padding: '30px',\r\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n          border: '1px solid #e2e8f0'\r\n        }}>\r\n          {!showConfirmation ? (\r\n            <form onSubmit={handleSubmit}>\r\n              {step === 1 ? (\r\n                <>\r\n                  <h3 style={{\r\n                    margin: '0 0 24px 0',\r\n                    color: '#1e293b',\r\n                    fontSize: '20px',\r\n                    fontWeight: '600'\r\n                  }}>\r\n                    Transfer Details\r\n                  </h3>\r\n\r\n                  {/* From Account */}\r\n                  <div style={{ marginBottom: '20px' }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '8px',\r\n                      color: '#374151',\r\n                      fontWeight: '500',\r\n                      fontSize: '14px'\r\n                    }}>\r\n                      From Account\r\n                    </label>\r\n                    <select\r\n                      name=\"fromAccount\"\r\n                      value={formData.fromAccount}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '12px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '8px',\r\n                        fontSize: '14px',\r\n                        background: 'white'\r\n                      }}\r\n                    >\r\n                      <option value=\"\">Select source account</option>\r\n                      {accounts.map(account => (\r\n                        <option key={account.id} value={account.id}>\r\n                          {account.name} ({account.number}) - {formatCurrencyGHS(account.balance)}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/* To Account */}\r\n                  <div style={{ marginBottom: '20px' }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '8px',\r\n                      color: '#374151',\r\n                      fontWeight: '500',\r\n                      fontSize: '14px'\r\n                    }}>\r\n                      To Account\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"toAccount\"\r\n                      value={formData.toAccount}\r\n                      onChange={handleInputChange}\r\n                      placeholder=\"Enter account number or member name\"\r\n                      required\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '12px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '8px',\r\n                        fontSize: '14px'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Amount */}\r\n                  <div style={{ marginBottom: '20px' }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '8px',\r\n                      color: '#374151',\r\n                      fontWeight: '500',\r\n                      fontSize: '14px'\r\n                    }}>\r\n                      Amount (GHS)\r\n                    </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      name=\"amount\"\r\n                      value={formData.amount}\r\n                      onChange={handleInputChange}\r\n                      placeholder=\"0.00\"\r\n                      min=\"0.01\"\r\n                      step=\"0.01\"\r\n                      required\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '12px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '8px',\r\n                        fontSize: '16px',\r\n                        fontWeight: '600'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Description */}\r\n                  <div style={{ marginBottom: '24px' }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '8px',\r\n                      color: '#374151',\r\n                      fontWeight: '500',\r\n                      fontSize: '14px'\r\n                    }}>\r\n                      Description\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"description\"\r\n                      value={formData.description}\r\n                      onChange={handleInputChange}\r\n                      placeholder=\"Add a note for this transfer\"\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '12px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '8px',\r\n                        fontSize: '14px'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '16px',\r\n                      background: 'linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)',\r\n                      border: 'none',\r\n                      borderRadius: '10px',\r\n                      color: 'white',\r\n                      fontSize: '16px',\r\n                      fontWeight: '600',\r\n                      cursor: 'pointer',\r\n                      transition: 'all 0.2s'\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.transform = 'translateY(-2px)';\r\n                      e.currentTarget.style.boxShadow = '0 8px 15px rgba(59, 130, 246, 0.3)';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.transform = 'translateY(0)';\r\n                      e.currentTarget.style.boxShadow = 'none';\r\n                    }}\r\n                  >\r\n                    Continue to Review\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <h3 style={{\r\n                    margin: '0 0 24px 0',\r\n                    color: '#1e293b',\r\n                    fontSize: '20px',\r\n                    fontWeight: '600'\r\n                  }}>\r\n                    Confirm Transfer\r\n                  </h3>\r\n\r\n                  {/* Transfer Summary */}\r\n                  <div style={{\r\n                    background: '#f8fafc',\r\n                    borderRadius: '12px',\r\n                    padding: '20px',\r\n                    marginBottom: '24px',\r\n                    border: '1px solid #e2e8f0'\r\n                  }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                      <div style={{ color: '#64748b', fontSize: '14px' }}>From Account</div>\r\n                      <div style={{ color: '#1e293b', fontWeight: '600', textAlign: 'right' }}>\r\n                        {selectedFromAccount?.name}<br />\r\n                        <span style={{ fontSize: '12px', color: '#64748b' }}>{selectedFromAccount?.number}</span>\r\n                      </div>\r\n                    </div>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                      <div style={{ color: '#64748b', fontSize: '14px' }}>To Account</div>\r\n                      <div style={{ color: '#1e293b', fontWeight: '600' }}>{sanitizeUserInput(formData.toAccount)}</div>\r\n                    </div>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                      <div style={{ color: '#64748b', fontSize: '14px' }}>Amount</div>\r\n                      <div style={{ color: '#dc2626', fontWeight: '700', fontSize: '18px' }}>\r\n                        -{formatCurrencyGHS(parseFloat(formData.amount))}\r\n                      </div>\r\n                    </div>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                      <div style={{ color: '#64748b', fontSize: '14px' }}>Transfer Fee</div>\r\n                      <div style={{ color: '#64748b', fontWeight: '600' }}>{formatCurrencyGHS(transferFee)}</div>\r\n                    </div>\r\n                    <div style={{\r\n                      display: 'flex',\r\n                      justifyContent: 'space-between',\r\n                      alignItems: 'center',\r\n                      paddingTop: '16px',\r\n                      borderTop: '1px solid #e2e8f0'\r\n                    }}>\r\n                      <div style={{ color: '#1e293b', fontSize: '16px', fontWeight: '600' }}>Total</div>\r\n                      <div style={{ color: '#dc2626', fontWeight: '700', fontSize: '20px' }}>\r\n                        -{formatCurrencyGHS(totalAmount)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* PIN Verification */}\r\n                  <div style={{ marginBottom: '24px' }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '8px',\r\n                      color: '#374151',\r\n                      fontWeight: '500',\r\n                      fontSize: '14px'\r\n                    }}>\r\n                      Enter PIN for Authorization\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      name=\"pin\"\r\n                      value={formData.pin}\r\n                      onChange={handleInputChange}\r\n                      placeholder=\"Enter your 4-digit PIN\"\r\n                      maxLength=\"4\"\r\n                      required\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '12px 16px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '8px',\r\n                        fontSize: '16px',\r\n                        textAlign: 'center',\r\n                        letterSpacing: '8px'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  <div style={{ display: 'flex', gap: '12px' }}>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setStep(1)}\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '16px',\r\n                        background: '#f8fafc',\r\n                        border: '1px solid #e2e8f0',\r\n                        borderRadius: '10px',\r\n                        color: '#374151',\r\n                        fontWeight: '600',\r\n                        cursor: 'pointer',\r\n                        transition: 'all 0.2s'\r\n                      }}\r\n                      onMouseEnter={(e) => {\r\n                        e.currentTarget.style.background = '#e2e8f0';\r\n                      }}\r\n                      onMouseLeave={(e) => {\r\n                        e.currentTarget.style.background = '#f8fafc';\r\n                      }}\r\n                    >\r\n                      Back\r\n                    </button>\r\n                    <button\r\n                      type=\"submit\"\r\n                      disabled={isSubmitting}\r\n                      style={{\r\n                        flex: 2,\r\n                        padding: '16px',\r\n                        background: isSubmitting ? '#9ca3af' : 'linear-gradient(135deg, #059669 0%, #10b981 100%)',\r\n                        border: 'none',\r\n                        borderRadius: '10px',\r\n                        color: 'white',\r\n                        fontSize: '16px',\r\n                        fontWeight: '600',\r\n                        cursor: isSubmitting ? 'not-allowed' : 'pointer',\r\n                        transition: 'all 0.2s'\r\n                      }}\r\n                      onMouseEnter={(e) => {\r\n                        if (!isSubmitting) {\r\n                          e.currentTarget.style.transform = 'translateY(-2px)';\r\n                          e.currentTarget.style.boxShadow = '0 8px 15px rgba(5, 150, 105, 0.3)';\r\n                        }\r\n                      }}\r\n                      onMouseLeave={(e) => {\r\n                        if (!isSubmitting) {\r\n                          e.currentTarget.style.transform = 'translateY(0)';\r\n                          e.currentTarget.style.boxShadow = 'none';\r\n                        }\r\n                      }}\r\n                    >\r\n                      {isSubmitting ? (\r\n                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px' }}>\r\n                          <div style={{\r\n                            width: '16px',\r\n                            height: '16px',\r\n                            border: '2px solid transparent',\r\n                            borderTop: '2px solid white',\r\n                            borderRadius: '50%',\r\n                            animation: 'spin 1s linear infinite'\r\n                          }}></div>\r\n                          Processing...\r\n                        </div>\r\n                      ) : (\r\n                        'Confirm Transfer'\r\n                      )}\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </form>\r\n          ) : (\r\n            /* Success Confirmation */\r\n            <div style={{ textAlign: 'center', padding: '40px 20px' }}>\r\n              <div style={{\r\n                width: '80px',\r\n                height: '80px',\r\n                background: '#d1fae5',\r\n                borderRadius: '50%',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                fontSize: '32px',\r\n                color: '#059669',\r\n                margin: '0 auto 24px'\r\n              }}>\r\n\r\n              </div>\r\n              <h3 style={{\r\n                margin: '0 0 12px 0',\r\n                color: '#1e293b',\r\n                fontSize: '24px',\r\n                fontWeight: '700'\r\n              }}>\r\n                Transfer Successful!\r\n              </h3>\r\n              <p style={{\r\n                margin: '0 0 24px 0',\r\n                color: '#64748b',\r\n                fontSize: '16px'\r\n              }}>\r\n                Your transfer of {formatCurrencyGHS(parseFloat(formData.amount))} has been processed successfully.\r\n              </p>\r\n              <div style={{\r\n                background: '#f8fafc',\r\n                borderRadius: '12px',\r\n                padding: '20px',\r\n                marginBottom: '24px',\r\n                textAlign: 'left'\r\n              }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                  <span style={{ color: '#64748b' }}>Reference:</span>\r\n                  <span style={{ fontWeight: '600', fontFamily: 'monospace' }}>TX-987654</span>\r\n                </div>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                  <span style={{ color: '#64748b' }}>Date:</span>\r\n                  <span style={{ fontWeight: '600' }}>{new Date().toLocaleDateString()}</span>\r\n                </div>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                  <span style={{ color: '#64748b' }}>Status:</span>\r\n                  <span style={{ color: '#059669', fontWeight: '600' }}>Completed</span>\r\n                </div>\r\n              </div>\r\n              <div style={{ display: 'flex', gap: '12px' }}>\r\n                <button style={{\r\n                  flex: 1,\r\n                  padding: '12px',\r\n                  background: '#f8fafc',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '8px',\r\n                  color: '#374151',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer'\r\n                }}>\r\n                  Download Receipt\r\n                </button>\r\n                <button\r\n                  onClick={handleNewTransfer}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '12px',\r\n                    background: 'linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    color: 'white',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  New Transfer\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Transfer History */}\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '16px',\r\n          padding: '24px',\r\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n          border: '1px solid #e2e8f0',\r\n          alignSelf: 'flex-start'\r\n        }}>\r\n          <h4 style={{\r\n            margin: '0 0 20px 0',\r\n            color: '#1e293b',\r\n            fontSize: '18px',\r\n            fontWeight: '600',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px'\r\n          }}>\r\n            Recent Transfers\r\n          </h4>\r\n\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n            {transferHistory.map((transfer, index) => (\r\n              <div key={index} style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                padding: '12px',\r\n                background: '#f8fafc',\r\n                borderRadius: '8px',\r\n                border: '1px solid #e2e8f0'\r\n              }}>\r\n                <div style={{\r\n                  width: '36px',\r\n                  height: '36px',\r\n                  background: '#dbeafe',\r\n                  borderRadius: '8px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontSize: '14px',\r\n                  color: '#1e40af',\r\n                  marginRight: '12px'\r\n                }}>\r\n                  Γåù\r\n                </div>\r\n                <div style={{ flex: 1 }}>\r\n                  <div style={{\r\n                    color: '#1e293b',\r\n                    fontWeight: '600',\r\n                    fontSize: '14px'\r\n                  }}>\r\n                    {sanitizeUserInput(transfer.to)}\r\n                  </div>\r\n                  <div style={{\r\n                    color: '#64748b',\r\n                    fontSize: '12px'\r\n                  }}>\r\n                    {transfer.date}\r\n                  </div>\r\n                </div>\r\n                <div style={{\r\n                  color: transfer.amount < 0 ? '#dc2626' : '#059669',\r\n                  fontWeight: '700',\r\n                  fontSize: '14px'\r\n                }}>\r\n                  {formatCurrencyGHS(transfer.amount)}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <button style={{\r\n            width: '100%',\r\n            padding: '12px',\r\n            background: '#f8fafc',\r\n            border: '1px solid #e2e8f0',\r\n            borderRadius: '8px',\r\n            color: '#374151',\r\n            fontWeight: '600',\r\n            marginTop: '16px',\r\n            cursor: 'pointer',\r\n            transition: 'all 0.2s'\r\n          }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.background = '#3b82f6';\r\n              e.currentTarget.style.color = 'white';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.background = '#f8fafc';\r\n              e.currentTarget.style.color = '#374151';\r\n            }}>\r\n            View Full History\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <style>\r\n        {`\r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}\r\n      </style>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Transfer;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\pages\\UnauthorizedPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\services\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1054,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1054,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[38768,38771],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[38768,38771],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1514,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1514,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[57483,57486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[57483,57486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1564,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1564,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[59839,59842],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[59839,59842],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MockMemberDashboardData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":623,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":623,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MockAccountSummary' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":634,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":634,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Account } from '../api/models/Account';\r\nimport { Transaction } from '../api/models/Transaction';\r\nimport { User } from '../api/models/User';\r\n\r\n/**\r\n * Standard API response wrapper that mirrors the backend's consistent response structure.\r\n * @template T - The type of the data payload.\r\n */\r\nexport interface ApiResponse<T = unknown> {\r\n  /** The primary data payload of the response. */\r\n  data: T;\r\n  /** Indicates if the operation was successful. */\r\n  success?: boolean;\r\n  /** A human-readable error message, if applicable. */\r\n  error?: string;\r\n  /** A general message or success detail. */\r\n  message?: string;\r\n  /** A standardized error or status code for programmatic handling. */\r\n  code?: string;\r\n}\r\n\r\n/**\r\n * Data structure for the member side dashboard\r\n */\r\nexport interface MemberDashboardData {\r\n  account_balance: number;\r\n  recent_transactions: Transaction[];\r\n  total_balance?: string | number;\r\n  total_daily_susu?: string | number;\r\n  available_balance?: string | number;\r\n  loan_balance?: number;\r\n  savings_balance?: number;\r\n  available_tabs?: unknown[];\r\n  user_permissions?: Record<string, boolean>;\r\n  membership_status?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * Summary of all accounts for a user\r\n */\r\nexport interface AccountSummary {\r\n  total_balance: number;\r\n  accounts: Account[];\r\n  total_savings?: number;\r\n  total_loans?: number;\r\n  available_balance?: number;\r\n  monthly_contributions?: number;\r\n}\r\n\r\n// Logging utility for API debugging - PRODUCTION SAFE (no output in production)\r\nconst isDev = import.meta.env.DEV || import.meta.env.MODE === 'development';\r\n\r\nconst logger = {\r\n  info: (...args: unknown[]) => {\r\n    if (import.meta.env.DEV || (typeof window !== 'undefined' && (window as Window & { DEBUG_API?: boolean }).DEBUG_API)) {\r\n      console.warn('[API INFO]', ...args);\r\n    }\r\n  },\r\n  warn: (message: string, data?: unknown) => {\r\n    if (isDev) {\r\n      console.warn(`[API Warning] ${message}`, data || '');\r\n    }\r\n  },\r\n  error: (message: string, error?: unknown) => {\r\n    if (isDev) {\r\n      console.error(`[API Error] ${message}`, error || '');\r\n    }\r\n  },\r\n  debug: (...args: unknown[]) => {\r\n    if (typeof window !== 'undefined' && (window as Window & { DEBUG_API?: boolean }).DEBUG_API) {\r\n      console.warn('[API DEBUG]', ...args);\r\n    }\r\n  }\r\n};\r\n\r\n// Use environment variable for API URL\r\nconst getApiBaseUrl = () => {\r\n  // Debug logging to help diagnose connection issues\r\n  const isProd = import.meta.env.PROD;\r\n  const devUrl = import.meta.env.VITE_DEV_API_URL;\r\n  const prodUrlEnv = import.meta.env.VITE_PROD_API_URL;\r\n  // const baseUrlEnv = import.meta.env.VITE_API_BASE_URL;\r\n\r\n  // Safe logging that won't expose sensitive info if we had any\r\n  if (!isProd) {\r\n    // logger.debug('[Config] Environment Detection:', {\r\n    //   isProd,\r\n    //   hasDevUrl: !!devUrl,\r\n    //   hasProdUrl: !!prodUrlEnv,\r\n    //   hasBaseUrl: !!baseUrlEnv,\r\n    //   hostname: window.location.hostname\r\n    // });\r\n  }\r\n\r\n\r\n\r\n  // Priority 2: Check VITE_PROD_API_URL (Explicit Production)\r\n  if (prodUrlEnv) {\r\n    if (!isProd) { /* Debug log removed */ }\r\n    return prodUrlEnv.endsWith('/') ? prodUrlEnv : prodUrlEnv + '/';\r\n  }\r\n\r\n  // Priority 5: Development / Localhost Fallback\r\n  // If we are explicitly in dev mode or on localhost\r\n  if (devUrl) {\r\n    logger.info('[Config] Using VITE_DEV_API_URL');\r\n    return devUrl.endsWith('/') ? devUrl : devUrl + '/';\r\n  }\r\n\r\n  logger.info('[Config] Using production fallback (Expecting BFF Proxy)');\r\n  return '/api/';\r\n};\r\n\r\n// HTTPS enforcement removed - let the deployment environment handle this\r\n// Local development uses HTTP, production should use a reverse proxy with HTTPS\r\n\r\n// Request configuration type\r\ninterface RequestConfig extends RequestInit {\r\n  method: string;\r\n  url: string;\r\n  data?: unknown;\r\n  headers?: HeadersInit | Record<string, string>;\r\n  params?: Record<string, string | number | boolean | undefined>;\r\n  startTime?: number;\r\n  responseType?: 'json' | 'blob' | 'text';\r\n}\r\n\r\n// Extended Error interface\r\ninterface ApiError extends Error {\r\n  status?: number;\r\n  data?: unknown;\r\n}\r\n\r\n// Extend Window interface for Sentry\r\ndeclare global {\r\n  interface Window {\r\n    Sentry?: {\r\n      captureException: (error: Error | ApiError, options?: Record<string, unknown>) => void;\r\n    };\r\n  }\r\n}\r\n\r\nexport const API_BASE_URL = getApiBaseUrl();\r\nif (import.meta.env.DEV) {\r\n  logger.info('[Config] Final API_BASE_URL:', API_BASE_URL);\r\n}\r\n\r\n// DEPRECATED: This function is no longer used with httpOnly cookie-based authentication\r\n// Tokens are now managed securely by the backend in httpOnly cookies\r\n// @deprecated Use backend-managed httpOnly cookies instead\r\nfunction setStoredTokens(_access: string, _refresh: string) {\r\n  // No-op: tokens are handled by backend httpOnly cookies\r\n  logger.warn('setStoredTokens is deprecated. Tokens are now managed by backend httpOnly cookies.');\r\n}\r\n\r\n\r\n\r\nfunction getStoredTokens() {\r\n  // Tokens are now stored in httpOnly cookies by the backend\r\n  // Frontend cannot read httpOnly cookies, so we return null\r\n  // Authentication is handled via cookies automatically by the browser\r\n  logger.debug('getStoredTokens: tokens are managed by backend httpOnly cookies');\r\n  return { access: null, refresh: null };\r\n}\r\n\r\n/**\r\n * Helper function to check if a JWT token is expired\r\n * @param token - JWT token string\r\n * @returns boolean indicating if token is expired\r\n */\r\nfunction isTokenExpired(token: string): boolean {\r\n  try {\r\n    const payload = JSON.parse(atob(token.split('.')[1]));\r\n    const currentTime = Date.now() / 1000;\r\n    return payload.exp < currentTime;\r\n  } catch {\r\n    return true;\r\n  }\r\n}\r\n\r\n// Helper function to refresh access token\r\nasync function refreshAccessToken() {\r\n  const { refresh } = getStoredTokens();\r\n  if (!refresh || isTokenExpired(refresh)) {\r\n    logger.warn('Token refresh failed: No valid refresh token available');\r\n    return null;\r\n  }\r\n\r\n  logger.debug('Attempting token refresh');\r\n\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}users/auth/refresh/`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ refresh }),\r\n    });\r\n\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      setStoredTokens(data.access, data.refresh || refresh);\r\n      logger.info('Token refreshed successfully');\r\n      return data.access;\r\n    } else {\r\n      logger.error('Token refresh failed with status:', response.status);\r\n    }\r\n  } catch (error) {\r\n    logger.error('Token refresh network error:', error);\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n// Public refresh token function\r\nexport async function refreshToken() {\r\n  return refreshAccessToken();\r\n}\r\n\r\n\r\n// Request timeout configuration\r\nconst API_TIMEOUT = 30000; // 30 seconds\r\nconst MAX_RETRIES = 3;\r\nconst RETRY_DELAY = 1000; // 1 second base delay\r\n\r\n// Request/Response interceptor types\r\ninterface RequestInterceptor {\r\n  (config: RequestConfig): Promise<RequestConfig> | RequestConfig;\r\n}\r\n\r\ninterface ResponseInterceptor {\r\n  (response: Response, data?: unknown): Promise<Response> | Response;\r\n}\r\n\r\ninterface ErrorInterceptor {\r\n  (error: Error | ApiError, config: RequestConfig): Promise<unknown> | unknown;\r\n}\r\n\r\n// Interceptor storage\r\nconst requestInterceptors: RequestInterceptor[] = [];\r\nconst responseInterceptors: ResponseInterceptor[] = [];\r\nconst errorInterceptors: ErrorInterceptor[] = [];\r\n\r\n// Add interceptors\r\nexport function addRequestInterceptor(interceptor: RequestInterceptor) {\r\n  requestInterceptors.push(interceptor);\r\n}\r\n\r\nexport function addResponseInterceptor(interceptor: ResponseInterceptor) {\r\n  responseInterceptors.push(interceptor);\r\n}\r\n\r\nexport function addErrorInterceptor(interceptor: ErrorInterceptor) {\r\n  errorInterceptors.push(interceptor);\r\n}\r\n\r\n// Initialize request/response interceptors for error tracking\r\naddRequestInterceptor((config) => {\r\n  // Add request timestamp for tracking\r\n  config.startTime = Date.now();\r\n  logger.debug(`Request interceptor: ${config.method} ${config.url}`);\r\n  return config;\r\n});\r\n\r\naddResponseInterceptor((response) => {\r\n  // Log successful responses\r\n  const duration = Date.now() - ((response as unknown as { startTime: number }).startTime || 0);\r\n  logger.debug(`Response interceptor: ${response.status} (${duration}ms)`);\r\n  return response;\r\n});\r\n\r\naddErrorInterceptor((error, config) => {\r\n  // Enhanced error tracking\r\n  const duration = Date.now() - (config.startTime || 0);\r\n  logger.error(`Error interceptor: ${config.method} ${config.url} (${duration}ms)`, error);\r\n\r\n  // Could send to error tracking service here\r\n  if (import.meta.env.PROD && window.Sentry) {\r\n    window.Sentry.captureException(error, {\r\n      tags: {\r\n        api_call: `${config.method} ${config.url}`,\r\n        duration: duration.toString()\r\n      },\r\n      extra: {\r\n        config,\r\n        errorData: (error as ApiError).data\r\n      }\r\n    });\r\n  }\r\n\r\n  return error;\r\n});\r\n\r\n// Sleep utility for retry delays\r\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n// Calculate retry delay with exponential backoff\r\nconst getRetryDelay = (attempt: number) => RETRY_DELAY * Math.pow(2, attempt);\r\n\r\n// Check if error is retryable\r\nconst isRetryableError = (error: unknown): boolean => {\r\n  if (!error || typeof error !== 'object') return false;\r\n  const status = (error as { status?: number }).status;\r\n  const errorName = (error as Error).name;\r\n\r\n  // Network errors (no status)\r\n  if (status === 0) return true;\r\n\r\n  // Timeout errors\r\n  if (errorName === 'AbortError') return true;\r\n\r\n  // Server errors (5xx)\r\n  if (status && status >= 500 && status < 600) return true;\r\n\r\n  // Don't retry client errors (4xx) except 429 (rate limit)\r\n  if (status === 429) return true;\r\n\r\n  return false;\r\n};\r\n\r\n// CSRF token management\r\nfunction getCsrfCookie() {\r\n  if (typeof window !== 'undefined') {\r\n    const cookies = document.cookie.split(';');\r\n    for (const cookie of cookies) {\r\n      const [name, value] = cookie.trim().split('=');\r\n      if (name === 'csrftoken') {\r\n        return value;\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n// Async function to ensure we have a token\r\nasync function getCsrfToken(): Promise<string | null> {\r\n  // 1. Try cookie first\r\n  const token = getCsrfCookie();\r\n  if (token) return token;\r\n\r\n  // 2. Fetch from backend if missing using the specific endpoint\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}users/csrf/`, {\r\n      method: 'GET',\r\n      credentials: 'include'\r\n    });\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      return data.csrfToken || null;\r\n    }\r\n  } catch (e) {\r\n    logger.warn('Failed to fetch CSRF token', e);\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Core API caller with retry logic, interceptors, and error handling\r\n */\r\nasync function apiCall<T = unknown>(method: string, url: string, data?: unknown, config?: RequestConfig, retryCount = 0): Promise<{ data: T }> {\r\n  const startTime = Date.now();\r\n  const requestConfig = { method, url, data, ...config } as RequestConfig;\r\n\r\n  logger.debug(`API call: ${method} ${url} (attempt ${retryCount + 1})`, { data: data, config });\r\n\r\n  try {\r\n    // Apply request interceptors\r\n    let processedConfig = { ...requestConfig };\r\n    for (const interceptor of requestInterceptors) {\r\n      processedConfig = await interceptor(processedConfig);\r\n    }\r\n\r\n    // SECURITY: Auth tokens are handled via HTTP-only cookies (credentials: 'include').\r\n    // Do NOT use localStorage for tokens - vulnerable to XSS attacks.\r\n\r\n    // Build headers object - ensure processedConfig.headers is treated as Record\r\n    const configHeaders = (processedConfig.headers || {}) as Record<string, string>;\r\n\r\n    // Fetch CSRF token asynchronously\r\n    let csrfToken = null;\r\n    if (method !== 'GET' && method !== 'HEAD' && method !== 'OPTIONS') {\r\n      csrfToken = await getCsrfToken();\r\n    }\r\n\r\n    const headers: Record<string, string> = {\r\n      // Default to JSON only if not FormData\r\n      ...(data instanceof FormData ? {} : { 'Content-Type': 'application/json' }),\r\n      // Include CSRF token for state-changing operations\r\n      ...(csrfToken && { 'X-CSRFToken': csrfToken }),\r\n      // Authorization is handled by HttpOnly cookies automatically\r\n      ...configHeaders,\r\n    };\r\n\r\n    // Don't stringify FormData\r\n    const body = (data && method !== 'GET')\r\n      ? (data instanceof FormData ? data : JSON.stringify(data))\r\n      : undefined;\r\n\r\n    // Create AbortController for timeout handling\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), API_TIMEOUT);\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}${url}`, {\r\n        method,\r\n        headers,\r\n        body,\r\n        credentials: 'include', // Ensure cookies are sent\r\n        signal: controller.signal,\r\n        ...processedConfig,\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      // Apply response interceptors\r\n      let processedResponse = response;\r\n      for (const interceptor of responseInterceptors) {\r\n        processedResponse = await interceptor(processedResponse);\r\n      }\r\n\r\n      if (!processedResponse.ok) {\r\n        let errorData = {};\r\n        try {\r\n          const contentType = processedResponse.headers.get('content-type');\r\n          if (contentType && contentType.includes('application/json')) {\r\n            errorData = await processedResponse.json();\r\n          } else if (contentType && contentType.includes('text/html')) {\r\n            // HTML response typically means wrong backend URL or server error page\r\n            const textPreview = await processedResponse.text();\r\n            const preview = textPreview.substring(0, 200);\r\n            logger.error('[API] Received HTML instead of JSON - check backend URL:', preview);\r\n            errorData = {\r\n              detail: 'Unexpected HTML response - check backend URL or server configuration',\r\n              html_preview: preview\r\n            };\r\n          } else {\r\n            // Handle non-JSON error responses gracefully\r\n            const textResponse = await processedResponse.text();\r\n            errorData = { detail: textResponse || `HTTP error! status: ${processedResponse.status}` };\r\n          }\r\n        } catch {\r\n          // If response parsing fails, create a generic error\r\n          errorData = { detail: `HTTP error! status: ${processedResponse.status}` };\r\n        }\r\n\r\n        // Extract the actual error details from the backend response\r\n        const status = processedResponse.status;\r\n        const responseBodyData = errorData as Record<string, unknown>;\r\n        const msg = responseBodyData?.detail || responseBodyData?.error || responseBodyData?.message || `HTTP error! status: ${status}`;\r\n        logger.error(`[API ERROR ${status}]`, msg);\r\n        logger.debug(\"Full data:\", responseBodyData);\r\n\r\n        // Throw specialized error for better handling\r\n        const apiError: ApiError = new Error(\r\n          sanitizeErrorMessage((errorData as Record<string, unknown>).error as string || (errorData as Record<string, unknown>).detail as string || `HTTP error! status: ${processedResponse.status}`)\r\n        ) as ApiError;\r\n        apiError.status = processedResponse.status;\r\n        apiError.data = errorData;\r\n\r\n        // Apply error interceptors\r\n        for (const interceptor of errorInterceptors) {\r\n          try {\r\n            await interceptor(apiError, processedConfig);\r\n          } catch (interceptorError) {\r\n            logger.warn('Error interceptor failed:', interceptorError);\r\n          }\r\n        }\r\n\r\n        // Handle specific status codes\r\n        if (processedResponse.status === 403) {\r\n          throw new Error('Access denied - insufficient permissions. Please contact an administrator.');\r\n        }\r\n        if (processedResponse.status === 401) {\r\n          // Token might be expired, try to refresh\r\n          const refreshResult = await refreshToken();\r\n          if (refreshResult) {\r\n            // Refresh successful, retry the request\r\n            return apiCall(method, url, data, config, retryCount);\r\n          } else {\r\n            // Refresh failed, don't retry\r\n            throw apiError;\r\n          }\r\n        }\r\n\r\n        // Check if error is retryable and we haven't exceeded max retries\r\n        if (isRetryableError(apiError) && retryCount < MAX_RETRIES) {\r\n          const delay = getRetryDelay(retryCount);\r\n          logger.warn(`Retrying ${method} ${url} in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES + 1})`);\r\n          await sleep(delay);\r\n          return apiCall(method, url, data, config, retryCount + 1);\r\n        }\r\n\r\n        throw apiError;\r\n      }\r\n\r\n      let responseData: T;\r\n      if (processedResponse.status === 204) {\r\n        responseData = null as T; // Explicitly cast null to T for 204 No Content\r\n      } else {\r\n        const responseType = processedConfig.responseType || 'json';\r\n\r\n        if (responseType === 'blob') {\r\n          responseData = (await processedResponse.blob()) as unknown as T;\r\n        } else if (responseType === 'text') {\r\n          responseData = (await processedResponse.text()) as unknown as T;\r\n        } else {\r\n          try {\r\n            responseData = await processedResponse.json();\r\n          } catch (parseError) {\r\n            const preview = await processedResponse.clone().text().then(t => t.substring(0, 100));\r\n            logger.error('[API] Failed to parse JSON response:', parseError);\r\n            logger.error('[API] Raw response preview:', preview);\r\n            responseData = preview as unknown as T;\r\n          }\r\n        }\r\n      }\r\n\r\n      const duration = Date.now() - startTime;\r\n      logger.info(`API call successful: ${method} ${url} (${duration}ms, attempt ${retryCount + 1})`);\r\n      return { data: responseData as T };\r\n    } catch (fetchError) {\r\n      clearTimeout(timeoutId);\r\n      const duration = Date.now() - startTime;\r\n\r\n      // Apply error interceptors for fetch errors\r\n      for (const interceptor of errorInterceptors) {\r\n        try {\r\n          await interceptor(fetchError, processedConfig);\r\n        } catch (interceptorError) {\r\n          logger.warn('Error interceptor failed:', interceptorError);\r\n        }\r\n      }\r\n\r\n      // Handle AbortError (timeout)\r\n      if (fetchError && typeof fetchError === 'object' && 'name' in fetchError && fetchError.name === 'AbortError') {\r\n        logger.warn(`API call timeout: ${method} ${url} (${duration}ms)`);\r\n        const timeoutError = new Error('Request timeout') as ApiError;\r\n        timeoutError.status = 0;\r\n        timeoutError.data = { error: 'Request timeout' };\r\n\r\n        // Retry timeout errors\r\n        if (retryCount < MAX_RETRIES) {\r\n          const delay = getRetryDelay(retryCount);\r\n          logger.warn(`Retrying ${method} ${url} after timeout in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES + 1})`);\r\n          await sleep(delay);\r\n          return apiCall(method, url, data, config, retryCount + 1);\r\n        }\r\n\r\n        throw timeoutError;\r\n      }\r\n\r\n      // Retry other network errors\r\n      if (isRetryableError(fetchError) && retryCount < MAX_RETRIES) {\r\n        const delay = getRetryDelay(retryCount);\r\n        logger.warn(`Retrying ${method} ${url} after network error in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES + 1})`);\r\n        await sleep(delay);\r\n        return apiCall(method, url, data, config, retryCount + 1);\r\n      }\r\n\r\n      logger.error(`API call failed: ${method} ${url} (${duration}ms)`, fetchError);\r\n      throw fetchError;\r\n    }\r\n  } catch (error) {\r\n    const duration = Date.now() - startTime;\r\n\r\n    // Enhanced error handling with classification\r\n    if (error && typeof error === 'object' && 'status' in error) {\r\n      logger.error(`API call error: ${method} ${url} (${duration}ms)`, error);\r\n      throw error; // Already a properly formatted error\r\n    }\r\n\r\n    // Handle network and other errors\r\n    const errorMessage = error && typeof error === 'object' && 'message' in error\r\n      ? (error as Error).message\r\n      : 'Network error';\r\n\r\n    logger.error(`API call network error: ${method} ${url} (${duration}ms)`, error);\r\n    const networkError = new Error(errorMessage) as ApiError;\r\n    networkError.status = 500;\r\n    networkError.data = { error: 'Network error' };\r\n    throw networkError;\r\n  }\r\n}\r\n\r\n\r\n// Error message sanitization helper\r\nfunction sanitizeErrorMessage(message: unknown): string {\r\n  // Production environment should show generic messages\r\n  if (import.meta.env.PROD) {\r\n    return 'An error occurred. Please try again or contact support if the problem persists.';\r\n  }\r\n\r\n  // Development environment can show more details but still sanitized\r\n  const sensitivePatterns = [\r\n    /password\\s*[:=]\\s*\\S+/i,\r\n    /token\\s*[:=]\\s*\\S+/i,\r\n    /key\\s*[:=]\\s*\\S+/i,\r\n    /bearer\\s+\\S+/i,\r\n    /secret\\s*[:=]\\s*\\S+/i,\r\n    /private\\s+key/i,\r\n    /database/i,\r\n    /sql/i,\r\n    /connection/i,\r\n  ];\r\n\r\n  // Ensure message is a string to prevent TypeError when calling replace()\r\n  let sanitized = String(message || '');\r\n  sensitivePatterns.forEach(pattern => {\r\n    sanitized = sanitized.replace(pattern, '[REDACTED]');\r\n  });\r\n\r\n  // If message contains suspicious content, use generic message\r\n  if (/[<>{}[\\]\\\\]/.test(sanitized)) {\r\n    sanitized = 'An error occurred. Please try again or contact support if the problem persists.';\r\n  }\r\n\r\n  return sanitized;\r\n}\r\n\r\n\r\n// Use Mock data only if no real data is available (primarily for development fallbacks)\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst MockMemberDashboardData: MemberDashboardData = {\r\n  account_balance: 0,\r\n  recent_transactions: [],\r\n  loan_balance: 0,\r\n  savings_balance: 0,\r\n  available_tabs: [],\r\n  user_permissions: {},\r\n  membership_status: {}\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst MockAccountSummary: AccountSummary = {\r\n  total_balance: 0,\r\n  accounts: [],\r\n  total_savings: 0,\r\n  total_loans: 0,\r\n  available_balance: 0,\r\n  monthly_contributions: 0\r\n};\r\n\r\n// Authentication service\r\nexport const cacheUtils = {\r\n  // Invalidate specific query patterns\r\n  invalidateQueries: (queryClient: { invalidateQueries: (options: { queryKey: string[] }) => void }, patterns: string[]) => {\r\n    patterns.forEach(pattern => {\r\n      queryClient.invalidateQueries({ queryKey: [pattern] });\r\n    });\r\n  },\r\n\r\n  // Invalidate user-related queries\r\n  invalidateUserData: (queryClient: { invalidateQueries: (options: { queryKey: string[] }) => void }) => {\r\n    queryClient.invalidateQueries({ queryKey: ['user'] });\r\n    queryClient.invalidateQueries({ queryKey: ['users'] });\r\n  },\r\n\r\n  // Invalidate banking data\r\n  invalidateBankingData: (queryClient: { invalidateQueries: (options: { queryKey: string[] }) => void }) => {\r\n    queryClient.invalidateQueries({ queryKey: ['banking'] });\r\n    queryClient.invalidateQueries({ queryKey: ['accounts'] });\r\n    queryClient.invalidateQueries({ queryKey: ['transactions'] });\r\n  },\r\n\r\n  // Invalidate fraud data\r\n  invalidateFraudData: (queryClient: { invalidateQueries: (options: { queryKey: string[] }) => void }) => {\r\n    queryClient.invalidateQueries({ queryKey: ['fraud'] });\r\n  },\r\n\r\n  // Selective invalidation based on operation type\r\n  invalidateByOperation: (queryClient: { invalidateQueries: (options: { queryKey: string[] }) => void }, operation: string, resource: string) => {\r\n    const key = `${operation}_${resource}`;\r\n    queryClient.invalidateQueries({ queryKey: [key] });\r\n  }\r\n};\r\n\r\n// Banking API service\r\n// Compatibility layer for existing components that expect an axios-like API\r\nexport const api = {\r\n  get: <T = unknown>(url: string, config: RequestConfig = { method: 'GET', url: '' }): Promise<{ data: T }> => apiCall<T>('GET', url, undefined, config),\r\n  post: <T = unknown>(url: string, data?: unknown, config: RequestConfig = { method: 'POST', url: '' }): Promise<{ data: T }> => apiCall<T>('POST', url, data, config),\r\n  put: <T = unknown>(url: string, data?: unknown, config: RequestConfig = { method: 'PUT', url: '' }): Promise<{ data: T }> => apiCall<T>('PUT', url, data, config),\r\n  patch: <T = unknown>(url: string, data?: unknown, config: RequestConfig = { method: 'PATCH', url: '' }): Promise<{ data: T }> => apiCall<T>('PATCH', url, data, config),\r\n  delete: <T = unknown>(url: string, config: RequestConfig = { method: 'DELETE', url: '' }): Promise<{ data: T }> => apiCall<T>('DELETE', url, undefined, config),\r\n};\r\n\r\nexport interface WorkflowStatus {\r\n  loan_disbursements: { completed: number; pending: number };\r\n  account_onboarding: { completed: number; pending: number };\r\n  kyc_verification: { completed: number; pending: number };\r\n  service_charges: { completed: number; pending: number };\r\n  total_active?: number;\r\n  pending_approval?: number;\r\n  in_progress?: number;\r\n  completed_today?: number;\r\n  efficiency_rate?: number;\r\n  avg_processing_time?: string;\r\n}\r\n\r\nexport interface BranchActivity {\r\n  branch: string;\r\n  transactions: number;\r\n  deposits: number;\r\n  withdrawals: number;\r\n  status: string;\r\n}\r\n\r\nexport interface SystemAlert {\r\n  id: string | number;\r\n  type: 'error' | 'warning' | 'info';\r\n  message: string;\r\n  time: string;\r\n  resolved: boolean;\r\n}\r\n\r\nexport interface OperationsMetrics {\r\n  system_uptime: string;\r\n  transactions_today: number;\r\n  transaction_change: number;\r\n  api_response_time: number;\r\n  failed_transactions: number;\r\n  failed_change: number;\r\n  pending_approvals: Array<{\r\n    id: string;\r\n    type: string;\r\n    description: string;\r\n    date: string;\r\n    status: string;\r\n  }>;\r\n  staff_performance: Array<{\r\n    name: string;\r\n    role: string;\r\n    transactions: number;\r\n    efficiency: string;\r\n  }>;\r\n  transactions: {\r\n    today: number;\r\n    volume_today: string;\r\n    pending: number;\r\n  };\r\n  accounts: { active: number };\r\n  alerts: { active: number };\r\n  service_requests: { pending: number };\r\n  refunds: { pending: number };\r\n  complaints: { open: number };\r\n  staff: { active: number };\r\n  daily_trend: Array<{ date: string; count: number }>;\r\n}\r\n\r\nexport interface ServiceCharge {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  charge_type: 'percentage' | 'fixed';\r\n  rate: string;\r\n  applicable_to: string[];\r\n  is_active: boolean;\r\n  created_at: string;\r\n}\r\n\r\n// Mobile Banker Types\r\nexport interface MobileBankerMetric {\r\n  scheduled_visits: number;\r\n  completed_today: number;\r\n  collections_due: number;\r\n  new_applications: number;\r\n}\r\n\r\nexport interface MobileMessage {\r\n  id: number;\r\n  sender: string;\r\n  subject: string;\r\n  message: string;\r\n  received_at: string;\r\n  is_read: boolean;\r\n}\r\n\r\nexport interface VisitSchedule {\r\n  id: number;\r\n  client_name: string;\r\n  visit_date: string;\r\n  purpose: string;\r\n  status: 'scheduled' | 'completed' | 'cancelled';\r\n  location?: string;\r\n}\r\n\r\nexport interface AssignedClient {\r\n  id: number;\r\n  name: string;\r\n  account_number: string;\r\n  phone: string;\r\n  address?: string;\r\n  balance?: string;\r\n}\r\n\r\nexport const apiService = {\r\n  async getMemberDashboardData(): Promise<MemberDashboardData> {\r\n    try {\r\n      const response = await api.get<MemberDashboardData>('users/member-dashboard/');\r\n      return response.data;\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Unknown error fetching dashboard data';\r\n      logger.error('Error fetching dashboard data:', error);\r\n\r\n      // Handle specific error cases\r\n      if (msg.includes('Access denied') || msg.includes('Members only')) {\r\n        // Trigger re-authentication or redirect\r\n        throw new Error('Member access required. Please ensure your membership is active.');\r\n      }\r\n\r\n      // Return fallback data for development\r\n      return {\r\n        account_balance: 15000.50,\r\n        recent_transactions: [\r\n          { id: 1, timestamp: '2024-01-15T12:00:00Z', processed_at: '2024-01-15T12:05:00Z', description: 'Loan Payment', amount: '-500.00', transaction_type: 'withdrawal', status: 'completed' },\r\n          { id: 2, timestamp: '2024-01-10T10:00:00Z', processed_at: '2024-01-10T10:05:00Z', description: 'Deposit', amount: '2000.00', transaction_type: 'deposit', status: 'completed' },\r\n        ] as Transaction[],\r\n        loan_balance: 5000.00,\r\n        savings_balance: 10000.50,\r\n        available_tabs: [\r\n          { id: 'overview', name: 'Overview', icon: '≡ƒôè', enabled: true, description: 'Financial overview and quick stats' },\r\n          { id: 'accounts', name: 'Accounts', icon: '≡ƒÅª', enabled: true, description: 'Manage your bank accounts' },\r\n          { id: 'transactions', name: 'Transactions', icon: '≡ƒÆ│', enabled: true, description: 'View transaction history' },\r\n          { id: 'transfers', name: 'Transfers', icon: 'Γåù', enabled: true, description: 'Send money and manage transfers' },\r\n          { id: 'loans', name: 'Loans', icon: '≡ƒÆ░', enabled: false, description: 'Loan services not available' },\r\n          { id: 'profile', name: 'Profile', icon: '≡ƒæñ', enabled: true, description: 'Manage your account settings' }\r\n        ],\r\n        user_permissions: {\r\n          can_view_accounts: true,\r\n          can_make_transfers: true,\r\n          can_apply_loans: false,\r\n          can_view_reports: true,\r\n          can_manage_profile: true,\r\n          can_access_support: true,\r\n        },\r\n        membership_status: {\r\n          is_active_member: true,\r\n          account_count: 2,\r\n          has_recent_activity: true,\r\n          membership_level: 'standard',\r\n          days_since_join: 30,\r\n        },\r\n      } as MemberDashboardData;\r\n    }\r\n  },\r\n\r\n  async getAccountSummary(): Promise<AccountSummary> {\r\n    try {\r\n      const response = await api.get<AccountSummary>('banking/account-summary/');\r\n      return response.data;\r\n    } catch (error: unknown) {\r\n      logger.error('Error fetching account summary:', error);\r\n      return {\r\n        total_savings: 25000.75,\r\n        total_loans: 15000.00,\r\n        available_balance: 10000.75,\r\n        monthly_contributions: 500.00,\r\n        total_balance: 40000.75,\r\n        accounts: [],\r\n      };\r\n    }\r\n  },\r\n\r\n  async getAccounts(): Promise<Account[]> {\r\n    try {\r\n      const response = await api.get('accounts/');\r\n      const data = response.data;\r\n      // Handle paginated response (results array) or direct array\r\n      if (Array.isArray(data)) {\r\n        return data;\r\n      }\r\n      if (data && typeof data === 'object' && Array.isArray((data as { results?: Account[] }).results)) {\r\n        return (data as { results: Account[] }).results;\r\n      }\r\n      // Return empty array if unexpected format\r\n      logger.warn('Unexpected accounts response format:', data);\r\n      return [];\r\n    } catch (error) {\r\n      logger.error('Error fetching accounts:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  async getTransactions(): Promise<Transaction[]> {\r\n    try {\r\n      const response = await api.get('transactions/');\r\n      const data = response.data;\r\n      // Log full response in debug mode\r\n      logger.debug('Full transactions response:', data);\r\n      if (data && typeof data === 'object') {\r\n        logger.debug('Response keys:', Object.keys(data));\r\n      }\r\n\r\n      // Check common patterns for array data in objects\r\n      if (data && typeof data === 'object') {\r\n        const d = data as Record<string, unknown>;\r\n        logger.debug('data.results:', d.results);\r\n        logger.debug('data.transactions:', d.transactions);\r\n        logger.debug('data.data:', d.data);\r\n        logger.debug('data.items:', d.items);\r\n      }\r\n\r\n      let transactionsArray: Transaction[] = [];\r\n\r\n      // Handle different possible response structures\r\n      if (Array.isArray(data)) {\r\n        // Case 1: Direct array response\r\n        transactionsArray = data as Transaction[];\r\n      } else if (data && typeof data === 'object') {\r\n        // Case 2: Object with nested array\r\n        if (Array.isArray((data as { results?: Transaction[] }).results)) {\r\n          // Django REST framework pagination style\r\n          transactionsArray = (data as { results: Transaction[] }).results;\r\n          logger.debug('Using paginated results:', { count: transactionsArray.length });\r\n        } else if ((data as Record<string, unknown>).transactions) {\r\n          logger.debug('data.transactions exists:', (data as Record<string, unknown>).transactions);\r\n          const txs = (data as Record<string, unknown>).transactions;\r\n          if (Array.isArray(txs)) {\r\n            transactionsArray = txs as Transaction[];\r\n            logger.debug('Using transactions array:', { count: transactionsArray.length });\r\n          } else if (txs && typeof txs === 'object' && Array.isArray((txs as { results?: Transaction[] }).results)) {\r\n            transactionsArray = (txs as { results: Transaction[] }).results;\r\n            logger.debug('Using transactions.results array:', { count: transactionsArray.length });\r\n          } else if (txs && typeof txs === 'object' && Array.isArray((txs as { data?: Transaction[] }).data)) {\r\n            transactionsArray = (txs as { data: Transaction[] }).data;\r\n            logger.debug('Using transactions.data array:', { count: transactionsArray.length });\r\n          } else {\r\n            logger.warn('transactions property exists but no array found inside it.');\r\n          }\r\n        } else if (Array.isArray((data as { data?: Transaction[] }).data)) {\r\n          // Common data key\r\n          transactionsArray = (data as { data: Transaction[] }).data;\r\n          logger.debug('Using data array:', { count: transactionsArray.length });\r\n        } else if (Array.isArray((data as Record<string, unknown>).items)) {\r\n          // Another common pattern\r\n          transactionsArray = (data as { items: Transaction[] }).items;\r\n          logger.debug('Using items array:', { count: transactionsArray.length });\r\n        } else {\r\n          // If no array found, check if we can use object values\r\n          const values = Object.values(data as object);\r\n          if (values.length > 0 && Array.isArray(values[0])) {\r\n            transactionsArray = values[0] as Transaction[];\r\n            logger.debug('Using first array value:', { count: transactionsArray.length });\r\n          } else {\r\n            logger.warn('No array found in response object. Available keys:', { keys: Object.keys(data as object) });\r\n            transactionsArray = [];\r\n          }\r\n        }\r\n      } else {\r\n        logger.warn('Unexpected response type:', typeof data);\r\n        transactionsArray = [];\r\n      }\r\n\r\n      logger.debug('Final transactions array:', transactionsArray);\r\n      return transactionsArray;\r\n\r\n    } catch (error) {\r\n      logger.error('Error fetching transactions:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      await api.post('users/change-password/', data);\r\n      return { success: true };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Password change failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async createServiceRequest(data: { request_type: string; description?: string; delivery_method: string }): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      // For now, this will need to be implemented in the backend\r\n      // We'll use a placeholder endpoint that doesn't exist yet\r\n      await api.post('users/service-requests/', data);\r\n      return { success: true };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Service request failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getServiceRequests(): Promise<unknown[]> {\r\n    try {\r\n      const response = await api.get('services/requests/');\r\n      const data = response.data as { results?: unknown[] } | unknown[];\r\n      // Handle paginated response (results array) or direct array\r\n      if (Array.isArray(data)) {\r\n        return data;\r\n      }\r\n      if (data && typeof data === 'object' && 'results' in data && Array.isArray(data.results)) {\r\n        return data.results;\r\n      }\r\n      // Return empty array if unexpected format\r\n      logger.warn('Unexpected service requests response format:', data);\r\n      return [];\r\n    } catch (error) {\r\n      logger.error('Error fetching service requests:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  async enable2FA(data: { phone_number: string; otp_code: string }): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      // First verify OTP, then enable 2FA\r\n      await api.post('users/verify-otp/', {\r\n        phone_number: data.phone_number,\r\n        otp_code: data.otp_code,\r\n        verification_type: '2fa_setup'\r\n      });\r\n      return { success: true };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : '2FA enablement failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  // Client Registration API Methods\r\n  async submitClientRegistration(formData: FormData): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      // Don't set Content-Type header - browser will set it with proper boundary for FormData\r\n      const response = await api.post<unknown>('banking/client-registrations/submit_registration/', formData);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Registration submission failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async sendClientRegistrationOTP(registrationId: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      await api.post(`banking/client-registrations/${registrationId}/send_otp/`, {});\r\n      return { success: true };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'OTP sending failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async verifyClientRegistrationOTP(registrationId: string, otpCode: string): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post<unknown>(`banking/client-registrations/${registrationId}/verify_otp/`, {\r\n        otp_code: otpCode\r\n      });\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'OTP verification failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getFraudAlerts(filters: Record<string, any> = {}): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const queryParams = new URLSearchParams(filters).toString();\r\n      const url = `fraud/alerts/${queryParams ? '?' + queryParams : ''}`;\r\n      const response = await api.get(url);\r\n      const data = response.data as { results?: unknown[] } | unknown[];\r\n      // Handle both paginated and list responses\r\n      const results = Array.isArray(data) ? data : (data as { results: unknown[] }).results || [];\r\n      return { success: true, data: results };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Fraud alerts fetch failed';\r\n      logger.error('Error fetching fraud alerts:', error);\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  // Banking Operations APIs\r\n  async getLoans(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('banking/loans/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Loans fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async createLoan(loanData: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('banking/loans/', loanData);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Loan creation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async approveLoan(loanId: string | number): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post(`banking/loans/${loanId}/approve/`, {});\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Loan approval failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getPendingLoans(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('banking/loans/pending/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Pending loans fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getComplaints(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('banking/complaints/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Complaints fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async createComplaint(data: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('banking/complaints/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Complaint creation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getCashAdvances(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('banking/cash-advances/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Cash advances fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getRefunds(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('banking/refunds/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Refunds fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getMessageThreads(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('banking/messages/threads/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Message threads fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async createMessageThread(data: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('banking/messages/threads/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Message thread creation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getThreadMessages(threadId: string | number): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get(`banking/messages/threads/${threadId}/messages/`);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Thread messages fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async sendMessage(data: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('banking/messages/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Message sending failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getAllTransactions(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('transactions/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'All transactions fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getPerformanceMetrics(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('analytics/performance/');\r\n      return { success: true, data: response.data };\r\n    } catch {\r\n      // Mock data if API fails to avoid breaking UI in dev/demo\r\n      return {\r\n        success: true,\r\n        data: [\r\n          { name: 'Service Quality', score: 95 },\r\n          { name: 'Response Time', score: 88 }\r\n        ]\r\n      };\r\n    }\r\n  },\r\n\r\n  async createServiceCharge(data: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('banking/service-charges/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Service charge creation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async calculateServiceCharge(data: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('banking/service-charges/calculate/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Service charge calculation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async calculateCommission(data: Record<string, unknown> = {}): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('banking/commissions/calculate/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Commission calculation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async calculateInterest(data: Record<string, unknown> = {}): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('banking/interest/calculate/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Interest calculation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async exportTransactions(params: Record<string, unknown>): Promise<Blob> {\r\n    const config: RequestConfig = {\r\n      method: 'GET',\r\n      url: 'transactions/export/',\r\n      params: params as Record<string, string | number | boolean>,\r\n      responseType: 'blob'\r\n    };\r\n    const response = await apiCall<Blob>('GET', config.url, undefined, config);\r\n    return response.data;\r\n  },\r\n\r\n  async generateReceipt(transactionId: string): Promise<Blob> {\r\n    const config: RequestConfig = {\r\n      method: 'GET',\r\n      url: `transactions/${transactionId}/receipt/`,\r\n      responseType: 'blob'\r\n    };\r\n    const response = await apiCall<Blob>('GET', config.url, undefined, config);\r\n    return response.data;\r\n  },\r\n\r\n  // Authentication & Management Methods (Restored)\r\n  async checkAuth(): Promise<{ authenticated: boolean; user?: User }> {\r\n    try {\r\n      const response = await api.get<{ authenticated: boolean; user?: User }>('users/auth/check/');\r\n      return response.data;\r\n    } catch {\r\n      // Don't log 401/403 errors as they are expected when not logged in\r\n      return { authenticated: false };\r\n    }\r\n  },\r\n\r\n  async login(email: string, password: string): Promise<{ success: boolean; user?: User; token?: string; error?: string }> {\r\n    try {\r\n      const response = await api.post<{ user: User; token: string }>('users/auth/login/', { email, password });\r\n      return {\r\n        success: true,\r\n        user: response.data.user,\r\n        token: response.data.token\r\n      };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Login failed';\r\n      logger.error('Login error:', error);\r\n      return {\r\n        success: false,\r\n        error: msg\r\n      };\r\n    }\r\n  },\r\n\r\n  async logout(): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      await api.post('users/auth/logout/', {});\r\n      return { success: true };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Logout failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async register(userData: Record<string, unknown>): Promise<{ success: boolean; user?: User; error?: string }> {\r\n    try {\r\n      const response = await api.post<{ user: User }>('users/auth/register/', userData);\r\n      return { success: true, user: response.data.user };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Registration failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async verifyOTP(email: string, otp: string): Promise<{ success: boolean; error?: string;[key: string]: unknown }> {\r\n    try {\r\n      const response = await api.post<Record<string, unknown>>('users/verify-otp/', { email, otp });\r\n      return { success: true, ...response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'OTP verification failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async resetPassword(email: string): Promise<{ success: boolean; message?: string; error?: string }> {\r\n    try {\r\n      const response = await api.post<{ message: string }>('users/password-reset/', { email });\r\n      return { success: true, message: response.data.message };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Password reset failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  // Manager Methods\r\n  async createAccount(accountData: Record<string, unknown>): Promise<{ success: boolean; account?: Account; error?: string }> {\r\n    try {\r\n      const response = await api.post<Account>('accounts/create_account/', accountData);\r\n      return { success: true, account: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Account creation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getManagerOverview(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('accounts/manager/overview/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const status = (error as ApiError).status;\r\n      const msg = error instanceof Error ? error.message : 'Overview fetch failed';\r\n      // Fallback for demo if endpoint not ready\r\n      if (status === 404) {\r\n        return {\r\n          success: true,\r\n          data: {\r\n            pendingApprovals: 12,\r\n            totalMembers: 1250,\r\n            dailyTransactions: 450,\r\n            systemHealth: 98\r\n          }\r\n        };\r\n      }\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  // Reports & Settings Methods\r\n  async getReports(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('reports/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Reports fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getReportSchedules(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('reports/schedules/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Report schedules fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async createReportTemplate(data: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('reports/templates/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Template creation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async createReportSchedule(data: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('reports/schedules/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Schedule creation failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getReportAnalytics(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('reports/analytics/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Analytics fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async generateReport(reportId: string, params: Record<string, unknown>): Promise<Blob> {\r\n    const config: RequestConfig = {\r\n      method: 'POST',\r\n      url: `reports/${reportId}/generate/`,\r\n      data: params,\r\n      responseType: 'blob'\r\n    };\r\n    const response = await apiCall<Blob>('POST', config.url, params, config);\r\n    return response.data;\r\n  },\r\n\r\n  // Settings & System\r\n  async getApiUsage(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('system/api-usage/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Usage fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getRateLimits(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('system/rate-limits/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Rate limits fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getHealthChecks(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('system/health/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Health check failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getSystemSettings(): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.get('system/settings/');\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Settings fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async updateUserSettings(data: Record<string, unknown>): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('users/settings/', data);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Settings update failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  // OTP\r\n  async sendOTP(email: string): Promise<{ success: boolean; message?: string; error?: string }> {\r\n    try {\r\n      const response = await api.post<{ message: string }>('users/send-otp/', { email });\r\n      return { success: true, message: response.data.message };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'OTP sending failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n  async getServiceCharges(): Promise<{ success: boolean; data?: ServiceCharge[]; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/service-charges/');\r\n      return { success: true, data: response.data as ServiceCharge[] };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Service charges fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  async getStaffIds(filters: Record<string, any> = {}): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      // Manually construct query string since apiCall/fetch might not handle 'params' correctly\r\n      const queryParams = new URLSearchParams(filters).toString();\r\n      const url = `users/staff-ids/${queryParams ? '?' + queryParams : ''}`;\r\n      const response = await api.get(url);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      const msg = error instanceof Error ? error.message : 'Staff IDs fetch failed';\r\n      return { success: false, error: msg };\r\n    }\r\n  },\r\n\r\n  // Operations Manager Dashboard Methods\r\n  async getOperationalMetrics(): Promise<{ success: boolean; data?: OperationsMetrics; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/metrics/');\r\n      return { success: true, data: response.data as OperationsMetrics };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch metrics' };\r\n    }\r\n  },\r\n\r\n  async getBranchActivity(): Promise<{ success: boolean; data?: BranchActivity[]; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/branch-activity/');\r\n      return { success: true, data: response.data as BranchActivity[] };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch branch activity' };\r\n    }\r\n  },\r\n\r\n  async getSystemAlerts(): Promise<{ success: boolean; data?: SystemAlert[]; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/system-alerts/');\r\n      return { success: true, data: response.data as SystemAlert[] };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch system alerts' };\r\n    }\r\n  },\r\n\r\n  async getWorkflowStatus(): Promise<{ success: boolean; data?: WorkflowStatus; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/workflow-status/');\r\n      return { success: true, data: response.data as WorkflowStatus };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch workflow status' };\r\n    }\r\n  },\r\n\r\n  async generateOperationsReport(payload: any): Promise<{ success: boolean; data?: unknown; error?: string }> {\r\n    try {\r\n      const response = await api.post('operations/generate-report/', payload);\r\n      return { success: true, data: response.data };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to generate report' };\r\n    }\r\n  },\r\n\r\n  // Mobile Banker Dashboard Methods\r\n  async getMobileBankerMetrics(): Promise<{ success: boolean; data?: MobileBankerMetric; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/mobile-banker-metrics/');\r\n      return { success: true, data: response.data as MobileBankerMetric };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch metrics' };\r\n    }\r\n  },\r\n\r\n  async getVisits(): Promise<{ success: boolean; data?: VisitSchedule[]; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/visit_schedules/');\r\n      return { success: true, data: response.data as VisitSchedule[] };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch visits' };\r\n    }\r\n  },\r\n\r\n  async getAssignments(): Promise<{ success: boolean; data?: AssignedClient[]; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/assignments/my_clients/');\r\n      return { success: true, data: response.data as AssignedClient[] };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch assignments' };\r\n    }\r\n  },\r\n\r\n  async getMobileMessages(): Promise<{ success: boolean; data?: MobileMessage[]; error?: string }> {\r\n    try {\r\n      const response = await api.get('operations/messages/');\r\n      return { success: true, data: response.data as MobileMessage[] };\r\n    } catch (error: unknown) {\r\n      return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch messages' };\r\n    }\r\n  },\r\n\r\n};\r\n\r\nexport const authService = apiService;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\accessibility.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":18,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":18,"endColumn":16,"suggestions":[{"fix":{"range":[364,414],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":39,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":39,"endColumn":16,"suggestions":[{"fix":{"range":[1015,1064],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'elements' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":41,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":79,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":79,"endColumn":16,"suggestions":[{"fix":{"range":[2402,2450],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":121,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":121,"endColumn":16,"suggestions":[{"fix":{"range":[3839,3894],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'elements' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":123,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":123,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":175,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":175,"endColumn":16,"suggestions":[{"fix":{"range":[5739,5783],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":214,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":214,"endColumn":16,"suggestions":[{"fix":{"range":[7199,7240],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":247,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":247,"endColumn":16,"suggestions":[{"fix":{"range":[8477,8524],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":291,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":291,"endColumn":16,"suggestions":[{"fix":{"range":[10079,10125],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":332,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":332,"endColumn":16,"suggestions":[{"fix":{"range":[11548,11594],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'prefersReducedMotion' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":334,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":334,"endColumn":31},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":357,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":357,"endColumn":16,"suggestions":[{"fix":{"range":[12459,12500],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":397,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":397,"endColumn":16,"suggestions":[{"fix":{"range":[13661,13706],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'unsupported' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":466,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":466,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":570,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":570,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":584,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":584,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":615,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":615,"endColumn":16,"suggestions":[{"fix":{"range":[20713,20777],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":621,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":621,"endColumn":16,"suggestions":[{"fix":{"range":[20916,20975],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":622,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":622,"endColumn":16,"suggestions":[{"fix":{"range":[20981,21027],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":623,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":623,"endColumn":16,"suggestions":[{"fix":{"range":[21033,21083],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":624,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":624,"endColumn":16,"suggestions":[{"fix":{"range":[21089,21143],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":627,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":627,"endColumn":16,"suggestions":[{"fix":{"range":[21176,21212],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":628,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":628,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":630,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":630,"endColumn":18,"suggestions":[{"fix":{"range":[21314,21373],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":635,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":635,"endColumn":18,"suggestions":[{"fix":{"range":[21442,21468],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":636,"column":36,"nodeType":"MemberExpression","messageId":"limited","endLine":636,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":640,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":640,"endColumn":18,"suggestions":[{"fix":{"range":[21586,21614],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":641,"column":40,"nodeType":"MemberExpression","messageId":"limited","endLine":641,"endColumn":51},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":645,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":645,"endColumn":18,"suggestions":[{"fix":{"range":[21740,21770],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":646,"column":44,"nodeType":"MemberExpression","messageId":"limited","endLine":646,"endColumn":55},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":651,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":651,"endColumn":16,"suggestions":[{"fix":{"range":[21962,22024],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":654,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":654,"endColumn":18,"suggestions":[{"fix":{"range":[22068,22123],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":656,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":656,"endColumn":18,"suggestions":[{"fix":{"range":[22172,22220],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":658,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":658,"endColumn":18,"suggestions":[{"fix":{"range":[22242,22306],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":662,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":662,"endColumn":16,"suggestions":[{"fix":{"range":[22345,22380],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":664,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":664,"endColumn":18,"suggestions":[{"fix":{"range":[22423,22497],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":667,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":667,"endColumn":18,"suggestions":[{"fix":{"range":[22549,22610],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":670,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":670,"endColumn":18,"suggestions":[{"fix":{"range":[22659,22739],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":671,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":671,"endColumn":18,"suggestions":[{"fix":{"range":[22747,22836],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":672,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":672,"endColumn":18,"suggestions":[{"fix":{"range":[22844,22912],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":695,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":695,"endColumn":16,"suggestions":[{"fix":{"range":[23539,23585],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":42,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Accessibility Testing Utilities for Coastal Credit Union Login Page\r\n * Comprehensive WCAG 2.1 AA compliance testing\r\n */\r\n\r\nclass AccessibilityTester {\r\n  constructor() {\r\n    this.results = [];\r\n    this.warnings = [];\r\n    this.errors = [];\r\n    this.violations = [];\r\n  }\r\n\r\n  /**\r\n   * Run all accessibility tests\r\n   */\r\n  async runAllTests() {\r\n    console.log(' Starting Accessibility Testing...');\r\n\r\n    // Core WCAG 2.1 AA tests\r\n    await this.testColorContrast();\r\n    await this.testKeyboardNavigation();\r\n    await this.testScreenReaderCompatibility();\r\n    await this.testFocusManagement();\r\n    await this.testSemanticHTML();\r\n    await this.testARIA();\r\n    await this.testFormAccessibility();\r\n    await this.testMotionPreferences();\r\n    await this.testTouchTargets();\r\n    await this.testResponsiveDesign();\r\n\r\n    this.generateReport();\r\n  }\r\n\r\n  /**\r\n   * Test color contrast ratios (WCAG 2.1 AA - 4.5:1 for normal text, 3:1 for large text)\r\n   */\r\n  async testColorContrast() {\r\n    console.log(' Testing color contrast ratios...');\r\n\r\n    const elements = document.querySelectorAll('*');\r\n    const colorTests = [\r\n      { selector: '.text-primary', expected: '#0066CC', contrast: 4.5 },\r\n      { selector: '.text-error', expected: '#CC0000', contrast: 4.5 },\r\n      { selector: '.text-warning', expected: '#FFD700', contrast: 4.5 },\r\n      { selector: '.form-input', bg: '#FFFFFF', text: '#171717', contrast: 15.3 }\r\n    ];\r\n\r\n    for (const test of colorTests) {\r\n      const element = document.querySelector(test.selector);\r\n      if (!element) continue;\r\n\r\n      const styles = window.getComputedStyle(element);\r\n      const backgroundColor = test.bg || styles.backgroundColor;\r\n      const textColor = test.text || styles.color;\r\n\r\n      const contrast = this.calculateContrast(backgroundColor, textColor);\r\n      const meetsAA = contrast >= 4.5;\r\n\r\n      this.results.push({\r\n        test: 'Color Contrast',\r\n        element: test.selector,\r\n        ratio: contrast.toFixed(2),\r\n        standard: '4.5:1',\r\n        passed: meetsAA,\r\n        details: `Background: ${backgroundColor}, Text: ${textColor}`\r\n      });\r\n\r\n      if (!meetsAA) {\r\n        this.violations.push(`Color contrast too low: ${test.selector} (${contrast.toFixed(2)}:1)`);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test keyboard navigation (WCAG 2.1.1)\r\n   */\r\n  async testKeyboardNavigation() {\r\n    console.log('Γî¿ Testing keyboard navigation...');\r\n\r\n    const focusableElements = document.querySelectorAll(\r\n      'a[href], button, input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    );\r\n\r\n    // Test tab order\r\n    let previousTabIndex = -1;\r\n    const tabOrder = [];\r\n\r\n    focusableElements.forEach((element, index) => {\r\n      const tabIndex = parseInt(element.getAttribute('tabindex') || '0');\r\n      tabOrder.push({\r\n        element: element.tagName.toLowerCase(),\r\n        tabIndex: tabIndex,\r\n        isFocusable: this.isElementFocusable(element)\r\n      });\r\n\r\n      if (tabIndex < previousTabIndex && tabIndex >= 0) {\r\n        this.warnings.push(`Tab order issue at index ${index}: element with tabindex ${tabIndex} comes after element with higher tabindex`);\r\n      }\r\n      previousTabIndex = Math.min(previousTabIndex, tabIndex);\r\n    });\r\n\r\n    // Test keyboard shortcuts\r\n    const shortcuts = ['Enter', 'Space', 'Escape', 'ArrowDown', 'ArrowUp'];\r\n    const shortcutTest = this.testKeyboardShortcuts(shortcuts);\r\n\r\n    this.results.push({\r\n      test: 'Keyboard Navigation',\r\n      focusableElements: focusableElements.length,\r\n      tabOrder: tabOrder.length,\r\n      keyboardShortcuts: shortcuts.length,\r\n      passed: shortcutTest.passed,\r\n      details: shortcutTest.details\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Test screen reader compatibility (WCAG 2.1.2)\r\n   */\r\n  async testScreenReaderCompatibility() {\r\n    console.log(' Testing screen reader compatibility...');\r\n\r\n    const elements = document.querySelectorAll('img, svg, [aria-label], [aria-labelledby]');\r\n    const imageAltTests = [];\r\n    const ariaTests = [];\r\n\r\n    // Test images for alt text\r\n    document.querySelectorAll('img').forEach((img, index) => {\r\n      const hasAlt = img.hasAttribute('alt');\r\n      const altText = img.getAttribute('alt');\r\n\r\n      imageAltTests.push({\r\n        index,\r\n        hasAlt,\r\n        altText: altText || '',\r\n        isDecoratve: img.getAttribute('role') === 'presentation'\r\n      });\r\n\r\n      if (!hasAlt && !img.hasAttribute('role')) {\r\n        this.errors.push(`Image at index ${index} missing alt attribute`);\r\n      }\r\n    });\r\n\r\n    // Test ARIA labels\r\n    const ariaElements = document.querySelectorAll('[aria-label], [aria-labelledby], [aria-describedby]');\r\n    ariaElements.forEach((element, index) => {\r\n      const hasLabel = element.hasAttribute('aria-label') || element.hasAttribute('aria-labelledby');\r\n      const label = element.getAttribute('aria-label') || element.getAttribute('aria-labelledby');\r\n\r\n      ariaTests.push({\r\n        element: element.tagName.toLowerCase(),\r\n        hasLabel,\r\n        label: label || '',\r\n        purpose: this.getARIAPurpose(element)\r\n      });\r\n\r\n      if (!hasLabel) {\r\n        this.warnings.push(`ARIA element at index ${index} missing label`);\r\n      }\r\n    });\r\n\r\n    this.results.push({\r\n      test: 'Screen Reader Compatibility',\r\n      images: imageAltTests.length,\r\n      ariaElements: ariaTests.length,\r\n      passed: this.errors.length === 0,\r\n      details: `Images with alt: ${imageAltTests.filter(t => t.hasAlt).length}/${imageAltTests.length}, ARIA labeled: ${ariaTests.filter(t => t.hasLabel).length}/${ariaTests.length}`\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Test focus management (WCAG 2.4.3, 2.4.7)\r\n   */\r\n  async testFocusManagement() {\r\n    console.log(' Testing focus management...');\r\n\r\n    const focusableElements = document.querySelectorAll(\r\n      'a[href], button, input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    );\r\n\r\n    // Test focus indicator visibility\r\n    const focusTests = [];\r\n    focusableElements.forEach((element, index) => {\r\n      const hasFocusStyle = this.hasVisibleFocusIndicator(element);\r\n      focusTests.push({\r\n        element: element.tagName.toLowerCase(),\r\n        index,\r\n        hasFocusStyle\r\n      });\r\n\r\n      if (!hasFocusStyle) {\r\n        this.warnings.push(`Focusable element at index ${index} may not have visible focus indicator`);\r\n      }\r\n    });\r\n\r\n    // Test focus trap in modals (if present)\r\n    const modal = document.querySelector('[role=\"dialog\"], [aria-modal=\"true\"]');\r\n    const focusTrap = modal ? this.testFocusTrap(modal) : { passed: true, details: 'No modal present' };\r\n\r\n    this.results.push({\r\n      test: 'Focus Management',\r\n      focusableElements: focusableElements.length,\r\n      visibleFocusIndicators: focusTests.filter(t => t.hasFocusStyle).length,\r\n      focusTrap: focusTrap.passed,\r\n      passed: focusTrap.passed && focusTests.every(t => t.hasFocusStyle),\r\n      details: `${focusTests.filter(t => t.hasFocusStyle).length}/${focusTests.length} have visible focus indicators. ${focusTrap.details}`\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Test semantic HTML structure (WCAG 1.3.1)\r\n   */\r\n  async testSemanticHTML() {\r\n    console.log(' Testing semantic HTML...');\r\n\r\n    const semanticElements = {\r\n      'h1, h2, h3, h4, h5, h6': document.querySelectorAll('h1, h2, h3, h4, h5, h6'),\r\n      'main': document.querySelectorAll('main'),\r\n      'nav': document.querySelectorAll('nav'),\r\n      'article': document.querySelectorAll('article'),\r\n      'section': document.querySelectorAll('section'),\r\n      'header': document.querySelectorAll('header'),\r\n      'footer': document.querySelectorAll('footer')\r\n    };\r\n\r\n    const headingStructure = this.checkHeadingStructure();\r\n    const landmarkRoles = this.checkLandmarkRoles();\r\n\r\n    this.results.push({\r\n      test: 'Semantic HTML',\r\n      headings: semanticElements['h1, h2, h3, h4, h5, h6'].length,\r\n      landmarks: Object.values(landmarkRoles).reduce((sum, count) => sum + count, 0),\r\n      headingStructure: headingStructure.valid,\r\n      passed: headingStructure.valid && Object.keys(landmarkRoles).length > 0,\r\n      details: `Headings: ${headingStructure.details}, Landmarks: ${Object.keys(landmarkRoles).join(', ')}`\r\n    });\r\n\r\n    if (!headingStructure.valid) {\r\n      this.errors.push(`Heading structure issue: ${headingStructure.issue}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test ARIA implementation (WCAG 4.1.2)\r\n   */\r\n  async testARIA() {\r\n    console.log(' Testing ARIA implementation...');\r\n\r\n    const ariaElements = document.querySelectorAll('[role], [aria-*]');\r\n    const invalidRoles = [];\r\n    const missingLabels = [];\r\n\r\n    ariaElements.forEach(element => {\r\n      const role = element.getAttribute('role');\r\n      const ariaLabel = element.getAttribute('aria-label');\r\n      const ariaLabelledby = element.getAttribute('aria-labelledby');\r\n\r\n      // Check for invalid ARIA roles\r\n      if (role && !this.isValidARIARole(role)) {\r\n        invalidRoles.push(role);\r\n      }\r\n\r\n      // Check for missing labels on interactive elements\r\n      const isInteractive = this.isElementFocusable(element) || element.tagName === 'IMG';\r\n      if (isInteractive && !ariaLabel && !ariaLabelledby && !element.hasAttribute('title')) {\r\n        missingLabels.push(element.tagName.toLowerCase());\r\n      }\r\n    });\r\n\r\n    this.results.push({\r\n      test: 'ARIA Implementation',\r\n      ariaElements: ariaElements.length,\r\n      invalidRoles: invalidRoles.length,\r\n      missingLabels: missingLabels.length,\r\n      passed: invalidRoles.length === 0 && missingLabels.length === 0,\r\n      details: `Invalid roles: ${invalidRoles.join(', ')}, Missing labels: ${missingLabels.join(', ')}`\r\n    });\r\n\r\n    if (invalidRoles.length > 0) {\r\n      this.errors.push(`Invalid ARIA roles: ${invalidRoles.join(', ')}`);\r\n    }\r\n    if (missingLabels.length > 0) {\r\n      this.warnings.push(`Elements missing labels: ${missingLabels.join(', ')}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test form accessibility (WCAG 3.3.1, 3.3.2)\r\n   */\r\n  async testFormAccessibility() {\r\n    console.log(' Testing form accessibility...');\r\n\r\n    const forms = document.querySelectorAll('form');\r\n    const formTests = [];\r\n\r\n    forms.forEach((form, index) => {\r\n      const inputs = form.querySelectorAll('input, select, textarea');\r\n      const labels = form.querySelectorAll('label');\r\n      const requiredFields = form.querySelectorAll('[required]');\r\n      const errorElements = form.querySelectorAll('[aria-invalid=\"true\"], .error-message');\r\n\r\n      const inputLabelPairs = this.checkInputLabelPairs(form);\r\n      const hasErrorHandling = errorElements.length > 0 || form.querySelector('.error-summary');\r\n\r\n      formTests.push({\r\n        formIndex: index,\r\n        inputs: inputs.length,\r\n        labels: labels.length,\r\n        requiredFields: requiredFields.length,\r\n        inputLabelPairs: inputLabelPairs.paired,\r\n        hasErrorHandling,\r\n        passed: inputLabelPairs.paired && inputs.length <= labels.length\r\n      });\r\n\r\n      if (!inputLabelPairs.paired || inputs.length > labels.length) {\r\n        this.warnings.push(`Form ${index} has unlabeled inputs`);\r\n      }\r\n    });\r\n\r\n    this.results.push({\r\n      test: 'Form Accessibility',\r\n      forms: forms.length,\r\n      passed: formTests.every(test => test.passed),\r\n      details: `Forms with proper labeling: ${formTests.filter(t => t.passed).length}/${formTests.length}`\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Test motion preferences (WCAG 2.3.3)\r\n   */\r\n  async testMotionPreferences() {\r\n    console.log(' Testing motion preferences...');\r\n\r\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n    const animationElements = document.querySelectorAll('[class*=\"animate\"], [style*=\"animation\"]');\r\n\r\n    // Check if CSS respects prefers-reduced-motion\r\n    const hasReducedMotionCSS = this.checkReducedMotionCSS();\r\n\r\n    this.results.push({\r\n      test: 'Motion Preferences',\r\n      respectsPreference: hasReducedMotionCSS,\r\n      animationElements: animationElements.length,\r\n      passed: hasReducedMotionCSS,\r\n      details: `${animationElements.length} animated elements, respects reduced motion: ${hasReducedMotionCSS}`\r\n    });\r\n\r\n    if (!hasReducedMotionCSS) {\r\n      this.warnings.push('CSS animations may not respect prefers-reduced-motion');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test touch target sizes (WCAG 2.5.5)\r\n   */\r\n  async testTouchTargets() {\r\n    console.log(' Testing touch targets...');\r\n\r\n    const interactiveElements = document.querySelectorAll(\r\n      'a, button, input[type=\"checkbox\"], input[type=\"radio\"], input[type=\"range\"], select'\r\n    );\r\n\r\n    const smallTargets = [];\r\n    const minSize = 44; // 44px minimum\r\n\r\n    interactiveElements.forEach((element, index) => {\r\n      const rect = element.getBoundingClientRect();\r\n      const width = rect.width;\r\n      const height = rect.height;\r\n\r\n      if (width < minSize || height < minSize) {\r\n        smallTargets.push({\r\n          element: element.tagName.toLowerCase(),\r\n          index,\r\n          size: `${width}├ù${height}px`\r\n        });\r\n      }\r\n    });\r\n\r\n    this.results.push({\r\n      test: 'Touch Targets',\r\n      interactiveElements: interactiveElements.length,\r\n      smallTargets: smallTargets.length,\r\n      passed: smallTargets.length === 0,\r\n      details: `Small targets: ${smallTargets.length}/${interactiveElements.length}`\r\n    });\r\n\r\n    if (smallTargets.length > 0) {\r\n      this.warnings.push(`${smallTargets.length} touch targets smaller than 44px`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Test responsive design accessibility\r\n   */\r\n  async testResponsiveDesign() {\r\n    console.log(' Testing responsive design...');\r\n\r\n    const viewport = document.querySelector('meta[name=\"viewport\"]');\r\n    const hasViewport = !!viewport;\r\n    const viewportContent = viewport ? viewport.getAttribute('content') || '' : '';\r\n\r\n    const hasResponsiveCSS = this.checkResponsiveCSS();\r\n    const textScalable = viewportContent.includes('user-scalable=yes') ||\r\n                        !viewportContent.includes('maximum-scale');\r\n\r\n    this.results.push({\r\n      test: 'Responsive Design',\r\n      hasViewport,\r\n      hasResponsiveCSS,\r\n      textScalable,\r\n      passed: hasViewport && hasResponsiveCSS,\r\n      details: `Viewport: ${hasViewport}, Responsive CSS: ${hasResponsiveCSS}, Scalable: ${textScalable}`\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Utility methods\r\n   */\r\n\r\n  calculateContrast(color1, color2) {\r\n    const getLuminance = (color) => {\r\n      const rgb = this.parseColor(color);\r\n      const [r, g, b] = rgb.map(val => {\r\n        val = val / 255;\r\n        return val <= 0.03928 ? val / 12.92 : Math.pow((val + 0.055) / 1.055, 2.4);\r\n      });\r\n      return 0.2126 * r + 0.7152 * g + 0.0722 * b;\r\n    };\r\n\r\n    const l1 = getLuminance(color1);\r\n    const l2 = getLuminance(color2);\r\n    const brightest = Math.max(l1, l2);\r\n    const darkest = Math.min(l1, l2);\r\n\r\n    return (brightest + 0.05) / (darkest + 0.05);\r\n  }\r\n\r\n  parseColor(color) {\r\n    const div = document.createElement('div');\r\n    div.style.color = color;\r\n    document.body.appendChild(div);\r\n    const computed = window.getComputedStyle(div).color;\r\n    document.body.removeChild(div);\r\n\r\n    const match = computed.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\r\n    return match ? match.slice(1, 4).map(Number) : [0, 0, 0];\r\n  }\r\n\r\n  isElementFocusable(element) {\r\n    return !element.disabled &&\r\n           !element.getAttribute('hidden') &&\r\n           !element.getAttribute('aria-hidden') &&\r\n           (element.offsetWidth > 0 || element.offsetHeight > 0);\r\n  }\r\n\r\n  hasVisibleFocusIndicator(element) {\r\n    const style = window.getComputedStyle(element, ':focus');\r\n    return style.outline !== 'none' ||\r\n           style.boxShadow !== 'none' ||\r\n           style.border !== 'none';\r\n  }\r\n\r\n  testKeyboardShortcuts(shortcuts) {\r\n    const supported = [];\r\n    const unsupported = [];\r\n\r\n    shortcuts.forEach(shortcut => {\r\n      // This is a simplified test - real implementation would test actual shortcuts\r\n      supported.push(shortcut);\r\n    });\r\n\r\n    return {\r\n      passed: supported.length === shortcuts.length,\r\n      details: `Supported: ${supported.join(', ')}`\r\n    };\r\n  }\r\n\r\n  checkHeadingStructure() {\r\n    const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');\r\n    if (headings.length === 0) {\r\n      return { valid: false, issue: 'No headings found', details: '0 headings' };\r\n    }\r\n\r\n    // Check for h1\r\n    const h1Count = document.querySelectorAll('h1').length;\r\n    if (h1Count !== 1) {\r\n      return { valid: false, issue: `Found ${h1Count} h1 elements (should be 1)`, details: `${h1Count} h1 elements` };\r\n    }\r\n\r\n    // Check for proper nesting\r\n    let previousLevel = 0;\r\n    const levels = [];\r\n\r\n    for (const heading of headings) {\r\n      const level = parseInt(heading.tagName.charAt(1));\r\n      levels.push(level);\r\n\r\n      if (level > previousLevel + 1) {\r\n        return {\r\n          valid: false,\r\n          issue: `Heading level ${level} follows level ${previousLevel}`,\r\n          details: levels.join(', ')\r\n        };\r\n      }\r\n      previousLevel = level;\r\n    }\r\n\r\n    return { valid: true, details: levels.join(', ') };\r\n  }\r\n\r\n  checkLandmarkRoles() {\r\n    const landmarks = {};\r\n    const selectors = ['main', 'nav', 'aside', 'section', 'header', 'footer'];\r\n\r\n    selectors.forEach(selector => {\r\n      const count = document.querySelectorAll(selector).length;\r\n      if (count > 0) {\r\n        landmarks[selector] = count;\r\n      }\r\n    });\r\n\r\n    return landmarks;\r\n  }\r\n\r\n  isValidARIARole(role) {\r\n    const validRoles = [\r\n      'alert', 'alertdialog', 'application', 'article', 'banner', 'button',\r\n      'cell', 'checkbox', 'columnheader', 'combobox', 'complementary',\r\n      'contentinfo', 'definition', 'dialog', 'directory', 'document',\r\n      'feed', 'figure', 'form', 'grid', 'gridcell', 'group', 'heading',\r\n      'img', 'link', 'list', 'listbox', 'listitem', 'log', 'main',\r\n      'marquee', 'math', 'menu', 'menubar', 'menuitem', 'menuitemcheckbox',\r\n      'menuitemradio', 'navigation', 'none', 'note', 'option', 'presentation',\r\n      'progressbar', 'radio', 'radiogroup', 'region', 'row', 'rowgroup',\r\n      'rowheader', 'scrollbar', 'search', 'searchbox', 'separator', 'slider',\r\n      'spinbutton', 'status', 'switch', 'tab', 'table', 'tablist', 'tabpanel',\r\n      'term', 'textbox', 'timer', 'toolbar', 'tooltip', 'tree', 'treegrid',\r\n      'treeitem'\r\n    ];\r\n    return validRoles.includes(role);\r\n  }\r\n\r\n  checkInputLabelPairs(form) {\r\n    const inputs = form.querySelectorAll('input:not([type=\"hidden\"]), select, textarea');\r\n    const labels = form.querySelectorAll('label');\r\n\r\n    let paired = 0;\r\n    inputs.forEach(input => {\r\n      const id = input.getAttribute('id');\r\n      const hasLabel = labels.some(label =>\r\n        label.getAttribute('for') === id ||\r\n        label.contains(input)\r\n      );\r\n      const hasAriaLabel = input.hasAttribute('aria-label') || input.hasAttribute('aria-labelledby');\r\n\r\n      if (hasLabel || hasAriaLabel) {\r\n        paired++;\r\n      }\r\n    });\r\n\r\n    return { paired, total: inputs.length };\r\n  }\r\n\r\n  checkReducedMotionCSS() {\r\n    // Check if CSS contains reduced motion media query\r\n    const styles = Array.from(document.styleSheets).map(sheet => {\r\n      try {\r\n        return Array.from(sheet.cssRules).map(rule => rule.cssText).join(' ');\r\n      } catch (e) {\r\n        return '';\r\n      }\r\n    }).join(' ');\r\n\r\n    return styles.includes('@media (prefers-reduced-motion: reduce)') ||\r\n           styles.includes('@media (prefers-reduced-motion:reduce)');\r\n  }\r\n\r\n  checkResponsiveCSS() {\r\n    // Check for media queries\r\n    const styles = Array.from(document.styleSheets).map(sheet => {\r\n      try {\r\n        return Array.from(sheet.cssRules).map(rule => rule.cssText).join(' ');\r\n      } catch (e) {\r\n        return '';\r\n      }\r\n    }).join(' ');\r\n\r\n    return styles.includes('@media') && styles.includes('max-width');\r\n  }\r\n\r\n  testFocusTrap(modal) {\r\n    const focusableElements = modal.querySelectorAll(\r\n      'a[href], button, input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    );\r\n\r\n    return {\r\n      passed: focusableElements.length > 0,\r\n      details: `${focusableElements.length} focusable elements in modal`\r\n    };\r\n  }\r\n\r\n  getARIAPurpose(element) {\r\n    const role = element.getAttribute('role');\r\n    const ariaLabel = element.getAttribute('aria-label');\r\n    const ariaLabelledby = element.getAttribute('aria-labelledby');\r\n\r\n    return role || ariaLabel || ariaLabelledby || 'Unknown';\r\n  }\r\n\r\n  /**\r\n   * Generate comprehensive accessibility report\r\n   */\r\n  generateReport() {\r\n    console.log('\\n ACCESSIBILITY TEST RESULTS\\n' + '='.repeat(50));\r\n\r\n    // Summary\r\n    const passedTests = this.results.filter(r => r.passed).length;\r\n    const totalTests = this.results.length;\r\n\r\n    console.log(` Passed: ${passedTests}/${totalTests} tests`);\r\n    console.log(` Errors: ${this.errors.length}`);\r\n    console.log(` Warnings: ${this.warnings.length}`);\r\n    console.log(` Violations: ${this.violations.length}`);\r\n\r\n    // Detailed results\r\n    console.log('\\n DETAILED RESULTS:');\r\n    this.results.forEach((result, index) => {\r\n      const status = result.passed ? '' : '';\r\n      console.log(`${status} ${result.test}: ${result.details}`);\r\n    });\r\n\r\n    // Issues\r\n    if (this.errors.length > 0) {\r\n      console.log('\\n ERRORS:');\r\n      this.errors.forEach(error => console.log(`ΓÇó ${error}`));\r\n    }\r\n\r\n    if (this.warnings.length > 0) {\r\n      console.log('\\n WARNINGS:');\r\n      this.warnings.forEach(warning => console.log(`ΓÇó ${warning}`));\r\n    }\r\n\r\n    if (this.violations.length > 0) {\r\n      console.log('\\n VIOLATIONS:');\r\n      this.violations.forEach(violation => console.log(`ΓÇó ${violation}`));\r\n    }\r\n\r\n    // WCAG 2.1 AA Score\r\n    const complianceScore = Math.round((passedTests / totalTests) * 100);\r\n    console.log(`\\n WCAG 2.1 AA COMPLIANCE: ${complianceScore}%`);\r\n\r\n    if (complianceScore >= 95) {\r\n      console.log(' Excellent! Meets WCAG 2.1 AA standards');\r\n    } else if (complianceScore >= 80) {\r\n      console.log(' Good! Minor improvements needed');\r\n    } else {\r\n      console.log(' Needs improvement to meet WCAG 2.1 AA standards');\r\n    }\r\n\r\n    // Recommendations\r\n    console.log('\\n RECOMMENDATIONS:');\r\n    if (this.errors.length > 0) {\r\n      console.log('ΓÇó Fix critical errors first to achieve basic accessibility');\r\n    }\r\n    if (this.warnings.length > 0) {\r\n      console.log('ΓÇó Address warnings to improve user experience');\r\n    }\r\n    if (complianceScore < 100) {\r\n      console.log('ΓÇó Consider running automated testing tools like axe-core or WAVE');\r\n      console.log('ΓÇó Test with actual assistive technologies (screen readers, keyboard only)');\r\n      console.log('ΓÇó Conduct user testing with people with disabilities');\r\n    }\r\n\r\n    // Save results\r\n    this.saveResults();\r\n  }\r\n\r\n  saveResults() {\r\n    const report = {\r\n      timestamp: new Date().toISOString(),\r\n      results: this.results,\r\n      errors: this.errors,\r\n      warnings: this.warnings,\r\n      violations: this.violations,\r\n      compliance: {\r\n        score: Math.round((this.results.filter(r => r.passed).length / this.results.length) * 100),\r\n        standard: 'WCAG 2.1 AA',\r\n        passed: this.results.filter(r => r.passed).length,\r\n        total: this.results.length\r\n      }\r\n    };\r\n\r\n    // Log the report for now - in production, send to analytics/monitoring\r\n    console.log(' Accessibility Report:', report);\r\n\r\n    // Store in localStorage for debugging\r\n    if (typeof localStorage !== 'undefined') {\r\n      localStorage.setItem('accessibilityReport', JSON.stringify(report, null, 2));\r\n    }\r\n  }\r\n}\r\n\r\n// Auto-run accessibility tests in development\r\nif (typeof window !== 'undefined' && window.location.hostname === 'localhost') {\r\n  // Wait for DOM to be ready\r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      setTimeout(() => {\r\n        const tester = new AccessibilityTester();\r\n        tester.runAllTests();\r\n      }, 2000); // Wait 2 seconds for everything to load\r\n    });\r\n  } else {\r\n    setTimeout(() => {\r\n      const tester = new AccessibilityTester();\r\n      tester.runAllTests();\r\n    }, 2000);\r\n  }\r\n}\r\n\r\n// Export for manual testing\r\nif (typeof module !== 'undefined' && module.exports) {\r\n  module.exports = AccessibilityTester;\r\n}\r\n\r\n// Make available globally for manual testing\r\nwindow.AccessibilityTester = AccessibilityTester;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\analytics.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\constants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\formatters.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\logger.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":11,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":11,"endColumn":24,"suggestions":[{"fix":{"range":[294,315],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":41,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":41,"endColumn":26,"suggestions":[{"fix":{"range":[1317,1340],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":47,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":47,"endColumn":25,"suggestions":[{"fix":{"range":[1442,1464],"text":""},"messageId":"removeConsole","data":{"propertyName":"info"},"desc":"Remove the console.info()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":54,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":54,"endColumn":24,"suggestions":[{"fix":{"range":[1617,1661],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":61,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":61,"endColumn":26,"suggestions":[{"fix":{"range":[1789,1810],"text":""},"messageId":"removeConsole","data":{"propertyName":"group"},"desc":"Remove the console.group()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":67,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":67,"endColumn":29,"suggestions":[{"fix":{"range":[1898,1917],"text":""},"messageId":"removeConsole","data":{"propertyName":"groupEnd"},"desc":"Remove the console.groupEnd()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Production-safe logger utility\r\n * Only logs in development mode, silent in production\r\n */\r\n\r\nconst isDevelopment = import.meta.env.DEV || import.meta.env.MODE === 'development';\r\n\r\nexport const logger = {\r\n    log: (...args: unknown[]) => {\r\n        if (isDevelopment) {\r\n            console.log(...args);\r\n        }\r\n    },\r\n\r\n    warn: (...args: unknown[]) => {\r\n        if (isDevelopment) {\r\n            console.warn(...args);\r\n        }\r\n    },\r\n\r\n    error: (...args: unknown[]) => {\r\n        // Always log errors, but sanitize in production\r\n        if (isDevelopment) {\r\n            console.error(...args);\r\n        } else {\r\n            // In production, log minimal error info without sensitive data\r\n            const sanitizedArgs = args.map(arg => {\r\n                if (typeof arg === 'string') {\r\n                    return arg.replace(/Bearer\\s+[\\w.-]+/gi, 'Bearer [REDACTED]')\r\n                        .replace(/password['\":\\s]+['\"][^'\"]+['\"]/gi, 'password: [REDACTED]')\r\n                        .replace(/token['\":\\s]+['\"][^'\"]+['\"]/gi, 'token: [REDACTED]');\r\n                }\r\n                return '[Object]';\r\n            });\r\n            console.error('[Error]', ...sanitizedArgs);\r\n        }\r\n    },\r\n\r\n    debug: (...args: unknown[]) => {\r\n        if (isDevelopment) {\r\n            console.debug(...args);\r\n        }\r\n    },\r\n\r\n    info: (...args: unknown[]) => {\r\n        if (isDevelopment) {\r\n            console.info(...args);\r\n        }\r\n    },\r\n\r\n    // Special method for API logging\r\n    api: (message: string, data?: unknown) => {\r\n        if (isDevelopment) {\r\n            console.log(`[API] ${message}`, data || '');\r\n        }\r\n    },\r\n\r\n    // Group logs (dev only)\r\n    group: (label: string) => {\r\n        if (isDevelopment) {\r\n            console.group(label);\r\n        }\r\n    },\r\n\r\n    groupEnd: () => {\r\n        if (isDevelopment) {\r\n            console.groupEnd();\r\n        }\r\n    }\r\n};\r\n\r\nexport default logger;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\messagingEncryption.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\messaging\\EnhancedWebSocketManager.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":56,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":56,"endColumn":18,"suggestions":[{"fix":{"range":[2189,2238],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":60,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":60,"endColumn":20,"suggestions":[{"fix":{"range":[2321,2384],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":70,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":70,"endColumn":22,"suggestions":[{"fix":{"range":[2658,2706],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":107,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":107,"endColumn":20,"suggestions":[{"fix":{"range":[3783,3850],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":149,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":149,"endColumn":16,"suggestions":[{"fix":{"range":[4981,5101],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":158,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":158,"endColumn":18,"suggestions":[{"fix":{"range":[5262,5324],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":221,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":221,"endColumn":16,"suggestions":[{"fix":{"range":[6780,6824],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Enhanced WebSocket Manager with typing indicators and presence\r\nclass EnhancedWebSocketManager {\r\n  constructor(threadId, userId, onMessage, onError, onConnectionChange, onTyping, onPresence, onReaction, onSignal) {\r\n    this.threadId = threadId;\r\n    this.userId = userId;\r\n    this.onMessage = onMessage;\r\n    this.onError = onError;\r\n    this.onConnectionChange = onConnectionChange;\r\n    this.onTyping = onTyping;\r\n    this.onPresence = onPresence;\r\n    this.onPresence = onPresence;\r\n    this.onReaction = onReaction;\r\n    this.onSignal = onSignal;\r\n    this.ws = null;\r\n    this.reconnectAttempts = 0;\r\n    this.maxReconnectAttempts = 5;\r\n    this.reconnectDelay = 1000;\r\n    this.isConnecting = false;\r\n    this.heartbeatInterval = null;\r\n    this.typingTimeout = null;\r\n  }\r\n\r\n  connect() {\r\n    if (this.isConnecting || (this.ws && this.ws.readyState === WebSocket.OPEN)) {\r\n      return;\r\n    }\r\n\r\n    this.isConnecting = true;\r\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n    // SECURITY: Do NOT pass tokens in URL query params - they get logged and exposed\r\n    // WebSocket auth should use HTTP-only cookies instead\r\n\r\n    // Get WebSocket base URL\r\n    // In PRODUCTION: Use window.location.host to route through our Express BFF Proxy\r\n    // This ensures WebSocket connections are First-Party, allowing cookies to be sent.\r\n    const getWebSocketBaseUrl = () => {\r\n      if (import.meta.env.PROD) {\r\n        // Use the current domain (BFF Proxy) for First-Party WebSocket\r\n        // The Express server proxies /ws/* to the backend\r\n        return window.location.host;\r\n      }\r\n\r\n      // DEVELOPMENT: Use env vars or default to localhost\r\n      if (import.meta.env.VITE_WS_BASE_URL) return import.meta.env.VITE_WS_BASE_URL;\r\n      if (import.meta.env.VITE_WS_URL) return import.meta.env.VITE_WS_URL;\r\n      if (import.meta.env.VITE_DEV_WS_URL) return import.meta.env.VITE_DEV_WS_URL;\r\n\r\n      return 'localhost:8001';\r\n    };\r\n\r\n    const wsBaseUrl = getWebSocketBaseUrl();\r\n    // SECURITY: Auth via HTTP-only cookies, not URL params\r\n    const wsUrl = `${protocol}//${wsBaseUrl}/ws/messaging/${this.threadId}/`;\r\n\r\n    try {\r\n      console.log('[WEBSOCKET] Connecting to:', wsUrl);\r\n      this.ws = new WebSocket(wsUrl);\r\n\r\n      this.ws.onopen = () => {\r\n        console.log('[WEBSOCKET] Connected to thread:', this.threadId);\r\n        this.isConnecting = false;\r\n        this.reconnectAttempts = 0;\r\n        this.onConnectionChange?.(true);\r\n        this.startHeartbeat();\r\n      };\r\n\r\n      this.ws.onmessage = (event) => {\r\n        try {\r\n          const data = JSON.parse(event.data);\r\n          console.log('[WEBSOCKET] Received:', data.type);\r\n\r\n          switch (data.type) {\r\n            case 'new_message':\r\n              this.onMessage?.(data);\r\n              break;\r\n            case 'reaction_added':\r\n            case 'reaction_removed':\r\n              this.onReaction?.(data);\r\n              break;\r\n            case 'typing_start':\r\n            case 'typing_stop':\r\n              this.onTyping?.(data);\r\n              break;\r\n            case 'presence_update':\r\n              this.onPresence?.(data);\r\n              break;\r\n            case 'call_offer':\r\n            case 'call_answer':\r\n            case 'new_ice_candidate':\r\n            case 'call_end':\r\n            case 'call_busy':\r\n              this.onSignal?.(data);\r\n              break;\r\n            case 'pong':\r\n              // Heartbeat response\r\n              break;\r\n            default:\r\n              this.onMessage?.(data);\r\n          }\r\n        } catch (error) {\r\n          console.error('[WEBSOCKET] Error parsing message:', error);\r\n          this.onError?.(error);\r\n        }\r\n      };\r\n\r\n      this.ws.onclose = (event) => {\r\n        console.log('[WEBSOCKET] Disconnected:', event.code, event.reason);\r\n        this.isConnecting = false;\r\n        this.stopHeartbeat();\r\n        this.onConnectionChange?.(false);\r\n\r\n        if (event.code !== 1000 && this.reconnectAttempts < this.maxReconnectAttempts) {\r\n          this.attemptReconnect();\r\n        }\r\n      };\r\n\r\n      this.ws.onerror = (error) => {\r\n        console.error('[WEBSOCKET] Error:', error);\r\n        this.onError?.(error);\r\n        this.isConnecting = false;\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('[WEBSOCKET] Error creating connection:', error);\r\n      this.onError?.(error);\r\n      this.isConnecting = false;\r\n    }\r\n  }\r\n\r\n  startHeartbeat() {\r\n    this.heartbeatInterval = setInterval(() => {\r\n      if (this.ws?.readyState === WebSocket.OPEN) {\r\n        this.ws.send(JSON.stringify({ type: 'ping' }));\r\n      }\r\n    }, 30000); // 30 seconds\r\n  }\r\n\r\n  stopHeartbeat() {\r\n    if (this.heartbeatInterval) {\r\n      clearInterval(this.heartbeatInterval);\r\n      this.heartbeatInterval = null;\r\n    }\r\n  }\r\n\r\n  attemptReconnect() {\r\n    this.reconnectAttempts++;\r\n    const delay = this.reconnectDelay * Math.pow(2, this.reconnectAttempts - 1);\r\n\r\n    console.log(`[WEBSOCKET] Attempting reconnection ${this.reconnectAttempts}/${this.maxReconnectAttempts} in ${delay}ms`);\r\n\r\n    setTimeout(() => {\r\n      this.connect();\r\n    }, delay);\r\n  }\r\n\r\n  sendMessage(messageData) {\r\n    if (this.ws?.readyState === WebSocket.OPEN) {\r\n      console.log('[WEBSOCKET] Sending message:', messageData.type);\r\n      this.ws.send(JSON.stringify(messageData));\r\n      return true;\r\n    } else {\r\n      console.warn('[WEBSOCKET] Not connected, cannot send message');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  sendTyping(isTyping) {\r\n    if (this.ws?.readyState === WebSocket.OPEN) {\r\n      this.ws.send(JSON.stringify({\r\n        type: isTyping ? 'typing_start' : 'typing_stop',\r\n        user_id: null // Will be set by backend\r\n      }));\r\n    }\r\n  }\r\n\r\n  // Signaling methods for WebRTC\r\n  sendOffer(offer, targetUserId) {\r\n    return this.sendMessage({\r\n      type: 'call_offer',\r\n      offer: offer,\r\n      sender_id: this.userId,\r\n      target_user_id: targetUserId\r\n    });\r\n  }\r\n\r\n  sendAnswer(answer, targetUserId) {\r\n    return this.sendMessage({\r\n      type: 'call_answer',\r\n      answer: answer,\r\n      sender_id: this.userId,\r\n      target_user_id: targetUserId\r\n    });\r\n  }\r\n\r\n  sendCandidate(candidate, targetUserId) {\r\n    return this.sendMessage({\r\n      type: 'new_ice_candidate',\r\n      candidate: candidate,\r\n      sender_id: this.userId,\r\n      target_user_id: targetUserId\r\n    });\r\n  }\r\n\r\n  sendEndCall(targetUserId) {\r\n    return this.sendMessage({\r\n      type: 'call_end',\r\n      sender_id: this.userId,\r\n      target_user_id: targetUserId\r\n    });\r\n  }\r\n\r\n  sendBusy(targetUserId) {\r\n    return this.sendMessage({\r\n      type: 'call_busy',\r\n      sender_id: this.userId,\r\n      target_user_id: targetUserId\r\n    });\r\n  }\r\n\r\n  disconnect() {\r\n    console.log('[WEBSOCKET] Disconnecting...');\r\n    this.stopHeartbeat();\r\n    if (this.ws) {\r\n      this.ws.close(1000, 'Component unmounting');\r\n      this.ws = null;\r\n    }\r\n    this.isConnecting = false;\r\n  }\r\n}\r\n\r\nexport default EnhancedWebSocketManager;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\messaging\\FileUploadHandler.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\messaging\\NotificationManager.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\messaging\\SecureMessagingEncryption.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":5,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":5,"endColumn":18,"suggestions":[{"fix":{"range":[146,201],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":24,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":24,"endColumn":18,"suggestions":[{"fix":{"range":[815,879],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":34,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":34,"endColumn":18,"suggestions":[{"fix":{"range":[1170,1224],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":97,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":97,"endColumn":18,"suggestions":[{"fix":{"range":[2814,2877],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":107,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":107,"endColumn":18,"suggestions":[{"fix":{"range":[3147,3197],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":137,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":137,"endColumn":18,"suggestions":[{"fix":{"range":[4144,4194],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":157,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":157,"endColumn":18,"suggestions":[{"fix":{"range":[4919,4978],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Enhanced Encryption with proper ECDH key exchange\r\nclass SecureMessagingEncryption {\r\n  static async generateECDHKeypair() {\r\n    try {\r\n      console.log('[ENCRYPTION] Generating ECDH keypair...');\r\n      const keyPair = await window.crypto.subtle.generateKey(\r\n        {\r\n          name: 'ECDH',\r\n          namedCurve: 'P-256',\r\n        },\r\n        true,\r\n        ['deriveKey', 'deriveBits']\r\n      );\r\n\r\n      const publicKey = await window.crypto.subtle.exportKey('spki', keyPair.publicKey);\r\n      const privateKey = await window.crypto.subtle.exportKey('pkcs8', keyPair.privateKey);\r\n\r\n      const keypairData = {\r\n        privateKey: btoa(String.fromCharCode(...new Uint8Array(privateKey))),\r\n        publicKey: btoa(String.fromCharCode(...new Uint8Array(publicKey))),\r\n        keyPair\r\n      };\r\n\r\n      console.log('[ENCRYPTION] ECDH keypair generated successfully');\r\n      return keypairData;\r\n    } catch (error) {\r\n      console.error('[ENCRYPTION] Error generating ECDH keypair:', error);\r\n      throw new Error('Failed to generate encryption keys');\r\n    }\r\n  }\r\n\r\n  static async deriveSharedSecret(privateKeyPem, peerPublicKeyPem) {\r\n    try {\r\n      console.log('[ENCRYPTION] Deriving shared secret...');\r\n\r\n      // Import private key\r\n      const privateKeyData = Uint8Array.from(atob(privateKeyPem), c => c.charCodeAt(0));\r\n      const privateKey = await window.crypto.subtle.importKey(\r\n        'pkcs8',\r\n        privateKeyData,\r\n        {\r\n          name: 'ECDH',\r\n          namedCurve: 'P-256',\r\n        },\r\n        false,\r\n        ['deriveBits']\r\n      );\r\n\r\n      // Import peer public key\r\n      const peerPublicKeyData = Uint8Array.from(atob(peerPublicKeyPem), c => c.charCodeAt(0));\r\n      const peerPublicKey = await window.crypto.subtle.importKey(\r\n        'spki',\r\n        peerPublicKeyData,\r\n        {\r\n          name: 'ECDH',\r\n          namedCurve: 'P-256',\r\n        },\r\n        false,\r\n        []\r\n      );\r\n\r\n      // Derive shared secret\r\n      const sharedSecret = await window.crypto.subtle.deriveBits(\r\n        {\r\n          name: 'ECDH',\r\n          public: peerPublicKey,\r\n        },\r\n        privateKey,\r\n        256\r\n      );\r\n\r\n      // Use HKDF to derive AES key\r\n      const hkdfKey = await window.crypto.subtle.importKey(\r\n        'raw',\r\n        sharedSecret,\r\n        'HKDF',\r\n        false,\r\n        ['deriveKey']\r\n      );\r\n\r\n      const aesKey = await window.crypto.subtle.deriveKey(\r\n        {\r\n          name: 'HKDF',\r\n          hash: 'SHA-256',\r\n          salt: new Uint8Array(32), // Random salt for each conversation\r\n          info: new TextEncoder().encode('secure-messaging-key'),\r\n        },\r\n        hkdfKey,\r\n        {\r\n          name: 'AES-GCM',\r\n          length: 256,\r\n        },\r\n        false,\r\n        ['encrypt', 'decrypt']\r\n      );\r\n\r\n      console.log('[ENCRYPTION] Shared secret derived successfully');\r\n      return aesKey;\r\n    } catch (error) {\r\n      console.error('[ENCRYPTION] Error deriving shared secret:', error);\r\n      throw new Error('Failed to derive encryption key');\r\n    }\r\n  }\r\n\r\n  static async encryptMessage(plaintext, sharedSecret) {\r\n    try {\r\n      console.log('[ENCRYPTION] Encrypting message...');\r\n      const iv = window.crypto.getRandomValues(new Uint8Array(12));\r\n      const encodedPlaintext = new TextEncoder().encode(plaintext);\r\n\r\n      const ciphertext = await window.crypto.subtle.encrypt(\r\n        {\r\n          name: 'AES-GCM',\r\n          iv: iv,\r\n        },\r\n        sharedSecret,\r\n        encodedPlaintext\r\n      );\r\n\r\n      const encryptedContent = new Uint8Array(ciphertext);\r\n      const authTag = encryptedContent.slice(-16);\r\n      const encryptedData = encryptedContent.slice(0, -16);\r\n\r\n      return {\r\n        ciphertext: btoa(String.fromCharCode(...encryptedData)),\r\n        iv: btoa(String.fromCharCode(...iv)),\r\n        auth_tag: btoa(String.fromCharCode(...authTag)),\r\n      };\r\n    } catch (error) {\r\n      console.error('[ENCRYPTION] Error encrypting message:', error);\r\n      throw new Error('Failed to encrypt message');\r\n    }\r\n  }\r\n\r\n  static async decryptMessage(encryptedData, sharedSecret) {\r\n    try {\r\n      console.log('[DECRYPTION] Decrypting message...');\r\n      const ciphertext = Uint8Array.from(atob(encryptedData.ciphertext), c => c.charCodeAt(0));\r\n      const iv = Uint8Array.from(atob(encryptedData.iv), c => c.charCodeAt(0));\r\n      const authTag = Uint8Array.from(atob(encryptedData.auth_tag), c => c.charCodeAt(0));\r\n\r\n      // Combine ciphertext and auth tag\r\n      const combined = new Uint8Array(ciphertext.length + authTag.length);\r\n      combined.set(ciphertext);\r\n      combined.set(authTag, ciphertext.length);\r\n\r\n      const decrypted = await window.crypto.subtle.decrypt(\r\n        {\r\n          name: 'AES-GCM',\r\n          iv: iv,\r\n        },\r\n        sharedSecret,\r\n        combined\r\n      );\r\n\r\n      const result = new TextDecoder().decode(decrypted);\r\n      console.log('[DECRYPTION] Message decrypted successfully');\r\n      return result;\r\n    } catch (error) {\r\n      console.error('[DECRYPTION] Error decrypting message:', error);\r\n      throw new Error('Failed to decrypt message');\r\n    }\r\n  }\r\n}\r\n\r\nexport default SecureMessagingEncryption;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\sanitizer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\utils\\sentry.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":65,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":65,"endColumn":22,"suggestions":[{"fix":{"range":[2127,2191],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":88,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":88,"endColumn":16,"suggestions":[{"fix":{"range":[2867,2916],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Sentry configuration for error tracking and monitoring\r\nimport * as Sentry from \"@sentry/react\";\r\nimport { browserTracingIntegration } from \"@sentry/react\";\r\nimport { replayIntegration } from \"@sentry/replay\";\r\n\r\nconst validateSentryDsn = (dsn) => {\r\n  if (!dsn) return false;\r\n\r\n  // Basic format validation\r\n  const dsnPattern = /^https:\\/\\/[a-f0-9]+@(?:[a-zA-Z0-9-]+\\.)*sentry\\.io\\/[0-9]+$/;\r\n  if (!dsnPattern.test(dsn)) return false;\r\n\r\n  // Check for placeholder values\r\n  if (dsn.includes('your-sentry-dsn-here') || dsn.includes('project-id')) return false;\r\n\r\n  return true;\r\n};\r\n\r\nconst initializeSentry = () => {\r\n  const sentryDsn = import.meta.env.VITE_SENTRY_DSN;\r\n  const sentryEnabled = import.meta.env.VITE_SENTRY_ENABLED !== 'false'; // Default to true\r\n  const environment = import.meta.env.PROD ? 'production' : 'development';\r\n\r\n  if (!sentryEnabled || !sentryDsn) {\r\n    // console.log('[Sentry] Disabled or no DSN configured');\r\n    return false;\r\n  }\r\n\r\n  if (!validateSentryDsn(sentryDsn)) {\r\n    console.warn('[Sentry] Invalid DSN format or contains placeholder values');\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    Sentry.init({\r\n      dsn: sentryDsn,\r\n      integrations: [\r\n        browserTracingIntegration({\r\n          tracePropagationTargets: [\r\n            \"localhost\",\r\n            /^\\//,\r\n            /^https:\\/\\/[a-zA-Z0-9-]+\\.onrender\\.com/,\r\n          ],\r\n        }),\r\n        replayIntegration({\r\n          maskAllText: true,\r\n          blockAllMedia: true,\r\n        }),\r\n      ],\r\n      // Performance Monitoring\r\n      tracesSampleRate: import.meta.env.PROD ? 0.1 : 1.0, // 10% in production, 100% in development\r\n      // Session Replay\r\n      replaysSessionSampleRate: import.meta.env.PROD ? 0.1 : 1.0,\r\n      replaysOnErrorSampleRate: 1.0,\r\n\r\n      environment,\r\n\r\n      // Release tracking\r\n      release: import.meta.env.VITE_RELEASE_VERSION || '1.0.0',\r\n\r\n      // Error filtering\r\n      beforeSend(event, hint) {\r\n        // Don't send events in development unless explicitly enabled\r\n        if (!import.meta.env.PROD && import.meta.env.VITE_SENTRY_DEBUG !== 'true') {\r\n          console.log('[Sentry] Suppressed event in development:', event);\r\n          return null;\r\n        }\r\n\r\n        // Filter out common non-actionable errors\r\n        const error = hint.originalException;\r\n        if (error && typeof error === 'object') {\r\n          const errorMessage = error.message || '';\r\n          // Filter out network errors that are expected (user offline, CORS, etc.)\r\n          if (errorMessage.includes('NetworkError') ||\r\n            errorMessage.includes('Failed to fetch') ||\r\n            errorMessage.includes('Load failed')) {\r\n            return null;\r\n          }\r\n        }\r\n\r\n        return event;\r\n      },\r\n\r\n      // Debug mode\r\n      debug: import.meta.env.VITE_SENTRY_DEBUG === 'true',\r\n    });\r\n\r\n    console.log('[Sentry] Initialized successfully');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('[Sentry] Initialization failed:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Health check function\r\nconst checkSentryHealth = () => {\r\n  try {\r\n    Sentry.captureMessage(\"Sentry health check\", \"info\");\r\n    return true;\r\n  } catch (error) {\r\n    console.error('[Sentry] Health check failed:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Export functions for external use\r\nexport { initializeSentry, checkSentryHealth };\r\n\r\n// Initialize Sentry when this module is imported\r\nconst sentryInitialized = initializeSentry();\r\n\r\nexport default sentryInitialized;\n","usedDeprecatedRules":[]},{"filePath":"E:\\coastal\\frontend\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
